"use strict";(self.webpackChunkDOCKETRUN=self.webpackChunkDOCKETRUN||[]).push([[764],{7764:(Y,E,d)=>{d.r(E),d.d(E,{PpeviolationModule:()=>Mt});var g=d(9569),T=d(5861),I=d(529),m=d(433),r=d(9646),v=d(2953),P=d(4327),y=d(1954),p=d(6948),e=d(4650),x=d(9463),u=d(6895);let Z=(()=>{class i{constructor(t,n,a){this.http=t,this.snackbar=n,this.datePipe=a,this.logInterval=0;var s=this.loadConfigFile("assets/config.json");s=JSON.parse(s),this.IP=s.IP,this.logInterval=s.logInterval}loadConfigFile(t){return this.readConfigFile(t,"application/json")}readConfigFile(t,n){var a=new XMLHttpRequest;if(a.open("GET",t,!1),null!=n)return a.overrideMimeType&&a.overrideMimeType(n),a.send(),a.status?a.response:null}dateTransform(t){return this.datePipe.transform(t,"yyyy-MM-dd HH:mm:ss")}LivePPEViolationData(t,n,a,s){"all_departments"===n&&(n=null),"all_cameras"===t&&(t=null);var l={department_name:n,camera_name:t};return a&&s&&(t||n)?this.http.post(this.IP+"/live_data1PPE/"+a+"/"+s,l):a||s||!t&&!n?this.http.get(this.IP+"/live_data1PPE"):this.http.post(this.IP+"/live_data1PPE",l)}DatewisePPEViolations(t,n,a,s,l,c){var h=this.dateTransform(t),S=this.dateTransform(n);return"all_cameras"===c&&(c=null),"all_departments"===l&&(l=null),this.http.post(a&&s&&c&&l?this.IP+"/datewisePPE/"+c+"/"+a+"/"+s:a||s||c?a&&s&&!c?this.IP+"/datewisePPE/"+a+"/"+s:a&&s&&c?this.IP+"/datewisePPE/"+c+"/"+a+"/"+s:a||s||!c||l?this.IP+"/datewisePPE":this.IP+"/datewisePPE/"+c:this.IP+"/datewisePPE",{from_date:h,to_date:S,department_name:null!==l?l:"none"})}ChangePPEFiltersData(t){return this.http.post(this.IP+"/PPEviolationPercentage",t)}GetPPEFiltersData(){return this.http.get(this.IP+"/PPEviolationPercentage")}CreatePPEViolationExcel(t){return this.http.post(this.IP+"/create_violation_excelPPE",t)}DownloadViolationExcel(){return this.http.get(this.IP+"/violation_excel_download",{observe:"response",responseType:"arraybuffer"})}GetLatestPPEData(t){return this.http.get(t?this.IP+"/latest_dataPPE/"+t:this.IP+"/latest_dataPPE")}GetPPECameraDetails(t,n){return null===t&&null===n?this.http.get(this.IP+"/camera_detailsPPE"):this.http.post(this.IP+"/camera_detailsPPE",{from_date:t,to_date:n})}GetPPEDepartmentDetails(t,n){return null===t&&null===n?this.http.get(this.IP+"/department_detailsPPE"):this.http.post(this.IP+"/department_detailsPPE",{from_date:t,to_date:n})}GetViolationList(){return this.http.get(this.IP+"/violation_type_details")}VerifyViolation(t,n){return this.http.get(this.IP+"/violation_verification/"+t+"/"+n)}notification(t,n){this.snackbar.open(t,n||"",{duration:4e3,panelClass:["error"],horizontalPosition:"center",verticalPosition:"bottom"})}DeleteViolationData(t){return this.http.get(this.IP+"/Deleteviolation/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275inject(I.eN),e.\u0275\u0275inject(x.ux),e.\u0275\u0275inject(u.DatePipe))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=d(7185),L=d(1305),G=d(3868),O=d(64),f=d(7340),w=d(805),b=d(9592),F=d(6951),V=d(1795),k=d(982);function U(i,o){1&i&&e.\u0275\u0275elementContainer(0)}function Q(i,o){1&i&&e.\u0275\u0275element(0,"TimesIcon",8),2&i&&e.\u0275\u0275property("styleClass","p-overlaypanel-close-icon")}function K(i,o){}function W(i,o){1&i&&e.\u0275\u0275template(0,K,0,0,"ng-template")}function J(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275template(1,W,1,0,null,3),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",t.closeIconTemplate)}}function R(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.onCloseClick(a))})("keydown.enter",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.hide())}),e.\u0275\u0275template(1,Q,1,1,"TimesIcon",6),e.\u0275\u0275template(2,J,2,1,"span",7),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("aria-label",t.ariaCloseLabel),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.closeIconTemplate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.closeIconTemplate)}}const X=function(i,o){return{showTransitionParams:i,hideTransitionParams:o}},q=function(i,o){return{value:i,params:o}};function ee(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onOverlayClick(a))})("@animation.start",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onAnimationStart(a))})("@animation.done",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onAnimationEnd(a))}),e.\u0275\u0275elementStart(1,"div",2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onContentClick())})("mousedown",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onContentClick())}),e.\u0275\u0275projection(2),e.\u0275\u0275template(3,U,1,0,"ng-container",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,R,3,3,"button",4),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMap(t.styleClass),e.\u0275\u0275property("ngClass","p-overlaypanel p-component")("ngStyle",t.style)("@animation",e.\u0275\u0275pureFunction2(10,q,t.overlayVisible?"open":"close",e.\u0275\u0275pureFunction2(7,X,t.showTransitionOptions,t.hideTransitionOptions))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",t.contentTemplate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.showCloseIcon)}}const te=["*"];let ne=(()=>{class i{constructor(t,n,a,s,l,c,h,S){this.document=t,this.platformId=n,this.el=a,this.renderer=s,this.cd=l,this.zone=c,this.config=h,this.overlayService=S,this.dismissable=!0,this.appendTo="body",this.autoZIndex=!0,this.baseZIndex=0,this.focusOnShow=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onShow=new e.EventEmitter,this.onHide=new e.EventEmitter,this.overlayVisible=!1,this.render=!1,this.isOverlayAnimationInProgress=!1,this.selfClick=!1}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template}this.cd.markForCheck()})}bindDocumentClickListener(){(0,u.isPlatformBrowser)(this.platformId)&&!this.documentClickListener&&this.dismissable&&this.zone.runOutsideAngular(()=>{let t=b.p.isIOS()?"touchstart":"click";this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:this.document,t,a=>{!this.container.contains(a.target)&&this.target!==a.target&&!this.target.contains(a.target)&&!this.selfClick&&this.zone.run(()=>{this.hide()}),this.selfClick=!1,this.cd.markForCheck()})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(t,n){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(t,n)&&(this.destroyCallback=()=>{this.show(null,n||t.currentTarget||t.target)}),this.hide()):this.show(t,n))}show(t,n){n&&t.stopPropagation(),!this.isOverlayAnimationInProgress&&(this.target=n||t.currentTarget||t.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(){this.selfClick=!0}hasTargetChanged(t,n){return null!=this.target&&this.target!==(n||t.currentTarget||t.target)}appendContainer(){this.appendTo&&("body"===this.appendTo?this.renderer.appendChild(this.document.body,this.container):b.p.appendChild(this.container,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}align(){this.autoZIndex&&k.P9.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),b.p.absolutePosition(this.container,this.target);const t=b.p.getOffset(this.container),n=b.p.getOffset(this.target),a=this.document.defaultView.getComputedStyle(this.container).getPropertyValue("border-radius");let s=0;t.left<n.left&&(s=n.left-t.left-2*parseFloat(a)),this.container.style.setProperty("--overlayArrowLeft",`${s}px`),t.top<n.top&&(b.p.addClass(this.container,"p-overlaypanel-flipped"),this.showCloseIcon&&this.renderer.setStyle(this.container,"margin-top","-30px"))}onAnimationStart(t){"open"===t.toState&&(this.container=t.element,this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=n=>{this.container&&this.container.contains(n.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener),this.onShow.emit(null)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(t){switch(t.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&k.P9.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1}this.isOverlayAnimationInProgress=!1}focus(){let t=b.p.findSingle(this.container,"[autofocus]");t&&this.zone.runOutsideAngular(()=>{setTimeout(()=>t.focus(),5)})}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onCloseClick(t){this.hide(),t.preventDefault()}onWindowResize(t){this.overlayVisible&&!b.p.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){(0,u.isPlatformBrowser)(this.platformId)&&!this.documentResizeListener&&(this.documentResizeListener=this.renderer.listen(this.document.defaultView,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){(0,u.isPlatformBrowser)(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new b.V(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener())}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&k.P9.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(u.DOCUMENT),e.\u0275\u0275directiveInject(e.PLATFORM_ID),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(w.b4),e.\u0275\u0275directiveInject(w.F0))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["p-overlayPanel"]],contentQueries:function(t,n,a){if(1&t&&e.\u0275\u0275contentQuery(a,w.jx,4),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{dismissable:"dismissable",showCloseIcon:"showCloseIcon",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",ariaCloseLabel:"ariaCloseLabel",baseZIndex:"baseZIndex",focusOnShow:"focusOnShow",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},ngContentSelectors:te,decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-overlaypanel-content",3,"click","mousedown"],[4,"ngTemplateOutlet"],["type","button","class","p-overlaypanel-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],["type","button","pRipple","",1,"p-overlaypanel-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-overlaypanel-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-overlaypanel-close-icon"]],template:function(t,n){1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,ee,5,13,"div",0)),2&t&&e.\u0275\u0275property("ngIf",n.render)},dependencies:function(){return[u.NgClass,u.NgIf,u.NgTemplateOutlet,u.NgStyle,V.H,F.q]},styles:['.p-overlaypanel{position:absolute;margin-top:10px;top:0;left:0}.p-overlaypanel-flipped{margin-top:0;margin-bottom:10px}.p-overlaypanel-close{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-overlaypanel:after,.p-overlaypanel:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-overlaypanel:after{border-width:8px;margin-left:-8px}.p-overlaypanel:before{border-width:10px;margin-left:-10px}.p-overlaypanel-shifted:after,.p-overlaypanel-shifted:before{left:auto;right:1.25em;margin-left:auto}.p-overlaypanel-flipped:after,.p-overlaypanel-flipped:before{bottom:auto;top:100%}.p-overlaypanel.p-overlaypanel-flipped:after{border-bottom-color:transparent}.p-overlaypanel.p-overlaypanel-flipped:before{border-bottom-color:transparent}\n'],encapsulation:2,data:{animation:[(0,f.X$)("animation",[(0,f.SB)("void",(0,f.oB)({transform:"scaleY(0.8)",opacity:0})),(0,f.SB)("close",(0,f.oB)({opacity:0})),(0,f.SB)("open",(0,f.oB)({transform:"translateY(0)",opacity:1})),(0,f.eR)("void => open",(0,f.jt)("{{showTransitionParams}}")),(0,f.eR)("open => close",(0,f.jt)("{{hideTransitionParams}}"))])]},changeDetection:0}),i})(),ie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.CommonModule,V.T,w.m8,F.q,w.m8]}),i})();var A=d(8177),H=d(4153),ae=d(1968);const oe=["dangerAlert"];function se(i,o){1&i&&e.\u0275\u0275element(0,"span",84)}function le(i,o){1&i&&e.\u0275\u0275element(0,"fa-icon",85)}function re(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",81),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.GetLatestPPEData())}),e.\u0275\u0275template(1,se,1,0,"span",82),e.\u0275\u0275template(2,le,1,0,"fa-icon",83),e.\u0275\u0275text(3,"Latest "),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loaderLatest),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loaderLatest)}}function ce(i,o){1&i&&e.\u0275\u0275element(0,"fa-icon",88)}function de(i,o){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Live "),e.\u0275\u0275elementEnd())}function me(i,o){1&i&&e.\u0275\u0275element(0,"span",89)}function pe(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",86),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.BackToToday())}),e.\u0275\u0275template(1,ce,1,0,"fa-icon",87),e.\u0275\u0275template(2,de,2,0,"span",45),e.\u0275\u0275template(3,me,1,0,"span",53),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loader2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loader2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loader2)}}function ue(i,o){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275element(1,"span",90),e.\u0275\u0275text(2,"Live Data"),e.\u0275\u0275elementEnd())}function he(i,o){1&i&&(e.\u0275\u0275elementStart(0,"span",92),e.\u0275\u0275text(1,"The minimum allowed value is 30"),e.\u0275\u0275elementEnd())}function fe(i,o){1&i&&(e.\u0275\u0275elementStart(0,"span",92),e.\u0275\u0275text(1,"value should be number "),e.\u0275\u0275elementEnd())}function _e(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,he,2,0,"span",91),e.\u0275\u0275template(2,fe,2,0,"span",91),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.helmetFilterValue.errors.min&&null==t.helmetFilterValue.errors.pattern),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.helmetFilterValue.errors.pattern)}}function ge(i,o){1&i&&(e.\u0275\u0275elementStart(0,"span",92),e.\u0275\u0275text(1,"The minimum allowed value is 30"),e.\u0275\u0275elementEnd())}function ve(i,o){1&i&&(e.\u0275\u0275elementStart(0,"span",92),e.\u0275\u0275text(1,"Value should be number "),e.\u0275\u0275elementEnd())}function xe(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,ge,2,0,"span",91),e.\u0275\u0275template(2,ve,2,0,"span",91),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.vestFilterValue.errors.min&&null==t.vestFilterValue.errors.pattern),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.vestFilterValue.errors.pattern)}}function be(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",93),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.Reset())}),e.\u0275\u0275text(1," \xd7 Cancel Filters "),e.\u0275\u0275elementEnd()}}function ye(i,o){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Submit"),e.\u0275\u0275elementEnd())}function Ce(i,o){1&i&&e.\u0275\u0275element(0,"span",89)}function Ie(i,o){1&i&&e.\u0275\u0275element(0,"fa-icon",94)}function Pe(i,o){1&i&&e.\u0275\u0275element(0,"span",95)}function Se(i,o){1&i&&(e.\u0275\u0275elementStart(0,"span",3)(1,"b"),e.\u0275\u0275text(2,"Show:"),e.\u0275\u0275elementEnd()())}function we(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",96),e.\u0275\u0275listener("ngModelChange",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.pageSize=a)})("ngModelChange",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.sliceVD())}),e.\u0275\u0275elementStart(1,"option",97),e.\u0275\u0275text(2,"30 items per page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"option",98),e.\u0275\u0275text(4,"40 items per page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"option",99),e.\u0275\u0275text(6,"50 items per page"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngModel",t.pageSize)}}function De(i,o){1&i&&(e.\u0275\u0275elementStart(0,"th",65),e.\u0275\u0275text(1,"Is Valid?"),e.\u0275\u0275elementEnd())}function Ee(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",110),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.imageCarousal(a))}),e.\u0275\u0275text(1," \xa0\xa0 "),e.\u0275\u0275element(2,"fa-icon",111),e.\u0275\u0275text(3," More Images \xa0\xa0 "),e.\u0275\u0275elementEnd()}}function Te(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",116),e.\u0275\u0275element(1,"input",117),e.\u0275\u0275elementStart(2,"label",118),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("checked","Vest"===t?"vest"==n[t].toLowerCase():n[t]),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("Vest"===t?"Vest":t)}}function Ve(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Te,4,2,"div",115),e.\u0275\u0275elementEnd()),2&i){const t=o.$implicit,n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Helmet"===t?"none"!==n[t]&&!1===n[t]:"vest"===t.toLowerCase()&&"vest"!==n[t])}}function ke(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",112)(1,"div")(2,"div",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ul",113)(5,"li"),e.\u0275\u0275template(6,Ve,2,1,"div",114),e.\u0275\u0275elementEnd()()()()),2&i){const t=o.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.violation_count),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.objectKeys(t))}}function Me(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",122)(1,"div",123)(2,"input",124),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.VerifyTrueViol(a,s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",125),e.\u0275\u0275text(4,"Yes "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",126)(6,"input",124),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.VerifyFalseViol(a,s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",127),e.\u0275\u0275text(8,"No "),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("value",0)("defaultValue",!0)("id","yes"+t.SNo),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","yes"+t.SNo),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",!1)("defaultValue",!1)("id","no"+t.SNo),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","no"+t.SNo)}}function Le(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",122)(1,"div",123)(2,"input",129),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.VerifyTrueViol(a,s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",125),e.\u0275\u0275text(4,"Yes "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",126)(6,"input",129),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.VerifyFalseViol(a,s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",127),e.\u0275\u0275text(8,"No "),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("value",0)("defaultValue",!0)("id","yes"+t.SNo)("defaultChecked",!0===t.violation_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","yes"+t.SNo),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",!1)("defaultValue",!1)("id","no"+t.SNo)("defaultChecked",!1===t.violation_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","no"+t.SNo)}}function Oe(i,o){if(1&i&&e.\u0275\u0275template(0,Le,9,10,"div",128),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngIf",t.violation_verificaton_status)}}function Fe(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"td",119),e.\u0275\u0275template(1,Me,9,8,"div",120),e.\u0275\u0275template(2,Oe,1,1,"ng-template",null,121,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275reference(3),n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.violation_verificaton_status)("ngIfElse",t)}}function Ae(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",64)(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td")(4,"img",101),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.imageCarousal(s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275template(6,Ee,4,0,"button",102),e.\u0275\u0275text(7," \xa0"),e.\u0275\u0275elementStart(8,"button",103),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.downloadImage(l.API+"/image/"+l.analyticsType+"/"+s.imagename))}),e.\u0275\u0275text(9," Download Image "),e.\u0275\u0275element(10,"fa-icon",94),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"td")(12,"ng-scrollbar",104,105),e.\u0275\u0275template(14,ke,7,2,"div",106),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"dateFormater"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Fe,4,2,"td",107),e.\u0275\u0275elementStart(23,"td")(24,"div",108)(25,"fa-icon",109),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,l=e.\u0275\u0275nextContext(2),c=e.\u0275\u0275reference(137);return e.\u0275\u0275resetView(l.IsDeleteData(c,s))}),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=o.$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.SNo),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",n.API+"/image/"+n.analyticsType+"/"+t.imagename[0],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.imagename.length<1),e.\u0275\u0275advance(6),e.\u0275\u0275property("autoHeightDisabled",!1)("disabled",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.object_data),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.department?t.department:"null"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.camera_name?t.camera_name:"null"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,10,t.timestamp)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isEditTable)}}function He(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"tbody"),e.\u0275\u0275template(1,Ae,26,12,"tr",100),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,1,t.violData))}}function je(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",47)(1,"h4"),e.\u0275\u0275text(2,"No PPE Violations are there."),e.\u0275\u0275elementEnd()())}function ze(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",47),e.\u0275\u0275element(1,"span",134),e.\u0275\u0275text(2," Loading PPE Violation Details... "),e.\u0275\u0275elementEnd())}function Ne(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",135),e.\u0275\u0275text(1," Error while fetching PPE violation details "),e.\u0275\u0275elementEnd())}function Be(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"tbody")(1,"tr")(2,"td",130)(3,"div",131),e.\u0275\u0275template(4,je,3,0,"div",132),e.\u0275\u0275template(5,ze,3,0,"div",132),e.\u0275\u0275template(6,Ne,2,0,"div",133),e.\u0275\u0275elementEnd()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf","success"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","init"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Error"==t.dataFetchStatus)}}function $e(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",136)(1,"div",14)(2,"div",60),e.\u0275\u0275element(3,"img",137),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",138)(5,"h5")(6,"span",139),e.\u0275\u0275text(7," Camera Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"b")(9,"span",140),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"h5")(12,"span",139),e.\u0275\u0275text(13," Detected Time : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"b")(15,"span",140),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()()()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("src",t.API+"/image/"+t.analyticsType+"/"+t.currentViol.imagename,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.currentViol.camera_name?t.currentViol.camera_name:"null"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.currentViol.timestamp?t.currentViol.timestamp:"--")}}function Ye(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",152),e.\u0275\u0275element(1,"input",153),e.\u0275\u0275elementStart(2,"label",154),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("checked","Vest"===t?"no_vest"==n[t]:n[t]),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("Vest"===t?"Vest":t)}}function Ze(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Ye,4,2,"div",151),e.\u0275\u0275elementEnd()),2&i){const t=o.$implicit,n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Helmet"===t?"none"!==n[t]&&!1===n[t]:"Vest"===t&&"no_vest"===n[t])}}function Ge(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",112)(1,"div")(2,"div",3),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"ul",150)(6,"li"),e.\u0275\u0275template(7,Ze,2,1,"div",114),e.\u0275\u0275elementEnd()()()()),2&i){const t=o.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.violation_count),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",n.objectKeys(t))}}function Ue(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",149),e.\u0275\u0275template(1,Ge,8,2,"div",106),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.editViol.object_data)}}function Qe(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",141)(1,"div",14)(2,"div",142)(3,"div",143),e.\u0275\u0275element(4,"img",144),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",145)(6,"div",146)(7,"div",147)(8,"h5",3),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"br"),e.\u0275\u0275template(11,Ue,2,1,"div",148),e.\u0275\u0275elementEnd()()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("src",t.API+"/image/"+t.analyticsType+"/"+t.editViol.imagename[0],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.editViol.analyticstype),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","PPE"===t.editViol.analyticstype||"RA"===t.editViol.analyticstype)}}function Ke(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"p"),e.\u0275\u0275text(2,"This is a custom overlay template."),e.\u0275\u0275elementEnd()())}function We(i,o){}function Je(i,o){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",136)(1,"div",155)(2,"div",156)(3,"div",157)(4,"div",158)(5,"i",159),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",160),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",136)(10,"p"),e.\u0275\u0275text(11," Do you really want to delete this violation Details? This process cannot be undone. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",161)(13,"button",162),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.close("Cross click"))}),e.\u0275\u0275text(14," Cancel "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",163),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.DeleteViolationData())}),e.\u0275\u0275text(16," Delete "),e.\u0275\u0275elementEnd()()()()()}}function Re(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",47)(1,"h4"),e.\u0275\u0275text(2,"Violation Details are Not Found."),e.\u0275\u0275elementEnd()())}function Xe(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",47),e.\u0275\u0275element(1,"span",165),e.\u0275\u0275elementStart(2,"h4"),e.\u0275\u0275text(3,"Loading..."),e.\u0275\u0275elementEnd()())}function qe(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",47)(1,"h4"),e.\u0275\u0275text(2,"Loading..."),e.\u0275\u0275elementEnd()())}function et(i,o){1&i&&(e.\u0275\u0275elementStart(0,"div",47)(1,"h4"),e.\u0275\u0275text(2,"Error While Fetching the Data."),e.\u0275\u0275elementEnd()())}function tt(i,o){if(1&i&&(e.\u0275\u0275elementStart(0,"div",164)(1,"div",164),e.\u0275\u0275template(2,Re,3,0,"div",132),e.\u0275\u0275template(3,Xe,4,0,"div",132),e.\u0275\u0275template(4,qe,3,0,"div",132),e.\u0275\u0275template(5,et,3,0,"div",132),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","success"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","init"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Loading"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Error"==t.dataFetchStatus)}}const j=function(){return{"min-width":"100%"}},z=function(){return{standalone:!0}},N=function(i){return{"is-invalid":i}},nt=[{path:"",component:(()=>{class i{constructor(t,n,a,s,l,c,h,S,_,Lt){this.http=t,this.webServer=n,this.datepipe=a,this.toasterService=s,this._lightbox=l,this._lightBoxConfig=c,this.router=h,this.snackbar=S,this.modalService=_,this.Router=Lt,this.isalert=!1,this.prevLiveCount=0,this.helmetFilterValue=new m.NI(30,[m.kI.pattern(new RegExp("^(?!-)[0-9]+$")),m.kI.min(30)]),this.vestFilterValue=new m.NI(30,[m.kI.pattern(new RegExp("^(?!-)[0-9]+$")),m.kI.min(30)]),this.tempdata=[],this.page=1,this.pageSize=30,this.cameraDetails=[],this.alertmessage="",this.total=(0,r.of)(0),this.violData=(0,r.of)([]),this.loading=!1,this.filterOut=new m.NI,this.excelLoader=!1,this.show1=30,this.show2=40,this.show3=50,this.dataFetchStatus="init",this.fromDate=new Date,this.toDate=new Date,this.isdatewise=!1,this.loader2=!1,this.Excel=!1,this.Edata=[],this.isExcel=!1,this.excelLoad=!1,this.alert=!0,this.imageData=[],this.objectKeys=Object.keys,this.isdate=!1,this.analyticsType="PPE",this.selectedViolType=null,this.selectedCameraId=null,this.selectedDepartment=null,this.dropdownList=(0,r.of)([]),this.dropdownList1=(0,r.of)([]),this.Images=[],this.violationTypeList=(0,r.of)([{key:"0",label:"All Violations",icon:"pi",data:"all_violations"}]),this.loaderLatest=!1,this.isLatest=!1,this.latest=!1,this.isEditTable=!0,this.violationsList=[],this.ranges={Today:[(0,p.Z)().hour(0).minute(0).second(0),(0,p.Z)()],Yesterday:[(0,p.Z)().subtract(1,"days").hour(0).minute(0).second(0),(0,p.Z)().subtract(1,"days")],"Last 7 Days":[(0,p.Z)().subtract(6,"days").hour(0).minute(0).second(0),(0,p.Z)()],"Last 30 Days":[(0,p.Z)().subtract(29,"days").hour(0).minute(0).second(0),(0,p.Z)()],"This Month":[(0,p.Z)().startOf("month").hour(0).minute(0).second(0),(0,p.Z)().endOf("month")],"Last Month":[(0,p.Z)().subtract(1,"month").startOf("month").hour(0).minute(0).second(0),(0,p.Z)().subtract(1,"month").endOf("month")]},this.selectedMoments=null,this.delay=this.webServer.logInterval,this.getCameraList(),this.getDepartmentList(),this.ExcelRange=0,this._lightBoxConfig.showDownloadButton=!1,this._lightBoxConfig.showZoom=!0,this._lightBoxConfig.showImageNumberLabel=!0,this._lightBoxConfig.fitImageInViewPort=!0,this._lightBoxConfig.disableScrolling=!1,this._lightBoxConfig.centerVertically=!1,this.API=n.IP,this.dataFetchStatus="init",(!this.latest||this.isLatest)&&this.webServer.LivePPEViolationData().subscribe(C=>{this.dataFetchStatus="success",C.success?(this.prevLiveCount=C.now_live_count,this.imageData=C.message,this.tempdata=C.message,this.tempdata=C.message,this.total=(0,r.of)(this.tempdata.length),this.violData=(0,r.of)(C.message),this.sliceVD()):this.notification(C.message)},C=>{this.dataFetchStatus="Error",this.notification("Error While fetching the data")})}ngOnInit(){this.helmetFilterValue.valueChanges.subscribe(t=>{console.log(this.helmetFilterValue)}),this.dropdownSettings={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0},this.dropdownSettings2={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0,closeDropDownOnSelection:!0,noDataAvailablePlaceholderText:"No violation types detected",maxHeight:197},this.GetPPEFilterValues()}Reset(){this.selectedMoments=null,this.selectedCameraId=null,this.selectedDepartment=null,this.BackToToday()}ngAfterViewInit(){this.dataread()}openDatePicker(t){document.getElementById("dateInput").click()}dataread(){this.interval=setInterval(()=>{this.isdate?(this.violData=(0,r.of)([]),this.dataFetchStatus="success"):this.Subsciption=this.webServer.LivePPEViolationData(this.selectedCameraId?this.selectedCameraId.data:null,this.selectedDepartment?this.selectedDepartment.data:null).subscribe(t=>{if(t.success){var n={...t},a=[...t.message];this.loader2=!1,n.now_live_count-this.prevLiveCount>0&&(this.tempdata=a,this.sliceVD(),this.prevLiveCount=n.now_live_count)}},t=>{this.dataFetchStatus="Error"})},this.delay)}notification(t,n){this.snackbar.open(t,n||"",{duration:4e3,panelClass:["error"],horizontalPosition:"end",verticalPosition:"bottom"})}getDismissReason(t){return t===v.If.ESC?"by pressing ESC":t===v.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}sliceVD(){if(this.isdate||(this.total=(0,r.of)(this.tempdata.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize).length),this.total=(0,r.of)(this.tempdata.length),this.violData=(0,r.of)(this.tempdata.map((n,a)=>({SNo:a+1,...n})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize))),this.isdate){var t=document.getElementById("dataTable");t?.classList.add("loading"),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment.data:null,this.selectedCameraId?this.selectedCameraId.data:null).subscribe(n=>{n.success&&(t?.classList.remove("loading"),0===n.message.length&&(this.dataFetchStatus="success",this.notification("No violations found")),this.tempdata=n.message,this.violData=(0,r.of)(this.tempdata))})}}Submit(){clearInterval(this.interval),this.dataFetchStatus="init",this.isLatest=!1,this.Images=[],this.fromDate=this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.toDate=this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),this.getCameraList(),this.getDepartmentList(),this.Subsciption&&this.Subsciption.unsubscribe(),this.violData=(0,r.of)([]),this.total=(0,r.of)(0),this.pageSize=30,this.page=1,this.isdate=!0,this.loading=!0,this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,null,null,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(t=>{t.success?(0==t.message.length&&(this.tempdata=[],this.violData=(0,r.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,r.of)(0),this.notification("No violations found for entered date and time")),t.message.length>0&&(this.imageData=t.message,this.total=(0,r.of)(t.message.length),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(n=>{n.success?(this.loading=!1,0===n.message.length?(this.dataFetchStatus="success",this.notification("No violations found"),this.violData=(0,r.of)([]),this.isdatewise=!0,this.loading=!1,this.dataFetchStatus="success"):(this.tempdata=n.message,this.isdatewise=!0,this.violData=(0,r.of)(this.tempdata),this.sliceVD(),this.loading=!1,this.dataFetchStatus="success")):(this.loading=!1,this.violData=(0,r.of)([]),this.total=(0,r.of)(0),this.dataFetchStatus="success",this.notification(n.message)),this.loading=!1},n=>{this.dataFetchStatus="Error",this.loading=!1,this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,r.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,r.of)(0),this.dataFetchStatus="success",this.notification("No violations found"),this.loading=!1)},t=>{this.dataFetchStatus="Error",this.loading=!1})}SetPPEFilters(){this.dataFetchStatus="init",this.tempdata=[],this.total=(0,r.of)(0),this.violData=(0,r.of)([]),this.webServer.ChangePPEFiltersData({ppepercentage:{helmet:this.helmetFilterValue.value,vest:this.vestFilterValue.value}}).subscribe(t=>{this.dataFetchStatus="success",this.GetPPEFilterValues(),this.isdatewise?this.Submit():this.webServer.LivePPEViolationData().subscribe(n=>{n.success?(this.imageData=n.message,this.tempdata=n.message,Number(localStorage.setItem("updatedLen",n.message.length?n.message.length:0)),this.tempdata=n.message,this.total=(0,r.of)(this.tempdata.length),this.violData=(0,r.of)(n.message),this.sliceVD()):(this.notification(n.message),this.dataFetchStatus="success")},n=>{this.dataFetchStatus="Error",this.notification("Error While fetching the data")})})}GetPPEFilterValues(){this.webServer.GetPPEFiltersData().subscribe(t=>{t.success&&(this.vestFilterValue.setValue(t.message.vest),this.helmetFilterValue.setValue(t.message.helmet))},t=>{})}BackToToday(){this.selectedMoments=null,this.selectedItems=null,this.selectedItems1=null,this.page=1,this.Images=[],this.latest=!1;var t=document.getElementById("dataTable");t?.classList.add("loading"),this.loader2=!0,this.isdate=!1,this.tempdata=[],this.total=(0,r.of)(0),this.isdate=!1,this.tempdata=[],this.total=(0,r.of)(0),this.webServer.LivePPEViolationData().subscribe(n=>{if(this.loader2=!1,this.dataFetchStatus="success",n){this.isLatest=!1,t?.classList.remove("loading"),this.imageData=n.message,this.total=(0,r.of)(n.message.length),n.success||(this.notification(n.message),this.dataFetchStatus="success");var a=n.message;this.tempdata=n.success?n.message:[],this.sliceVD(),this.isdatewise=!1,localStorage.setItem("updatedLen",JSON.stringify(a.length)),Number(localStorage.getItem("updatedLen"))}},n=>{this.dataFetchStatus="Error"}),this.dataread()}dateTransform(t){const n=new Date(t.year,t.month-1,t.day);return this.datepipe.transform(n,"dd/MM/yyyy")}onCameraIdSelect(t){this.dataFetchStatus="init",this.page=1,this.pageSize=30,this.total=(0,r.of)(0),this.violData=(0,r.of)([]),this.isdatewise||(this.page=1),this.isdatewise?this.Submit():this.webServer.LivePPEViolationData(this.selectedCameraId?this.selectedCameraId.data:null,this.selectedDepartment?this.selectedDepartment.data:null).subscribe(n=>{n&&(this.dataFetchStatus="success",this.isLatest=!1,n.success||(this.notification(n.message),this.dataFetchStatus="success",this.imageData=n.message,this.total=(0,r.of)(n.message.length),this.tempdata=n.message,this.violData=(0,r.of)(n.message)),this.tempdata=n.success?n.message:[],this.sliceVD(),this.loader2=!1,this.isdatewise=!1)},n=>{this.dataFetchStatus="Error",this.loader2=!1})}onDepartmentIdSelect(t){this.dataFetchStatus="init",this.page=1,this.pageSize=30,this.total=(0,r.of)(0),this.violData=(0,r.of)([]),this.isdate?this.Submit():this.webServer.LivePPEViolationData(this.selectedCameraId?this.selectedCameraId.data:null,this.selectedDepartment?this.selectedDepartment.data:null).subscribe(n=>{n&&(this.dataFetchStatus="success",this.isLatest=!1,n.success||(this.notification(n.message),this.dataFetchStatus="success",this.imageData=n.message,this.total=(0,r.of)(n.message.length),this.tempdata=n.message,this.violData=(0,r.of)(n.message)),this.tempdata=n.success?n.message:[],this.sliceVD(),this.loader2=!1,this.isdatewise=!1)},n=>{this.dataFetchStatus="Error",this.loader2=!1})}imageCarousal(t){this.Images=[],t.imagename.forEach((n,a)=>{console.log(n),this.Images[a]={src:this.API+"/image/"+this.analyticsType+"/"+n,thumb:this.API+"/image/"+this.analyticsType+"/"+n,caption:n}}),this.open(0)}open(t){this._lightbox.open(this.Images,t)}close(){this._lightbox.close()}submitForm(){var t=this;return(0,T.Z)(function*(){t.isalert=!1,t.excelLoad=!0,t.isExcel=!1,t.selectedDepartment=t.selectedItems1?t.selectedItems1.data:null;var n={from_date:t.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),to_date:t.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),cameraname:t.selectedCameraId?"all_cameras"==t.selectedCameraId.data?null:t.selectedCameraId.data:null,department:t.selectedDepartment?"all_departments"==t.selectedDepartment.data?null:t.selectedDepartment.data:null};t.webServer.CreatePPEViolationExcel(n).subscribe(a=>{a.success?t.webServer.DownloadViolationExcel().subscribe(s=>{const c=new Blob([s.body],{type:".xlsx"});var h="violation report "+t.datepipe.transform(new Date,"YYYY_MM_dd_h_mm_ss")+".xlsx";new File([c],h,{type:".xlsx"}),(0,P.saveAs)(c,h),t.excelLoad=!1,t.isExcel=!0},s=>{t.excelLoad=!1,t.excelLoader=!1}):(t.notification(a.message,"Retry"),t.excelLoad=!1,t.isExcel=!1,t.alertmessage=a.message,t.isalert=!0)},a=>{t.excelLoad=!1,t.isExcel=!1,t.alertmessage="Error while creating excel",t.notification(t.alertmessage,"Retry"),t.isalert=!0})})()}GetViolationLength(t,n,a,s,l){var c;return this.excelLoader=!0,this.webServer.DatewisePPEViolations(t,n,null,null,l||null,a||null).subscribe(h=>{h.success&&(c=h.message.length)}),c}settings(){this.router.navigate(["app/Settings"])}RefreshViolations(){this.total=(0,r.of)(0),this.page=1,this.violData=(0,r.of)([]),this.isdatewise=!1,this.isdate=!1,this.isLatest=!1,this.latest=!1,this.dataFetchStatus="init",this.webServer.LivePPEViolationData().subscribe(t=>{this.dataFetchStatus="success",t.success?(this.tempdata=t.message,this.total=(0,r.of)(this.tempdata.length),this.violData=(0,r.of)(t.message),this.sliceVD(),this.prevLiveCount=t.now_live_count,this.imageData=t.message):this.notification(t.message)},t=>{this.dataFetchStatus="Error",this.notification("Error While fetching the data")})}GetLatestPPEData(){this.loader2=!1,this.loaderLatest=!0,this.latest=!0;var t=document.getElementById("dataTable");t?.classList.add("loading"),console.log(this.selectedViolType),this.webServer.GetLatestPPEData(this.selectedCameraId).subscribe(n=>{n.success?(this.isLatest=!0,t?.classList.remove("loading"),this.loaderLatest=!1,0===n.message.length?this.notification("No violations found"):this.dataFetchStatus="success",this.imageData=n.message,this.tempdata=n.message,console.log(this.tempdata),this.tempdata=n.message,this.total=(0,r.of)(n.message.length),this.violData=(0,r.of)(n.message),this.sliceVD()):(this.loaderLatest=!1,t?.classList.remove("loading"),this.notification("Error while fetching the data","Retry"))},n=>{this.loaderLatest=!1,t?.classList.remove("loading"),this.notification("Error While fetching the data","Retry")})}downloadImage(t){const n=t;new I.WM({responseType:"blob"}),console.log(n);const s=n.substr(n.lastIndexOf("/")+1);this.http.get(n,{responseType:"blob"}).subscribe(l=>{console.log("image url data",l),(0,P.saveAs)(l,s)},l=>{console.log("error",l)})}getCameraList(){var t=[],n=[];t[0]={key:"0",label:"All Cameras",data:"all_cameras"},this.webServer.GetPPECameraDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(a=>{!0===a.success&&(a.message.forEach((s,l)=>{n.push({cameraid:l,cameraname:s})}),(n=n.filter((s,l,c)=>l===c.indexOf(s))).forEach((s,l)=>{var c;c={key:(l+1).toString(),label:s.cameraname,data:s.cameraname},t.push(c)}),this.dropdownList=(0,r.of)(t))})}getDepartmentList(){var t=[],n=[];t[0]={key:"0",label:"All Departments",data:"all_departments"},this.webServer.GetPPEDepartmentDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(a=>{!0===a.success&&(a.message.forEach((s,l)=>{n.push({departmentid:l,department:s})}),(n=n.filter((s,l,c)=>l===c.indexOf(s))).forEach((s,l)=>{var c;c={key:(l+1).toString(),label:s.department,data:s.department},t.push(c)}),this.dropdownList1=(0,r.of)(t))})}SelectViol(t,n){this.editViol=t,this.modalService.open(n,{size:"xl",centered:!0})}VerifyTrueViol(t,n){this.editViol=n,this.webServer.VerifyViolation(this.editViol._id.$oid,!0).subscribe(a=>{this.webServer.notification(a.message),a.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},a=>{this.webServer.notification("Error while the  Process","Retry")})}VerifyFalseViol(t,n){this.editViol=n,this.webServer.VerifyViolation(this.editViol._id.$oid,!1).subscribe(a=>{this.webServer.notification(a.message),a.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},a=>{this.webServer.notification("Error while the  Process","Retry")})}IsDeleteData(t,n){this.selectedViolation=n,this.modalService.open(t)}DeleteViolationData(){this.webServer.DeleteViolationData(this.selectedViolation._id.$oid).subscribe(t=>{t.success?(this.modalService.dismissAll(),this.RefreshViolationData(),this.webServer.notification(t.message)):(this.modalService.dismissAll(),this.webServer.notification(t.message,"Retry"))},t=>{this.webServer.notification("Error while the process","Retry")})}RefreshViolationData(){if(this.total=(0,r.of)(0),this.page=1,this.violData=(0,r.of)([]),this.dataFetchStatus="init",this.isdatewise||this.isLatest)if(this.isdatewise&&!this.isLatest){var t=document.getElementById("dataTable");t?.classList.add("loading"),this.pageSize=30,this.page=1,this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,null,null,this.selectedDepartment?this.selectedDepartment.data:null,this.selectedCameraId?this.selectedCameraId.data:null).subscribe(n=>{this.dataFetchStatus="success",n.success?(0==n.message.length&&(this.tempdata=[],this.violData=(0,r.of)([]),this.total=(0,r.of)(0),t?.classList.remove("loading"),this.notification("No violations found for entered date and time")),n.message.length>0&&(this.imageData=n.message,this.total=(0,r.of)(n.message.length),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(a=>{a.success&&(t?.classList.remove("loading"),0===a.message.length?(this.notification("No violations found"),this.dataFetchStatus="success",this.violData=(0,r.of)([])):(this.tempdata=a.message,this.violData=(0,r.of)(this.tempdata),this.sliceVD()))},a=>{this.dataFetchStatus="Error",this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,r.of)([]),this.total=(0,r.of)(0),t?.classList.remove("loading"),t?.classList.remove("loading"),this.notification("No violations found"),this.dataFetchStatus="success")},n=>{})}else(this.isLatest||this.latest)&&this.GetLatestPPEData();else this.webServer.LivePPEViolationData().subscribe(n=>{this.dataFetchStatus="success",this.latest||!0!==n.success||(this.imageData=n.message,this.tempdata=n.message,this.total=(0,r.of)(n.message.length),this.violData=(0,r.of)(n.message),this.sliceVD(),this.tempdata.length>0&&(this.Excel=!0),this.sliceVD())},n=>{t.classList.remove("loading")})}GetViolationData(){var t=document.getElementById("content");t?.classList.add("loading"),(!this.latest||this.isLatest)&&this.webServer.LivePPEViolationData().subscribe(n=>{n.success?(t?.classList.remove("loading"),this.imageData=n.message,this.tempdata=n.message,Number(localStorage.setItem("updatedLen",n.message.length?n.message.length:0)),this.tempdata=n.message,this.total=(0,r.of)(this.tempdata.length),this.violData=(0,r.of)(n.message),this.sliceVD()):(t?.classList.remove("loading"),this.notification(n.message),this.dataFetchStatus="success")},n=>{t?.classList.remove("loading"),this.notification("Error While fetching the data")})}ngOnDestroy(){this.modalService.dismissAll(),clearInterval(this.interval),this.isalert=!1}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(I.eN),e.\u0275\u0275directiveInject(Z),e.\u0275\u0275directiveInject(u.DatePipe),e.\u0275\u0275directiveInject(M._W),e.\u0275\u0275directiveInject(L.ey),e.\u0275\u0275directiveInject(L.xm),e.\u0275\u0275directiveInject(g.F0),e.\u0275\u0275directiveInject(x.ux),e.\u0275\u0275directiveInject(v.FF),e.\u0275\u0275directiveInject(g.F0))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-ppeviolation"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(oe,5),e.\u0275\u0275viewQuery(y.SP,5)),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.Violation=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.pickerDirective=a)}},decls:140,vars:62,consts:[["id","content",1,"container-fluid","dashboard-content"],["datatable",""],[1,"mb-3"],[1,""],[1,"sub-header","h4"],[1,"row","col-12"],[1,"form-group"],["class","btn default me-2 text-white float-start",3,"click",4,"ngIf"],["class","btn default text-white me-2","style","width: 100px",3,"click",4,"ngIf"],[1,"btn","default-outline",3,"click"],["icon","rotate",1,"me-1"],["class","float-end",4,"ngIf"],[1,"float-start","ms-2","mt-2","me-2"],[1,"border","rounded","pt-3","pb-2","pe-3","ps-3"],[1,"row"],[1,"d-flex"],[1,"me-3"],[1,"container","p-3"],["icon","filter"],[1,"col-10"],[1,"row","d-flex","align-items-center"],[1,"col-2"],[1,"dl-date-time-picker"],[1,"datePickerContainer",3,"click"],["type","text","ngxDaterangepickerMd","","placeholder","Select Date","required","","id","dateInput","autocomplete","off",1,"form-control",3,"showCustomRangeLabel","ranges","timePicker","ngModel","ngModelChange","datesUpdated"],["datepicker",""],[1,"input-group-append"],["type","button",1,"ngx-daterangepicker-action","btn","default"],["icon","calendar",1,"ngx-daterangepicker-action",3,"click"],["id","filter",1,"col-2"],["containerStyleClass","flex d-flex w-100","placeholder","Select Department",1,"w-100","w-full",3,"ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],["containerStyleClass","flex d-flex w-100","placeholder","Select Camera",1,"w-100","w-full",3,"ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],[1,"container","w-100","p-2",3,"click"],[1,"w-100","d-flex","justify-content-between","align-items-center"],[1,"text-black",2,"font-size","1rem !important"],[1,"float-end"],["icon","angle-down",1,"text-muted"],[3,"showCloseIcon","appendTo"],["overlay",""],[1,"border","rounded","p-3","m-3"],[1,"column-flex"],[1,"m-2"],[1,"mb-2"],["type","text","pInputText","",1,"form-control",3,"formControl","value","ngClass"],[1,"w-full",3,"formControl"],[4,"ngIf"],["type","text","pInputText","",1,"form-control",3,"ngClass","formControl","value"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","default","m-2",3,"disabled","click"],[1,"col-xl-4","col-sm-12","col-lg-12","col-xs-12","col-md-12"],[1,"d-flex","align-items-center"],["class","btn default-outline ms-3 me-3","style","white-space: nowrap",3,"click",4,"ngIf"],[1,"btn","default","text-white","me-3","ms-1",2,"width","80px",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","submit",1,"btn","default","text-white","me-3",2,"white-space","nowrap",3,"disabled","click"],["icon","download","class","ms-1 me-1","style","cursor: pointer",4,"ngIf"],["class","spinner-border spinner-border-sm me-1","role","status","aria-hidden","true",4,"ngIf"],[1,"justify-content-end"],["class","",4,"ngIf"],["class","custom-select col-2","style","width: auto",3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-12"],[1,"mt-2"],["id","dataTable",1,"",2,"width","100%","overflow","auto"],[1,"table","table-bordered",2,"width","100%","overflow","auto"],[2,"text-align","center"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngIf","ngIfElse"],["noData",""],[1,"d-flex","mx-auto","justify-content-center","p-1"],[2,"width","95vw","overflow-x","auto",3,"collectionSize","page","pageSize","pageChange"],[2,"display","none"],["dangerAlert",""],[1,"mb-0",2,"border","2px solid rgba(121, 20, 20, 0.699)","background-color","rgba(214, 148, 148, 0.459)"],[1,"modal-header",2,"text-align","center","color","rgba(121, 20, 20, 0.699)"],[1,"",2,"color","rgb(196, 54, 54) !important"],["class","modal-body",4,"ngIf"],["editViolation",""],["customTemplate",""],["popupTemplate",""],["deleteModal",""],[1,"btn","default","me-2","text-white","float-start",3,"click"],["class","spinner-border spinner-border-sm me-2 ms-1","role","status","aria-hidden","true",4,"ngIf"],["icon","filter","class","ms-1 me-2 text-white","style","cursor: pointer",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2","ms-1"],["icon","filter",1,"ms-1","me-2","text-white",2,"cursor","pointer"],[1,"btn","default","text-white","me-2",2,"width","100px",3,"click"],["icon","chart-area","class","text-white me-2",4,"ngIf"],["icon","chart-area",1,"text-white","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm","me-2","text-danger"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"btn","default-outline","ms-3","me-3",2,"white-space","nowrap",3,"click"],["icon","download",1,"ms-1","me-1",2,"cursor","pointer"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"custom-select","col-2",2,"width","auto",3,"ngModel","ngModelChange"],["ngValue","30"],["ngValue","40"],["ngValue","50"],["style","text-align: center",4,"ngFor","ngForOf"],["loading","lazy",1,"image",3,"src","click"],["class","btn btn-sm mt-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","default","text-white","mt-2",3,"click"],["track","vertical","pointerEventsMethod","scrollbar",2,"max-height","12rem !important",3,"autoHeightDisabled","disabled"],["scrollable",""],["class","border-bottom",4,"ngFor","ngForOf"],["id","verify","style","width: 3rem",4,"ngIf"],[1,"d-flex","justify-centent-center","align-items-center","mt-3"],["icon","trash",1,"text-danger",3,"click"],[1,"btn","btn-sm","mt-2",3,"click"],["icon","images",1,"mr-1"],[1,"border-bottom"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],["class","items",4,"ngIf"],[1,"items"],["id","item1","type","checkbox",3,"checked"],["for","item1"],["id","verify",2,"width","3rem"],["class","mt-1",4,"ngIf","ngIfElse"],["verified",""],[1,"mt-1"],["id","right",1,"form-check","form-check-inline"],["type","radio",1,"form-check-input",3,"value","defaultValue","id","change"],[1,"form-check-label","text-success",3,"for"],["id","wrong",1,"form-check","form-check-inline"],[1,"form-check-label","text-danger",3,"for"],["class","mt-1",4,"ngIf"],["type","radio",1,"form-check-input",3,"value","defaultValue","id","defaultChecked","change"],["colspan","8"],["id","data-card",1,"card","card-body"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],["class","text-muted d-flex justify-content-center align-items-center",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2","text-prime"],[1,"text-muted","d-flex","justify-content-center","align-items-center"],[1,"modal-body"],["alt","","width","100%",1,"violImage",2,"width","30%","height","30%","object-fit","fill","border-radius","5px 5px 5px 5px",3,"src"],[1,"col-xl-12","col-md-12","col-lg-12","col-xs-12","text-white","mt-2"],[1,"text-muted"],[1,"text-white"],[1,"card","p-2"],[1,"col-6","d-flex","align-items-center"],[1,"card-img-top"],["alt","",2,"width","100%","height","auto","object-fit","contain",3,"src"],[1,"col-6"],[2,"height","90%","overflow","scroll"],[1,"",2,"width","100%"],["style","width: 100%",4,"ngIf"],[2,"width","100%"],[1,"list-unstyled","p-4"],["style","width: 5rem","class","d-inline","id","editViol",4,"ngIf"],["id","editViol",1,"d-inline",2,"width","5rem"],["id","item1","type","checkbox",1,"me-4",3,"checked"],["for","item1",1,"ms-4"],[1,"modal-confirm"],[1,"modal-content"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","danger",3,"click"],["id","data-card",1,"row","card","card-body"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,n){if(1&t){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"span",4),e.\u0275\u0275text(5," Personal Protective Equipment Violations "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",5)(7,"div",3)(8,"div",6)(9,"div",3),e.\u0275\u0275template(10,re,4,2,"button",7),e.\u0275\u0275template(11,pe,4,3,"button",8),e.\u0275\u0275elementStart(12,"button",9),e.\u0275\u0275listener("click",function(){return n.RefreshViolations()}),e.\u0275\u0275element(13,"fa-icon",10),e.\u0275\u0275text(14,"Refresh Violations "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,ue,3,0,"span",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"span",12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16)(21,"div",17),e.\u0275\u0275element(22,"fa-icon",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",19)(24,"div",20)(25,"span",21)(26,"div",22)(27,"div",23),e.\u0275\u0275listener("click",function(l){return n.openDatePicker(l)}),e.\u0275\u0275elementStart(28,"span")(29,"input",24,25),e.\u0275\u0275listener("ngModelChange",function(l){return n.selectedMoments=l})("datesUpdated",function(){return n.Submit()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"span",26)(32,"button",27)(33,"fa-icon",28),e.\u0275\u0275listener("click",function(l){return n.openDatePicker(l)}),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(34,"div",29)(35,"div",3)(36,"p-treeSelect",30),e.\u0275\u0275listener("ngModelChange",function(l){return n.selectedDepartment=l})("onNodeSelect",function(l){return n.onDepartmentIdSelect(l)}),e.\u0275\u0275pipe(37,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(38,"div",29)(39,"div",3)(40,"p-treeSelect",31),e.\u0275\u0275listener("ngModelChange",function(l){return n.selectedCameraId=l})("onNodeSelect",function(l){return n.onCameraIdSelect(l)}),e.\u0275\u0275pipe(41,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(42,"span",21)(43,"div",32),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(a);const c=e.\u0275\u0275reference(50);return e.\u0275\u0275resetView(c.toggle(l))}),e.\u0275\u0275elementStart(44,"div",33)(45,"div",34),e.\u0275\u0275text(46," Violation Percentage "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",35),e.\u0275\u0275element(48,"fa-icon",36),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(49,"p-overlayPanel",37,38)(51,"div",39)(52,"div",40)(53,"div",41)(54,"div",42)(55,"b"),e.\u0275\u0275text(56,"Helmet"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(57,"input",43)(58,"p-slider",44),e.\u0275\u0275template(59,_e,3,2,"div",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"div",41)(61,"div",42)(62,"b"),e.\u0275\u0275text(63,"Vest"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(64,"input",46)(65,"p-slider",44),e.\u0275\u0275template(66,xe,3,2,"div",45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(67,"div",47)(68,"button",48),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275reference(50).hide(),e.\u0275\u0275resetView(n.SetPPEFilters())}),e.\u0275\u0275text(69," Apply "),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(70,"div",49)(71,"div",50),e.\u0275\u0275template(72,be,2,0,"button",51),e.\u0275\u0275elementStart(73,"button",52),e.\u0275\u0275listener("click",function(){return n.Submit()}),e.\u0275\u0275template(74,ye,2,0,"span",45),e.\u0275\u0275template(75,Ce,1,0,"span",53),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(76,"\xa0 "),e.\u0275\u0275elementStart(77,"button",54),e.\u0275\u0275listener("click",function(){return n.submitForm()}),e.\u0275\u0275template(78,Ie,1,0,"fa-icon",55),e.\u0275\u0275template(79,Pe,1,0,"span",56),e.\u0275\u0275text(80," Excel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(81,"\xa0 "),e.\u0275\u0275element(82,"div",3),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(83,"span",57),e.\u0275\u0275template(84,Se,3,0,"span",58),e.\u0275\u0275template(85,we,7,1,"select",59),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(86,"div",14)(87,"div",60)(88,"div",61),e.\u0275\u0275element(89,"div",3),e.\u0275\u0275elementStart(90,"div",62)(91,"table",63)(92,"thead",64)(93,"tr")(94,"th",65)(95,"b"),e.\u0275\u0275text(96,"SNo."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(97,"th",65)(98,"b"),e.\u0275\u0275text(99," Violation Image "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(100,"th",65)(101,"b"),e.\u0275\u0275text(102," Violation Details "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(103,"th",65)(104,"b"),e.\u0275\u0275text(105," Department "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(106,"th",65)(107,"b"),e.\u0275\u0275text(108," Camera Name "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(109,"th",65)(110,"b"),e.\u0275\u0275text(111," Detected Time "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(112,De,2,0,"th",66),e.\u0275\u0275element(113,"th",65),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(114,He,3,3,"tbody",67),e.\u0275\u0275pipe(115,"async"),e.\u0275\u0275template(116,Be,7,3,"ng-template",null,68,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(118,"div",69)(119,"ngb-pagination",70),e.\u0275\u0275listener("pageChange",function(l){return n.page=l})("pageChange",function(){return n.sliceVD()}),e.\u0275\u0275pipe(120,"async"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(121,"div",71)(122,"div",60)(123,"div",null,72)(125,"div",73)(126,"div",74)(127,"h3",75),e.\u0275\u0275text(128," Violation "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(129,$e,17,3,"div",76),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(130,Qe,12,3,"ng-template",null,77,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(132,Ke,3,0,"ng-template",null,78,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(134,We,0,0,"ng-template",null,79,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(136,Je,17,0,"ng-template",null,80,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(138,tt,6,4,"ng-template",null,68,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()}if(2&t){const a=e.\u0275\u0275reference(117);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",!n.isdatewise),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isdatewise||n.isLatest),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!(n.isdatewise||n.isLatest)),e.\u0275\u0275advance(14),e.\u0275\u0275property("showCustomRangeLabel",!0)("ranges",n.ranges)("timePicker",!0)("ngModel",n.selectedMoments),e.\u0275\u0275advance(7),e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(54,j)),e.\u0275\u0275property("ngModel",n.selectedDepartment)("ngModelOptions",e.\u0275\u0275pureFunction0(55,z))("options",e.\u0275\u0275pipeBind1(37,46,n.dropdownList1)),e.\u0275\u0275advance(4),e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(56,j)),e.\u0275\u0275property("ngModel",n.selectedCameraId)("ngModelOptions",e.\u0275\u0275pureFunction0(57,z))("options",e.\u0275\u0275pipeBind1(41,48,n.dropdownList)),e.\u0275\u0275advance(9),e.\u0275\u0275property("showCloseIcon",!0)("appendTo","body"),e.\u0275\u0275advance(8),e.\u0275\u0275property("formControl",n.helmetFilterValue)("value",n.helmetFilterValue.value)("ngClass",e.\u0275\u0275pureFunction1(58,N,n.helmetFilterValue.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControl",n.helmetFilterValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=n.helmetFilterValue.errors),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(60,N,n.vestFilterValue.invalid))("formControl",n.vestFilterValue)("value",n.vestFilterValue.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControl",n.vestFilterValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=n.vestFilterValue.errors),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.helmetFilterValue.invalid||n.vestFilterValue.invalid),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null!==n.selectedCameraId||null!==n.selectedDepartment||null!==(null==n.selectedMoments?null:n.selectedMoments.startDate)),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",null===n.selectedMoments.startDate||null===n.selectedMoments.endDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.loading),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",null===n.selectedMoments.startDate||null===n.selectedMoments.endDate||n.excelLoad),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.excelLoad),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.excelLoad),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.isdatewise),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isdatewise),e.\u0275\u0275advance(27),e.\u0275\u0275property("ngIf",n.isEditTable),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(115,50,n.violData).length>0)("ngIfElse",a),e.\u0275\u0275advance(5),e.\u0275\u0275property("collectionSize",e.\u0275\u0275pipeBind1(120,52,n.total))("page",n.page)("pageSize",n.pageSize),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",n.currentViol)}},dependencies:[m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.Q7,m.oH,G.BN,u.NgClass,u.NgForOf,u.NgIf,m.On,v.N9,y.SP,O.mP,ne,A.iR,H.KC,ae.J,u.AsyncPipe],styles:['.image[_ngcontent-%COMP%]{margin-left:0;margin-right:0;height:174px;width:330px;object-fit:cover;border-radius:2px!important}.container[_ngcontent-%COMP%]{position:relative;background-color:#fff!important;font-size:1rem!important;opacity:1;padding:5px;border-radius:10px;border:2px solid #EBEBEB;display:flex;height:2.9em;justify-content:space-between;align-items:center}.container-temp[_ngcontent-%COMP%]{width:100%;max-width:100%;display:flex;height:2.9em;justify-content:space-between;align-items:center;padding:5px}.task-input[_ngcontent-%COMP%]{padding:0 25px;position:relative}.task-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 35px 5px 5px;height:40px}.datePickerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.datePickerContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important}input[_ngcontent-%COMP%]{width:100%}.img[_ngcontent-%COMP%]{height:20px;width:20px}.task-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:50%;position:absolute;transform:translate(170px,-50%)}input[type=checkbox][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;top:5px;outline:none;counter-increment:undone-items}input[_ngcontent-%COMP%]:checked{pointer-events:none;order:2;counter-increment:done-items}label[_ngcontent-%COMP%]{pointer-events:none;display:block;position:relative;padding:15px 10px 15px 0;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s}label[_ngcontent-%COMP%]:before{content:"\\f10c";display:block;position:absolute;margin-right:10px;margin-left:10px}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2713"}input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2716"}#editViol[_ngcontent-%COMP%]{text-align:center;align-content:center}td[_ngcontent-%COMP%]{text-align:center!important;align-content:center!important}input[type=radio][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;outline:none;position:relative;counter-increment:undone-items}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{pointer-events:all;display:block;position:relative;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s;margin-left:10px!important}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"\\25ef";display:block;position:absolute;margin-right:10px!important;right:2rem;font-weight:500;color:#c9c9c9}#verify[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}#verify[_ngcontent-%COMP%]   #wrong[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:500;color:#cc1d1d;content:"\\2713"}#verify[_ngcontent-%COMP%]   #right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:700;color:#1dc41d;content:"\\2713"}.w-full[_ngcontent-%COMP%]{width:inherit!important;color:#000!important}.custom-popup[_ngcontent-%COMP%]{position:fixed;width:inherit!important;top:50%;left:50%;transform:translate(-50%,-50%,-20%);background-color:#fff;padding:20px;border:1px solid #ccc;box-shadow:0 2px 4px #0000001a}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#f8f8f8!important;border-radius:5px!important;color:var(--label-color)!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:var(--label-color)!important;border-radius:5px!important;border:1px solid var(--label-color)!important;box-shadow:none}']}),i})()}];let it=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.Bz.forChild(nt),g.Bz]}),i})();var at=d(9174),B=d(3608);let kt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.CommonModule,g.Bz,V.T,B.z,g.Bz,B.z]}),i})(),Mt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[at.A,M.Rh,y.n1,O.o6,it,ie,kt,A.JH,H.kb]}),i})()},5861:(Y,E,d)=>{function g(I,m,r,v,P,y,p){try{var e=I[y](p),x=e.value}catch(u){return void r(u)}e.done?m(x):Promise.resolve(x).then(v,P)}function T(I){return function(){var m=this,r=arguments;return new Promise(function(v,P){var y=I.apply(m,r);function p(x){g(y,v,P,p,e,"next",x)}function e(x){g(y,v,P,p,e,"throw",x)}p(void 0)})}}d.d(E,{Z:()=>T})}}]);