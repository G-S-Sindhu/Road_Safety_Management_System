"use strict";(self.webpackChunkDOCKETRUN=self.webpackChunkDOCKETRUN||[]).push([[196],{2196:(Oe,I,c)=>{c.r(I),c.d(I,{SpillageViolationModule:()=>Me});var _=c(9569),F=c(3056),x=c(1954),V=c(7185),A=c(4612),N=c(9174),y=c(64),j=c(5861),b=c(529),m=c(433),d=c(9646),w=c(4327),g=c(6948),e=c(4650),D=c(9463),f=c(6895);let E=(()=>{class a{constructor(t,i,n){this.http=t,this.snackbar=i,this.datePipe=n;var o=this.loadConfigFile("assets/config.json");console.log(o),o=JSON.parse(o),this.IP=o.IP,console.log(this.IP),this.delay=o.hooterDelay,this.relayDelay=o.relayDelay,this.dashboardInterval=o.dashboardInterval,this.jobsheetInterval=o.jobSheetStatusInterval,this.logInterval=o.logInterval,console.log(this.dashboardInterval),console.log(this.logInterval)}GetCameraDetails(t,i){return null===t&&null===i?this.http.get(this.IP+"/Spillagecameradetails"):this.http.post(this.IP+"/Spillagecameradetails",{from_date:t,to_date:i})}GetDepartmentDetails(t,i){return null===t&&null===i?this.http.get(this.IP+"/Spillagedepartmentdetails"):this.http.post(this.IP+"/Spillagedepartmentdetails",{from_date:t,to_date:i})}dateTransform(t){return this.datePipe.transform(t,"yyyy-MM-dd HH:mm:ss")}CheckApplicationStatus(){return this.http.get(this.IP+"/check_process")}LiveViolationData(t,i,n,o){return"all_cameras"===t&&(t=null),"all_violations"===i&&(i=null),this.http.get(n&&o&&t&&!i?this.IP+"/SpillageLiveviolationdata/cameraname/"+t+"/"+n+"/"+o:n||o||!t||i?this.IP+"/SpillageLiveviolationdata":this.IP+"/SpillageLiveviolationdata/cameraname/"+t)}DatewiseViolations(t,i,n,o,l,s){var p,h=this.dateTransform(t),u=this.dateTransform(i);return console.log(h,u),console.log(n,o),"all_cameras"===l&&(l=null),"all_violations"===s&&(s=null),p=null!==s?{from_date:h,to_date:u,violation_type:s}:{from_date:h,to_date:u},console.log(s),console.log(this.IP+"/datewiseSpillage/"+l+"/"+n+"/"+o),this.http.post(n&&o&&l?this.IP+"/datewiseSpillage/"+l+"/"+n+"/"+o:n&&o&&!l&&!s?this.IP+"/datewiseSpillage/"+n+"/"+o:n||o||!l||s?this.IP+"/datewiseSpillage":this.IP+"/datewiseSpillage/"+l,p)}CreateViolationExcel(t){return this.http.post(this.IP+"/create_violation_excelSpillage",t)}DownloadViolationExcel(){return this.http.get(this.IP+"/Spillageviolation_excel_download",{observe:"response",responseType:"arraybuffer"})}notification(t,i,n){console.log("snackbar"),this.snackbar.open(t,i||"",{duration:n||4e3,panelClass:["error"],horizontalPosition:"center",verticalPosition:"bottom"})}GetViolationList(){return this.http.get(this.IP+"/violation_type_details")}LatestData(t,i){return console.log(t,i),this.http.get(i&&!t?this.IP+"/latest_data_camera_name/"+i:!i&&t?this.IP+"/latest_data_violation_type/"+t:i&&t?this.IP+"/latest_data/"+i+"/"+t:this.IP+"/latest_data_violation_type")}loadConfigFile(t){return this.readConfigFile(t,"application/json")}readConfigFile(t,i){var n=new XMLHttpRequest;if(n.open("GET",t,!1),null!=i)return n.overrideMimeType&&n.overrideMimeType(i),n.send(),n.status?n.response:null}DeleteViolationData(t){return this.http.get(this.IP+"/DeleteSpillageViolation/"+t)}VerifyViolation(t,i){return this.http.get(this.IP+"/Spillageverification/"+t+"/"+i)}DatewiseSpillageViolations(t,i,n,o,l,s){var p,h=this.dateTransform(t),u=this.dateTransform(i);return console.log(h,u),console.log(n,o),"all_cameras"===l&&(l=null),"all_violations"===s&&(s=null),p=null!==s?{from_date:h,to_date:u,violation_type:s}:{from_date:h,to_date:u},console.log(s),console.log(this.IP+"/datewiseSpillage/"+l+"/"+n+"/"+o),this.http.post(n&&o&&l?this.IP+"/datewiseSpillage/"+l+"/"+n+"/"+o:n&&o&&!l&&!s?this.IP+"/datewiseSpillage/"+n+"/"+o:n||o||!l||s?this.IP+"/datewiseSpillage":this.IP+"/datewiseSpillage/"+l,p)}GetSpillageVideos(t){return this.http.get(this.IP+"/getSpillageVideo/"+t)}GetSpillageLiveViolation(){return this.http.get(this.IP+"/SpillageLiveviolationdata")}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(b.eN),e.\u0275\u0275inject(D.ux),e.\u0275\u0275inject(f.DatePipe))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var M=c(1305),C=c(2953),G=c(3868),Y=c(805),L=c(5700),$=c(1968);const B=["dangerAlert"];function H(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span",59)(1,"span"),e.\u0275\u0275text(2,"Running"),e.\u0275\u0275elementEnd()())}function z(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span",60),e.\u0275\u0275text(1,"Stopped"),e.\u0275\u0275elementEnd())}function Z(a,r){1&a&&e.\u0275\u0275element(0,"span",65)}function J(a,r){1&a&&e.\u0275\u0275element(0,"fa-icon",66)}function Q(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",62),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(n.getLatestData())}),e.\u0275\u0275template(1,Z,1,0,"span",63),e.\u0275\u0275template(2,J,1,0,"fa-icon",64),e.\u0275\u0275text(3,"Latest "),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loaderLatest),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loaderLatest)}}function U(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,Q,4,2,"button",61),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isdatewise)}}function W(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span",5),e.\u0275\u0275element(1,"span",67),e.\u0275\u0275text(2,"Live Data"),e.\u0275\u0275elementEnd())}function K(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",68),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.ResetFilters())}),e.\u0275\u0275text(1," \xd7 Cancel Filters "),e.\u0275\u0275elementEnd()}}function X(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Submit"),e.\u0275\u0275elementEnd())}function R(a,r){1&a&&e.\u0275\u0275element(0,"span",69)}function q(a,r){1&a&&e.\u0275\u0275element(0,"fa-icon",70)}function ee(a,r){1&a&&e.\u0275\u0275element(0,"span",71)}function te(a,r){1&a&&e.\u0275\u0275element(0,"fa-icon",74)}function ie(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"\xa0 Live \xa0"),e.\u0275\u0275elementEnd())}function ne(a,r){1&a&&e.\u0275\u0275element(0,"span",69)}function ae(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",72),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.BackToToday())}),e.\u0275\u0275template(1,te,1,0,"fa-icon",73),e.\u0275\u0275template(2,ie,2,0,"span",39),e.\u0275\u0275template(3,ne,1,0,"span",40),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loader2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.loader2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.loader2)}}function oe(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span",75)(1,"b"),e.\u0275\u0275text(2,"Show:"),e.\u0275\u0275elementEnd()())}function le(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",76),e.\u0275\u0275listener("ngModelChange",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.pageSize=n)})("ngModelChange",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.sliceVD())}),e.\u0275\u0275elementStart(1,"option",77),e.\u0275\u0275text(2,"30 items per page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"option",78),e.\u0275\u0275text(4,"40 items per page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"option",79),e.\u0275\u0275text(6,"50 items per page"),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngModel",t.pageSize)}}function se(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",80)(1,"b"),e.\u0275\u0275text(2," Is Valid? "),e.\u0275\u0275elementEnd()())}function re(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"video",94),e.\u0275\u0275element(1,"source",95),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("src",i.API+"/getSpillageVideo/"+t.video_file_name,e.\u0275\u0275sanitizeUrl)}}function de(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"img",96),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(o.imageCarousal(n.video_file_name))}),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("src",i.API+"/GETSPILLAGEIMAGE/"+t.video_file_name,e.\u0275\u0275sanitizeUrl)}}function ce(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",97)(2,"a",98),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(o.downloadVideo(o.API+"/getSpillageVideo/"+n.video_file_name))}),e.\u0275\u0275text(3,"Download Video"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"fa-icon",70),e.\u0275\u0275elementEnd()()}}function me(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",97)(2,"a",98),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(o.downloadVideo(o.API+"/GETSPILLAGEIMAGE/"+n.video_file_name))}),e.\u0275\u0275text(3,"Download Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"fa-icon",70),e.\u0275\u0275elementEnd()()}}function pe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1," Start time:"),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"dateFormater"),e.\u0275\u0275element(5,"br")(6,"br"),e.\u0275\u0275text(7," End time:"),e.\u0275\u0275element(8,"br"),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"dateFormater"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,t.start_time)," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,4,t.stop_time)," ")}}function he(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dateFormater"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.start_time)," ")}}function ge(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",101)(2,"input",102),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2).$implicit,l=e.\u0275\u0275nextContext(2).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.VerifyTrueViol(n,o,l.SNo))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",103),e.\u0275\u0275text(4,"Yes "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",104)(6,"input",105),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2).$implicit,l=e.\u0275\u0275nextContext(2).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.VerifyFalseViol(n,o,l.SNo))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",106),e.\u0275\u0275text(8,"No "),e.\u0275\u0275elementEnd()()()}if(2&a){const t=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext(2).$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("value",0)("defaultValue",!0)("id","yes"+n.String(i.SNo)+n.String(t.id))("defaultChecked",!0===t.violation_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","yes"+n.String(i.SNo)+n.String(t.id)),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",!1)("defaultValue",!1)("id","no"+n.String(i.SNo)+n.String(t.id))("defaultChecked",!1===t.violation_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","no"+n.String(i.SNo)+n.String(t.id))}}function ue(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",101)(2,"input",107),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(3).$implicit,l=e.\u0275\u0275nextContext(2).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.VerifyTrueViol(n,o,l.SNo))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",103),e.\u0275\u0275text(4,"Yes "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",104)(6,"input",108),e.\u0275\u0275listener("change",function(n){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(3).$implicit,l=e.\u0275\u0275nextContext(2).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.VerifyFalseViol(n,o,l.SNo))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",106),e.\u0275\u0275text(8,"No "),e.\u0275\u0275elementEnd()()()}if(2&a){const t=e.\u0275\u0275nextContext(3).$implicit,i=e.\u0275\u0275nextContext(2).$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("value",0)("defaultValue",!0)("id","yes"+n.String(i.SNo)+n.String(t.id)),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","yes"+n.String(i.SNo)+n.String(t.id)),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",!1)("defaultValue",!1)("id","no"+n.String(i.SNo)+n.String(t.id)),e.\u0275\u0275advance(1),e.\u0275\u0275property("for","no"+n.String(i.SNo)+n.String(t.id))}}function fe(a,r){if(1&a&&e.\u0275\u0275template(0,ue,9,8,"div",39),2&a){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngIf",!t.violation_verificaton_status)}}function _e(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",99),e.\u0275\u0275template(1,ge,9,10,"div",54),e.\u0275\u0275template(2,fe,1,1,"ng-template",null,100,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.violation_verificaton_status)("ngIfElse",t)}}function ve(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",85)(1,"div",86)(2,"div",87),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",86)(5,"div",88)(6,"div",88),e.\u0275\u0275template(7,re,2,1,"video",89),e.\u0275\u0275template(8,de,1,1,"img",90),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"br"),e.\u0275\u0275elementStart(10,"div",88),e.\u0275\u0275template(11,ce,5,0,"div",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,me,5,0,"div",39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",86),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",86),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",86)(18,"div",88),e.\u0275\u0275template(19,pe,11,6,"div",39),e.\u0275\u0275template(20,he,3,3,"div",39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",86)(22,"div",88),e.\u0275\u0275template(23,_e,4,2,"div",91),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",86)(25,"div")(26,"div",92),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,l=e.\u0275\u0275nextContext(4),s=e.\u0275\u0275reference(93);return e.\u0275\u0275resetView(l.IsDeleteData(s,o))}),e.\u0275\u0275element(27,"fa-icon",93),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=r.$implicit,i=e.\u0275\u0275nextContext(2).$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2(" ",i.SNo,".",t.id," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf","VIDEO"===t.processing_mode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","IMAGE"===t.processing_mode),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","VIDEO"===t.processing_mode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","IMAGE"===t.processing_mode),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.department?t.department:"null"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.camera_name?t.camera_name:"null"," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","VIDEO"===t.processing_mode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","IMAGE"===t.processing_mode),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.isEditTable)}}function Se(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"p-carousel",83),e.\u0275\u0275template(2,ve,28,11,"ng-template",84),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t.data)("id",t.SNo)}}function xe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",82),e.\u0275\u0275template(1,Se,3,2,"div",39),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t?null:t.data)}}function be(a,r){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,xe,2,1,"div",81),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,2,t.violData))("ngForTrackBy",t.trackByFn)}}function Ce(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",86)(1,"h4"),e.\u0275\u0275text(2,"Violation Details are Not Found."),e.\u0275\u0275elementEnd()())}function Ie(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",86),e.\u0275\u0275element(1,"span",111),e.\u0275\u0275elementStart(2,"h4"),e.\u0275\u0275text(3,"Loading..."),e.\u0275\u0275elementEnd()())}function Ve(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",86)(1,"h4"),e.\u0275\u0275text(2,"Loading..."),e.\u0275\u0275elementEnd()())}function ye(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",86)(1,"h4"),e.\u0275\u0275text(2,"Error While Fetching the Data."),e.\u0275\u0275elementEnd()())}function we(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",109),e.\u0275\u0275template(1,Ce,3,0,"div",110),e.\u0275\u0275template(2,Ie,4,0,"div",110),e.\u0275\u0275template(3,Ve,3,0,"div",110),e.\u0275\u0275template(4,ye,3,0,"div",110),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","success"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","init"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Loading"==t.dataFetchStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Error"==t.dataFetchStatus)}}function De(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",112)(1,"div",113)(2,"div",114)(3,"div",115)(4,"div",116)(5,"i",117),e.\u0275\u0275text(6,"\ue5cd"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"h4",118),e.\u0275\u0275text(8,"Are you sure?"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",112)(10,"p"),e.\u0275\u0275text(11," Do you really want to delete this violation Details? This process cannot be undone. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",119)(13,"button",120),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Cross click"))}),e.\u0275\u0275text(14," Cancel "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",121),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.DeleteViolationData())}),e.\u0275\u0275text(16," Delete "),e.\u0275\u0275elementEnd()()()()()}}const T=function(){return{width:"inherit"}},P=function(){return{standalone:!0}},Ee=[{path:"",component:(()=>{class a{constructor(t,i,n,o,l,s,h,u,p,Le,Te,k,Pe){this.http=t,this.webServer=i,this.ngZone=n,this.datepipe=o,this.toasterService=l,this._lightbox=s,this._lightBoxConfig=h,this.router=u,this.snackbar=p,this.modalService=Le,this.Router=Te,this.ngbCarousal=k,this.cd=Pe,this.selectedCameraId=null,this.selectedDepartment=null,this.isdatewise=!1,this.page=1,this.cameraDetails=[],this.data=[],this.dropdownList=(0,d.of)([]),this.dropdownList1=(0,d.of)([]),this.ranges={Today:[(0,g.Z)().hour(0).minute(0).second(0),(0,g.Z)()],Yesterday:[(0,g.Z)().subtract(1,"days").hour(0).minute(0).second(0),(0,g.Z)().subtract(1,"days")],"Last 7 Days":[(0,g.Z)().subtract(6,"days").hour(0).minute(0).second(0),(0,g.Z)()],"Last 30 Days":[(0,g.Z)().subtract(29,"days").hour(0).minute(0).second(0),(0,g.Z)()],"This Month":[(0,g.Z)().startOf("month").hour(0).minute(0).second(0),(0,g.Z)().endOf("month")],"Last Month":[(0,g.Z)().subtract(1,"month").startOf("month").hour(0).minute(0).second(0),(0,g.Z)().subtract(1,"month").endOf("month")]},this.fromDateControl=new m.NI((new Date).getTime(),m.kI.required),this.toDateControl=new m.NI(new Date,m.kI.required),this.violLength=0,this.latest=!1,this.isLatest=!1,this.imageData=[],this.tempdata=[],this.total=(0,d.of)(0),this.violData=(0,d.of)([]),this.isdate=!1,this.pageSize=30,this.selectedViolType=null,this.fromDate=new Date,this.toDate=new Date,this.isalert=!1,this.excelLoad=!1,this.isExcel=!1,this.selectedMoments=null,this.excelFromDate=new m.NI(new Date,m.kI.required),this.excelToDate=new m.NI(new Date,m.kI.required),this.Edata=[],this.excelLoader=!1,this.alertmessage="",this.loc2=new m.NI("",m.kI.required),this.loading=!1,this.images=[],this.Images=[],this.violdata=[],this.alert=!0,this.audioOff=!1,this.violationTypeList=(0,d.of)([{key:"0",label:"All Violations",icon:"pi",data:"all_violations"}]),this.loader2=!1,this.Excel=!1,this.violationsList=[],this.objectKeys=Object.keys,this.loaderLatest=!1,this.isEditTable=!0,this.dataFetchStatus="init",this.String=String,this.ngbCarousal.showNavigationArrows=!0,this.ngbCarousal.showNavigationIndicators=!0,console.log(k,"ngbcarousal config"),this.API=i.IP,this.ExcelRange=0,this.webServer.CheckApplicationStatus().subscribe(S=>{if(console.log(S),S.success){localStorage.setItem("appStatus",S.message[0].process_status);var ke=S.message.find(O=>"spillage_app"==O.process_name?O:"");this.isActive=ke.process_status,console.log("spillage analytics:",this.isActive)}}),this.audioOff="true"==localStorage.getItem("audioOff"),this.alert="true"==localStorage.getItem("alert"),console.log(localStorage.getItem("audioOff"),localStorage.getItem("alert")),this.delay=this.webServer.logInterval,console.log(this.relayDelay),this.hooterDelay=this.webServer.delay,this.getCameraList(),this.getDepartmentList(),this.getViolationTypes()}openDatePicker(t){document.getElementById("dateInput").click()}onCameraIdSelect(t){this.isdatewise&&(this.page=1),this.selectedCameraId=this.selectedItems.data,console.log(this.selectedItems),console.log(t),this.Submit()}onDepartmentIdSelect(t){this.isdatewise&&(this.page=1),this.selectedDepartment=this.selectedItems1.data,console.log(this.selectedItems1),console.log(t),this.Submit()}ngOnDestroy(){this.modalService.dismissAll(),clearInterval(this.interval),this.isalert=!1,this.toasterService.clear()}getCameraList(){var t=[],i=[];t[0]={key:"0",label:"All Cameras",data:"all_cameras"},this.webServer.GetCameraDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(n=>{!0===n.success&&(n.message.forEach((o,l)=>{i.push({cameraid:l,cameraname:o})}),(i=i.filter((o,l,s)=>l===s.indexOf(o))).forEach((o,l)=>{var s;s={key:(l+1).toString(),label:o.cameraname,data:o.cameraname},t.push(s)}),this.dropdownList=(0,d.of)(t))})}getDepartmentList(){var t=[],i=[];t[0]={key:"0",label:"All Departments",data:"all_departments"},this.webServer.GetDepartmentDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(n=>{!0===n.success&&(n.message.forEach((o,l)=>{i.push({departmentid:l,department:o})}),(i=i.filter((o,l,s)=>l===s.indexOf(o))).forEach((o,l)=>{var s;s={key:(l+1).toString(),label:o.department,data:o.department},t.push(s)}),this.dropdownList1=(0,d.of)(t))})}ngOnInit(){console.log("this is spillage");var t=this.webServer.dateTransform(new Date)+" 00:00:00",i=this.webServer.dateTransform(new Date)+" 23:59:59";this.fromDateControl.setValue(t),this.toDateControl.setValue(i),this.dropdownSettings={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0},this.dropdownSettings2={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0,closeDropDownOnSelection:!0,noDataAvailablePlaceholderText:"No violation types detected",maxHeight:197},this.violLength=Number(localStorage.getItem("updatedLen")),(!this.latest||!this.isLatest)&&this.webServer.GetSpillageLiveViolation().subscribe(n=>{n.success?(this.imageData=n.message,this.tempdata=n.message,Number(localStorage.setItem("updatedLen",n.message.length?n.message.length:0)),this.tempdata=n.message,this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(n.message),this.sliceVD()):(this.dataFetchStatus="success",this.notification(n.message))})}notification(t,i){this.snackbar.open(t,i||"",{duration:4e3,panelClass:["error"],horizontalPosition:"end",verticalPosition:"bottom"})}sliceVD(){if(this.isdate||(this.tempdata.forEach((i,n)=>{this.tempdata[n].data=i.data.map((o,l)=>({...o,id:l+1}))}),this.total=(0,d.of)(this.tempdata.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize).length),this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(this.tempdata.map((i,n)=>({SNo:n+1,...i})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize))),this.isdate){var t=document.getElementById("dataTable");t?.classList.add("loading"),this.webServer.DatewiseViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedCameraId?this.selectedCameraId:null,this.selectedViolType?this.selectedViolType:null).subscribe(i=>{i.success&&(t?.classList.remove("loading"),0===i.message.length&&(this.dataFetchStatus="success",this.notification("No violations found")),this.tempdata=i.message,this.tempdata.forEach((n,o)=>{this.tempdata[o].data=n.data.map((l,s)=>({...l,id:s+1}))}),this.violData=(0,d.of)(this.tempdata))})}}submitForm(){var t=this;return(0,j.Z)(function*(){t.isalert=!1,t.excelLoad=!0,t.isExcel=!1,t.selectedViolType=t.selectedViolation?t.selectedViolation.data:null,t.selectedCameraId=t.selectedItems?t.selectedItems.data:null,t.selectedDepartment=t.selectedItems1?t.selectedItems1.data:null;var i={from_date:t.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),to_date:t.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),cameraname:t.selectedItems?t.selectedItems.data:"none",department:t.selectedItems1?t.selectedItems1.data:"none"};console.log(i),yield t.GetViolationLength(i.from_date,i.to_date,"none"!=i.cameraname?i.cameraname:null),t.webServer.CreateViolationExcel(i).subscribe(o=>{o.success?(t.notification(o.message),t.Edata=o.message,t.Edata=o.message,t.webServer.DownloadViolationExcel().subscribe(l=>{t.excelLoad=!1,t.isExcel=!0;const h=new Blob([l.body],{type:".xlsx"});var u="violation report "+t.datepipe.transform(new Date,"YYYY_MM_dd_h_mm_ss")+".xlsx";new File([h],u,{type:".xlsx"}),(0,w.saveAs)(h,u),t.notification("You Excel is Downloaded successfully")},l=>{t.excelLoader=!1,t.excelLoad=!1,t.isExcel=!0,t.excelLoader=!1,t.webServer.notification("Error while downloading excel sheet","Retry")})):(t.notification(o.message,"Retry"),t.excelLoad=!1,t.isExcel=!1,t.alertmessage=o.message,t.isalert=!0)},o=>{t.excelLoad=!1,t.isExcel=!1,t.alertmessage="Error while creating excel",t.notification(t.alertmessage,"Retry"),t.isalert=!0})})()}GetViolationLength(t,i,n,o){var l;return this.webServer.DatewiseViolations(t,i,null,null,n||null,o||null).subscribe(s=>{s.success&&(l=s.message.length)}),l}Submit(){clearInterval(this.interval),this.dataFetchStatus="Loading",this.ngZone.run(()=>{this.isLatest=!1,this.selectedViolType=this.selectedViolation?this.selectedViolation.data:null,this.selectedCameraId=this.selectedItems?this.selectedItems.data:null,this.selectedDepartment=this.selectedItems1?this.selectedItems1.data:null,this.Images=[],this.fromDate=this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.toDate=this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),this.getCameraList(),this.getDepartmentList(),this.Subsciption&&this.Subsciption.unsubscribe();var t=document.getElementById("dataTable");t?.classList.add("loading"),this.pageSize=30,this.page=1,this.isdate=!0,this.loading=!0,this.webServer.DatewiseViolations(this.fromDate,this.toDate,null,null,this.selectedCameraId?this.selectedCameraId:null,this.selectedViolType?this.selectedViolType:null).subscribe(i=>{i.success?(this.loading=!1,0==i.message.length&&(this.loading=!1,this.tempdata=[],this.violData=(0,d.of)([]),this.isdatewise=!0,this.total=(0,d.of)(0),this.loading=!1,t?.classList.remove("loading"),this.notification("No violations found for entered date and time")),i.message.length>0&&(this.loading=!1,this.imageData=i.message,this.total=(0,d.of)(i.message.length),this.webServer.DatewiseViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedCameraId?this.selectedCameraId:null,this.selectedViolType?this.selectedViolType:null).subscribe(n=>{n.success&&(this.loading=!1,t?.classList.remove("loading"),0===n.message.length?(this.loading=!1,this.notification("No violations found"),this.violData=(0,d.of)([]),this.isdatewise=!0):(this.tempdata=n.message,this.isdatewise=!0,this.violData=(0,d.of)(this.tempdata),this.sliceVD(),this.loading=!1)),this.loading=!1},n=>{this.loading=!1,this.dataFetchStatus="Error",this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,d.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,d.of)(0),this.loading=!1,t?.classList.remove("loading"),this.dataFetchStatus="success",this.notification("No violations found"))},i=>{this.loading=!1})})}alertSound(){throw new Error("Method not implemented.")}onViolationTypeSelect(t){this.isdatewise||(this.page=1),this.selectedViolType=this.selectedViolation.data}ngAfterViewInit(){this.dataread()}dataread(){this.interval=setInterval(()=>{this.isdate||(Number(localStorage.getItem("updatedLen"))&&(this.violLength=Number(localStorage.getItem("updatedLen"))),this.Subsciption=this.webServer.GetSpillageLiveViolation().subscribe(t=>{if(t.success){this.dataFetchStatus="success";var i={...t},n=[...t.message];localStorage.setItem("updatedLen",JSON.stringify(n.length)),Number(localStorage.getItem("updatedLen")),i.now_live_count-i.previous_live_count>0?(this.tempdata=t.message,this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(t.message),this.sliceVD()):(this.dataFetchStatus="success",this.notification(t.message))}else this.webServer.GetSpillageLiveViolation().subscribe(s=>{this.latest||(!0===s.success?(this.imageData=s.message,this.tempdata=s.message,console.log(this.tempdata),this.total=(0,d.of)(this.violdata.length),this.loader2=!1,this.isdatewise=!1,this.violData=(0,d.of)(s.message),this.sliceVD(),this.violdata=s.message,this.tempdata.length>0&&(this.Excel=!0),this.sliceVD()):(this.tempdata=[],this.violData=(0,d.of)([]),this.total=(0,d.of)(0),this.dataFetchStatus="success",this.loader2=!1))},s=>{console.log(s),this.dataFetchStatus="Error"})},t=>{this.dataFetchStatus="Error"}))},this.delay)}getViolationTypes(){var i=[];this.violationsList[0]={key:"0",label:"All Violations",data:"all_violations"},this.webServer.GetViolationList().subscribe(n=>{n.success&&(n.message.forEach(o=>{i.push(o)}),i.forEach((o,l)=>{var s;s={key:(l+1).toString(),icon:"pi",label:o,data:o},this.violationsList.push(s)}),this.violationTypeList=(0,d.of)(this.violationsList))})}alertToggle(){this.alert=!this.alert,localStorage.setItem("alert",this.alert?"true":"false"),this.alert||(this.audioOff=!0,localStorage.setItem("alert","false"),localStorage.setItem("audioOff","true"),this.toasterService.clear())}volumeToggle(){this.alert?(this.audioOff=!this.audioOff,localStorage.setItem("audioOff",this.audioOff?"true":"false")):(this.audioOff=!0,localStorage.setItem("audioOff","true"))}BackToToday(){var t;this.selectedMoments=null,this.selectedItems=null,this.selectedItems=null,this.page=1,this.Images=[],this.latest=!1,(t=document.getElementById("dataTable"))?.classList.add("loading"),this.loader2=!0,this.isdate=!1,this.tempdata=[],this.total=(0,d.of)(0),this.Images=[],(t=document.getElementById("dataTable"))?.classList.add("loading"),this.loader2=!0,this.isdate=!1,this.tempdata=[],this.total=(0,d.of)(0),this.webServer.LiveViolationData().subscribe(i=>{if(i){this.isLatest=!1,t?.classList.remove("loading"),this.imageData=i.message,this.total=(0,d.of)(i.message.length);var n=i.message;this.tempdata=i.success?i.message:[],this.sliceVD(),this.loader2=!0,this.isdatewise=!1,localStorage.setItem("updatedLen",JSON.stringify(n.length)),Number(localStorage.getItem("updatedLen"))}i.success||(this.dataFetchStatus="success",this.loader2=!1,this.notification(i.message))}),this.dataread()}getLatestData(){this.loader2=!1,this.loaderLatest=!0,this.latest=!0;var t=document.getElementById("dataTable");t?.classList.add("loading"),console.log(this.selectedViolType),this.webServer.LatestData(this.selectedViolType,this.selectedCameraId).subscribe(i=>{i.success?(this.isLatest=!0,t?.classList.remove("loading"),this.loaderLatest=!1,0===i.message.length&&this.notification("No violations found"),this.imageData=i.message,this.tempdata=i.message,console.log(this.tempdata),this.tempdata=i.message,this.total=(0,d.of)(i.message.length),this.violData=(0,d.of)(i.message),this.sliceVD()):(this.loaderLatest=!1,t?.classList.remove("loading"),this.notification("Error while fetching the data","Retry"))},i=>{this.loaderLatest=!1,t?.classList.remove("loading"),this.notification("Error While fetching the data","Retry")})}downloadVideo(t){const i=t,o=(new b.WM({responseType:"blob"}),i.substr(i.lastIndexOf("/")+1));this.http.get(i,{responseType:"blob"}).subscribe(l=>{(0,w.saveAs)(l,o)},l=>{})}ResetFilters(){this.selectedMoments=null,this.selectedItems=null,this.selectedItems1=null,this.isdatewise=!1,this.dataFetchStatus="Loading",this.BackToToday()}IsDeleteData(t,i){this.selectedViolation=i,this.modalService.open(t)}VerifyFalseViol(t,i,n){this.editViol=i,console.log(n),this.webServer.VerifyViolation(this.editViol._id.$oid,!1).subscribe(o=>{this.webServer.notification(o.message),o.success&&(this.modalService.dismissAll(),this.isdatewise&&this.sliceVD()),this.isdatewise||this.GetViolationData()},o=>{this.webServer.notification("Error while the  Process","Retry")})}GetViolationData(){var t=document.getElementById("content");t?.classList.add("loading"),(!this.latest||this.isLatest)&&this.webServer.GetSpillageLiveViolation().subscribe(i=>{i.success?(t?.classList.remove("loading"),this.data=i.message,this.imageData=i.message,this.tempdata=i.message,Number(localStorage.setItem("updatedLen",i.message.length?i.message.length:0)),this.tempdata=i.message,this.total=(0,d.of)(this.tempdata.length),this.violData=(0,d.of)(i.message),this.sliceVD()):(t?.classList.remove("loading"),this.notification(i.message))},i=>{t?.classList.remove("loading"),this.notification("Error While fetching the data")})}VerifyTrueViol(t,i,n){this.editViol=i,console.log(n),this.webServer.VerifyViolation(this.editViol._id.$oid,!0).subscribe(o=>{this.webServer.notification(o.message),o.success&&(this.modalService.dismissAll(),this.isdatewise&&this.sliceVD()),this.isdatewise||this.GetViolationData()},o=>{this.webServer.notification("Error while the  Process","Retry")})}DeleteViolationData(){this.webServer.DeleteViolationData(this.selectedViolation._id.$oid).subscribe(t=>{t.success?(this.modalService.dismissAll(),this.webServer.notification(t.message),this.RefreshViolationData()):(this.modalService.dismissAll(),this.webServer.notification(t.message,"Retry"))},t=>{this.webServer.notification("Error while the process","Retry")})}RefreshViolations(){this.total=(0,d.of)(0),this.violData=(0,d.of)([]),this.isdate=!1,this.isdatewise=!1,this.isLatest=!1,this.webServer.GetSpillageLiveViolation().subscribe(t=>{this.dataFetchStatus="success",this.latest||!0!==t.success||(this.imageData=t.message,this.tempdata=t.message,this.total=(0,d.of)(this.violdata.length),this.violData=(0,d.of)(t.message),this.sliceVD(),this.violdata=t.message,this.tempdata.length>0&&(this.Excel=!0),this.sliceVD())},t=>{this.dataFetchStatus="Error",console.log(t)})}RefreshViolationData(){if(this.dataFetchStatus="init",this.isdatewise||this.isLatest)if(this.isdatewise&&!this.isLatest){var t=document.getElementById("dataTable");t?.classList.add("loading"),this.pageSize=30,this.page=1,this.webServer.DatewiseSpillageViolations(this.fromDate,this.toDate,null,null,this.selectedCameraId?this.selectedCameraId:null,this.selectedViolType?this.selectedViolType:null).subscribe(i=>{this.dataFetchStatus="success",i.success?(0==i.message.length&&(this.tempdata=[],this.violData=(0,d.of)([]),this.total=(0,d.of)(0),t?.classList.remove("loading"),this.notification("No violations found for entered date and time")),i.message.length>0&&(this.imageData=i.message,this.total=(0,d.of)(i.message.length),this.webServer.DatewiseSpillageViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedCameraId?this.selectedCameraId:null,this.selectedViolType?this.selectedViolType:null).subscribe(n=>{n.success&&(t?.classList.remove("loading"),0===n.message.length?(this.notification("No violations found"),this.violData=(0,d.of)([])):(this.tempdata=n.message,this.violData=(0,d.of)(this.tempdata),this.sliceVD()))},n=>{this.dataFetchStatus="Error",this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,d.of)([]),this.total=(0,d.of)(0),t?.classList.remove("loading"),t?.classList.remove("loading"),this.notification("No violations found"))},i=>{})}else(this.isLatest||this.latest)&&this.getLatestData();else this.webServer.GetSpillageLiveViolation().subscribe(i=>{this.dataFetchStatus="success",this.latest||(t.classList.remove("loading"),!0!==i.success)||(this.imageData=i.message,this.tempdata=i.message,this.total=(0,d.of)(this.violdata.length),this.violData=(0,d.of)(i.message),this.sliceVD(),this.violdata=i.message,this.tempdata.length>0&&(this.Excel=!0),this.sliceVD())},i=>{this.dataFetchStatus="Error",console.log(i)})}imageCarousal(t){if(this.Images=[],Array.isArray(t))t.forEach((i,n)=>{this.Images[n]={src:this.API+"/GETSPILLAGEIMAGE/"+i,thumb:this.API+"/GETSPILLAGEIMAGE/"+i,caption:i}});else{if("string"!=typeof t)return void console.error("Invalid format for viol.riro_image.After");this.Images[0]={src:this.API+"/GETSPILLAGEIMAGE/"+t,thumb:this.API+"/GETSPILLAGEIMAGE/"+t,caption:t}}this.open(0)}open(t){this._lightbox.open(this.Images,t)}close(){this._lightbox.close()}trackByFn(t,i){return i.SNo}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(b.eN),e.\u0275\u0275directiveInject(E),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(f.DatePipe),e.\u0275\u0275directiveInject(V._W),e.\u0275\u0275directiveInject(M.ey),e.\u0275\u0275directiveInject(M.xm),e.\u0275\u0275directiveInject(_.F0),e.\u0275\u0275directiveInject(D.ux),e.\u0275\u0275directiveInject(C.FF),e.\u0275\u0275directiveInject(_.F0),e.\u0275\u0275directiveInject(C.Lu),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-spillage-violation"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(B,5),e.\u0275\u0275viewQuery(x.SP,5)),2&t){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.Violation=n.first),e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(i.pickerDirective=n)}},decls:94,vars:48,consts:[["id","content",1,"container-fluid","dashboard-content"],["datatable",""],[1,"mb-3"],[1,""],[1,"sub-header","h4"],[1,"float-end"],[1,"float-end","d-flex","justify-content-center","align-items-center"],[1,"text-muted"],["class","success-badge",4,"ngIf"],["class","danger-badge",4,"ngIf"],[1,"row","mb-2"],[1,"form-group"],["class","",4,"ngIf"],[1,"btn","default-outline",3,"click"],["icon","rotate",1,"me-1"],[1,"float-end","ms-2","mt-2","me-2"],["class","float-end",4,"ngIf"],[1,"border","rounded","p-2"],[1,"row"],["id","data-card",1,"d-flex","flex-row",2,"border-radius","7px !important"],[1,"me-3"],[1,"container","p-3"],["icon","filter"],[1,"col-10"],[1,"row","d-flex","align-items-center"],[1,"col-2"],[1,"datePickerContainer",3,"click"],[1,"w-80"],["type","text","ngxDaterangepickerMd","","placeholder","Select Date","required","","id","dateInput",1,"form-control",3,"showCustomRangeLabel","ranges","timePicker","ngModel","datesUpdated","ngModelChange"],["datepicker",""],[1,"input-group-append"],["type","button",1,"ngx-daterangepicker-action","btn","default"],["icon","calendar",1,"ngx-daterangepicker-action"],["id","filter",1,"col-2"],["placeholder","Select Department",1,"w-100","d-flex",3,"containerStyleClass","ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],["placeholder","Select Camera",1,"w-100","d-flex",3,"containerStyleClass","ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],[1,"col-xl-5","col-sm-12","col-lg-12","col-xs-12","col-md-12","d-flex","align-items-center"],["class","btn default-outline me-3",3,"click",4,"ngIf"],[1,"btn","default","text-white","me-3",2,"width","80px",3,"disabled","click"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","submit",1,"btn","default","text-white","me-3",3,"disabled","click"],["icon","download","class","ms-1 me-1","style","cursor: pointer",4,"ngIf"],["class","spinner-border spinner-border-sm me-1","role","status","aria-hidden","true",4,"ngIf"],["class","btn default text-white","style","width: 100px",3,"click",4,"ngIf"],[1,"d-flex","justify-content-end","p-1"],["class","mr-2 mt-2",4,"ngIf"],["class","custom-select col-2","style","width: auto",3,"ngModel","ngModelChange",4,"ngIf"],["id","dataTable"],["id","dataTable",1,"data-container",2,"width","100%","overflow","auto"],[1,"header",2,"overflow","auto"],["scope","col",1,"d-flex","align-items-center","justify-content-center"],["scope","col",1,"d-flex","justify-content-center","align-items-center"],["class","d-flex justify-content-center align-items-center","scope","col","style","padding-left: 2rem",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"d-flex","mx-auto","justify-content-center","p-1"],[2,"width","95vw","overflow-x","auto",3,"collectionSize","page","pageSize","pageChange"],["noData",""],["deleteModal",""],[1,"success-badge"],[1,"danger-badge"],["class","btn default ms-3 me-2 text-white float-start",3,"click",4,"ngIf"],[1,"btn","default","ms-3","me-2","text-white","float-start",3,"click"],["class","spinner-border spinner-border-sm me-2 ms-1","role","status","aria-hidden","true",4,"ngIf"],["icon","filter","class","ms-1 me-2 text-white","style","cursor: pointer",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2","ms-1"],["icon","filter",1,"ms-1","me-2","text-white",2,"cursor","pointer"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm","me-2","text-danger"],[1,"btn","default-outline","me-3",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["icon","download",1,"ms-1","me-1",2,"cursor","pointer"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"btn","default","text-white",2,"width","100px",3,"click"],["icon","chart-area","class","text-white me-2",4,"ngIf"],["icon","chart-area",1,"text-white","me-2"],[1,"mr-2","mt-2"],[1,"custom-select","col-2",2,"width","auto",3,"ngModel","ngModelChange"],["ngValue","30"],["ngValue","40"],["ngValue","50"],["scope","col",1,"d-flex","justify-content-center","align-items-center",2,"padding-left","2rem"],["style","justify-content: center",4,"ngFor","ngForOf","ngForTrackBy"],[2,"justify-content","center"],[3,"value","id"],["pTemplate","d"],[1,"data-wrapper","p-2"],[1,"d-flex","justify-content-center","align-items-center"],[1,"column-flex",2,"padding-left","0.5rem"],[1,"column-flex"],["width","300","controls","","preload","auto","class","custom-video",4,"ngIf"],["loading","lazy","class","image",3,"src","click",4,"ngIf"],["id","verify","style","width: 5rem",4,"ngIf"],[1,"btn",3,"click"],["icon","trash",1,"text-danger"],["width","300","controls","","preload","auto",1,"custom-video"],["type","video/quicktime",3,"src"],["loading","lazy",1,"image",3,"src","click"],[1,"btn","btn-sm","default","text-white","mt-2"],[3,"click"],["id","verify",2,"width","5rem"],["verified",""],["id","right",1,"form-check","form-check-inline"],["type","radio",1,"form-check-input",3,"value","defaultValue","id","defaultChecked","change"],[1,"form-check-label","text-success",3,"for"],["id","wrong",1,"form-check","form-check-inline"],["type","radio",1,"form-check-input",2,"padding-left","1rem",3,"value","defaultValue","id","defaultChecked","change"],[1,"form-check-label","text-danger",3,"for"],["type","radio",1,"form-check-input",3,"value","defaultValue","id","change"],["type","radio",1,"form-check-input",2,"padding-left","1rem",3,"value","defaultValue","id","change"],["id","data-card",1,"row","card","card-body"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"modal-body"],[1,"modal-confirm"],[1,"modal-content"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","danger",3,"click"]],template:function(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"span",4),e.\u0275\u0275text(5," Spillage Violations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",5)(7,"span",6)(8,"span",7),e.\u0275\u0275text(9,"Spillage Analytics:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,H,3,0,"span",8),e.\u0275\u0275template(11,z,2,0,"span",9),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(12,"div",10)(13,"div",11)(14,"div",3),e.\u0275\u0275template(15,U,2,1,"div",12),e.\u0275\u0275elementStart(16,"button",13),e.\u0275\u0275listener("click",function(){return i.RefreshViolations()}),e.\u0275\u0275element(17,"fa-icon",14),e.\u0275\u0275text(18,"Refresh Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"span",15),e.\u0275\u0275template(20,W,3,0,"span",16),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(21,"div",17)(22,"div",18)(23,"div",3)(24,"div",19)(25,"div",20)(26,"div",21),e.\u0275\u0275element(27,"fa-icon",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",23)(29,"div",24)(30,"span",25)(31,"div",26),e.\u0275\u0275listener("click",function(o){return i.openDatePicker(o)}),e.\u0275\u0275elementStart(32,"div",27)(33,"input",28,29),e.\u0275\u0275listener("datesUpdated",function(){return i.Submit()})("ngModelChange",function(o){return i.selectedMoments=o}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",30)(36,"button",31),e.\u0275\u0275element(37,"fa-icon",32),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(38,"div",33)(39,"p-treeSelect",34),e.\u0275\u0275listener("ngModelChange",function(o){return i.selectedItems1=o})("onNodeSelect",function(o){return i.onDepartmentIdSelect(o)}),e.\u0275\u0275pipe(40,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"div",33)(42,"p-treeSelect",35),e.\u0275\u0275listener("ngModelChange",function(o){return i.selectedItems=o})("onNodeSelect",function(o){return i.onCameraIdSelect(o)}),e.\u0275\u0275pipe(43,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",36),e.\u0275\u0275template(45,K,2,0,"button",37),e.\u0275\u0275elementStart(46,"button",38),e.\u0275\u0275listener("click",function(){return i.Submit()}),e.\u0275\u0275template(47,X,2,0,"span",39),e.\u0275\u0275template(48,R,1,0,"span",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(49,"\xa0 "),e.\u0275\u0275elementStart(50,"button",41),e.\u0275\u0275listener("click",function(){return i.submitForm()}),e.\u0275\u0275template(51,q,1,0,"fa-icon",42),e.\u0275\u0275template(52,ee,1,0,"span",43),e.\u0275\u0275text(53," Excel "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"div",5),e.\u0275\u0275template(55,ae,4,3,"button",44),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(56,"span",45),e.\u0275\u0275template(57,oe,3,0,"span",46),e.\u0275\u0275text(58,"\xa0 "),e.\u0275\u0275template(59,le,7,1,"select",47),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(60,"div",48)(61,"div",49)(62,"div",3)(63,"div",50)(64,"div",51)(65,"div")(66,"b"),e.\u0275\u0275text(67,"SNo"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(68,"div",52)(69,"div")(70,"b"),e.\u0275\u0275text(71," Violation Image/Video "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(72,"div",52)(73,"div")(74,"b"),e.\u0275\u0275text(75," Department "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(76,"div",52)(77,"div")(78,"b"),e.\u0275\u0275text(79," Camera Name "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(80,"div",52)(81,"b"),e.\u0275\u0275text(82," Detected Time "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(83,se,3,0,"div",53),e.\u0275\u0275element(84,"div"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(85,be,3,4,"ng-container",54),e.\u0275\u0275pipe(86,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"div",55)(88,"ngb-pagination",56),e.\u0275\u0275listener("pageChange",function(o){return i.page=o})("pageChange",function(){return i.sliceVD()}),e.\u0275\u0275pipe(89,"async"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(90,we,5,4,"ng-template",null,57,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(92,De,17,0,"ng-template",null,58,e.\u0275\u0275templateRefExtractor)),2&t){const n=e.\u0275\u0275reference(91);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",i.isActive),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.isActive),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(i.isdatewise||i.isLatest)),e.\u0275\u0275advance(13),e.\u0275\u0275property("showCustomRangeLabel",!0)("ranges",i.ranges)("timePicker",!0)("ngModel",i.selectedMoments),e.\u0275\u0275advance(6),e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(44,T)),e.\u0275\u0275property("containerStyleClass","w-100")("ngModel",i.selectedItems1)("ngModelOptions",e.\u0275\u0275pureFunction0(45,P))("options",e.\u0275\u0275pipeBind1(40,36,i.dropdownList1)),e.\u0275\u0275advance(3),e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(46,T)),e.\u0275\u0275property("containerStyleClass","w-100")("ngModel",i.selectedItems)("ngModelOptions",e.\u0275\u0275pureFunction0(47,P))("options",e.\u0275\u0275pipeBind1(43,38,i.dropdownList)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null!=i.selectedItems||null!=i.selectedMoments.startDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",null===i.selectedMoments||null===i.selectedMoments.startDate||null===i.selectedMoments.endDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.loading),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",null===i.selectedMoments||null===i.selectedMoments.startDate||null===i.selectedMoments.endDate||i.excelLoad),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.excelLoad),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.excelLoad),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.isdatewise||i.isLatest),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.isdatewise),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.isdatewise),e.\u0275\u0275advance(24),e.\u0275\u0275property("ngIf",i.isEditTable),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(86,40,i.violData).length>0)("ngIfElse",n),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",e.\u0275\u0275pipeBind1(89,42,i.total))("page",i.page)("pageSize",i.pageSize)}},dependencies:[m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.Q7,G.BN,f.NgForOf,f.NgIf,m.On,C.N9,y.mP,Y.jx,L.l,x.SP,$.J,f.AsyncPipe],styles:['.image[_ngcontent-%COMP%]{margin-left:0;margin-right:0;height:174px;width:330px;object-fit:cover;border-radius:5px!important}.task-input[_ngcontent-%COMP%]{padding:0 25px;position:relative}.task-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 35px 5px 5px;height:40px}.datePickerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.datePickerContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important}input[_ngcontent-%COMP%]{width:100%}.img[_ngcontent-%COMP%]{height:20px;width:20px}.task-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:50%;position:absolute;transform:translate(170px,-50%)}input[type=checkbox][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;top:5px;outline:none;counter-increment:undone-items}input[_ngcontent-%COMP%]:checked{pointer-events:none;order:2;counter-increment:done-items}label[_ngcontent-%COMP%]{pointer-events:none;display:block;position:relative;padding:15px 10px 15px 0;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s}label[_ngcontent-%COMP%]:before{content:"\\f10c";display:block;position:absolute;margin-right:10px;margin-left:10px}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2713"}input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2716"}#editViol[_ngcontent-%COMP%]{text-align:center;align-content:center}td[_ngcontent-%COMP%]{text-align:center!important;align-content:center!important}input[type=radio][_ngcontent-%COMP%]{visibility:hidden}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{pointer-events:all;display:block;position:relative;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s;margin-left:10px!important}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"\\25ef";display:block;position:absolute;margin-right:10px!important;right:2rem;font-weight:500;color:#c9c9c9}#verify[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}#verify[_ngcontent-%COMP%]   #wrong[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:500;color:#cc1d1d;content:"\\2713"}#verify[_ngcontent-%COMP%]   #right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:700;color:#1dc41d;content:"\\2713"}.w-full[_ngcontent-%COMP%]{width:inherit!important;color:#000!important}.container[_ngcontent-%COMP%]{position:relative;background-color:#fff!important;opacity:1;padding:5px;border-radius:10px;border:1px solid #ccc;display:flex;height:2.9em;justify-content:space-between;align-items:center}.data-container[_ngcontent-%COMP%]{display:block;width:100%}.data-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:auto;display:grid;box-sizing:border-box;margin-left:3%;margin-right:3%;padding-right:1%!important;padding-left:1%!important;padding-top:1rem!important;padding-bottom:1rem!important;grid-template-columns:5% 30% 15% 15% 15% 15% 5%;border:var(--border);border-radius:7px;margin-bottom:.5rem!important;margin-top:.5rem!important}.data-container[_ngcontent-%COMP%]   .data-wrapper[_ngcontent-%COMP%]{box-sizing:border-box;width:inherit;display:grid;padding-top:.5rem!important;padding-bottom:.5rem!important;margin-bottom:1rem!important;overflow-wrap:break-word;border:var(--border);border-radius:10px;grid-template-columns:5% 30% 15% 15% 15% 15% 5%}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#f8f8f8!important;border-radius:5px!important;color:var(--label-color)!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:var(--label-color)!important;border-radius:5px!important;border:1px solid var(--label-color)!important;box-shadow:none}']}),a})()}];let Me=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({providers:[E],imports:[N.A,y.o6,L.b,F.ZQ.forRoot(),x.n1.forRoot({}),_.Bz.forChild(Ee),V.Rh.forRoot({timeOut:5e3,toastComponent:A.n,progressBar:!0,newestOnTop:!0}),_.Bz]}),a})()}}]);