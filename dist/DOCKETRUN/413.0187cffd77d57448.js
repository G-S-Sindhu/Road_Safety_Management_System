"use strict";(self.webpackChunkDOCKETRUN=self.webpackChunkDOCKETRUN||[]).push([[413],{7413:(E,y,m)=>{m.r(y),m.d(y,{TrafficJamViolationsModule:()=>bt});var S=m(9569),w=m(5861),b=m(529),d=m(433),o=m(9646),f=m(2953),x=m(4327),_=m(1954),h=m(6948),t=m(4650),u=m(9463),C=m(6895);let I=(()=>{class n{constructor(e,i,a){this.http=e,this.snackbar=i,this.datePipe=a,this.logInterval=0;var s=this.loadConfigFile("assets/config.json");s=JSON.parse(s),this.IP=s.IP,this.logInterval=s.logInterval}loadConfigFile(e){return this.readConfigFile(e,"application/json")}readConfigFile(e,i){var a=new XMLHttpRequest;if(a.open("GET",e,!1),null!=i)return a.overrideMimeType&&a.overrideMimeType(i),a.send(),a.status?a.response:null}dateTransform(e){return this.datePipe.transform(e,"yyyy-MM-dd HH:mm:ss")}LivePPEViolationData(e,i,a,s){"all_departments"===i&&(i=null),"all_cameras"===e&&(e=null);var l={department_name:i,camera_name:e};return a&&s&&(e||i)?this.http.post(this.IP+"/live_data1PPE/"+a+"/"+s,l):a||s||!e&&!i?this.http.get(this.IP+"/live_data1PPE"):this.http.post(this.IP+"/live_data1PPE",l)}DatewisePPEViolations(e,i,a,s,l,c){var g=this.dateTransform(e),P=this.dateTransform(i);return"all_cameras"===c&&(c=null),"all_departments"===l&&(l=null),this.http.post(a&&s&&c&&l?this.IP+"/datewisePPE/"+c+"/"+a+"/"+s:a||s||c?a&&s&&!c?this.IP+"/datewisePPE/"+a+"/"+s:a&&s&&c?this.IP+"/datewisePPE/"+c+"/"+a+"/"+s:a||s||!c||l?this.IP+"/datewisePPE":this.IP+"/datewisePPE/"+c:this.IP+"/datewisePPE",{from_date:g,to_date:P,department_name:null!==l?l:"none"})}ChangePPEFiltersData(e){return this.http.post(this.IP+"/PPEviolationPercentage",e)}GetPPEFiltersData(){return this.http.get(this.IP+"/PPEviolationPercentage")}CreatePPEViolationExcel(e){return this.http.post(this.IP+"/create_violation_excelPPE",e)}DownloadViolationExcel(){return this.http.get(this.IP+"/violation_excel_download",{observe:"response",responseType:"arraybuffer"})}GetLatestPPEData(e){return this.http.get(e?this.IP+"/latest_dataPPE/"+e:this.IP+"/latest_dataPPE")}GetPPECameraDetails(e,i){return null===e&&null===i?this.http.get(this.IP+"/camera_detailsPPE"):this.http.post(this.IP+"/camera_detailsPPE",{from_date:e,to_date:i})}GetPPEDepartmentDetails(e,i){return null===e&&null===i?this.http.get(this.IP+"/department_detailsPPE"):this.http.post(this.IP+"/department_detailsPPE",{from_date:e,to_date:i})}GetViolationList(){return this.http.get(this.IP+"/violation_type_details")}VerifyViolation(e,i){return this.http.get(this.IP+"/violation_verification/"+e+"/"+i)}notification(e,i){this.snackbar.open(e,i||"",{duration:4e3,panelClass:["error"],horizontalPosition:"center",verticalPosition:"bottom"})}DeleteViolationData(e){return this.http.get(this.IP+"/Deleteviolation/"+e)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(b.eN),t.\u0275\u0275inject(u.ux),t.\u0275\u0275inject(C.DatePipe))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T=m(7185),D=m(1305),M=m(3868),V=m(64),F=m(1968);const L=["dangerAlert"];function k(n,r){1&n&&t.\u0275\u0275element(0,"span",62)}function J(n,r){1&n&&t.\u0275\u0275element(0,"fa-icon",63)}function O(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",59),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.GetLatestPPEData())}),t.\u0275\u0275template(1,k,1,0,"span",60),t.\u0275\u0275template(2,J,1,0,"fa-icon",61),t.\u0275\u0275text(3,"Latest "),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loaderLatest),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loaderLatest)}}function j(n,r){1&n&&t.\u0275\u0275element(0,"fa-icon",66)}function A(n,r){1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1,"Live "),t.\u0275\u0275elementEnd())}function Y(n,r){1&n&&t.\u0275\u0275element(0,"span",67)}function B(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",64),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.BackToToday())}),t.\u0275\u0275template(1,j,1,0,"fa-icon",65),t.\u0275\u0275template(2,A,2,0,"span",34),t.\u0275\u0275template(3,Y,1,0,"span",35),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loader2),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.loader2),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.loader2)}}function N(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.Reset())}),t.\u0275\u0275text(1," \xd7 Cancel Filters "),t.\u0275\u0275elementEnd()}}function z(n,r){1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1,"Submit"),t.\u0275\u0275elementEnd())}function G(n,r){1&n&&t.\u0275\u0275element(0,"span",67)}function H(n,r){1&n&&(t.\u0275\u0275elementStart(0,"span",3)(1,"b"),t.\u0275\u0275text(2,"Show:"),t.\u0275\u0275elementEnd()())}function $(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"select",69),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.pageSize=a)})("ngModelChange",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.sliceVD())}),t.\u0275\u0275elementStart(1,"option",70),t.\u0275\u0275text(2,"30 items per page"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"option",71),t.\u0275\u0275text(4,"40 items per page"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"option",72),t.\u0275\u0275text(6,"50 items per page"),t.\u0275\u0275elementEnd()()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",e.pageSize)}}function Z(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",78),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.imageCarousal(a))}),t.\u0275\u0275text(1," \xa0\xa0 "),t.\u0275\u0275element(2,"fa-icon",79),t.\u0275\u0275text(3," More Images \xa0\xa0 "),t.\u0275\u0275elementEnd()}}function U(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",78),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext().$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.imageCarousal(a))}),t.\u0275\u0275text(1," \xa0\xa0 "),t.\u0275\u0275element(2,"fa-icon",79),t.\u0275\u0275text(3," More Images \xa0\xa0 "),t.\u0275\u0275elementEnd()}}function W(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr",43)(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"td")(6,"img",74),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.imageCarousal(s))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"br"),t.\u0275\u0275template(8,Z,4,0,"button",75),t.\u0275\u0275text(9," \xa0"),t.\u0275\u0275elementStart(10,"button",76),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.downloadImage(l.API+"/image/"+l.analyticsType+"/"+s.imagename))}),t.\u0275\u0275text(11," Download Image "),t.\u0275\u0275element(12,"fa-icon",77),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"td")(14,"img",74),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.imageCarousal(s))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(15,"br"),t.\u0275\u0275template(16,U,4,0,"button",75),t.\u0275\u0275text(17," \xa0"),t.\u0275\u0275elementStart(18,"button",76),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.downloadImage(l.API+"/image/"+l.analyticsType+"/"+s.imagename))}),t.\u0275\u0275text(19," Download Image "),t.\u0275\u0275element(20,"fa-icon",77),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(21,"td"),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"dateFormater"),t.\u0275\u0275elementEnd()()}if(2&n){const e=r.$implicit,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.SNo),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.camera_name?e.camera_name:"null"," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",i.API+"/image/"+i.analyticsType+"/"+e.imagename[0],t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.imagename.length<1),t.\u0275\u0275advance(6),t.\u0275\u0275property("src",i.API+"/image/"+i.analyticsType+"/"+e.imagename[0],t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.imagename.length<1),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(23,7,e.timestamp)," ")}}function K(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"tbody"),t.\u0275\u0275template(1,W,24,9,"tr",73),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,1,e.violData))}}function Q(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",84)(1,"h4"),t.\u0275\u0275text(2,"Data Not Found"),t.\u0275\u0275elementEnd()())}function X(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",84),t.\u0275\u0275element(1,"span",85),t.\u0275\u0275text(2," Loading Details... "),t.\u0275\u0275elementEnd())}function q(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",86),t.\u0275\u0275text(1," Error while fetching Data "),t.\u0275\u0275elementEnd())}function R(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"tbody")(1,"tr")(2,"td",80)(3,"div",81),t.\u0275\u0275template(4,Q,3,0,"div",82),t.\u0275\u0275template(5,X,3,0,"div",82),t.\u0275\u0275template(6,q,2,0,"div",83),t.\u0275\u0275elementEnd()()()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf","success"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","init"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Error"==e.dataFetchStatus)}}function tt(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",87)(1,"div",13)(2,"div",39),t.\u0275\u0275element(3,"img",88),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",89)(5,"h5")(6,"span",90),t.\u0275\u0275text(7," Camera Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"b")(9,"span",91),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"h5")(12,"span",90),t.\u0275\u0275text(13," Detected Time : "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"b")(15,"span",91),t.\u0275\u0275text(16),t.\u0275\u0275elementEnd()()()()()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("src",e.API+"/image/"+e.analyticsType+"/"+e.currentViol.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(e.currentViol.camera_name?e.currentViol.camera_name:"null"),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(e.currentViol.timestamp?e.currentViol.timestamp:"--")}}function et(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",106),t.\u0275\u0275element(1,"input",107),t.\u0275\u0275elementStart(2,"label",108),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext().$implicit,i=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("checked","Vest"===e?"no_vest"==i[e]:i[e]),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate("Vest"===e?"Vest":e)}}function it(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,et,4,2,"div",105),t.\u0275\u0275elementEnd()),2&n){const e=r.$implicit,i=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Helmet"===e?"none"!==i[e]&&!1===i[e]:"Vest"===e&&"no_vest"===i[e])}}function at(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",102)(1,"div")(2,"div",3),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"br"),t.\u0275\u0275elementStart(5,"ul",103)(6,"li"),t.\u0275\u0275template(7,it,2,1,"div",104),t.\u0275\u0275elementEnd()()()()),2&n){const e=r.$implicit,i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.violation_count),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngForOf",i.objectKeys(e))}}function nt(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",100),t.\u0275\u0275template(1,at,8,2,"div",101),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.editViol.object_data)}}function st(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",92)(1,"div",13)(2,"div",93)(3,"div",94),t.\u0275\u0275element(4,"img",95),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",96)(6,"div",97)(7,"div",98)(8,"h5",3),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"br"),t.\u0275\u0275template(11,nt,2,1,"div",99),t.\u0275\u0275elementEnd()()()()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("src",e.API+"/image/"+e.analyticsType+"/"+e.editViol.imagename[0],t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.editViol.analyticstype),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","PPE"===e.editViol.analyticstype||"RA"===e.editViol.analyticstype)}}function ot(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div")(1,"p"),t.\u0275\u0275text(2,"This is a custom overlay template."),t.\u0275\u0275elementEnd()())}function lt(n,r){}function rt(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",87)(1,"div",109)(2,"div",110)(3,"div",111)(4,"div",112)(5,"i",113),t.\u0275\u0275text(6,"\ue5cd"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"h4",114),t.\u0275\u0275text(8,"Are you sure?"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",87)(10,"p"),t.\u0275\u0275text(11," Do you really want to delete this violation Details? This process cannot be undone. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div",115)(13,"button",116),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(s.close("Cross click"))}),t.\u0275\u0275text(14," Cancel "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"button",117),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.DeleteViolationData())}),t.\u0275\u0275text(16," Delete "),t.\u0275\u0275elementEnd()()()()()}}function ct(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",84)(1,"h4"),t.\u0275\u0275text(2,"Violation Details are Not Found."),t.\u0275\u0275elementEnd()())}function mt(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",84),t.\u0275\u0275element(1,"span",119),t.\u0275\u0275elementStart(2,"h4"),t.\u0275\u0275text(3,"Loading..."),t.\u0275\u0275elementEnd()())}function dt(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",84)(1,"h4"),t.\u0275\u0275text(2,"Loading..."),t.\u0275\u0275elementEnd()())}function ht(n,r){1&n&&(t.\u0275\u0275elementStart(0,"div",84)(1,"h4"),t.\u0275\u0275text(2,"Error While Fetching the Data."),t.\u0275\u0275elementEnd()())}function pt(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",118)(1,"div",118),t.\u0275\u0275template(2,ct,3,0,"div",82),t.\u0275\u0275template(3,mt,4,0,"div",82),t.\u0275\u0275template(4,dt,3,0,"div",82),t.\u0275\u0275template(5,ht,3,0,"div",82),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","success"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","init"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Loading"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Error"==e.dataFetchStatus)}}const ft=function(){return{"min-width":"100%"}},ut=function(){return{standalone:!0}};let gt=(()=>{class n{constructor(e,i,a,s,l,c,g,P,p,xt){this.http=e,this.webServer=i,this.datepipe=a,this.toasterService=s,this._lightbox=l,this._lightBoxConfig=c,this.router=g,this.snackbar=P,this.modalService=p,this.Router=xt,this.isalert=!1,this.prevLiveCount=0,this.helmetFilterValue=new d.NI(30,[d.kI.pattern(new RegExp("^(?!-)[0-9]+$")),d.kI.min(30)]),this.vestFilterValue=new d.NI(30,[d.kI.pattern(new RegExp("^(?!-)[0-9]+$")),d.kI.min(30)]),this.tempdata=[],this.page=1,this.pageSize=30,this.cameraDetails=[],this.alertmessage="",this.total=(0,o.of)(0),this.violData=(0,o.of)([]),this.loading=!1,this.filterOut=new d.NI,this.excelLoader=!1,this.show1=30,this.show2=40,this.show3=50,this.dataFetchStatus="init",this.fromDate=new Date,this.toDate=new Date,this.isdatewise=!1,this.loader2=!1,this.Excel=!1,this.Edata=[],this.isExcel=!1,this.excelLoad=!1,this.alert=!0,this.imageData=[],this.objectKeys=Object.keys,this.isdate=!1,this.analyticsType="PPE",this.selectedViolType=null,this.selectedCameraId=null,this.selectedDepartment=null,this.dropdownList=(0,o.of)([]),this.dropdownList1=(0,o.of)([]),this.Images=[],this.violationTypeList=(0,o.of)([{key:"0",label:"All Violations",icon:"pi",data:"all_violations"}]),this.loaderLatest=!1,this.isLatest=!1,this.latest=!1,this.isEditTable=!0,this.violationsList=[],this.ranges={Today:[(0,h.Z)().hour(0).minute(0).second(0),(0,h.Z)()],Yesterday:[(0,h.Z)().subtract(1,"days").hour(0).minute(0).second(0),(0,h.Z)().subtract(1,"days")],"Last 7 Days":[(0,h.Z)().subtract(6,"days").hour(0).minute(0).second(0),(0,h.Z)()],"Last 30 Days":[(0,h.Z)().subtract(29,"days").hour(0).minute(0).second(0),(0,h.Z)()],"This Month":[(0,h.Z)().startOf("month").hour(0).minute(0).second(0),(0,h.Z)().endOf("month")],"Last Month":[(0,h.Z)().subtract(1,"month").startOf("month").hour(0).minute(0).second(0),(0,h.Z)().subtract(1,"month").endOf("month")]},this.selectedMoments=null,this.delay=this.webServer.logInterval,this.getCameraList(),this.getDepartmentList(),this.ExcelRange=0,this._lightBoxConfig.showDownloadButton=!1,this._lightBoxConfig.showZoom=!0,this._lightBoxConfig.showImageNumberLabel=!0,this._lightBoxConfig.fitImageInViewPort=!0,this._lightBoxConfig.disableScrolling=!1,this._lightBoxConfig.centerVertically=!1,this.API=i.IP,this.dataFetchStatus="init",(!this.latest||this.isLatest)&&this.webServer.LivePPEViolationData().subscribe(v=>{this.dataFetchStatus="success",v.success?(this.prevLiveCount=v.now_live_count,this.imageData=v.message,this.tempdata=v.message,this.tempdata=v.message,this.total=(0,o.of)(this.tempdata.length),this.violData=(0,o.of)(v.message),this.sliceVD()):this.notification(v.message)},v=>{this.dataFetchStatus="Error",this.notification("Error While fetching the data")})}ngOnInit(){this.helmetFilterValue.valueChanges.subscribe(e=>{console.log(this.helmetFilterValue)}),this.dropdownSettings={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0},this.dropdownSettings2={singleSelection:!0,idField:"item_id",textField:"item_text",itemsShowLimit:1,allowSearchFilter:!0,closeDropDownOnSelection:!0,noDataAvailablePlaceholderText:"No violation types detected",maxHeight:197},this.GetPPEFilterValues()}Reset(){this.selectedMoments=null,this.selectedCameraId=null,this.selectedDepartment=null,this.BackToToday()}ngAfterViewInit(){this.dataread()}openDatePicker(e){document.getElementById("dateInput").click()}dataread(){this.interval=setInterval(()=>{this.isdate?(this.violData=(0,o.of)([]),this.dataFetchStatus="success"):this.Subsciption=this.webServer.LivePPEViolationData(this.selectedCameraId?this.selectedCameraId.data:null,this.selectedDepartment?this.selectedDepartment.data:null).subscribe(e=>{if(e.success){var i={...e},a=[...e.message];this.loader2=!1,i.now_live_count-this.prevLiveCount>0&&(this.tempdata=a,this.sliceVD(),this.prevLiveCount=i.now_live_count)}},e=>{this.dataFetchStatus="Error"})},this.delay)}notification(e,i){this.snackbar.open(e,i||"",{duration:4e3,panelClass:["error"],horizontalPosition:"end",verticalPosition:"bottom"})}getDismissReason(e){return e===f.If.ESC?"by pressing ESC":e===f.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}sliceVD(){if(this.isdate||(this.total=(0,o.of)(this.tempdata.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize).length),this.total=(0,o.of)(this.tempdata.length),this.violData=(0,o.of)(this.tempdata.map((i,a)=>({SNo:a+1,...i})).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize))),this.isdate){var e=document.getElementById("dataTable");e?.classList.add("loading"),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment.data:null,this.selectedCameraId?this.selectedCameraId.data:null).subscribe(i=>{i.success&&(e?.classList.remove("loading"),0===i.message.length&&(this.dataFetchStatus="success",this.notification("No violations found")),this.tempdata=i.message,this.violData=(0,o.of)(this.tempdata))})}}Submit(){clearInterval(this.interval),this.dataFetchStatus="init",this.isLatest=!1,this.Images=[],this.fromDate=this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.toDate=this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),this.getCameraList(),this.getDepartmentList(),this.Subsciption&&this.Subsciption.unsubscribe(),this.violData=(0,o.of)([]),this.total=(0,o.of)(0),this.pageSize=30,this.page=1,this.isdate=!0,this.loading=!0,this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,null,null,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(e=>{e.success?(0==e.message.length&&(this.tempdata=[],this.violData=(0,o.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,o.of)(0),this.notification("No violations found for entered date and time")),e.message.length>0&&(this.imageData=e.message,this.total=(0,o.of)(e.message.length),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(i=>{i.success?(this.loading=!1,0===i.message.length?(this.dataFetchStatus="success",this.notification("No violations found"),this.violData=(0,o.of)([]),this.isdatewise=!0,this.loading=!1,this.dataFetchStatus="success"):(this.tempdata=i.message,this.isdatewise=!0,this.violData=(0,o.of)(this.tempdata),this.sliceVD(),this.loading=!1,this.dataFetchStatus="success")):(this.loading=!1,this.violData=(0,o.of)([]),this.total=(0,o.of)(0),this.dataFetchStatus="success",this.notification(i.message)),this.loading=!1},i=>{this.dataFetchStatus="Error",this.loading=!1,this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,o.of)([]),this.loading=!1,this.isdatewise=!0,this.total=(0,o.of)(0),this.dataFetchStatus="success",this.notification("No violations found"),this.loading=!1)},e=>{this.dataFetchStatus="Error",this.loading=!1})}SetPPEFilters(){this.dataFetchStatus="init",this.tempdata=[],this.total=(0,o.of)(0),this.violData=(0,o.of)([]),this.webServer.ChangePPEFiltersData({ppepercentage:{helmet:this.helmetFilterValue.value,vest:this.vestFilterValue.value}}).subscribe(e=>{this.dataFetchStatus="success",this.GetPPEFilterValues(),this.isdatewise?this.Submit():this.webServer.LivePPEViolationData().subscribe(i=>{i.success?(this.imageData=i.message,this.tempdata=i.message,Number(localStorage.setItem("updatedLen",i.message.length?i.message.length:0)),this.tempdata=i.message,this.total=(0,o.of)(this.tempdata.length),this.violData=(0,o.of)(i.message),this.sliceVD()):(this.notification(i.message),this.dataFetchStatus="success")},i=>{this.dataFetchStatus="Error",this.notification("Error While fetching the data")})})}GetPPEFilterValues(){this.webServer.GetPPEFiltersData().subscribe(e=>{e.success&&(this.vestFilterValue.setValue(e.message.vest),this.helmetFilterValue.setValue(e.message.helmet))},e=>{})}BackToToday(){this.selectedMoments=null,this.selectedItems=null,this.selectedItems1=null,this.page=1,this.Images=[],this.latest=!1;var e=document.getElementById("dataTable");e?.classList.add("loading"),this.loader2=!0,this.isdate=!1,this.tempdata=[],this.total=(0,o.of)(0),this.isdate=!1,this.tempdata=[],this.total=(0,o.of)(0),this.webServer.LivePPEViolationData().subscribe(i=>{if(this.loader2=!1,this.dataFetchStatus="success",i){this.isLatest=!1,e?.classList.remove("loading"),this.imageData=i.message,this.total=(0,o.of)(i.message.length),i.success||(this.notification(i.message),this.dataFetchStatus="success");var a=i.message;this.tempdata=i.success?i.message:[],this.sliceVD(),this.isdatewise=!1,localStorage.setItem("updatedLen",JSON.stringify(a.length)),Number(localStorage.getItem("updatedLen"))}},i=>{this.dataFetchStatus="Error"}),this.dataread()}dateTransform(e){const i=new Date(e.year,e.month-1,e.day);return this.datepipe.transform(i,"dd/MM/yyyy")}onCameraIdSelect(e){this.dataFetchStatus="init",this.page=1,this.pageSize=30,this.total=(0,o.of)(0),this.violData=(0,o.of)([]),this.isdatewise||(this.page=1),this.isdatewise?this.Submit():this.webServer.LivePPEViolationData(this.selectedCameraId?this.selectedCameraId.data:null,this.selectedDepartment?this.selectedDepartment.data:null).subscribe(i=>{i&&(this.dataFetchStatus="success",this.isLatest=!1,i.success||(this.notification(i.message),this.dataFetchStatus="success",this.imageData=i.message,this.total=(0,o.of)(i.message.length),this.tempdata=i.message,this.violData=(0,o.of)(i.message)),this.tempdata=i.success?i.message:[],this.sliceVD(),this.loader2=!1,this.isdatewise=!1)},i=>{this.dataFetchStatus="Error",this.loader2=!1})}onDepartmentIdSelect(e){this.dataFetchStatus="init",this.page=1,this.pageSize=30,this.total=(0,o.of)(0),this.violData=(0,o.of)([]),this.isdate?this.Submit():this.webServer.LivePPEViolationData(this.selectedCameraId?this.selectedCameraId.data:null,this.selectedDepartment?this.selectedDepartment.data:null).subscribe(i=>{i&&(this.dataFetchStatus="success",this.isLatest=!1,i.success||(this.notification(i.message),this.dataFetchStatus="success",this.imageData=i.message,this.total=(0,o.of)(i.message.length),this.tempdata=i.message,this.violData=(0,o.of)(i.message)),this.tempdata=i.success?i.message:[],this.sliceVD(),this.loader2=!1,this.isdatewise=!1)},i=>{this.dataFetchStatus="Error",this.loader2=!1})}imageCarousal(e){this.Images=[],e.imagename.forEach((i,a)=>{console.log(i),this.Images[a]={src:this.API+"/image/"+this.analyticsType+"/"+i,thumb:this.API+"/image/"+this.analyticsType+"/"+i,caption:i}}),this.open(0)}open(e){this._lightbox.open(this.Images,e)}close(){this._lightbox.close()}submitForm(){var e=this;return(0,w.Z)(function*(){e.isalert=!1,e.excelLoad=!0,e.isExcel=!1,e.selectedDepartment=e.selectedItems1?e.selectedItems1.data:null;var i={from_date:e.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),to_date:e.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),cameraname:e.selectedCameraId?"all_cameras"==e.selectedCameraId.data?null:e.selectedCameraId.data:null,department:e.selectedDepartment?"all_departments"==e.selectedDepartment.data?null:e.selectedDepartment.data:null};e.webServer.CreatePPEViolationExcel(i).subscribe(a=>{a.success?e.webServer.DownloadViolationExcel().subscribe(s=>{const c=new Blob([s.body],{type:".xlsx"});var g="violation report "+e.datepipe.transform(new Date,"YYYY_MM_dd_h_mm_ss")+".xlsx";new File([c],g,{type:".xlsx"}),(0,x.saveAs)(c,g),e.excelLoad=!1,e.isExcel=!0},s=>{e.excelLoad=!1,e.excelLoader=!1}):(e.notification(a.message,"Retry"),e.excelLoad=!1,e.isExcel=!1,e.alertmessage=a.message,e.isalert=!0)},a=>{e.excelLoad=!1,e.isExcel=!1,e.alertmessage="Error while creating excel",e.notification(e.alertmessage,"Retry"),e.isalert=!0})})()}GetViolationLength(e,i,a,s,l){var c;return this.excelLoader=!0,this.webServer.DatewisePPEViolations(e,i,null,null,l||null,a||null).subscribe(g=>{g.success&&(c=g.message.length)}),c}settings(){this.router.navigate(["app/Settings"])}RefreshViolations(){this.total=(0,o.of)(0),this.page=1,this.violData=(0,o.of)([]),this.isdatewise=!1,this.isdate=!1,this.isLatest=!1,this.latest=!1,this.dataFetchStatus="init",this.webServer.LivePPEViolationData().subscribe(e=>{this.dataFetchStatus="success",e.success?(this.tempdata=e.message,this.total=(0,o.of)(this.tempdata.length),this.violData=(0,o.of)(e.message),this.sliceVD(),this.prevLiveCount=e.now_live_count,this.imageData=e.message):this.notification(e.message)},e=>{this.dataFetchStatus="Error",this.notification("Error While fetching the data")})}GetLatestPPEData(){this.loader2=!1,this.loaderLatest=!0,this.latest=!0;var e=document.getElementById("dataTable");e?.classList.add("loading"),console.log(this.selectedViolType),this.webServer.GetLatestPPEData(this.selectedCameraId).subscribe(i=>{i.success?(this.isLatest=!0,e?.classList.remove("loading"),this.loaderLatest=!1,0===i.message.length?this.notification("No violations found"):this.dataFetchStatus="success",this.imageData=i.message,this.tempdata=i.message,console.log(this.tempdata),this.tempdata=i.message,this.total=(0,o.of)(i.message.length),this.violData=(0,o.of)(i.message),this.sliceVD()):(this.loaderLatest=!1,e?.classList.remove("loading"),this.notification("Error while fetching the data","Retry"))},i=>{this.loaderLatest=!1,e?.classList.remove("loading"),this.notification("Error While fetching the data","Retry")})}downloadImage(e){const i=e;new b.WM({responseType:"blob"}),console.log(i);const s=i.substr(i.lastIndexOf("/")+1);this.http.get(i,{responseType:"blob"}).subscribe(l=>{console.log("image url data",l),(0,x.saveAs)(l,s)},l=>{console.log("error",l)})}getCameraList(){var e=[],i=[];e[0]={key:"0",label:"All Cameras",data:"all_cameras"},this.webServer.GetPPECameraDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(a=>{!0===a.success&&(a.message.forEach((s,l)=>{i.push({cameraid:l,cameraname:s})}),(i=i.filter((s,l,c)=>l===c.indexOf(s))).forEach((s,l)=>{var c;c={key:(l+1).toString(),label:s.cameraname,data:s.cameraname},e.push(c)}),this.dropdownList=(0,o.of)(e))})}getDepartmentList(){var e=[],i=[];e[0]={key:"0",label:"All Departments",data:"all_departments"},this.webServer.GetPPEDepartmentDetails(null!==this.selectedMoments?this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"):null,null!==this.selectedMoments?this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"):null).subscribe(a=>{!0===a.success&&(a.message.forEach((s,l)=>{i.push({departmentid:l,department:s})}),(i=i.filter((s,l,c)=>l===c.indexOf(s))).forEach((s,l)=>{var c;c={key:(l+1).toString(),label:s.department,data:s.department},e.push(c)}),this.dropdownList1=(0,o.of)(e))})}SelectViol(e,i){this.editViol=e,this.modalService.open(i,{size:"xl",centered:!0})}VerifyTrueViol(e,i){this.editViol=i,this.webServer.VerifyViolation(this.editViol._id.$oid,!0).subscribe(a=>{this.webServer.notification(a.message),a.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},a=>{this.webServer.notification("Error while the  Process","Retry")})}VerifyFalseViol(e,i){this.editViol=i,this.webServer.VerifyViolation(this.editViol._id.$oid,!1).subscribe(a=>{this.webServer.notification(a.message),a.success&&(this.modalService.dismissAll(),this.isdatewise&&this.Submit()),this.isdatewise||this.GetViolationData()},a=>{this.webServer.notification("Error while the  Process","Retry")})}IsDeleteData(e,i){this.selectedViolation=i,this.modalService.open(e)}DeleteViolationData(){this.webServer.DeleteViolationData(this.selectedViolation._id.$oid).subscribe(e=>{e.success?(this.modalService.dismissAll(),this.RefreshViolationData(),this.webServer.notification(e.message)):(this.modalService.dismissAll(),this.webServer.notification(e.message,"Retry"))},e=>{this.webServer.notification("Error while the process","Retry")})}RefreshViolationData(){if(this.total=(0,o.of)(0),this.page=1,this.violData=(0,o.of)([]),this.dataFetchStatus="init",this.isdatewise||this.isLatest)if(this.isdatewise&&!this.isLatest){var e=document.getElementById("dataTable");e?.classList.add("loading"),this.pageSize=30,this.page=1,this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,null,null,this.selectedDepartment?this.selectedDepartment.data:null,this.selectedCameraId?this.selectedCameraId.data:null).subscribe(i=>{this.dataFetchStatus="success",i.success?(0==i.message.length&&(this.tempdata=[],this.violData=(0,o.of)([]),this.total=(0,o.of)(0),e?.classList.remove("loading"),this.notification("No violations found for entered date and time")),i.message.length>0&&(this.imageData=i.message,this.total=(0,o.of)(i.message.length),this.webServer.DatewisePPEViolations(this.fromDate,this.toDate,this.page,this.pageSize,this.selectedDepartment?this.selectedDepartment:null,this.selectedCameraId?this.selectedCameraId:null).subscribe(a=>{a.success&&(e?.classList.remove("loading"),0===a.message.length?(this.notification("No violations found"),this.dataFetchStatus="success",this.violData=(0,o.of)([])):(this.tempdata=a.message,this.violData=(0,o.of)(this.tempdata),this.sliceVD()))},a=>{this.dataFetchStatus="Error",this.notification("Error while fetching the data")}))):(this.tempdata=[],this.violData=(0,o.of)([]),this.total=(0,o.of)(0),e?.classList.remove("loading"),e?.classList.remove("loading"),this.notification("No violations found"),this.dataFetchStatus="success")},i=>{})}else(this.isLatest||this.latest)&&this.GetLatestPPEData();else this.webServer.LivePPEViolationData().subscribe(i=>{this.dataFetchStatus="success",this.latest||!0!==i.success||(this.imageData=i.message,this.tempdata=i.message,this.total=(0,o.of)(i.message.length),this.violData=(0,o.of)(i.message),this.sliceVD(),this.tempdata.length>0&&(this.Excel=!0),this.sliceVD())},i=>{e.classList.remove("loading")})}GetViolationData(){var e=document.getElementById("content");e?.classList.add("loading"),(!this.latest||this.isLatest)&&this.webServer.LivePPEViolationData().subscribe(i=>{i.success?(e?.classList.remove("loading"),this.imageData=i.message,this.tempdata=i.message,Number(localStorage.setItem("updatedLen",i.message.length?i.message.length:0)),this.tempdata=i.message,this.total=(0,o.of)(this.tempdata.length),this.violData=(0,o.of)(i.message),this.sliceVD()):(e?.classList.remove("loading"),this.notification(i.message),this.dataFetchStatus="success")},i=>{e?.classList.remove("loading"),this.notification("Error While fetching the data")})}ngOnDestroy(){this.modalService.dismissAll(),clearInterval(this.interval),this.isalert=!1}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(b.eN),t.\u0275\u0275directiveInject(I),t.\u0275\u0275directiveInject(C.DatePipe),t.\u0275\u0275directiveInject(T._W),t.\u0275\u0275directiveInject(D.ey),t.\u0275\u0275directiveInject(D.xm),t.\u0275\u0275directiveInject(S.F0),t.\u0275\u0275directiveInject(u.ux),t.\u0275\u0275directiveInject(f.FF),t.\u0275\u0275directiveInject(S.F0))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-traffic-jam-violations"]],viewQuery:function(e,i){if(1&e&&(t.\u0275\u0275viewQuery(L,5),t.\u0275\u0275viewQuery(_.SP,5)),2&e){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(i.Violation=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(i.pickerDirective=a)}},decls:100,vars:31,consts:[["id","content",1,"container-fluid","dashboard-content"],["datatable",""],[1,"mb-3"],[1,""],[1,"sub-header","h4"],[1,"row","col-12"],[1,"form-group"],["class","btn default me-2 text-white float-start",3,"click",4,"ngIf"],["class","btn default text-white me-2","style","width: 100px",3,"click",4,"ngIf"],[1,"btn","default-outline",3,"click"],["icon","rotate",1,"me-1"],[1,"float-start","ms-2","mt-2","me-2"],[1,"border","rounded","pt-3","pb-2","pe-3","ps-3"],[1,"row"],[1,"d-flex"],[1,"me-3"],[1,"container","p-3"],["icon","filter"],[1,"col-10"],[1,"row","d-flex","align-items-center"],[1,"col-2"],[1,"dl-date-time-picker"],[1,"datePickerContainer",3,"click"],["type","text","ngxDaterangepickerMd","","placeholder","Select Date","required","","id","dateInput","autocomplete","off",1,"form-control",3,"showCustomRangeLabel","ranges","timePicker","ngModel","ngModelChange","datesUpdated"],["datepicker",""],[1,"input-group-append"],["type","button",1,"ngx-daterangepicker-action","btn","default"],["icon","calendar",1,"ngx-daterangepicker-action",3,"click"],["id","filter",1,"col-2"],["containerStyleClass","flex d-flex w-100","placeholder","Select Camera",1,"w-100","w-full",3,"ngModel","ngModelOptions","options","ngModelChange","onNodeSelect"],[1,"col-xl-4","col-sm-12","col-lg-12","col-xs-12","col-md-12"],[1,"d-flex","align-items-center"],["class","btn default-outline ms-3 me-3","style","white-space: nowrap",3,"click",4,"ngIf"],[1,"btn","default","text-white","me-3","ms-1",2,"width","80px",3,"disabled","click"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"justify-content-end"],["class","",4,"ngIf"],["class","custom-select col-2","style","width: auto",3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-12"],[1,"mt-2"],["id","dataTable",1,"",2,"width","100%","overflow","auto"],[1,"table","table-bordered",2,"width","100%","overflow","auto"],[2,"text-align","center"],["scope","col"],[4,"ngIf","ngIfElse"],["noData",""],[1,"d-flex","mx-auto","justify-content-center","p-1"],[2,"width","95vw","overflow-x","auto",3,"collectionSize","page","pageSize","pageChange"],[2,"display","none"],["dangerAlert",""],[1,"mb-0",2,"border","2px solid rgba(121, 20, 20, 0.699)","background-color","rgba(214, 148, 148, 0.459)"],[1,"modal-header",2,"text-align","center","color","rgba(121, 20, 20, 0.699)"],[1,"",2,"color","rgb(196, 54, 54) !important"],["class","modal-body",4,"ngIf"],["editViolation",""],["customTemplate",""],["popupTemplate",""],["deleteModal",""],[1,"btn","default","me-2","text-white","float-start",3,"click"],["class","spinner-border spinner-border-sm me-2 ms-1","role","status","aria-hidden","true",4,"ngIf"],["icon","filter","class","ms-1 me-2 text-white","style","cursor: pointer",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2","ms-1"],["icon","filter",1,"ms-1","me-2","text-white",2,"cursor","pointer"],[1,"btn","default","text-white","me-2",2,"width","100px",3,"click"],["icon","chart-area","class","text-white me-2",4,"ngIf"],["icon","chart-area",1,"text-white","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","default-outline","ms-3","me-3",2,"white-space","nowrap",3,"click"],[1,"custom-select","col-2",2,"width","auto",3,"ngModel","ngModelChange"],["ngValue","30"],["ngValue","40"],["ngValue","50"],["style","text-align: center",4,"ngFor","ngForOf"],["loading","lazy",1,"image",3,"src","click"],["class","btn btn-sm mt-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","default","text-white","mt-2",3,"click"],["icon","download",1,"ms-1","me-1",2,"cursor","pointer"],[1,"btn","btn-sm","mt-2",3,"click"],["icon","images",1,"mr-1"],["colspan","8"],["id","data-card",1,"card","card-body"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],["class","text-muted d-flex justify-content-center align-items-center",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2","text-prime"],[1,"text-muted","d-flex","justify-content-center","align-items-center"],[1,"modal-body"],["alt","","width","100%",1,"violImage",2,"width","30%","height","30%","object-fit","fill","border-radius","5px 5px 5px 5px",3,"src"],[1,"col-xl-12","col-md-12","col-lg-12","col-xs-12","text-white","mt-2"],[1,"text-muted"],[1,"text-white"],[1,"card","p-2"],[1,"col-6","d-flex","align-items-center"],[1,"card-img-top"],["alt","",2,"width","100%","height","auto","object-fit","contain",3,"src"],[1,"col-6"],[2,"height","90%","overflow","scroll"],[1,"",2,"width","100%"],["style","width: 100%",4,"ngIf"],[2,"width","100%"],["class","border-bottom",4,"ngFor","ngForOf"],[1,"border-bottom"],[1,"list-unstyled","p-4"],[4,"ngFor","ngForOf"],["style","width: 5rem","class","d-inline","id","editViol",4,"ngIf"],["id","editViol",1,"d-inline",2,"width","5rem"],["id","item1","type","checkbox",1,"me-4",3,"checked"],["for","item1",1,"ms-4"],[1,"modal-confirm"],[1,"modal-content"],[1,"modal-header","flex-column"],[1,"icon-box"],[1,"material-icons"],[1,"modal-title","w-100"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","danger",3,"click"],["id","data-card",1,"row","card","card-body"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,i){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"span",4),t.\u0275\u0275text(5," Traffic-Jam Violations "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(6,"div",5)(7,"div",3)(8,"div",6)(9,"div",3),t.\u0275\u0275template(10,O,4,2,"button",7),t.\u0275\u0275template(11,B,4,3,"button",8),t.\u0275\u0275elementStart(12,"button",9),t.\u0275\u0275listener("click",function(){return i.RefreshViolations()}),t.\u0275\u0275element(13,"fa-icon",10),t.\u0275\u0275text(14,"Refresh Violations "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(15,"span",11),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16),t.\u0275\u0275element(21,"fa-icon",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(22,"div",18)(23,"div",19)(24,"span",20)(25,"div",21)(26,"div",22),t.\u0275\u0275listener("click",function(s){return i.openDatePicker(s)}),t.\u0275\u0275elementStart(27,"span")(28,"input",23,24),t.\u0275\u0275listener("ngModelChange",function(s){return i.selectedMoments=s})("datesUpdated",function(){return i.Submit()}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(30,"span",25)(31,"button",26)(32,"fa-icon",27),t.\u0275\u0275listener("click",function(s){return i.openDatePicker(s)}),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(33,"div",28)(34,"div",3)(35,"p-treeSelect",29),t.\u0275\u0275listener("ngModelChange",function(s){return i.selectedCameraId=s})("onNodeSelect",function(s){return i.onCameraIdSelect(s)}),t.\u0275\u0275pipe(36,"async"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(37,"div",30)(38,"div",31),t.\u0275\u0275template(39,N,2,0,"button",32),t.\u0275\u0275elementStart(40,"button",33),t.\u0275\u0275listener("click",function(){return i.Submit()}),t.\u0275\u0275template(41,z,2,0,"span",34),t.\u0275\u0275template(42,G,1,0,"span",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(43,"\xa0 "),t.\u0275\u0275element(44,"div",3),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(45,"span",36),t.\u0275\u0275template(46,H,3,0,"span",37),t.\u0275\u0275template(47,$,7,1,"select",38),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(48,"div",13)(49,"div",39)(50,"div",40),t.\u0275\u0275element(51,"div",3),t.\u0275\u0275elementStart(52,"div",41)(53,"table",42)(54,"thead",43)(55,"tr")(56,"th",44)(57,"b"),t.\u0275\u0275text(58,"SNo."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(59,"th",44)(60,"b"),t.\u0275\u0275text(61," Camera Name "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(62,"th",44)(63,"b"),t.\u0275\u0275text(64," Entry Image "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(65,"th",44)(66,"b"),t.\u0275\u0275text(67," Exit Image "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(68,"th",44)(69,"b"),t.\u0275\u0275text(70," Occurred Time "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(71,"th",44)(72,"b"),t.\u0275\u0275text(73," Current Status"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(74,K,3,3,"tbody",45),t.\u0275\u0275pipe(75,"async"),t.\u0275\u0275template(76,R,7,3,"ng-template",null,46,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(78,"div",47)(79,"ngb-pagination",48),t.\u0275\u0275listener("pageChange",function(s){return i.page=s})("pageChange",function(){return i.sliceVD()}),t.\u0275\u0275pipe(80,"async"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(81,"div",49)(82,"div",39)(83,"div",null,50)(85,"div",51)(86,"div",52)(87,"h3",53),t.\u0275\u0275text(88," Violation "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(89,tt,17,3,"div",54),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(90,st,12,3,"ng-template",null,55,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(92,ot,3,0,"ng-template",null,56,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(94,lt,0,0,"ng-template",null,57,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(96,rt,17,0,"ng-template",null,58,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(98,pt,6,4,"ng-template",null,46,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()()),2&e){const a=t.\u0275\u0275reference(77);t.\u0275\u0275advance(10),t.\u0275\u0275property("ngIf",!i.isdatewise),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isdatewise||i.isLatest),t.\u0275\u0275advance(17),t.\u0275\u0275property("showCustomRangeLabel",!0)("ranges",i.ranges)("timePicker",!0)("ngModel",i.selectedMoments),t.\u0275\u0275advance(7),t.\u0275\u0275styleMap(t.\u0275\u0275pureFunction0(29,ft)),t.\u0275\u0275property("ngModel",i.selectedCameraId)("ngModelOptions",t.\u0275\u0275pureFunction0(30,ut))("options",t.\u0275\u0275pipeBind1(36,23,i.dropdownList)),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",null!==i.selectedCameraId||null!==i.selectedDepartment||null!==(null==i.selectedMoments?null:i.selectedMoments.startDate)),t.\u0275\u0275advance(1),t.\u0275\u0275property("disabled",null===i.selectedMoments.startDate||null===i.selectedMoments.endDate),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.loading),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",i.isdatewise),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isdatewise),t.\u0275\u0275advance(27),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(75,25,i.violData).length>0)("ngIfElse",a),t.\u0275\u0275advance(5),t.\u0275\u0275property("collectionSize",t.\u0275\u0275pipeBind1(80,27,i.total))("page",i.page)("pageSize",i.pageSize),t.\u0275\u0275advance(10),t.\u0275\u0275property("ngIf",i.currentViol)}},dependencies:[d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.Q7,M.BN,C.NgForOf,C.NgIf,d.On,f.N9,_.SP,V.mP,F.J,C.AsyncPipe],styles:['.image[_ngcontent-%COMP%]{margin-left:0;margin-right:0;height:174px;width:330px;object-fit:cover;border-radius:2px!important}.container[_ngcontent-%COMP%]{position:relative;background-color:#fff!important;font-size:1rem!important;opacity:1;padding:5px;border-radius:10px;border:2px solid #EBEBEB;display:flex;height:2.9em;justify-content:space-between;align-items:center}.container-temp[_ngcontent-%COMP%]{width:100%;max-width:100%;display:flex;height:2.9em;justify-content:space-between;align-items:center;padding:5px}.task-input[_ngcontent-%COMP%]{padding:0 25px;position:relative}.task-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px 35px 5px 5px;height:40px}.datePickerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.datePickerContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important}input[_ngcontent-%COMP%]{width:100%}.img[_ngcontent-%COMP%]{height:20px;width:20px}.task-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:50%;position:absolute;transform:translate(170px,-50%)}input[type=checkbox][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;top:5px;outline:none;counter-increment:undone-items}input[_ngcontent-%COMP%]:checked{pointer-events:none;order:2;counter-increment:done-items}label[_ngcontent-%COMP%]{pointer-events:none;display:block;position:relative;padding:15px 10px 15px 0;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s}label[_ngcontent-%COMP%]:before{content:"\\f10c";display:block;position:absolute;margin-right:10px;margin-left:10px}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2713"}input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{margin-left:3px;margin-right:2rem!important;color:#cc1d1d;content:"\\2716"}#editViol[_ngcontent-%COMP%]{text-align:center;align-content:center}td[_ngcontent-%COMP%]{text-align:center!important;align-content:center!important}input[type=radio][_ngcontent-%COMP%]{display:block;height:30px;margin:0 0 -53px -9999px;order:4;outline:none;position:relative;counter-increment:undone-items}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{pointer-events:all;display:block;position:relative;border-top:1px dashed #fff;order:4;cursor:pointer;animation:undone .5s;margin-left:10px!important}#verify[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"\\25ef";display:block;position:absolute;margin-right:10px!important;right:2rem;font-weight:500;color:#c9c9c9}#verify[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{order:2;animation:done .5s}#verify[_ngcontent-%COMP%]   #wrong[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:500;color:#cc1d1d;content:"\\2713"}#verify[_ngcontent-%COMP%]   #right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{font-size:larger;font-family:700;color:#1dc41d;content:"\\2713"}.w-full[_ngcontent-%COMP%]{width:inherit!important;color:#000!important}.custom-popup[_ngcontent-%COMP%]{position:fixed;width:inherit!important;top:50%;left:50%;transform:translate(-50%,-50%,-20%);background-color:#fff;padding:20px;border:1px solid #ccc;box-shadow:0 2px 4px #0000001a}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#f8f8f8!important;border-radius:5px!important;color:var(--label-color)!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:var(--label-color)!important;border-radius:5px!important;border:1px solid var(--label-color)!important;box-shadow:none}']}),n})();var _t=m(9174);const vt=[{path:"",component:gt}];let bt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[_t.A,S.Bz.forChild(vt),_.n1,V.o6]}),n})()},5861:(E,y,m)=>{function S(b,d,o,f,x,_,h){try{var t=b[_](h),u=t.value}catch(C){return void o(C)}t.done?d(u):Promise.resolve(u).then(f,x)}function w(b){return function(){var d=this,o=arguments;return new Promise(function(f,x){var _=b.apply(d,o);function h(u){S(_,f,x,h,t,"next",u)}function t(u){S(_,f,x,h,t,"throw",u)}h(void 0)})}}m.d(y,{Z:()=>w})}}]);