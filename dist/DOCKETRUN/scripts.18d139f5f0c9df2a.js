var fabric=fabric||{version:"5.2.1"};if(typeof exports<"u"?exports.fabric=fabric:"function"==typeof define&&define.amd&&define([],function(){return fabric}),typeof document<"u"&&typeof window<"u")fabric.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),fabric.window=window;else{var jsdom=require("jsdom"),virtualWindow=new jsdom.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;fabric.document=virtualWindow.document,fabric.jsdomImplForWrapper=require("jsdom/lib/jsdom/living/generated/utils").implForWrapper,fabric.nodeCanvas=require("jsdom/lib/jsdom/utils").Canvas,fabric.window=virtualWindow,DOMParser=fabric.window.DOMParser}function resizeCanvasIfNeeded(u){var n=u.targetCanvas,t=u.destinationWidth,e=u.destinationHeight;n.width===t&&n.height===e||(n.width=t,n.height=e)}function copyGLTo2DDrawImage(u,n){var l=u.canvas,c=n.targetCanvas,t=c.getContext("2d");t.translate(0,c.height),t.scale(1,-1),t.drawImage(l,0,l.height-c.height,c.width,c.height,0,0,c.width,c.height)}function copyGLTo2DPutImageData(u,n){var l=n.targetCanvas.getContext("2d"),c=n.destinationWidth,t=n.destinationHeight,e=c*t*4,i=new Uint8Array(this.imageBuffer,0,e),o=new Uint8ClampedArray(this.imageBuffer,0,e);u.readPixels(0,0,c,t,u.RGBA,u.UNSIGNED_BYTE,i);var s=new ImageData(o,c,t);l.putImageData(s,0,0)}fabric.isTouchSupported="ontouchstart"in fabric.window||"ontouchstart"in fabric.document||fabric.window&&fabric.window.navigator&&0<fabric.window.navigator.maxTouchPoints,fabric.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",fabric.commaWsp="(?:\\s+,?\\s*|,\\s*)",fabric.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,fabric.reNonWord=/[ \n\.,;!\?\-]/,fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.svgNS="http://www.w3.org/2000/svg",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.disableStyleCopyPaste=!1,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.browserShadowBlurConstant=1,fabric.arcToSegmentsCache={},fabric.boundsOfCurveCache={},fabric.cachesBoundsOfCurve=!0,fabric.forceGLPutImageData=!1,fabric.initFilterBackend=function(){return fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize)?(console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize})):fabric.Canvas2dFilterBackend?new fabric.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=fabric),function(){function u(l,c){if(this.__eventListeners[l]){var t=this.__eventListeners[l];c?t[t.indexOf(c)]=!1:fabric.util.array.fill(t,!1)}}function n(l,c){var t=function(){c.apply(this,arguments),this.off(l,t)}.bind(this);this.on(l,t)}fabric.Observable={fire:function(l,c){if(!this.__eventListeners)return this;var t=this.__eventListeners[l];if(!t)return this;for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].call(this,c||{});return this.__eventListeners[l]=t.filter(function(o){return!1!==o}),this},on:function(l,c){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var t in l)this.on(t,l[t]);else this.__eventListeners[l]||(this.__eventListeners[l]=[]),this.__eventListeners[l].push(c);return this},once:function(l,c){if(1===arguments.length)for(var t in l)n.call(this,t,l[t]);else n.call(this,l,c);return this},off:function(l,c){if(!this.__eventListeners)return this;if(0===arguments.length)for(l in this.__eventListeners)u.call(this,l);else if(1===arguments.length&&"object"==typeof l)for(var t in l)u.call(this,t,l[t]);else u.call(this,l,c);return this}}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var u=0,n=arguments.length;u<n;u++)this._onObjectAdded(arguments[u]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(u,n,l){var c=this._objects;return l?c[n]=u:c.splice(n,0,u),this._onObjectAdded&&this._onObjectAdded(u),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var u,n=this._objects,l=!1,c=0,t=arguments.length;c<t;c++)-1!==(u=n.indexOf(arguments[c]))&&(l=!0,n.splice(u,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(u,n){for(var l=this.getObjects(),c=0,t=l.length;c<t;c++)u.call(n,l[c],c,l);return this},getObjects:function(u){return void 0===u?this._objects.concat():this._objects.filter(function(n){return n.type===u})},item:function(u){return this._objects[u]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(u,n){return-1<this._objects.indexOf(u)||!!n&&this._objects.some(function(l){return"function"==typeof l.contains&&l.contains(u,!0)})},complexity:function(){return this._objects.reduce(function(u,n){return u+(n.complexity?n.complexity():0)},0)}},fabric.CommonMethods={_setOptions:function(u){for(var n in u)this.set(n,u[n])},_initGradient:function(u,n){!u||!u.colorStops||u instanceof fabric.Gradient||this.set(n,new fabric.Gradient(u))},_initPattern:function(u,n,l){!u||!u.source||u instanceof fabric.Pattern?l&&l():this.set(n,new fabric.Pattern(u,l))},_setObject:function(u){for(var n in u)this._set(n,u[n])},set:function(u,n){return"object"==typeof u?this._setObject(u):this._set(u,n),this},_set:function(u,n){this[u]=n},toggle:function(u){var n=this.get(u);return"boolean"==typeof n&&this.set(u,!n),this},get:function(u){return this[u]}},function(u){var n=Math.sqrt,l=Math.atan2,c=Math.pow,t=Math.PI/180,e=Math.PI/2;fabric.util={cos:function(i){if(0===i)return 1;switch(i<0&&(i=-i),i/e){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},sin:function(i){if(0===i)return 0;var o=1;switch(i<0&&(o=-1),i/e){case 1:return o;case 2:return 0;case 3:return-o}return Math.sin(i)},removeFromArray:function(i,o){var s=i.indexOf(o);return-1!==s&&i.splice(s,1),i},getRandomInt:function(i,o){return Math.floor(Math.random()*(o-i+1))+i},degreesToRadians:function(i){return i*t},radiansToDegrees:function(i){return i/t},rotatePoint:function(i,o,s){var a=new fabric.Point(i.x-o.x,i.y-o.y),d=fabric.util.rotateVector(a,s);return new fabric.Point(d.x,d.y).addEquals(o)},rotateVector:function(i,o){var s=fabric.util.sin(o),a=fabric.util.cos(o);return{x:i.x*a-i.y*s,y:i.x*s+i.y*a}},createVector:function(i,o){return new fabric.Point(o.x-i.x,o.y-i.y)},calcAngleBetweenVectors:function(i,o){return Math.acos((i.x*o.x+i.y*o.y)/(Math.hypot(i.x,i.y)*Math.hypot(o.x,o.y)))},getHatVector:function(i){return new fabric.Point(i.x,i.y).multiply(1/Math.hypot(i.x,i.y))},getBisector:function(i,o,s){var a=fabric.util.createVector(i,o),d=fabric.util.createVector(i,s),_=fabric.util.calcAngleBetweenVectors(a,d),b=_*(0===fabric.util.calcAngleBetweenVectors(fabric.util.rotateVector(a,_),d)?1:-1)/2;return{vector:fabric.util.getHatVector(fabric.util.rotateVector(a,b)),angle:_}},projectStrokeOnPoints:function(i,o,s){var a=[],d=o.strokeWidth/2,_=o.strokeUniform?new fabric.Point(1/o.scaleX,1/o.scaleY):new fabric.Point(1,1),b=function(C){var w=d/Math.hypot(C.x,C.y);return new fabric.Point(C.x*w*_.x,C.y*w*_.y)};return i.length<=1||i.forEach(function(C,w){var O,A,F=new fabric.Point(C.x,C.y);0===w?(A=i[w+1],O=s?b(fabric.util.createVector(A,F)).addEquals(F):i[i.length-1]):w===i.length-1?(O=i[w-1],A=s?b(fabric.util.createVector(O,F)).addEquals(F):i[0]):(O=i[w-1],A=i[w+1]);var N,Q,Z=fabric.util.getBisector(F,O,A),j=Z.vector;if("miter"===o.strokeLineJoin&&(N=-d/Math.sin(Z.angle/2),Q=new fabric.Point(j.x*N*_.x,j.y*N*_.y),Math.hypot(Q.x,Q.y)/d<=o.strokeMiterLimit))return a.push(F.add(Q)),void a.push(F.subtract(Q));N=-d*Math.SQRT2,Q=new fabric.Point(j.x*N*_.x,j.y*N*_.y),a.push(F.add(Q)),a.push(F.subtract(Q))}),a},transformPoint:function(i,o,s){return s?new fabric.Point(o[0]*i.x+o[2]*i.y,o[1]*i.x+o[3]*i.y):new fabric.Point(o[0]*i.x+o[2]*i.y+o[4],o[1]*i.x+o[3]*i.y+o[5])},makeBoundingBoxFromPoints:function(i,o){if(o)for(var s=0;s<i.length;s++)i[s]=fabric.util.transformPoint(i[s],o);var a=[i[0].x,i[1].x,i[2].x,i[3].x],d=fabric.util.array.min(a),_=fabric.util.array.max(a)-d,b=[i[0].y,i[1].y,i[2].y,i[3].y],C=fabric.util.array.min(b);return{left:d,top:C,width:_,height:fabric.util.array.max(b)-C}},invertTransform:function(i){var o=1/(i[0]*i[3]-i[1]*i[2]),s=[o*i[3],-o*i[1],-o*i[2],o*i[0]],a=fabric.util.transformPoint({x:i[4],y:i[5]},s,!0);return s[4]=-a.x,s[5]=-a.y,s},toFixed:function(i,o){return parseFloat(Number(i).toFixed(o))},parseUnit:function(i,o){var s=/\D{0,2}$/.exec(i),a=parseFloat(i);switch(o||(o=fabric.Text.DEFAULT_SVG_FONT_SIZE),s[0]){case"mm":return a*fabric.DPI/25.4;case"cm":return a*fabric.DPI/2.54;case"in":return a*fabric.DPI;case"pt":return a*fabric.DPI/72;case"pc":return a*fabric.DPI/72*12;case"em":return a*o;default:return a}},falseFunction:function(){return!1},getKlass:function(i,o){return i=fabric.util.string.camelize(i.charAt(0).toUpperCase()+i.slice(1)),fabric.util.resolveNamespace(o)[i]},getSvgAttributes:function(i){var o=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":o=o.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":o=o.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":o=o.concat(["offset","stop-color","stop-opacity"])}return o},resolveNamespace:function(i){if(!i)return fabric;var o,s=i.split("."),a=s.length,d=u||fabric.window;for(o=0;o<a;++o)d=d[s[o]];return d},loadImage:function(i,o,s,a){if(i){var d=fabric.util.createImage(),_=function(){o&&o.call(s,d,!1),d=d.onload=d.onerror=null};d.onload=_,d.onerror=function(){fabric.log("Error loading "+d.src),o&&o.call(s,null,!0),d=d.onload=d.onerror=null},0!==i.indexOf("data")&&null!=a&&(d.crossOrigin=a),"data:image/svg"===i.substring(0,14)&&(d.onload=null,fabric.util.loadImageInDom(d,_)),d.src=i}else o&&o.call(s,i)},loadImageInDom:function(i,o){var s=fabric.document.createElement("div");s.style.width=s.style.height="1px",s.style.left=s.style.top="-100%",s.style.position="absolute",s.appendChild(i),fabric.document.querySelector("body").appendChild(s),i.onload=function(){o(),s.parentNode.removeChild(s),s=null}},enlivenObjects:function(i,o,s,a){var d=[],_=0,b=(i=i||[]).length;function C(){++_===b&&o&&o(d.filter(function(w){return w}))}b?i.forEach(function(w,O){w&&w.type?fabric.util.getKlass(w.type,s).fromObject(w,function(A,F){F||(d[O]=A),a&&a(w,A,F),C()}):C()}):o&&o(d)},enlivenObjectEnlivables:function(i,o,s){var a=fabric.Object.ENLIVEN_PROPS.filter(function(d){return!!i[d]});fabric.util.enlivenObjects(a.map(function(d){return i[d]}),function(d){var _={};a.forEach(function(b,C){_[b]=d[C],o&&(o[b]=d[C])}),s&&s(_)})},enlivenPatterns:function(i,o){function s(){++d===_&&o&&o(a)}var a=[],d=0,_=(i=i||[]).length;_?i.forEach(function(b,C){b&&b.source?new fabric.Pattern(b,function(w){a[C]=w,s()}):(a[C]=b,s())}):o&&o(a)},groupSVGElements:function(i,o,s){var a;return i&&1===i.length?i[0]:(o&&(o.width&&o.height?o.centerPoint={x:o.width/2,y:o.height/2}:(delete o.width,delete o.height)),a=new fabric.Group(i,o),void 0!==s&&(a.sourcePath=s),a)},populateWithProperties:function(i,o,s){if(s&&Array.isArray(s))for(var a=0,d=s.length;a<d;a++)s[a]in i&&(o[s[a]]=i[s[a]])},createCanvasElement:function(){return fabric.document.createElement("canvas")},copyCanvasElement:function(i){var o=fabric.util.createCanvasElement();return o.width=i.width,o.height=i.height,o.getContext("2d").drawImage(i,0,0),o},toDataURL:function(i,o,s){return i.toDataURL("image/"+o,s)},createImage:function(){return fabric.document.createElement("img")},multiplyTransformMatrices:function(i,o,s){return[i[0]*o[0]+i[2]*o[1],i[1]*o[0]+i[3]*o[1],i[0]*o[2]+i[2]*o[3],i[1]*o[2]+i[3]*o[3],s?0:i[0]*o[4]+i[2]*o[5]+i[4],s?0:i[1]*o[4]+i[3]*o[5]+i[5]]},qrDecompose:function(i){var o=l(i[1],i[0]),s=c(i[0],2)+c(i[1],2),a=n(s),d=(i[0]*i[3]-i[2]*i[1])/a,_=l(i[0]*i[2]+i[1]*i[3],s);return{angle:o/t,scaleX:a,scaleY:d,skewX:_/t,skewY:0,translateX:i[4],translateY:i[5]}},calcRotateMatrix:function(i){if(!i.angle)return fabric.iMatrix.concat();var o=fabric.util.degreesToRadians(i.angle),s=fabric.util.cos(o),a=fabric.util.sin(o);return[s,a,-a,s,0,0]},calcDimensionsMatrix:function(i){var o=void 0===i.scaleX?1:i.scaleX,s=void 0===i.scaleY?1:i.scaleY,a=[i.flipX?-o:o,0,0,i.flipY?-s:s,0,0],d=fabric.util.multiplyTransformMatrices,_=fabric.util.degreesToRadians;return i.skewX&&(a=d(a,[1,0,Math.tan(_(i.skewX)),1],!0)),i.skewY&&(a=d(a,[1,Math.tan(_(i.skewY)),0,1],!0)),a},composeMatrix:function(i){var o=[1,0,0,1,i.translateX||0,i.translateY||0],s=fabric.util.multiplyTransformMatrices;return i.angle&&(o=s(o,fabric.util.calcRotateMatrix(i))),(1!==i.scaleX||1!==i.scaleY||i.skewX||i.skewY||i.flipX||i.flipY)&&(o=s(o,fabric.util.calcDimensionsMatrix(i))),o},resetObjectTransform:function(i){i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},saveObjectTransform:function(i){return{scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}},isTransparent:function(i,o,s,a){0<a&&(a<o?o-=a:o=0,a<s?s-=a:s=0);var d,_=!0,b=i.getImageData(o,s,2*a||1,2*a||1),C=b.data.length;for(d=3;d<C&&(_=b.data[d]<=0);d+=4);return b=null,_},parsePreserveAspectRatioAttribute:function(i){var o,s="meet",a=i.split(" ");return a&&a.length&&("meet"!==(s=a.pop())&&"slice"!==s?(o=s,s="meet"):a.length&&(o=a.pop())),{meetOrSlice:s,alignX:"none"!==o?o.slice(1,4):"none",alignY:"none"!==o?o.slice(5,8):"none"}},clearFabricFontCache:function(i){(i=(i||"").toLowerCase())?fabric.charWidthsCache[i]&&delete fabric.charWidthsCache[i]:fabric.charWidthsCache={}},limitDimsByArea:function(i,o){var s=Math.sqrt(o*i),a=Math.floor(o/s);return{x:Math.floor(s),y:a}},capValue:function(i,o,s){return Math.max(i,Math.min(o,s))},findScaleToFit:function(i,o){return Math.min(o.width/i.width,o.height/i.height)},findScaleToCover:function(i,o){return Math.max(o.width/i.width,o.height/i.height)},matrixToSVG:function(i){return"matrix("+i.map(function(o){return fabric.util.toFixed(o,fabric.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(i,o){var s=fabric.util.invertTransform(o),a=fabric.util.multiplyTransformMatrices(s,i.calcOwnMatrix());fabric.util.applyTransformToObject(i,a)},addTransformToObject:function(i,o){fabric.util.applyTransformToObject(i,fabric.util.multiplyTransformMatrices(o,i.calcOwnMatrix()))},applyTransformToObject:function(i,o){var s=fabric.util.qrDecompose(o),a=new fabric.Point(s.translateX,s.translateY);i.flipX=!1,i.flipY=!1,i.set("scaleX",s.scaleX),i.set("scaleY",s.scaleY),i.skewX=s.skewX,i.skewY=s.skewY,i.angle=s.angle,i.setPositionByOrigin(a,"center","center")},sizeAfterTransform:function(i,o,s){var a=i/2,d=o/2,_=[{x:-a,y:-d},{x:a,y:-d},{x:-a,y:d},{x:a,y:d}],b=fabric.util.calcDimensionsMatrix(s),C=fabric.util.makeBoundingBoxFromPoints(_,b);return{x:C.width,y:C.height}},mergeClipPaths:function(i,o){var s=i,a=o;s.inverted&&!a.inverted&&(s=o,a=i),fabric.util.applyTransformToObject(a,fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(s.calcTransformMatrix()),a.calcTransformMatrix()));var d=s.inverted&&a.inverted;return d&&(s.inverted=a.inverted=!1),new fabric.Group([s],{clipPath:a,inverted:d})}}}(typeof exports<"u"?exports:this),function(){var u=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function c(C,w,O,A){var F=Math.atan2(w,C),N=Math.atan2(A,O);return F<=N?N-F:2*Math.PI-(F-N)}function t(C,w,O){for(var j=function(Y,tt,st,W,I,q,lt){var et=Math.PI,ft=lt*et/180,pt=fabric.util.sin(ft),H=fabric.util.cos(ft),mt=0,yt=0,G=-H*Y*.5-pt*tt*.5,bt=-H*tt*.5+pt*Y*.5,vt=(st=Math.abs(st))*st,Pt=(W=Math.abs(W))*W,Bt=bt*bt,Yt=G*G,me=vt*Pt-vt*Bt-Pt*Yt,ne=0;if(me<0){var qt=Math.sqrt(1-me/(vt*Pt));st*=qt,W*=qt}else ne=(I===q?-1:1)*Math.sqrt(me/(vt*Bt+Pt*Yt));var he=ne*st*bt/W,Ot=-ne*W*G/st,ri=H*he-pt*Ot+.5*Y,Be=pt*he+H*Ot+.5*tt,Wt=c(1,0,(G-he)/st,(bt-Ot)/W),Ce=c((G-he)/st,(bt-Ot)/W,(-G-he)/st,(-bt-Ot)/W);0===q&&0<Ce?Ce-=2*et:1===q&&Ce<0&&(Ce+=2*et);for(var Ke,Ye,ve,le,Ae,ke,jt,De,si,mi,Pi,Ve,ue,Pe,Ie,Ue,Ge,_e=Math.ceil(Math.abs(Ce/et*2)),E=[],M=Ce/_e,R=8/3*Math.sin(M/4)*Math.sin(M/4)/Math.sin(M/2),U=Wt+M,ht=0;ht<_e;ht++)E[ht]=(Ye=U,ve=H,le=pt,Ae=st,ke=W,jt=ri,De=Be,si=R,mi=mt,Pi=yt,Ve=fabric.util.cos(Ke=Wt),["C",mi+si*(-ve*Ae*(ue=fabric.util.sin(Ke))-le*ke*Ve),Pi+si*(-le*Ae*ue+ve*ke*Ve),(Ue=ve*Ae*(Pe=fabric.util.cos(Ye))-le*ke*(Ie=fabric.util.sin(Ye))+jt)+si*(ve*Ae*Ie+le*ke*Pe),(Ge=le*Ae*Pe+ve*ke*Ie+De)+si*(le*Ae*Ie-ve*ke*Pe),Ue,Ge]),mt=E[ht][5],yt=E[ht][6],Wt=U,U+=M;return E}(O[6]-C,O[7]-w,O[1],O[2],O[4],O[5],O[3]),v=0,X=j.length;v<X;v++)j[v][1]+=C,j[v][2]+=w,j[v][3]+=C,j[v][4]+=w,j[v][5]+=C,j[v][6]+=w;return j}function e(C,w,O,A){return Math.sqrt((O-C)*(O-C)+(A-w)*(A-w))}function i(C,w,O,A,F,N,Q,Z){return function(j){var v,X,Y,tt,st=(tt=j)*tt*tt,W=3*(Y=j)*Y*(1-Y),I=3*(X=j)*(1-X)*(1-X),q=(1-(v=j))*(1-v)*(1-v);return{x:Q*st+F*W+O*I+C*q,y:Z*st+N*W+A*I+w*q}}}function o(C,w,O,A,F,N,Q,Z){return function(j){var v=1-j;return Math.atan2(3*v*v*(A-w)+6*v*j*(N-A)+3*j*j*(Z-N),3*v*v*(O-C)+6*v*j*(F-O)+3*j*j*(Q-F))}}function s(C,w,O,A,F,N){return function(Q){var Z,j,v,X=(v=Q)*v,Y=2*(j=Q)*(1-j),tt=(1-(Z=Q))*(1-Z);return{x:F*X+O*Y+C*tt,y:N*X+A*Y+w*tt}}}function a(C,w,O,A,F,N){return function(Q){var Z=1-Q;return Math.atan2(2*Z*(A-w)+2*Q*(N-A),2*Z*(O-C)+2*Q*(F-O))}}function d(C,w,O){var A,F,N={x:w,y:O},Q=0;for(F=1;F<=100;F+=1)A=C(F/100),Q+=e(N.x,N.y,A.x,A.y),N=A;return Q}function b(C){for(var w,O,A,F,N=0,Q=C.length,Z=0,j=0,v=0,X=0,Y=[],tt=0;tt<Q;tt++){switch(A={x:Z,y:j,command:(w=C[tt])[0]},w[0]){case"M":A.length=0,v=Z=w[1],X=j=w[2];break;case"L":A.length=e(Z,j,w[1],w[2]),Z=w[1],j=w[2];break;case"C":O=i(Z,j,w[1],w[2],w[3],w[4],w[5],w[6]),F=o(Z,j,w[1],w[2],w[3],w[4],w[5],w[6]),A.iterator=O,A.angleFinder=F,A.length=d(O,Z,j),Z=w[5],j=w[6];break;case"Q":O=s(Z,j,w[1],w[2],w[3],w[4]),F=a(Z,j,w[1],w[2],w[3],w[4]),A.iterator=O,A.angleFinder=F,A.length=d(O,Z,j),Z=w[3],j=w[4];break;case"Z":case"z":A.destX=v,A.destY=X,A.length=e(Z,j,v,X),Z=v,j=X}N+=A.length,Y.push(A)}return Y.push({length:N,x:Z,y:j}),Y}fabric.util.joinPath=function(C){return C.map(function(w){return w.join(" ")}).join(" ")},fabric.util.parsePath=function(C){var w,O,A,F,N,Q=[],Z=[],j=fabric.rePathCommand,v="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",X="("+v+")"+fabric.commaWsp,Y="([01])"+fabric.commaWsp+"?",tt=new RegExp(X+"?"+X+"?"+X+Y+Y+X+"?("+v+")","g");if(!C||!C.match)return Q;for(var st,W=0,I=(N=C.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;W<I;W++){F=(w=N[W]).slice(1).trim(),Z.length=0;var q=w.charAt(0);if(st=[q],"a"===q.toLowerCase())for(var lt;lt=tt.exec(F);)for(var et=1;et<lt.length;et++)Z.push(lt[et]);else for(;A=j.exec(F);)Z.push(A[0]);et=0;for(var ft=Z.length;et<ft;et++)O=parseFloat(Z[et]),isNaN(O)||st.push(O);var pt=n[q.toLowerCase()],H=l[q]||q;if(st.length-1>pt)for(var mt=1,yt=st.length;mt<yt;mt+=pt)Q.push([q].concat(st.slice(mt,mt+pt))),q=H;else Q.push(st)}return Q},fabric.util.makePathSimpler=function(C){var w,O,A,F,N,Q,Z=0,j=0,v=C.length,X=0,Y=0,tt=[];for(O=0;O<v;++O){switch(A=!1,(w=C[O].slice(0))[0]){case"l":w[0]="L",w[1]+=Z,w[2]+=j;case"L":Z=w[1],j=w[2];break;case"h":w[1]+=Z;case"H":w[0]="L",w[2]=j,Z=w[1];break;case"v":w[1]+=j;case"V":w[0]="L",j=w[1],w[1]=Z,w[2]=j;break;case"m":w[0]="M",w[1]+=Z,w[2]+=j;case"M":Z=w[1],j=w[2],X=w[1],Y=w[2];break;case"c":w[0]="C",w[1]+=Z,w[2]+=j,w[3]+=Z,w[4]+=j,w[5]+=Z,w[6]+=j;case"C":N=w[3],Q=w[4],Z=w[5],j=w[6];break;case"s":w[0]="S",w[1]+=Z,w[2]+=j,w[3]+=Z,w[4]+=j;case"S":"C"===F?(N=2*Z-N,Q=2*j-Q):(N=Z,Q=j),Z=w[3],j=w[4],w[0]="C",w[5]=w[3],w[6]=w[4],w[3]=w[1],w[4]=w[2],w[1]=N,w[2]=Q,N=w[3],Q=w[4];break;case"q":w[0]="Q",w[1]+=Z,w[2]+=j,w[3]+=Z,w[4]+=j;case"Q":N=w[1],Q=w[2],Z=w[3],j=w[4];break;case"t":w[0]="T",w[1]+=Z,w[2]+=j;case"T":"Q"===F?(N=2*Z-N,Q=2*j-Q):(N=Z,Q=j),w[0]="Q",Z=w[1],j=w[2],w[1]=N,w[2]=Q,w[3]=Z,w[4]=j;break;case"a":w[0]="A",w[6]+=Z,w[7]+=j;case"A":A=!0,tt=tt.concat(t(Z,j,w)),Z=w[6],j=w[7];break;case"z":case"Z":Z=X,j=Y}A||tt.push(w),F=w[0]}return tt},fabric.util.getSmoothPathFromPoints=function(C,w){var O,A=[],F=new fabric.Point(C[0].x,C[0].y),N=new fabric.Point(C[1].x,C[1].y),Q=C.length,Z=1,j=0,v=2<Q;for(v&&(Z=C[2].x<N.x?-1:C[2].x===N.x?0:1,j=C[2].y<N.y?-1:C[2].y===N.y?0:1),A.push(["M",F.x-Z*(w=w||0),F.y-j*w]),O=1;O<Q;O++){if(!F.eq(N)){var X=F.midPointFrom(N);A.push(["Q",F.x,F.y,X.x,X.y])}F=C[O],O+1<C.length&&(N=C[O+1])}return v&&(Z=F.x>C[O-2].x?1:F.x===C[O-2].x?0:-1,j=F.y>C[O-2].y?1:F.y===C[O-2].y?0:-1),A.push(["L",F.x+Z*w,F.y+j*w]),A},fabric.util.getPathSegmentsInfo=b,fabric.util.getBoundsOfCurve=function(C,w,O,A,F,N,Q,Z){var j;if(fabric.cachesBoundsOfCurve&&(j=u.call(arguments),fabric.boundsOfCurveCache[j]))return fabric.boundsOfCurveCache[j];var v,X,Y,tt,st,W,I,q,lt=Math.sqrt,et=Math.min,ft=Math.max,pt=Math.abs,H=[],mt=[[],[]];X=6*C-12*O+6*F,v=-3*C+9*O-9*F+3*Q,Y=3*O-3*C;for(var yt=0;yt<2;++yt)if(0<yt&&(X=6*w-12*A+6*N,v=-3*w+9*A-9*N+3*Z,Y=3*A-3*w),pt(v)<1e-12){if(pt(X)<1e-12)continue;0<(tt=-Y/X)&&tt<1&&H.push(tt)}else(I=X*X-4*Y*v)<0||(0<(st=(-X+(q=lt(I)))/(2*v))&&st<1&&H.push(st),0<(W=(-X-q)/(2*v))&&W<1&&H.push(W));for(var G,vt,Pt=H.length,Bt=Pt;Pt--;)G=(vt=1-(tt=H[Pt]))*vt*vt*C+3*vt*vt*tt*O+3*vt*tt*tt*F+tt*tt*tt*Q,mt[0][Pt]=G,mt[1][Pt]=vt*vt*vt*w+3*vt*vt*tt*A+3*vt*tt*tt*N+tt*tt*tt*Z;mt[0][Bt]=C,mt[1][Bt]=w,mt[0][Bt+1]=Q,mt[1][Bt+1]=Z;var Yt=[{x:et.apply(null,mt[0]),y:et.apply(null,mt[1])},{x:ft.apply(null,mt[0]),y:ft.apply(null,mt[1])}];return fabric.cachesBoundsOfCurve&&(fabric.boundsOfCurveCache[j]=Yt),Yt},fabric.util.getPointOnPath=function(C,w,O){O||(O=b(C));for(var A=0;0<w-O[A].length&&A<O.length-2;)w-=O[A].length,A++;var F,N=O[A],Q=w/N.length,j=C[A];switch(N.command){case"M":return{x:N.x,y:N.y,angle:0};case"Z":case"z":return(F=new fabric.Point(N.x,N.y).lerp(new fabric.Point(N.destX,N.destY),Q)).angle=Math.atan2(N.destY-N.y,N.destX-N.x),F;case"L":return(F=new fabric.Point(N.x,N.y).lerp(new fabric.Point(j[1],j[2]),Q)).angle=Math.atan2(j[2]-N.y,j[1]-N.x),F;case"C":case"Q":return function _(C,w){for(var O,A,F,N=0,Q=0,Z=C.iterator,j={x:C.x,y:C.y},v=.01,X=C.angleFinder;Q<w&&1e-4<v;)O=Z(N),F=N,w<(A=e(j.x,j.y,O.x,O.y))+Q?(N-=v,v/=2):(j=O,N+=v,Q+=A);return O.angle=X(F),O}(N,w)}},fabric.util.transformPath=function(C,w,O){return O&&(w=fabric.util.multiplyTransformMatrices(w,[1,0,0,1,-O.x,-O.y])),C.map(function(A){for(var F=A.slice(0),N={},Q=1;Q<A.length-1;Q+=2)N.x=A[Q],N.y=A[Q+1],N=fabric.util.transformPoint(N,w),F[Q]=N.x,F[Q+1]=N.y;return F})}}(),function(){var u=Array.prototype.slice;function n(l,c,t){if(l&&0!==l.length){var e=l.length-1,i=c?l[e][c]:l[e];if(c)for(;e--;)t(l[e][c],i)&&(i=l[e][c]);else for(;e--;)t(l[e],i)&&(i=l[e]);return i}}fabric.util.array={fill:function(l,c){for(var t=l.length;t--;)l[t]=c;return l},invoke:function(l,c){for(var t=u.call(arguments,2),e=[],i=0,o=l.length;i<o;i++)e[i]=t.length?l[i][c].apply(l[i],t):l[i][c].call(l[i]);return e},min:function(l,c){return n(l,c,function(t,e){return t<e})},max:function(l,c){return n(l,c,function(t,e){return e<=t})}}}(),function(){function u(n,l,c){if(c)if(!fabric.isLikelyNode&&l instanceof Element)n=l;else if(l instanceof Array){n=[];for(var t=0,e=l.length;t<e;t++)n[t]=u({},l[t],c)}else if(l&&"object"==typeof l)for(var i in l)"canvas"===i||"group"===i?n[i]=null:l.hasOwnProperty(i)&&(n[i]=u({},l[i],c));else n=l;else for(var i in l)n[i]=l[i];return n}fabric.util.object={extend:u,clone:function(n,l){return u({},n,l)}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function u(n,l){var c=n.charCodeAt(l);if(isNaN(c))return"";if(c<55296||57343<c)return n.charAt(l);if(55296<=c&&c<=56319){if(n.length<=l+1)throw"High surrogate without following low surrogate";var t=n.charCodeAt(l+1);if(t<56320||57343<t)throw"High surrogate without following low surrogate";return n.charAt(l)+n.charAt(l+1)}if(0===l)throw"Low surrogate without preceding high surrogate";var e=n.charCodeAt(l-1);if(e<55296||56319<e)throw"Low surrogate without preceding high surrogate";return!1}fabric.util.string={camelize:function(n){return n.replace(/-+(.)?/g,function(l,c){return c?c.toUpperCase():""})},capitalize:function(n,l){return n.charAt(0).toUpperCase()+(l?n.slice(1):n.slice(1).toLowerCase())},escapeXml:function(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(n){var l,c=0,t=[];for(c=0;c<n.length;c++)!1!==(l=u(n,c))&&t.push(l);return t}}}(),function(){var u=Array.prototype.slice,n=function(){},l=function(){for(var i in{toString:1})if("toString"===i)return!1;return!0}(),c=function(i,o,s){for(var a in o)i.prototype[a]=a in i.prototype&&"function"==typeof i.prototype[a]&&-1<(o[a]+"").indexOf("callSuper")?function(d){return function(){var _=this.constructor.superclass;this.constructor.superclass=s;var b=o[d].apply(this,arguments);if(this.constructor.superclass=_,"initialize"!==d)return b}}(a):o[a],l&&(o.toString!==Object.prototype.toString&&(i.prototype.toString=o.toString),o.valueOf!==Object.prototype.valueOf&&(i.prototype.valueOf=o.valueOf))};function t(){}function e(i){for(var o=null,s=this;s.constructor.superclass;){var a=s.constructor.superclass.prototype[i];if(s[i]!==a){o=a;break}s=s.constructor.superclass.prototype}return o?1<arguments.length?o.apply(this,u.call(arguments,1)):o.call(this):console.log("tried to callSuper "+i+", method not found in prototype chain",this)}fabric.util.createClass=function(){var i=null,o=u.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"==typeof o[0]&&(i=o.shift()),s.superclass=i,s.subclasses=[],i&&(t.prototype=i.prototype,s.prototype=new t,i.subclasses.push(s));for(var a=0,d=o.length;a<d;a++)c(s,o[a],i);return s.prototype.initialize||(s.prototype.initialize=n),(s.prototype.constructor=s).prototype.callSuper=e,s}}(),function(){var u=!!fabric.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];fabric.util.addListener=function(l,c,t,e){l&&l.addEventListener(c,t,!u&&e)},fabric.util.removeListener=function(l,c,t,e){l&&l.removeEventListener(c,t,!u&&e)},fabric.util.getPointer=function(l){var c,t,i=fabric.util.getScrollLeftTop(l.target),o=(t=(c=l).changedTouches)&&t[0]?t[0]:c;return{x:o.clientX+i.left,y:o.clientY+i.top}},fabric.util.isTouchEvent=function(l){return-1<n.indexOf(l.type)||"touch"===l.pointerType}}(),function(){var u=fabric.document.createElement("div"),c=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,t=function(e){return e};"string"==typeof u.style.opacity?t=function(e,i){return e.style.opacity=i,e}:"string"==typeof u.style.filter&&(t=function(e,i){var o=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(o.zoom=1),c.test(o.filter)?o.filter=o.filter.replace(c,i=.9999<=i?"":"alpha(opacity="+100*i+")"):o.filter+=" alpha(opacity="+100*i+")",e}),fabric.util.setStyle=function(e,i){var o=e.style;if(!o)return e;if("string"==typeof i)return e.style.cssText+=";"+i,-1<i.indexOf("opacity")?t(e,i.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var s in i)"opacity"===s?t(e,i[s]):o["float"===s||"cssFloat"===s?void 0===o.styleFloat?"cssFloat":"styleFloat":s]=i[s];return e}}(),function(){var n,l,c,t,u=Array.prototype.slice,e=function(s){return u.call(s,0)};try{n=e(fabric.document.childNodes)instanceof Array}catch{}function i(s,a){var d=fabric.document.createElement(s);for(var _ in a)"class"===_?d.className=a[_]:"for"===_?d.htmlFor=a[_]:d.setAttribute(_,a[_]);return d}function o(s){for(var a=0,d=0,_=fabric.document.documentElement,b=fabric.document.body||{scrollLeft:0,scrollTop:0};s&&(s.parentNode||s.host)&&((s=s.parentNode||s.host)===fabric.document?(a=b.scrollLeft||_.scrollLeft||0,d=b.scrollTop||_.scrollTop||0):(a+=s.scrollLeft||0,d+=s.scrollTop||0),1!==s.nodeType||"fixed"!==s.style.position););return{left:a,top:d}}n||(e=function(s){for(var a=new Array(s.length),d=s.length;d--;)a[d]=s[d];return a}),l=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(s,a){var d=fabric.document.defaultView.getComputedStyle(s,null);return d?d[a]:void 0}:function(s,a){var d=s.style[a];return!d&&s.currentStyle&&(d=s.currentStyle[a]),d},t="userSelect"in(c=fabric.document.documentElement.style)?"userSelect":"MozUserSelect"in c?"MozUserSelect":"WebkitUserSelect"in c?"WebkitUserSelect":"KhtmlUserSelect"in c?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(s){return void 0!==s.onselectstart&&(s.onselectstart=fabric.util.falseFunction),t?s.style[t]="none":"string"==typeof s.unselectable&&(s.unselectable="on"),s},fabric.util.makeElementSelectable=function(s){return void 0!==s.onselectstart&&(s.onselectstart=null),t?s.style[t]="":"string"==typeof s.unselectable&&(s.unselectable=""),s},fabric.util.setImageSmoothing=function(s,a){s.imageSmoothingEnabled=s.imageSmoothingEnabled||s.webkitImageSmoothingEnabled||s.mozImageSmoothingEnabled||s.msImageSmoothingEnabled||s.oImageSmoothingEnabled,s.imageSmoothingEnabled=a},fabric.util.getById=function(s){return"string"==typeof s?fabric.document.getElementById(s):s},fabric.util.toArray=e,fabric.util.addClass=function(s,a){s&&-1===(" "+s.className+" ").indexOf(" "+a+" ")&&(s.className+=(s.className?" ":"")+a)},fabric.util.makeElement=i,fabric.util.wrapElement=function(s,a,d){return"string"==typeof a&&(a=i(a,d)),s.parentNode&&s.parentNode.replaceChild(a,s),a.appendChild(s),a},fabric.util.getScrollLeftTop=o,fabric.util.getElementOffset=function(s){var a,d,_=s&&s.ownerDocument,b={left:0,top:0},C={left:0,top:0},w={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!_)return C;for(var O in w)C[w[O]]+=parseInt(l(s,O),10)||0;return a=_.documentElement,void 0!==s.getBoundingClientRect&&(b=s.getBoundingClientRect()),d=o(s),{left:b.left+d.left-(a.clientLeft||0)+C.left,top:b.top+d.top-(a.clientTop||0)+C.top}},fabric.util.getNodeCanvas=function(s){var a=fabric.jsdomImplForWrapper(s);return a._canvas||a._image},fabric.util.cleanUpJsdomNode=function(s){if(fabric.isLikelyNode){var a=fabric.jsdomImplForWrapper(s);a&&(a._image=null,a._canvas=null,a._currentSrc=null,a._attributes=null,a._classList=null)}}}(),function(){function u(){}fabric.util.request=function(n,l){l||(l={});var c,t,e=l.method?l.method.toUpperCase():"GET",i=l.onComplete||function(){},o=new fabric.window.XMLHttpRequest,s=l.body||l.parameters;return o.onreadystatechange=function(){4===o.readyState&&(i(o),o.onreadystatechange=u)},"GET"===e&&(s=null,"string"==typeof l.parameters&&(t=l.parameters,n=(c=n)+(/\?/.test(c)?"&":"?")+t)),o.open(e,n,!0),"POST"!==e&&"PUT"!==e||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(s),o}}(),fabric.log=console.log,fabric.warn=console.warn,function(){var u=fabric.util.object.extend,n=fabric.util.object.clone,l=[];function c(){return!1}function t(s,a,d,_){return-d*Math.cos(s/_*(Math.PI/2))+d+a}fabric.util.object.extend(l,{cancelAll:function(){var s=this.splice(0);return s.forEach(function(a){a.cancel()}),s},cancelByCanvas:function(s){if(!s)return[];var a=this.filter(function(d){return"object"==typeof d.target&&d.target.canvas===s});return a.forEach(function(d){d.cancel()}),a},cancelByTarget:function(s){var a=this.findAnimationsByTarget(s);return a.forEach(function(d){d.cancel()}),a},findAnimationIndex:function(s){return this.indexOf(this.findAnimation(s))},findAnimation:function(s){return this.find(function(a){return a.cancel===s})},findAnimationsByTarget:function(s){return s?this.filter(function(a){return a.target===s}):[]}});var e=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(s){return fabric.window.setTimeout(s,1e3/60)},i=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;function o(){return e.apply(fabric.window,arguments)}fabric.util.animate=function(s){s||(s={});var a,d=!1,_=function(){var b=fabric.runningAnimations.indexOf(a);return-1<b&&fabric.runningAnimations.splice(b,1)[0]};return a=u(n(s),{cancel:function(){return d=!0,_()},currentValue:"startValue"in s?s.startValue:0,completionRate:0,durationRate:0}),fabric.runningAnimations.push(a),o(function(b){var C,w=b||+new Date,O=s.duration||500,A=w+O,F=s.onChange||c,N=s.abort||c,Q=s.onComplete||c,Z=s.easing||t,j="startValue"in s&&0<s.startValue.length,v="startValue"in s?s.startValue:0,X="endValue"in s?s.endValue:100,Y=s.byValue||(j?v.map(function(tt,st){return X[st]-v[st]}):X-v);s.onStart&&s.onStart(),function tt(st){var W=A<(C=st||+new Date)?O:C-w,I=W/O,q=j?v.map(function(et,ft){return Z(W,v[ft],Y[ft],O)}):Z(W,v,Y,O),lt=Math.abs(j?(q[0]-v[0])/Y[0]:(q-v)/Y);if(a.currentValue=j?q.slice():q,a.completionRate=lt,a.durationRate=I,!d){if(!N(q,lt,I))return A<C?(a.currentValue=j?X.slice():X,a.completionRate=1,a.durationRate=1,F(j?X.slice():X,1,1),Q(X,1,1),void _()):(F(q,lt,I),void o(tt));_()}}(w)}),a.cancel},fabric.util.requestAnimFrame=o,fabric.util.cancelAnimFrame=function(){return i.apply(fabric.window,arguments)},fabric.runningAnimations=l}(),function(){function u(n,l,c){var t="rgba("+parseInt(n[0]+c*(l[0]-n[0]),10)+","+parseInt(n[1]+c*(l[1]-n[1]),10)+","+parseInt(n[2]+c*(l[2]-n[2]),10);return(t+=","+(n&&l?parseFloat(n[3]+c*(l[3]-n[3])):1))+")"}fabric.util.animateColor=function(n,l,c,t){var e=new fabric.Color(n).getSource(),i=new fabric.Color(l).getSource(),o=t.onComplete,s=t.onChange;return fabric.util.animate(fabric.util.object.extend(t=t||{},{duration:c||500,startValue:e,endValue:i,byValue:i,easing:function(a,d,_,b){return u(d,_,t.colorEasing?t.colorEasing(a,b):1-Math.cos(a/b*(Math.PI/2)))},onComplete:function(a,d,_){if(o)return o(u(i,i,0),d,_)},onChange:function(a,d,_){if(s){if(Array.isArray(a))return s(u(a,a,0),d,_);s(a,d,_)}}}))}}(),function(){function u(t,e,i,o){return t<Math.abs(e)?(t=e,o=i/4):o=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:o}}function n(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function l(t,e,i,o){return i-c(o-t,0,i,o)+e}function c(t,e,i,o){return(t/=o)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,o){return i*(t/=o)*t+e},easeOutQuad:function(t,e,i,o){return-i*(t/=o)*(t-2)+e},easeInOutQuad:function(t,e,i,o){return(t/=o/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,o){return i*(t/=o)*t*t+e},easeOutCubic:function(t,e,i,o){return i*((t=t/o-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,o){return(t/=o/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,o){return i*(t/=o)*t*t*t+e},easeOutQuart:function(t,e,i,o){return-i*((t=t/o-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,o){return(t/=o/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,o){return i*(t/=o)*t*t*t*t+e},easeOutQuint:function(t,e,i,o){return i*((t=t/o-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,o){return(t/=o/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,o){return-i*Math.cos(t/o*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,o){return i*Math.sin(t/o*(Math.PI/2))+e},easeInOutSine:function(t,e,i,o){return-i/2*(Math.cos(Math.PI*t/o)-1)+e},easeInExpo:function(t,e,i,o){return 0===t?e:i*Math.pow(2,10*(t/o-1))+e},easeOutExpo:function(t,e,i,o){return t===o?e+i:i*(1-Math.pow(2,-10*t/o))+e},easeInOutExpo:function(t,e,i,o){return 0===t?e:t===o?e+i:(t/=o/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,o){return-i*(Math.sqrt(1-(t/=o)*t)-1)+e},easeOutCirc:function(t,e,i,o){return i*Math.sqrt(1-(t=t/o-1)*t)+e},easeInOutCirc:function(t,e,i,o){return(t/=o/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,o){var s=0;return 0===t?e:1==(t/=o)?e+i:(s||(s=.3*o),-n(u(i,i,s,1.70158),t,o)+e)},easeOutElastic:function(t,e,i,o){var s=0;if(0===t)return e;if(1==(t/=o))return e+i;s||(s=.3*o);var a=u(i,i,s,1.70158);return a.a*Math.pow(2,-10*t)*Math.sin((t*o-a.s)*(2*Math.PI)/a.p)+a.c+e},easeInOutElastic:function(t,e,i,o){var s=0;if(0===t)return e;if(2==(t/=o/2))return e+i;s||(s=o*(.3*1.5));var a=u(i,i,s,1.70158);return t<1?-.5*n(a,t,o)+e:a.a*Math.pow(2,-10*(t-=1))*Math.sin((t*o-a.s)*(2*Math.PI)/a.p)*.5+a.c+e},easeInBack:function(t,e,i,o,s){return void 0===s&&(s=1.70158),i*(t/=o)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,i,o,s){return void 0===s&&(s=1.70158),i*((t=t/o-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,i,o,s){return void 0===s&&(s=1.70158),(t/=o/2)<1?i/2*(t*t*((1+(s*=1.525))*t-s))+e:i/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e},easeInBounce:l,easeOutBounce:c,easeInOutBounce:function(t,e,i,o){return t<o/2?.5*l(2*t,0,i,o)+e:.5*c(2*t-o,0,i,o)+.5*i+e}}}(),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.extend,c=n.util.object.clone,t=n.util.toFixed,e=n.util.parseUnit,i=n.util.multiplyTransformMatrices,o={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},s={stroke:"strokeOpacity",fill:"fillOpacity"},a="font-size",d="clip-path";function _(j,v,X,Y){var tt,st=Array.isArray(v);if("fill"!==j&&"stroke"!==j||"none"!==v){if("strokeUniform"===j)return"non-scaling-stroke"===v;if("strokeDashArray"===j)v="none"===v?null:v.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===j)v=X&&X.transformMatrix?i(X.transformMatrix,n.parseTransformAttribute(v)):n.parseTransformAttribute(v);else if("visible"===j)v="none"!==v&&"hidden"!==v,X&&!1===X.visible&&(v=!1);else if("opacity"===j)v=parseFloat(v),X&&void 0!==X.opacity&&(v*=X.opacity);else if("textAnchor"===j)v="start"===v?"left":"end"===v?"right":"center";else if("charSpacing"===j)tt=e(v,Y)/Y*1e3;else if("paintFirst"===j){var W=v.indexOf("fill"),I=v.indexOf("stroke");v="fill",(-1<W&&-1<I&&I<W||-1===W&&-1<I)&&(v="stroke")}else{if("href"===j||"xlink:href"===j||"font"===j)return v;if("imageSmoothing"===j)return"optimizeQuality"===v;tt=st?v.map(e):e(v,Y)}}else v="";return!st&&isNaN(tt)?v:tt}function b(j){return new RegExp("^("+j.join("|")+")\\b","i")}function C(j,v){var Y,tt,st,W=[];for(tt=0,st=v.length;tt<st;tt++)Y=j.getElementsByTagName(v[tt]),W=W.concat(Array.prototype.slice.call(Y));return W}function w(j,v){var X,Y=!0;return(X=O(j,v.pop()))&&v.length&&(Y=function(tt,st){for(var W,I=!0;tt.parentNode&&1===tt.parentNode.nodeType&&st.length;)I&&(W=st.pop()),I=O(tt=tt.parentNode,W);return 0===st.length}(j,v)),X&&Y&&0===v.length}function O(j,v){var X,Y,tt=j.nodeName,st=j.getAttribute("class"),W=j.getAttribute("id");if(X=new RegExp("^"+tt,"i"),v=v.replace(X,""),W&&v.length&&(X=new RegExp("#"+W+"(?![a-zA-Z\\-]+)","i"),v=v.replace(X,"")),st&&v.length)for(Y=(st=st.split(" ")).length;Y--;)X=new RegExp("\\."+st[Y]+"(?![a-zA-Z\\-]+)","i"),v=v.replace(X,"");return 0===v.length}function A(j,v){var X;if(j.getElementById&&(X=j.getElementById(v)),X)return X;var Y,tt,st,W=j.getElementsByTagName("*");for(tt=0,st=W.length;tt<st;tt++)if(v===(Y=W[tt]).getAttribute("id"))return Y}n.svgValidTagNamesRegEx=b(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),n.svgViewBoxElementsRegEx=b(["symbol","image","marker","pattern","view","svg"]),n.svgInvalidAncestorsRegEx=b(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),n.svgValidParentsRegEx=b(["symbol","g","a","svg","clipPath","defs"]),n.cssRules={},n.gradientDefs={},n.clipPaths={},n.parseTransformAttribute=function(){function j(I,q,lt){I[lt]=Math.tan(n.util.degreesToRadians(q[0]))}var v=n.iMatrix,X=n.reNum,Y=n.commaWsp,tt="(?:(?:(matrix)\\s*\\(\\s*("+X+")"+Y+"("+X+")"+Y+"("+X+")"+Y+"("+X+")"+Y+"("+X+")"+Y+"("+X+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+X+")(?:"+Y+"("+X+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+X+")(?:"+Y+"("+X+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+X+")(?:"+Y+"("+X+")"+Y+"("+X+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+X+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+X+")\\s*\\)))",st=new RegExp("^\\s*(?:(?:"+tt+"(?:"+Y+"*"+tt+")*)?)\\s*$"),W=new RegExp(tt,"g");return function(I){var q=v.concat(),lt=[];if(!I||I&&!st.test(I))return q;I.replace(W,function(ft){var pt,H,mt,yt,G,bt,vt,Pt,Bt,Yt,me,ne,qt=new RegExp(tt).exec(ft).filter(function(ri){return!!ri}),he=qt[1],Ot=qt.slice(2).map(parseFloat);switch(he){case"translate":(me=q)[4]=(ne=Ot)[0],2===ne.length&&(me[5]=ne[1]);break;case"rotate":Ot[0]=n.util.degreesToRadians(Ot[0]),G=q,vt=n.util.cos((bt=Ot)[0]),Pt=n.util.sin(bt[0]),Yt=Bt=0,3===bt.length&&(Bt=bt[1],Yt=bt[2]),G[0]=vt,G[1]=Pt,G[2]=-Pt,G[3]=vt,G[4]=Bt-(vt*Bt-Pt*Yt),G[5]=Yt-(Pt*Bt+vt*Yt);break;case"scale":mt=(H=Ot)[0],yt=2===H.length?H[1]:H[0],(pt=q)[0]=mt,pt[3]=yt;break;case"skewX":j(q,Ot,2);break;case"skewY":j(q,Ot,1);break;case"matrix":q=Ot}lt.push(q.concat()),q=v.concat()});for(var et=lt[0];1<lt.length;)lt.shift(),et=n.util.multiplyTransformMatrices(et,lt[0]);return et}}();var F=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function N(j){if(!n.svgViewBoxElementsRegEx.test(j.nodeName))return{};var v,X,Y,tt,st,W,I=j.getAttribute("viewBox"),q=1,lt=1,et=j.getAttribute("width"),ft=j.getAttribute("height"),pt=j.getAttribute("x")||0,H=j.getAttribute("y")||0,mt=j.getAttribute("preserveAspectRatio")||"",yt=!I||!(I=I.match(F)),G=!et||!ft||"100%"===et||"100%"===ft,bt=yt&&G,vt={},Pt="",Bt=0,Yt=0;if(vt.width=0,vt.height=0,vt.toBeParsed=bt,yt&&(pt||H)&&j.parentNode&&"#document"!==j.parentNode.nodeName&&(Pt=" translate("+e(pt)+" "+e(H)+") ",st=(j.getAttribute("transform")||"")+Pt,j.setAttribute("transform",st),j.removeAttribute("x"),j.removeAttribute("y")),bt)return vt;if(yt)return vt.width=e(et),vt.height=e(ft),vt;if(v=-parseFloat(I[1]),X=-parseFloat(I[2]),Y=parseFloat(I[3]),tt=parseFloat(I[4]),vt.minX=v,vt.minY=X,vt.viewBoxWidth=Y,vt.viewBoxHeight=tt,G?(vt.width=Y,vt.height=tt):(vt.width=e(et),vt.height=e(ft),q=vt.width/Y,lt=vt.height/tt),"none"!==(mt=n.util.parsePreserveAspectRatioAttribute(mt)).alignX&&("meet"===mt.meetOrSlice&&(lt=q=lt<q?lt:q),"slice"===mt.meetOrSlice&&(lt=q=lt<q?q:lt),Bt=vt.width-Y*q,Yt=vt.height-tt*q,"Mid"===mt.alignX&&(Bt/=2),"Mid"===mt.alignY&&(Yt/=2),"Min"===mt.alignX&&(Bt=0),"Min"===mt.alignY&&(Yt=0)),1===q&&1===lt&&0===v&&0===X&&0===pt&&0===H)return vt;if((pt||H)&&"#document"!==j.parentNode.nodeName&&(Pt=" translate("+e(pt)+" "+e(H)+") "),st=Pt+" matrix("+q+" 0 0 "+lt+" "+(v*q+Bt)+" "+(X*lt+Yt)+") ","svg"===j.nodeName){for(W=j.ownerDocument.createElementNS(n.svgNS,"g");j.firstChild;)W.appendChild(j.firstChild);j.appendChild(W)}else(W=j).removeAttribute("x"),W.removeAttribute("y"),st=W.getAttribute("transform")+st;return W.setAttribute("transform",st),vt}function Q(j,v){var X="xlink:href",Y=A(j,v.getAttribute(X).slice(1));if(Y&&Y.getAttribute(X)&&Q(j,Y),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(st){Y&&!v.hasAttribute(st)&&Y.hasAttribute(st)&&v.setAttribute(st,Y.getAttribute(st))}),!v.children.length)for(var tt=Y.cloneNode(!0);tt.firstChild;)v.appendChild(tt.firstChild);v.removeAttribute(X)}n.parseSVGDocument=function(j,v,X,Y){if(j){!function(pt){for(var H=C(pt,["use","svg:use"]),mt=0;H.length&&mt<H.length;){var yt=H[mt],G=yt.getAttribute("xlink:href")||yt.getAttribute("href");if(null===G)return;var bt,vt,Pt,Bt,Yt=G.slice(1),me=yt.getAttribute("x")||0,ne=yt.getAttribute("y")||0,qt=A(pt,Yt).cloneNode(!0),he=(qt.getAttribute("transform")||"")+" translate("+me+", "+ne+")",Ot=H.length,ri=n.svgNS;if(N(qt),/^svg$/i.test(qt.nodeName)){var Be=qt.ownerDocument.createElementNS(ri,"g");for(vt=0,Bt=(Pt=qt.attributes).length;vt<Bt;vt++)bt=Pt.item(vt),Be.setAttributeNS(ri,bt.nodeName,bt.nodeValue);for(;qt.firstChild;)Be.appendChild(qt.firstChild);qt=Be}for(vt=0,Bt=(Pt=yt.attributes).length;vt<Bt;vt++)"x"!==(bt=Pt.item(vt)).nodeName&&"y"!==bt.nodeName&&"xlink:href"!==bt.nodeName&&"href"!==bt.nodeName&&("transform"===bt.nodeName?he=bt.nodeValue+" "+he:qt.setAttribute(bt.nodeName,bt.nodeValue));qt.setAttribute("transform",he),qt.setAttribute("instantiated_by_use","1"),qt.removeAttribute("id"),yt.parentNode.replaceChild(qt,yt),H.length===Ot&&mt++}}(j);var tt,st,W=n.Object.__uid++,I=N(j),q=n.util.toArray(j.getElementsByTagName("*"));if(I.crossOrigin=Y&&Y.crossOrigin,I.svgUid=W,0===q.length&&n.isLikelyNode){var lt=[];for(tt=0,st=(q=j.selectNodes('//*[name(.)!="svg"]')).length;tt<st;tt++)lt[tt]=q[tt];q=lt}var et=q.filter(function(pt){return N(pt),n.svgValidTagNamesRegEx.test(pt.nodeName.replace("svg:",""))&&!function(H,mt){for(;H&&(H=H.parentNode);)if(H.nodeName&&mt.test(H.nodeName.replace("svg:",""))&&!H.getAttribute("instantiated_by_use"))return!0;return!1}(pt,n.svgInvalidAncestorsRegEx)});if(!et||et&&!et.length)v&&v([],{});else{var ft={};q.filter(function(pt){return"clipPath"===pt.nodeName.replace("svg:","")}).forEach(function(pt){var H=pt.getAttribute("id");ft[H]=n.util.toArray(pt.getElementsByTagName("*")).filter(function(mt){return n.svgValidTagNamesRegEx.test(mt.nodeName.replace("svg:",""))})}),n.gradientDefs[W]=n.getGradientDefs(j),n.cssRules[W]=n.getCSSRules(j),n.clipPaths[W]=ft,n.parseElements(et,function(pt,H){v&&(v(pt,I,H,q),delete n.gradientDefs[W],delete n.cssRules[W],delete n.clipPaths[W])},c(I),X,Y)}}};var Z=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");l(n,{parseFontDeclaration:function(j,v){var X=j.match(Z);if(X){var Y=X[1],tt=X[3],st=X[4],W=X[5],I=X[6];Y&&(v.fontStyle=Y),tt&&(v.fontWeight=isNaN(parseFloat(tt))?tt:parseFloat(tt)),st&&(v.fontSize=e(st)),I&&(v.fontFamily=I),W&&(v.lineHeight="normal"===W?1:W)}},getGradientDefs:function(j){var v,X=C(j,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),Y=0,tt={};for(Y=X.length;Y--;)(v=X[Y]).getAttribute("xlink:href")&&Q(j,v),tt[v.getAttribute("id")]=v;return tt},parseAttributes:function(j,v,X){if(j){var Y,tt,st,W={};void 0===X&&(X=j.getAttribute("svgUid")),j.parentNode&&n.svgValidParentsRegEx.test(j.parentNode.nodeName)&&(W=n.parseAttributes(j.parentNode,v,X));var I=v.reduce(function(yt,G){return(Y=j.getAttribute(G))&&(yt[G]=Y),yt},{}),q=l(function(yt,G){var bt={};for(var vt in n.cssRules[G])if(w(yt,vt.split(" ")))for(var Pt in n.cssRules[G][vt])bt[Pt]=n.cssRules[G][vt][Pt];return bt}(j,X),n.parseStyleAttribute(j));I=l(I,q),q[d]&&j.setAttribute(d,q[d]),tt=st=W.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,I[a]&&(I[a]=tt=e(I[a],st));var lt,et,ft,pt={};for(var H in I)et=_(lt=(ft=H)in o?o[ft]:ft,I[H],W,tt),pt[lt]=et;pt&&pt.font&&n.parseFontDeclaration(pt.font,pt);var mt=l(W,pt);return n.svgValidParentsRegEx.test(j.nodeName)?mt:function(yt){for(var G in s)if(void 0!==yt[s[G]]&&""!==yt[G]){if(void 0===yt[G]){if(!n.Object.prototype[G])continue;yt[G]=n.Object.prototype[G]}if(0!==yt[G].indexOf("url(")){var bt=new n.Color(yt[G]);yt[G]=bt.setAlpha(t(bt.getAlpha()*yt[s[G]],2)).toRgba()}}return yt}(mt)}},parseElements:function(j,v,X,Y,tt){new n.ElementsParser(j,v,X,Y,tt).parse()},parseStyleAttribute:function(j){var v,X,Y,tt={},st=j.getAttribute("style");return st&&("string"==typeof st?(v=tt,st.replace(/;\s*$/,"").split(";").forEach(function(W){var I=W.split(":");X=I[0].trim().toLowerCase(),Y=I[1].trim(),v[X]=Y})):function(W,I){for(var et in W)void 0!==W[et]&&(I[et.toLowerCase()]=W[et])}(st,tt)),tt},parsePointsAttribute:function(j){if(!j)return null;var v,X,Y=[];for(v=0,X=(j=(j=j.replace(/,/g," ").trim()).split(/\s+/)).length;v<X;v+=2)Y.push({x:parseFloat(j[v]),y:parseFloat(j[v+1])});return Y},getCSSRules:function(j){var v,X,Y=j.getElementsByTagName("style"),tt={};for(v=0,X=Y.length;v<X;v++){var st=Y[v].textContent;""!==(st=st.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&st.split("}").filter(function(W){return W.trim()}).forEach(function(W){var I=W.split("{"),q={},lt=I[1].trim().split(";").filter(function(H){return H.trim()});for(v=0,X=lt.length;v<X;v++){var et=lt[v].split(":"),ft=et[0].trim(),pt=et[1].trim();q[ft]=pt}(W=I[0].trim()).split(",").forEach(function(H){""!==(H=H.replace(/^svg/i,"").trim())&&(tt[H]?n.util.object.extend(tt[H],q):tt[H]=n.util.object.clone(q))})})}return tt},loadSVGFromURL:function(j,v,X,Y){j=j.replace(/^\n\s*/,"").trim(),new n.util.request(j,{method:"get",onComplete:function(tt){var st=tt.responseXML;if(!st||!st.documentElement)return v&&v(null),!1;n.parseSVGDocument(st.documentElement,function(W,I,q,lt){v&&v(W,I,q,lt)},X,Y)}})},loadSVGFromString:function(j,v,X,Y){var tt=(new n.window.DOMParser).parseFromString(j.trim(),"text/xml");n.parseSVGDocument(tt.documentElement,function(st,W,I,q){v(st,W,I,q)},X,Y)}})}(typeof exports<"u"?exports:this),fabric.ElementsParser=function(u,n,l,c,t,e){this.elements=u,this.callback=n,this.options=l,this.reviver=c,this.svgUid=l&&l.svgUid||0,this.parsingOptions=t,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=e},function(u){u.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},u.createObjects=function(){var n=this;this.elements.forEach(function(l,c){l.setAttribute("svgUid",n.svgUid),n.createObject(l,c)})},u.findTag=function(n){return fabric[fabric.util.string.capitalize(n.tagName.replace("svg:",""))]},u.createObject=function(n,l){var c=this.findTag(n);if(c&&c.fromElement)try{c.fromElement(n,this.createCallback(l,n),this.options)}catch(t){fabric.log(t)}else this.checkIfDone()},u.createCallback=function(n,l){var c=this;return function(t){var e;c.resolveGradient(t,l,"fill"),c.resolveGradient(t,l,"stroke"),t instanceof fabric.Image&&t._originalElement&&(e=t.parsePreserveAspectRatioAttribute(l)),t._removeTransformMatrix(e),c.resolveClipPath(t,l),c.reviver&&c.reviver(l,t),c.instances[n]=t,c.checkIfDone()}},u.extractPropertyDefinition=function(n,l,c){var t=n[l],e=this.regexUrl;if(e.test(t)){e.lastIndex=0;var i=e.exec(t)[1];return e.lastIndex=0,fabric[c][this.svgUid][i]}},u.resolveGradient=function(n,l,c){var t=this.extractPropertyDefinition(n,c,"gradientDefs");if(t){var e=l.getAttribute(c+"-opacity"),i=fabric.Gradient.fromElement(t,n,e,this.options);n.set(c,i)}},u.createClipPathCallback=function(n,l){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,l.push(c)}},u.resolveClipPath=function(n,l){var c,t,e,i,o=this.extractPropertyDefinition(n,"clipPath","clipPaths");if(o){e=[],t=fabric.util.invertTransform(n.calcTransformMatrix());for(var s=o[0].parentNode,a=l;a.parentNode&&a.getAttribute("clip-path")!==n.clipPath;)a=a.parentNode;a.parentNode.appendChild(s);for(var d=0;d<o.length;d++)this.findTag(c=o[d]).fromElement(c,this.createClipPathCallback(n,e),this.options);o=1===e.length?e[0]:new fabric.Group(e),i=fabric.util.multiplyTransformMatrices(t,o.calcTransformMatrix()),o.clipPath&&this.resolveClipPath(o,a);var _=fabric.util.qrDecompose(i);o.flipX=!1,o.flipY=!1,o.set("scaleX",_.scaleX),o.set("scaleY",_.scaleY),o.angle=_.angle,o.skewX=_.skewX,o.skewY=0,o.setPositionByOrigin({x:_.translateX,y:_.translateY},"center","center"),n.clipPath=o}else delete n.clipPath},u.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(n){return null!=n}),this.callback(this.instances,this.elements))}}(fabric.ElementsParser.prototype),function(u){"use strict";var n=u.fabric||(u.fabric={});function l(c,t){this.x=c,this.y=t}n.Point?n.warn("fabric.Point is already defined"):(n.Point=l).prototype={type:"point",constructor:l,add:function(c){return new l(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new l(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new l(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new l(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new l(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new l(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,t){return void 0===t&&(t=.5),t=Math.max(Math.min(1,t),0),new l(this.x+(c.x-this.x)*t,this.y+(c.y-this.y)*t)},distanceFrom:function(c){var t=this.x-c.x,e=this.y-c.y;return Math.sqrt(t*t+e*e)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new l(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new l(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,t){return this.x=c,this.y=t,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var t=this.x,e=this.y;this.x=c.x,this.y=c.y,c.x=t,c.y=e},clone:function(){return new l(this.x,this.y)}}}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={});function l(c){this.status=c,this.points=[]}n.Intersection?n.warn("fabric.Intersection is already defined"):(n.Intersection=l,n.Intersection.prototype={constructor:l,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},n.Intersection.intersectLineLine=function(c,t,e,i){var o,s=(i.x-e.x)*(c.y-e.y)-(i.y-e.y)*(c.x-e.x),a=(t.x-c.x)*(c.y-e.y)-(t.y-c.y)*(c.x-e.x),d=(i.y-e.y)*(t.x-c.x)-(i.x-e.x)*(t.y-c.y);if(0!==d){var _=s/d,b=a/d;0<=_&&_<=1&&0<=b&&b<=1?(o=new l("Intersection")).appendPoint(new n.Point(c.x+_*(t.x-c.x),c.y+_*(t.y-c.y))):o=new l}else o=new l(0===s||0===a?"Coincident":"Parallel");return o},n.Intersection.intersectLinePolygon=function(c,t,e){var s,a,d=new l,_=e.length;for(a=0;a<_;a++)s=l.intersectLineLine(c,t,e[a],e[(a+1)%_]),d.appendPoints(s.points);return 0<d.points.length&&(d.status="Intersection"),d},n.Intersection.intersectPolygonPolygon=function(c,t){var e,i=new l,o=c.length;for(e=0;e<o;e++){var d=l.intersectLinePolygon(c[e],c[(e+1)%o],t);i.appendPoints(d.points)}return 0<i.points.length&&(i.status="Intersection"),i},n.Intersection.intersectPolygonRectangle=function(c,t,e){var i=t.min(e),o=t.max(e),s=new n.Point(o.x,i.y),a=new n.Point(i.x,o.y),d=l.intersectLinePolygon(i,s,c),_=l.intersectLinePolygon(s,o,c),b=l.intersectLinePolygon(o,a,c),C=l.intersectLinePolygon(a,i,c),w=new l;return w.appendPoints(d.points),w.appendPoints(_.points),w.appendPoints(b.points),w.appendPoints(C.points),0<w.points.length&&(w.status="Intersection"),w})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={});function l(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function c(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}n.Color?n.warn("fabric.Color is already defined."):(n.Color=l,n.Color.prototype={_tryParsingColor:function(t){var e;t in l.colorNameMap&&(t=l.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=l.sourceFromHex(t)),e||(e=l.sourceFromRgb(t)),e||(e=l.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){var o,s,a,d=n.util.array.max([t/=255,e/=255,i/=255]),_=n.util.array.min([t,e,i]);if(a=(d+_)/2,d===_)o=s=0;else{var b=d-_;switch(s=.5<a?b/(2-d-_):b/(d+_),d){case t:o=(e-i)/b+(e<i?6:0);break;case e:o=(i-t)/b+2;break;case i:o=(t-e)/b+4}o/=6}return[Math.round(360*o),Math.round(100*s),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,o=this.getSource();return t=1===(t=o[0].toString(16)).length?"0"+t:t,e=1===(e=o[1].toString(16)).length?"0"+e:e,i=1===(i=o[2].toString(16)).length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10);return this.setSource([e,e,e,t[3]]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),o=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,o]),this},overlayWith:function(t){t instanceof l||(t=new l(t));var e,i=[],o=this.getAlpha(),s=this.getSource(),a=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*s[e]+.5*a[e]));return i[3]=o,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},n.Color.fromRgb=function(t){return l.fromSource(l.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var e=t.match(l.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),o=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),s=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(o,10),parseInt(s,10),e[4]?parseFloat(e[4]):1]}},n.Color.fromRgba=l.fromRgb,n.Color.fromHsl=function(t){return l.fromSource(l.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var e=t.match(l.reHSLa);if(e){var i,o,s,a=(parseFloat(e[1])%360+360)%360/360,d=parseFloat(e[2])/(/%$/.test(e[2])?100:1),_=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===d)i=o=s=_;else{var b=_<=.5?_*(d+1):_+d-_*d,C=2*_-b;i=c(C,b,a+1/3),o=c(C,b,a),s=c(C,b,a-1/3)}return[Math.round(255*i),Math.round(255*o),Math.round(255*s),e[4]?parseFloat(e[4]):1]}},n.Color.fromHsla=l.fromHsl,n.Color.fromHex=function(t){return l.fromSource(l.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(l.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,o=8===e.length||4===e.length,s=i?e.charAt(0)+e.charAt(0):e.substring(0,2),a=i?e.charAt(1)+e.charAt(1):e.substring(2,4),d=i?e.charAt(2)+e.charAt(2):e.substring(4,6),_=o?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(s,16),parseInt(a,16),parseInt(d,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},n.Color.fromSource=function(t){var e=new l;return e.setSource(t),e})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],t={},e="left",i="top",o="right",s="bottom",a="center",d={top:s,bottom:i,left:o,right:e,center:a},_=n.util.radiansToDegrees,b=Math.sign||function(W){return(0<W)-(W<0)||+W};function C(W,I){var q=W.angle+_(Math.atan2(I.y,I.x))+360;return Math.round(q%360/45)}function w(W,I){var q=I.transform.target,lt=q.canvas,et=n.util.object.clone(I);et.target=q,lt&&lt.fire("object:"+W,et),q.fire(W,I)}function O(W,I){var q=I.canvas,lt=W[q.uniScaleKey];return q.uniformScaling&&!lt||!q.uniformScaling&&lt}function A(W){return W.originX===a&&W.originY===a}function F(W,I,q){var lt=W.lockScalingX,et=W.lockScalingY;return!((!lt||!et)&&(I||!lt&&!et||!q)&&(!lt||"x"!==I)&&(!et||"y"!==I))}function N(W,I,q,lt){return{e:W,transform:I,pointer:{x:q,y:lt}}}function Q(W){return function(I,q,lt,et){var ft=q.target,pt=ft.getCenterPoint(),H=ft.translateToOriginPoint(pt,q.originX,q.originY),mt=W(I,q,lt,et);return ft.setPositionByOrigin(H,q.originX,q.originY),mt}}function Z(W,I){return function(q,lt,et,ft){var pt=I(q,lt,et,ft);return pt&&w(W,N(q,lt,et,ft)),pt}}function j(W,I,q,lt,et){var ft=W.target,pt=ft.controls[W.corner],H=ft.canvas.getZoom(),mt=ft.padding/H,yt=ft.toLocalPoint(new n.Point(lt,et),I,q);return yt.x>=mt&&(yt.x-=mt),yt.x<=-mt&&(yt.x+=mt),yt.y>=mt&&(yt.y-=mt),yt.y<=mt&&(yt.y+=mt),yt.x-=pt.offsetX,yt.y-=pt.offsetY,yt}function v(W){return W.flipX!==W.flipY}function X(W,I,q,lt,et){if(0!==W[I]){var ft=et/W._getTransformedDimensions()[lt]*W[q];W.set(q,ft)}}function Y(W,I,q,lt){var et,ft=I.target,pt=ft._getTransformedDimensions(0,ft.skewY),H=j(I,I.originX,I.originY,q,lt),mt=Math.abs(2*H.x)-pt.x,yt=ft.skewX;mt<2?et=0:(et=_(Math.atan2(mt/ft.scaleX,pt.y/ft.scaleY)),I.originX===e&&I.originY===s&&(et=-et),I.originX===o&&I.originY===i&&(et=-et),v(ft)&&(et=-et));var G=yt!==et;if(G){var bt=ft._getTransformedDimensions().y;ft.set("skewX",et),X(ft,"skewY","scaleY","y",bt)}return G}function tt(W,I,q,lt){var et,ft=I.target,pt=ft._getTransformedDimensions(ft.skewX,0),H=j(I,I.originX,I.originY,q,lt),mt=Math.abs(2*H.y)-pt.y,yt=ft.skewY;mt<2?et=0:(et=_(Math.atan2(mt/ft.scaleY,pt.x/ft.scaleX)),I.originX===e&&I.originY===s&&(et=-et),I.originX===o&&I.originY===i&&(et=-et),v(ft)&&(et=-et));var G=yt!==et;if(G){var bt=ft._getTransformedDimensions().x;ft.set("skewY",et),X(ft,"skewX","scaleX","x",bt)}return G}function st(W,I,q,lt,et){var ft,pt,H,mt,yt,G,bt=I.target,vt=bt.lockScalingX,Pt=bt.lockScalingY,Bt=(et=et||{}).by,Yt=O(W,bt),me=F(bt,Bt,Yt),ne=I.gestureScale;if(me)return!1;if(ne)pt=I.scaleX*ne,H=I.scaleY*ne;else{if(ft=j(I,I.originX,I.originY,q,lt),yt="y"!==Bt?b(ft.x):1,G="x"!==Bt?b(ft.y):1,I.signX||(I.signX=yt),I.signY||(I.signY=G),bt.lockScalingFlip&&(I.signX!==yt||I.signY!==G))return!1;if(mt=bt._getTransformedDimensions(),Yt&&!Bt){var qt=Math.abs(ft.x)+Math.abs(ft.y),he=I.original,Ot=qt/(Math.abs(mt.x*he.scaleX/bt.scaleX)+Math.abs(mt.y*he.scaleY/bt.scaleY));pt=he.scaleX*Ot,H=he.scaleY*Ot}else pt=Math.abs(ft.x*bt.scaleX/mt.x),H=Math.abs(ft.y*bt.scaleY/mt.y);A(I)&&(pt*=2,H*=2),I.signX!==yt&&"y"!==Bt&&(I.originX=d[I.originX],pt*=-1,I.signX=yt),I.signY!==G&&"x"!==Bt&&(I.originY=d[I.originY],H*=-1,I.signY=G)}var ri=bt.scaleX,Be=bt.scaleY;return Bt?("x"===Bt&&bt.set("scaleX",pt),"y"===Bt&&bt.set("scaleY",H)):(!vt&&bt.set("scaleX",pt),!Pt&&bt.set("scaleY",H)),ri!==bt.scaleX||Be!==bt.scaleY}t.scaleCursorStyleHandler=function(W,I,q){var lt=O(W,q),et="";if(0!==I.x&&0===I.y?et="x":0===I.x&&0!==I.y&&(et="y"),F(q,et,lt))return"not-allowed";var ft=C(q,I);return l[ft]+"-resize"},t.skewCursorStyleHandler=function(W,I,q){if(0!==I.x&&q.lockSkewingY||0!==I.y&&q.lockSkewingX)return"not-allowed";var et=C(q,I)%4;return c[et]+"-resize"},t.scaleSkewCursorStyleHandler=function(W,I,q){return W[q.canvas.altActionKey]?t.skewCursorStyleHandler(W,I,q):t.scaleCursorStyleHandler(W,I,q)},t.rotationWithSnapping=Z("rotating",Q(function(W,I,q,lt){var et=I,ft=et.target,pt=ft.translateToOriginPoint(ft.getCenterPoint(),et.originX,et.originY);if(ft.lockRotation)return!1;var H,mt=Math.atan2(et.ey-pt.y,et.ex-pt.x),yt=Math.atan2(lt-pt.y,q-pt.x),G=_(yt-mt+et.theta);if(0<ft.snapAngle){var bt=ft.snapAngle,vt=ft.snapThreshold||bt,Pt=Math.ceil(G/bt)*bt,Bt=Math.floor(G/bt)*bt;Math.abs(G-Bt)<vt?G=Bt:Math.abs(G-Pt)<vt&&(G=Pt)}return G<0&&(G=360+G),H=ft.angle!==(G%=360),ft.angle=G,H})),t.scalingEqually=Z("scaling",Q(function(W,I,q,lt){return st(W,I,q,lt)})),t.scalingX=Z("scaling",Q(function(W,I,q,lt){return st(W,I,q,lt,{by:"x"})})),t.scalingY=Z("scaling",Q(function(W,I,q,lt){return st(W,I,q,lt,{by:"y"})})),t.scalingYOrSkewingX=function(W,I,q,lt){return W[I.target.canvas.altActionKey]?t.skewHandlerX(W,I,q,lt):t.scalingY(W,I,q,lt)},t.scalingXOrSkewingY=function(W,I,q,lt){return W[I.target.canvas.altActionKey]?t.skewHandlerY(W,I,q,lt):t.scalingX(W,I,q,lt)},t.changeWidth=Z("resizing",Q(function(W,I,q,lt){var et=I.target,ft=j(I,I.originX,I.originY,q,lt),pt=et.strokeWidth/(et.strokeUniform?et.scaleX:1),H=A(I)?2:1,mt=et.width,yt=Math.abs(ft.x*H/et.scaleX)-pt;return et.set("width",Math.max(yt,0)),mt!==yt})),t.skewHandlerX=function(W,I,q,lt){var et,ft=I.target,pt=ft.skewX,H=I.originY;return!ft.lockSkewingX&&(0===pt?et=0<j(I,a,a,q,lt).x?e:o:(0<pt&&(et=H===i?e:o),pt<0&&(et=H===i?o:e),v(ft)&&(et=et===e?o:e)),I.originX=et,Z("skewing",Q(Y))(W,I,q,lt))},t.skewHandlerY=function(W,I,q,lt){var et,ft=I.target,pt=ft.skewY,H=I.originX;return!ft.lockSkewingY&&(0===pt?et=0<j(I,a,a,q,lt).y?i:s:(0<pt&&(et=H===e?i:s),pt<0&&(et=H===e?s:i),v(ft)&&(et=et===i?s:i)),I.originY=et,Z("skewing",Q(tt))(W,I,q,lt))},t.dragHandler=function(W,I,q,lt){var et=I.target,ft=q-I.offsetX,pt=lt-I.offsetY,H=!et.get("lockMovementX")&&et.left!==ft,mt=!et.get("lockMovementY")&&et.top!==pt;return H&&et.set("left",ft),mt&&et.set("top",pt),(H||mt)&&w("moving",N(W,I,q,lt)),H||mt},t.scaleOrSkewActionName=function(W,I,q){var lt=W[q.canvas.altActionKey];return 0===I.x?lt?"skewX":"scaleY":0===I.y?lt?"skewY":"scaleX":void 0},t.rotationStyleHandler=function(W,I,q){return q.lockRotation?"not-allowed":I.cursorStyle},t.fireEvent=w,t.wrapWithFixedAnchor=Q,t.wrapWithFireEvent=Z,t.getLocalPoint=j,n.controlsUtils=t}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.degreesToRadians,c=n.controlsUtils;c.renderCircleControl=function(t,e,i,o,s){o=o||{};var a,d=this.sizeX||o.cornerSize||s.cornerSize,_=this.sizeY||o.cornerSize||s.cornerSize,b=void 0!==o.transparentCorners?o.transparentCorners:s.transparentCorners,C=b?"stroke":"fill",w=!b&&(o.cornerStrokeColor||s.cornerStrokeColor),O=e,A=i;t.save(),t.fillStyle=o.cornerColor||s.cornerColor,t.strokeStyle=o.cornerStrokeColor||s.cornerStrokeColor,_<d?(a=d,t.scale(1,_/d),A=i*d/_):d<_?(a=_,t.scale(d/_,1),O=e*_/d):a=d,t.lineWidth=1,t.beginPath(),t.arc(O,A,a/2,0,2*Math.PI,!1),t[C](),w&&t.stroke(),t.restore()},c.renderSquareControl=function(t,e,i,o,s){o=o||{};var a=this.sizeX||o.cornerSize||s.cornerSize,d=this.sizeY||o.cornerSize||s.cornerSize,_=void 0!==o.transparentCorners?o.transparentCorners:s.transparentCorners,b=_?"stroke":"fill",C=!_&&(o.cornerStrokeColor||s.cornerStrokeColor),w=a/2,O=d/2;t.save(),t.fillStyle=o.cornerColor||s.cornerColor,t.strokeStyle=o.cornerStrokeColor||s.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(l(s.angle)),t[b+"Rect"](-w,-O,a,d),C&&t.strokeRect(-w,-O,a,d),t.restore()}}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={});n.Control=function(l){for(var c in l)this[c]=l[c]},n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(l,c){return c.cursorStyle},getActionName:function(l,c){return c.actionName},getVisibility:function(l,c){var t=l._controlsVisibility;return t&&void 0!==t[c]?t[c]:this.visible},setVisibility:function(l){this.visible=l},positionHandler:function(l,c){return n.util.transformPoint({x:this.x*l.x+this.offsetX,y:this.y*l.y+this.offsetY},c)},calcCornerCoords:function(l,c,t,e,i){var o,s,a,d,_=i?this.touchSizeX:this.sizeX,b=i?this.touchSizeY:this.sizeY;if(_&&b&&_!==b){var C=Math.atan2(b,_),w=Math.sqrt(_*_+b*b)/2,O=C-n.util.degreesToRadians(l),A=Math.PI/2-C-n.util.degreesToRadians(l);o=w*n.util.cos(O),s=w*n.util.sin(O),a=w*n.util.cos(A),d=w*n.util.sin(A)}else w=.7071067812*(_&&b?_:c),O=n.util.degreesToRadians(45-l),o=a=w*n.util.cos(O),s=d=w*n.util.sin(O);return{tl:{x:t-d,y:e-a},tr:{x:t+o,y:e-s},bl:{x:t-o,y:e+s},br:{x:t+d,y:e+a}}},render:function(l,c,t,e,i){"circle"===((e=e||{}).cornerStyle||i.cornerStyle)?n.controlsUtils.renderCircleControl.call(this,l,c,t,e,i):n.controlsUtils.renderSquareControl.call(this,l,c,t,e,i)}}}(typeof exports<"u"?exports:this),function(){function u(l,c){var t,e,i,o,s=l.getAttribute("style"),a=l.getAttribute("offset")||0;if(a=(a=parseFloat(a)/(/%$/.test(a)?100:1))<0?0:1<a?1:a,s){var d=s.split(/\s*;\s*/);for(""===d[d.length-1]&&d.pop(),o=d.length;o--;){var _=d[o].split(/\s*:\s*/),b=_[0].trim(),C=_[1].trim();"stop-color"===b?t=C:"stop-opacity"===b&&(i=C)}}return t||(t=l.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=l.getAttribute("stop-opacity")),e=(t=new fabric.Color(t)).getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=e*c,{offset:a,color:t.toRgb(),opacity:i}}var n=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var c,t=this;Object.keys(l).forEach(function(e){t[e]=l[e]}),this.id?this.id+="_"+fabric.Object.__uid++:this.id=fabric.Object.__uid++,c={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},"radial"===this.type&&(c.r1=l.coords.r1||0,c.r2=l.coords.r2||0),this.coords=c,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var c in l){var t=new fabric.Color(l[c]);this.colorStops.push({offset:parseFloat(c),color:t.toRgb(),opacity:t.getAlpha()})}return this},toObject:function(l){var c={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,c,l),c},toSVG:function(l,c){var t,e,i,o,s=n(this.coords,!0),a=(c=c||{},n(this.colorStops,!0)),d=s.r1>s.r2,_=this.gradientTransform?this.gradientTransform.concat():fabric.iMatrix.concat(),b=-this.offsetX,C=-this.offsetY,w=!!c.additionalTransform,O="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(a.sort(function(Q,Z){return Q.offset-Z.offset}),"objectBoundingBox"===O?(b/=l.width,C/=l.height):(b+=l.width/2,C+=l.height/2),"path"===l.type&&"percentage"!==this.gradientUnits&&(b-=l.pathOffset.x,C-=l.pathOffset.y),_[4]-=b,_[5]-=C,o='id="SVGID_'+this.id+'" gradientUnits="'+O+'"',o+=' gradientTransform="'+(w?c.additionalTransform+" ":"")+fabric.util.matrixToSVG(_)+'" ',"linear"===this.type?i=["<linearGradient ",o,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,'">\n']:"radial"===this.type&&(i=["<radialGradient ",o,' cx="',d?s.x1:s.x2,'" cy="',d?s.y1:s.y2,'" r="',d?s.r1:s.r2,'" fx="',d?s.x2:s.x1,'" fy="',d?s.y2:s.y1,'">\n']),"radial"===this.type){if(d)for((a=a.concat()).reverse(),t=0,e=a.length;t<e;t++)a[t].offset=1-a[t].offset;var A=Math.min(s.r1,s.r2);if(0<A){var F=A/Math.max(s.r1,s.r2);for(t=0,e=a.length;t<e;t++)a[t].offset+=F*(1-a[t].offset)}}for(t=0,e=a.length;t<e;t++){var N=a[t];i.push("<stop ",'offset="',100*N.offset+"%",'" style="stop-color:',N.color,void 0!==N.opacity?";stop-opacity: "+N.opacity:";",'"/>\n')}return i.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),i.join("")},toLive:function(l){var c,t,e,i=fabric.util.object.clone(this.coords);if(this.type){for("linear"===this.type?c=l.createLinearGradient(i.x1,i.y1,i.x2,i.y2):"radial"===this.type&&(c=l.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2)),t=0,e=this.colorStops.length;t<e;t++){var o=this.colorStops[t].color,s=this.colorStops[t].opacity,a=this.colorStops[t].offset;void 0!==s&&(o=new fabric.Color(o).setAlpha(s).toRgba()),c.addColorStop(a,o)}return c}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(l,c,t,e){var i=parseFloat(t)/(/%$/.test(t)?100:1);i=i<0?0:1<i?1:i,isNaN(i)&&(i=1);var o,s,a,d,_,b,C,w,O,A,F,N=l.getElementsByTagName("stop"),Q="userSpaceOnUse"===l.getAttribute("gradientUnits")?"pixels":"percentage",Z=l.getAttribute("gradientTransform")||"",j=[],v=0,X=0;for("linearGradient"===l.nodeName||"LINEARGRADIENT"===l.nodeName?(o="linear",s={x1:(b=l).getAttribute("x1")||0,y1:b.getAttribute("y1")||0,x2:b.getAttribute("x2")||"100%",y2:b.getAttribute("y2")||0}):(o="radial",s={x1:(_=l).getAttribute("fx")||_.getAttribute("cx")||"50%",y1:_.getAttribute("fy")||_.getAttribute("cy")||"50%",r1:0,x2:_.getAttribute("cx")||"50%",y2:_.getAttribute("cy")||"50%",r2:_.getAttribute("r")||"50%"}),a=N.length;a--;)j.push(u(N[a],i));return d=fabric.parseTransformAttribute(Z),C=s,w=e,O=Q,Object.keys(C).forEach(function(Y){"Infinity"===(A=C[Y])?F=1:"-Infinity"===A?F=0:(F=parseFloat(C[Y],10),"string"==typeof A&&/^(\d+\.\d+)%|(\d+)%$/.test(A)&&(F*=.01,"pixels"===O&&("x1"!==Y&&"x2"!==Y&&"r2"!==Y||(F*=w.viewBoxWidth||w.width),"y1"!==Y&&"y2"!==Y||(F*=w.viewBoxHeight||w.height)))),C[Y]=F}),"pixels"===Q&&(v=-c.left,X=-c.top),new fabric.Gradient({id:l.getAttribute("id"),type:o,coords:s,colorStops:j,gradientUnits:Q,gradientTransform:d,offsetX:v,offsetY:X})}})}(),function(){"use strict";var u=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,l){if(n||(n={}),this.id=fabric.Object.__uid++,this.setOptions(n),!n.source||n.source&&"string"!=typeof n.source)l&&l(this);else{var c=this;this.source=fabric.util.createImage(),fabric.util.loadImage(n.source,function(t,e){c.source=t,l&&l(c,e)},null,this.crossOrigin)}},toObject:function(n){var l,c,t=fabric.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?l=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(l=this.source.toDataURL()),c={type:"pattern",source:l,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:u(this.offsetX,t),offsetY:u(this.offsetY,t),patternTransform:this.patternTransform?this.patternTransform.concat():null},fabric.util.populateWithProperties(this,c,n),c},toSVG:function(n){var l="function"==typeof this.source?this.source():this.source,c=l.width/n.width,t=l.height/n.height,e=this.offsetX/n.width,i=this.offsetY/n.height,o="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(t=1,i&&(t+=Math.abs(i))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(c=1,e&&(c+=Math.abs(e))),l.src?o=l.src:l.toDataURL&&(o=l.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+e+'" y="'+i+'" width="'+c+'" height="'+t+'">\n<image x="0" y="0" width="'+l.width+'" height="'+l.height+'" xlink:href="'+o+'"></image>\n</pattern>\n'},setOptions:function(n){for(var l in n)this[l]=n[l]},toLive:function(n){var l=this.source;return l&&(void 0===l.src||l.complete&&0!==l.naturalWidth&&0!==l.naturalHeight)?n.createPattern(l,this.repeat):""}})}(),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.toFixed;n.Shadow?n.warn("fabric.Shadow is already defined."):(n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){for(var t in"string"==typeof c&&(c=this._parseShadow(c)),c)this[t]=c[t];this.id=n.Object.__uid++},_parseShadow:function(c){var t=c.trim(),e=n.Shadow.reOffsetsAndBlur.exec(t)||[];return{color:(t.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var t=40,e=40,i=n.Object.NUM_FRACTION_DIGITS,o=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-c.angle)),s=new n.Color(this.color);return c.width&&c.height&&(t=100*l((Math.abs(o.x)+this.blur)/c.width,i)+20,e=100*l((Math.abs(o.y)+this.blur)/c.height,i)+20),c.flipX&&(o.x*=-1),c.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+e+'%" height="'+(100+2*e)+'%" x="-'+t+'%" width="'+(100+2*t)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+l(this.blur?this.blur/2:0,i)+'"></feGaussianBlur>\n\t<feOffset dx="'+l(o.x,i)+'" dy="'+l(o.y,i)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},t=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==t[e]&&(c[e]=this[e])},this),c}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(typeof exports<"u"?exports:this),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var u=fabric.util.object.extend,n=fabric.util.getElementOffset,l=fabric.util.removeFromArray,c=fabric.util.toFixed,t=fabric.util.transformPoint,e=fabric.util.invertTransform,i=fabric.util.getNodeCanvas,o=fabric.util.createCanvasElement,s=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(a,d){d||(d={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,d)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(a,d){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(a),this._initOptions(d),this.interactive||this._initRetinaScaling(),d.overlayImage&&this.setOverlayImage(d.overlayImage,_),d.backgroundImage&&this.setBackgroundImage(d.backgroundImage,_),d.backgroundColor&&this.setBackgroundColor(d.backgroundColor,_),d.overlayColor&&this.setOverlayColor(d.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return 1<fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,fabric.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var a=fabric.devicePixelRatio;this.__initRetinaScaling(a,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(a,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(a,d,_){d.setAttribute("width",this.width*a),d.setAttribute("height",this.height*a),_.scale(a,a)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(a,d,_){return this.__setBgOverlayImage("overlayImage",a,d,_)},setBackgroundImage:function(a,d,_){return this.__setBgOverlayImage("backgroundImage",a,d,_)},setOverlayColor:function(a,d){return this.__setBgOverlayColor("overlayColor",a,d)},setBackgroundColor:function(a,d){return this.__setBgOverlayColor("backgroundColor",a,d)},__setBgOverlayImage:function(a,d,_,b){return"string"==typeof d?fabric.util.loadImage(d,function(C,w){if(C){var O=new fabric.Image(C,b);(this[a]=O).canvas=this}_&&_(C,w)},this,b&&b.crossOrigin):(b&&d.setOptions(b),(this[a]=d)&&(d.canvas=this),_&&_(d,!1)),this},__setBgOverlayColor:function(a,d,_){return this[a]=d,this._initGradient(d,a),this._initPattern(d,a,_),this},_createCanvasElement:function(){var a=o();if(!a||(a.style||(a.style={}),void 0===a.getContext))throw s;return a},_initOptions:function(a){var d=this.lowerCanvasEl;this._setOptions(a),this.width=this.width||parseInt(d.width,10)||0,this.height=this.height||parseInt(d.height,10)||0,this.lowerCanvasEl.style&&(d.width=this.width,d.height=this.height,d.style.width=this.width+"px",d.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(a){this.lowerCanvasEl=a&&a.getContext?a:fabric.util.getById(a)||this._createCanvasElement(),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(a,d){return this.setDimensions({width:a},d)},setHeight:function(a,d){return this.setDimensions({height:a},d)},setDimensions:function(a,d){var _;for(var b in d=d||{},a)_=a[b],d.cssOnly||(this._setBackstoreDimension(b,a[b]),_+="px",this.hasLostContext=!0),d.backstoreOnly||this._setCssDimension(b,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),d.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(a,d){return this.lowerCanvasEl[a]=d,this.upperCanvasEl&&(this.upperCanvasEl[a]=d),this.cacheCanvasEl&&(this.cacheCanvasEl[a]=d),this[a]=d,this},_setCssDimension:function(a,d){return this.lowerCanvasEl.style[a]=d,this.upperCanvasEl&&(this.upperCanvasEl.style[a]=d),this.wrapperEl&&(this.wrapperEl.style[a]=d),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(a){var d,_,b,C=this._activeObject,w=this.backgroundImage,O=this.overlayImage;for(this.viewportTransform=a,_=0,b=this._objects.length;_<b;_++)(d=this._objects[_]).group||d.setCoords(!0);return C&&C.setCoords(),w&&w.setCoords(!0),O&&O.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(a,d){var _=a,b=this.viewportTransform.slice(0);a=t(a,e(this.viewportTransform)),b[0]=d,b[3]=d;var C=t(a,b);return b[4]+=_.x-C.x,b[5]+=_.y-C.y,this.setViewportTransform(b)},setZoom:function(a){return this.zoomToPoint(new fabric.Point(0,0),a),this},absolutePan:function(a){var d=this.viewportTransform.slice(0);return d[4]=-a.x,d[5]=-a.y,this.setViewportTransform(d)},relativePan:function(a){return this.absolutePan(new fabric.Point(-a.x-this.viewportTransform[4],-a.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(a){this.stateful&&a.setupState(),a._set("canvas",this),a.setCoords(),this.fire("object:added",{target:a}),a.fire("added")},_onObjectRemoved:function(a){this.fire("object:removed",{target:a}),a.fire("removed"),delete a.canvas},clearContext:function(a){return a.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var a={},d=this.width,_=this.height,b=e(this.viewportTransform);return a.tl=t({x:0,y:0},b),a.br=t({x:d,y:_},b),a.tr=new fabric.Point(a.br.x,a.tl.y),a.bl=new fabric.Point(a.tl.x,a.br.y),this.vptCoords=a},cancelRequestedRender:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(a,d){var _=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(a),fabric.util.setImageSmoothing(a,this.imageSmoothingEnabled),this.fire("before:render",{ctx:a}),this._renderBackground(a),a.save(),a.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(a,d),a.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(a),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(a)),this._renderOverlay(a),this.controlsAboveOverlay&&this.interactive&&this.drawControls(a),this.fire("after:render",{ctx:a})},drawClipPathOnCanvas:function(a){var d=this.viewportTransform,_=this.clipPath;a.save(),a.transform(d[0],d[1],d[2],d[3],d[4],d[5]),a.globalCompositeOperation="destination-in",_.transform(a),a.scale(1/_.zoomX,1/_.zoomY),a.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),a.restore()},_renderObjects:function(a,d){var _,b;for(_=0,b=d.length;_<b;++_)d[_]&&d[_].render(a)},_renderBackgroundOrOverlay:function(a,d){var _=this[d+"Color"],b=this[d+"Image"],C=this.viewportTransform,w=this[d+"Vpt"];if(_||b){if(_){a.save(),a.beginPath(),a.moveTo(0,0),a.lineTo(this.width,0),a.lineTo(this.width,this.height),a.lineTo(0,this.height),a.closePath(),a.fillStyle=_.toLive?_.toLive(a,this):_,w&&a.transform(C[0],C[1],C[2],C[3],C[4],C[5]),a.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var O=_.gradientTransform||_.patternTransform;O&&a.transform(O[0],O[1],O[2],O[3],O[4],O[5]),a.fill(),a.restore()}b&&(a.save(),w&&a.transform(C[0],C[1],C[2],C[3],C[4],C[5]),b.render(a),a.restore())}},_renderBackground:function(a){this._renderBackgroundOrOverlay(a,"background")},_renderOverlay:function(a){this._renderBackgroundOrOverlay(a,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new fabric.Point(this.width/2,this.height/2)},centerObjectH:function(a){return this._centerObject(a,new fabric.Point(this.getCenterPoint().x,a.getCenterPoint().y))},centerObjectV:function(a){return this._centerObject(a,new fabric.Point(a.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(a){var d=this.getCenterPoint();return this._centerObject(a,d)},viewportCenterObject:function(a){var d=this.getVpCenter();return this._centerObject(a,d)},viewportCenterObjectH:function(a){var d=this.getVpCenter();return this._centerObject(a,new fabric.Point(d.x,a.getCenterPoint().y)),this},viewportCenterObjectV:function(a){var d=this.getVpCenter();return this._centerObject(a,new fabric.Point(a.getCenterPoint().x,d.y))},getVpCenter:function(){var a=this.getCenterPoint(),d=e(this.viewportTransform);return t(a,d)},_centerObject:function(a,d){return a.setPositionByOrigin(d,"center","center"),a.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(a){return this.toDatalessObject(a)},toObject:function(a){return this._toObjectMethod("toObject",a)},toDatalessObject:function(a){return this._toObjectMethod("toDatalessObject",a)},_toObjectMethod:function(a,d){var _=this.clipPath,b={version:fabric.version,objects:this._toObjects(a,d)};return _&&!_.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,a,d)),u(b,this.__serializeBgOverlay(a,d)),fabric.util.populateWithProperties(this,b,d),b},_toObjects:function(a,d){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,a,d)},this)},_toObject:function(a,d,_){var b;this.includeDefaultValues||(b=a.includeDefaultValues,a.includeDefaultValues=!1);var C=a[d](_);return this.includeDefaultValues||(a.includeDefaultValues=b),C},__serializeBgOverlay:function(a,d){var _={},b=this.backgroundImage,C=this.overlayImage,w=this.backgroundColor,O=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(_.background=w.toObject(d)):w&&(_.background=w),O&&O.toObject?O.excludeFromExport||(_.overlay=O.toObject(d)):O&&(_.overlay=O),b&&!b.excludeFromExport&&(_.backgroundImage=this._toObject(b,a,d)),C&&!C.excludeFromExport&&(_.overlayImage=this._toObject(C,a,d)),_},svgViewportTransformation:!0,toSVG:function(a,d){a||(a={}),a.reviver=d;var _=[];return this._setSVGPreamble(_,a),this._setSVGHeader(_,a),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",d),this._setSVGObjects(_,d),this.clipPath&&_.push("</g>\n"),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",d),_.push("</svg>"),_.join("")},_setSVGPreamble:function(a,d){d.suppressPreamble||a.push('<?xml version="1.0" encoding="',d.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(a,d){var _,b=d.width||this.width,C=d.height||this.height,w='viewBox="0 0 '+this.width+" "+this.height+'" ',O=fabric.Object.NUM_FRACTION_DIGITS;d.viewBox?w='viewBox="'+d.viewBox.x+" "+d.viewBox.y+" "+d.viewBox.width+" "+d.viewBox.height+'" ':this.svgViewportTransformation&&(w='viewBox="'+c(-(_=this.viewportTransform)[4]/_[0],O)+" "+c(-_[5]/_[3],O)+" "+c(this.width/_[0],O)+" "+c(this.height/_[3],O)+'" '),a.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',b,'" ','height="',C,'" ',w,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(d),"</defs>\n")},createSVGClipPathMarkup:function(a){var d=this.clipPath;return d?(d.clipPathId="CLIPPATH_"+fabric.Object.__uid++,'<clipPath id="'+d.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(a.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var a=this;return["background","overlay"].map(function(d){var _=a[d+"Color"];if(_&&_.toLive){var b=a[d+"Vpt"],C=a.viewportTransform;return _.toSVG({width:a.width/(b?C[0]:1),height:a.height/(b?C[3]:1)},{additionalTransform:b?fabric.util.matrixToSVG(C):""})}}).join("")},createSVGFontFacesMarkup:function(){var a,d,_,b,C,w,O,A,F="",N={},Q=fabric.fontPaths,Z=[];for(this._objects.forEach(function v(X){Z.push(X),X._objects&&X._objects.forEach(v)}),O=0,A=Z.length;O<A;O++)if(d=(a=Z[O]).fontFamily,-1!==a.type.indexOf("text")&&!N[d]&&Q[d]&&(N[d]=!0,a.styles))for(C in _=a.styles)for(w in b=_[C])!N[d=b[w].fontFamily]&&Q[d]&&(N[d]=!0);for(var j in N)F+=["\t\t@font-face {\n","\t\t\tfont-family: '",j,"';\n","\t\t\tsrc: url('",Q[j],"');\n","\t\t}\n"].join("");return F&&(F=['\t<style type="text/css">',"<![CDATA[\n",F,"]]>","</style>\n"].join("")),F},_setSVGObjects:function(a,d){var _,b,C,w=this._objects;for(b=0,C=w.length;b<C;b++)(_=w[b]).excludeFromExport||this._setSVGObject(a,_,d)},_setSVGObject:function(a,d,_){a.push(d.toSVG(_))},_setSVGBgOverlayImage:function(a,d,_){this[d]&&!this[d].excludeFromExport&&this[d].toSVG&&a.push(this[d].toSVG(_))},_setSVGBgOverlayColor:function(a,d){var _=this[d+"Color"],C=this.width,w=this.height;if(_)if(_.toLive){var O=_.repeat,A=fabric.util.invertTransform(this.viewportTransform),F=this[d+"Vpt"]?fabric.util.matrixToSVG(A):"";a.push('<rect transform="'+F+" translate(",C/2,",",w/2,')"',' x="',_.offsetX-C/2,'" y="',_.offsetY-w/2,'" ','width="',"repeat-y"===O||"no-repeat"===O?_.source.width:C,'" height="',"repeat-x"===O||"no-repeat"===O?_.source.height:w,'" fill="url(#SVGID_'+_.id+')"',"></rect>\n")}else a.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',"></rect>\n")},sendToBack:function(a){if(!a)return this;var d,_,b,C=this._activeObject;if(a===C&&"activeSelection"===a.type)for(d=(b=C._objects).length;d--;)l(this._objects,_=b[d]),this._objects.unshift(_);else l(this._objects,a),this._objects.unshift(a);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(a){if(!a)return this;var d,_,b,C=this._activeObject;if(a===C&&"activeSelection"===a.type)for(b=C._objects,d=0;d<b.length;d++)l(this._objects,_=b[d]),this._objects.push(_);else l(this._objects,a),this._objects.push(a);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(a,d){if(!a)return this;var _,b,C,w,O,A=this._activeObject,F=0;if(a===A&&"activeSelection"===a.type)for(O=A._objects,_=0;_<O.length;_++)0+F<(C=this._objects.indexOf(b=O[_]))&&(w=C-1,l(this._objects,b),this._objects.splice(w,0,b)),F++;else 0!==(C=this._objects.indexOf(a))&&(w=this._findNewLowerIndex(a,C,d),l(this._objects,a),this._objects.splice(w,0,a));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(a,d,_){var b,C;if(_){for(C=(b=d)-1;0<=C;--C)if(a.intersectsWithObject(this._objects[C])||a.isContainedWithinObject(this._objects[C])||this._objects[C].isContainedWithinObject(a)){b=C;break}}else b=d-1;return b},bringForward:function(a,d){if(!a)return this;var _,b,C,w,O,A=this._activeObject,F=0;if(a===A&&"activeSelection"===a.type)for(_=(O=A._objects).length;_--;)(C=this._objects.indexOf(b=O[_]))<this._objects.length-1-F&&(w=C+1,l(this._objects,b),this._objects.splice(w,0,b)),F++;else(C=this._objects.indexOf(a))!==this._objects.length-1&&(w=this._findNewUpperIndex(a,C,d),l(this._objects,a),this._objects.splice(w,0,a));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(a,d,_){var b,C,w;if(_){for(C=(b=d)+1,w=this._objects.length;C<w;++C)if(a.intersectsWithObject(this._objects[C])||a.isContainedWithinObject(this._objects[C])||this._objects[C].isContainedWithinObject(a)){b=C;break}}else b=d+1;return b},moveTo:function(a,d){return l(this._objects,a),this._objects.splice(d,0,a),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),fabric.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),fabric.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),u(fabric.StaticCanvas.prototype,fabric.Observable),u(fabric.StaticCanvas.prototype,fabric.Collection),u(fabric.StaticCanvas.prototype,fabric.DataURLExporter),u(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(a){var d=o();if(!d||!d.getContext)return null;var _=d.getContext("2d");return _&&"setLineDash"===a?void 0!==_.setLineDash:null}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject,fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=function(){var a=i(this.lowerCanvasEl);return a&&a.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(a){var d=i(this.lowerCanvasEl);return d&&d.createJPEGStream(a)})}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(u){u.strokeStyle=this.color,u.lineWidth=this.width,u.lineCap=this.strokeLineCap,u.miterLimit=this.strokeMiterLimit,u.lineJoin=this.strokeLineJoin,u.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(u){var n=this.canvas.viewportTransform;u.save(),u.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(this.shadow){var u=this.canvas,n=this.shadow,l=u.contextTop,c=u.getZoom();u&&u._isRetinaScaling()&&(c*=fabric.devicePixelRatio),l.shadowColor=n.color,l.shadowBlur=n.blur*c,l.shadowOffsetX=n.offsetX*c,l.shadowOffsetY=n.offsetY*c}},needsFullRender:function(){return new fabric.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var u=this.canvas.contextTop;u.shadowColor="",u.shadowBlur=u.shadowOffsetX=u.shadowOffsetY=0},_isOutSideCanvas:function(u){return u.x<0||u.x>this.canvas.getWidth()||u.y<0||u.y>this.canvas.getHeight()}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(u){this.canvas=u,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(u,n,l){var c=n.midPointFrom(l);return u.quadraticCurveTo(n.x,n.y,c.x,c.y),c},onMouseDown:function(u,n){this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(u),this._captureDrawingPath(u),this._render())},onMouseMove:function(u,n){if(this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(u))&&this._captureDrawingPath(u)&&1<this._points.length))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,c=l.length,t=this.canvas.contextTop;this._saveAndTransform(t),this.oldEnd&&(t.beginPath(),t.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(t,l[c-2],l[c-1],!0),t.stroke(),t.restore()}},onMouseUp:function(u){return!this.canvas._isMainEvent(u.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(u){var n=new fabric.Point(u.x,u.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(u){return!(1<this._points.length&&u.eq(this._points[this._points.length-1])||(this.drawStraightLine&&1<this._points.length&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(u),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(u){var n=new fabric.Point(u.x,u.y);return this._addPoint(n)},_render:function(u){var n,l,c=this._points[0],t=this._points[1];if(this._saveAndTransform(u=u||this.canvas.contextTop),u.beginPath(),2===this._points.length&&c.x===t.x&&c.y===t.y){var e=this.width/1e3;c=new fabric.Point(c.x,c.y),t=new fabric.Point(t.x,t.y),c.x-=e,t.x+=e}for(u.moveTo(c.x,c.y),n=1,l=this._points.length;n<l;n++)this._drawSegment(u,c,t),c=this._points[n],t=this._points[n+1];u.lineTo(c.x,c.y),u.stroke(),u.restore()},convertPointsToSVGPath:function(u){return fabric.util.getSmoothPathFromPoints(u,this.width/1e3)},_isEmptySVGPath:function(u){return"M 0 0 Q 0 0 0 0 L 0 0"===fabric.util.joinPath(u)},createPath:function(u){var n=new fabric.Path(u,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new fabric.Shadow(this.shadow)),n},decimatePoints:function(u,n){if(u.length<=2)return u;var l,c=this.canvas.getZoom(),t=Math.pow(n/c,2),e=u.length-1,i=u[0],o=[i];for(l=1;l<e-1;l++)t<=Math.pow(i.x-u[l].x,2)+Math.pow(i.y-u[l].y,2)&&o.push(i=u[l]);return o.push(u[e]),o},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var u=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(u))this.canvas.requestRenderAll();else{var n=this.createPath(u);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.requestRenderAll(),n.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:n})}}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(u){this.canvas=u,this.points=[]},drawDot:function(u){var n=this.addPoint(u),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,n),l.restore()},dot:function(u,n){u.fillStyle=n.fill,u.beginPath(),u.arc(n.x,n.y,n.radius,0,2*Math.PI,!1),u.closePath(),u.fill()},onMouseDown:function(u){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(u)},_render:function(){var u,n,l=this.canvas.contextTop,c=this.points;for(this._saveAndTransform(l),u=0,n=c.length;u<n;u++)this.dot(l,c[u]);l.restore()},onMouseMove:function(u){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(u)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(u),this._render()):this.drawDot(u))},onMouseUp:function(){var u,n,l=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var c=[];for(u=0,n=this.points.length;u<n;u++){var t=this.points[u],e=new fabric.Circle({radius:t.radius,left:t.x,top:t.y,originX:"center",originY:"center",fill:t.fill});this.shadow&&(e.shadow=new fabric.Shadow(this.shadow)),c.push(e)}var i=new fabric.Group(c);i.canvas=this.canvas,this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=l,this.canvas.requestRenderAll()},addPoint:function(u){var n=new fabric.Point(u.x,u.y),l=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return n.radius=l,n.fill=c,this.points.push(n),n}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(u){this.canvas=u,this.sprayChunks=[]},onMouseDown:function(u){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(u),this.render(this.sprayChunkPoints)},onMouseMove:function(u){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(u)||(this.addSprayChunk(u),this.render(this.sprayChunkPoints))},onMouseUp:function(){var u=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],l=0,c=this.sprayChunks.length;l<c;l++)for(var t=this.sprayChunks[l],e=0,i=t.length;e<i;e++){var o=new fabric.Rect({width:t[e].width,height:t[e].width,left:t[e].x+1,top:t[e].y+1,originX:"center",originY:"center",fill:this.color});n.push(o)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var s=new fabric.Group(n);this.shadow&&s.set("shadow",new fabric.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},_getOptimizedRects:function(u){var n,l,c,t={};for(l=0,c=u.length;l<c;l++)t[n=u[l].left+""+u[l].top]||(t[n]=u[l]);var e=[];for(n in t)e.push(t[n]);return e},render:function(u){var n,l,c=this.canvas.contextTop;for(c.fillStyle=this.color,this._saveAndTransform(c),n=0,l=u.length;n<l;n++){var t=u[n];void 0!==t.opacity&&(c.globalAlpha=t.opacity),c.fillRect(t.x,t.y,t.width,t.width)}c.restore()},_render:function(){var u,n,l=this.canvas.contextTop;for(l.fillStyle=this.color,this._saveAndTransform(l),u=0,n=this.sprayChunks.length;u<n;u++)this.render(this.sprayChunks[u]);l.restore()},addSprayChunk:function(u){this.sprayChunkPoints=[];var n,l,c,t,e=this.width/2;for(t=0;t<this.density;t++){n=fabric.util.getRandomInt(u.x-e,u.x+e),l=fabric.util.getRandomInt(u.y-e,u.y+e),c=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var i=new fabric.Point(n,l);i.width=c,this.randomOpacity&&(i.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var u=fabric.util.createCanvasElement(),n=u.getContext("2d");return u.width=u.height=25,n.fillStyle=this.color,n.beginPath(),n.arc(10,10,10,0,2*Math.PI,!1),n.closePath(),n.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(u){return u.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(u){this.callSuper("_setBrushStyles",u),u.strokeStyle=this.getPattern(u)},createPath:function(u){var n=this.callSuper("createPath",u),l=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),n}}),function(){var u=fabric.util.getPointer,n=fabric.util.degreesToRadians,l=fabric.util.isTouchEvent;for(var c in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,o=this.getActiveObjects();if(0<o.length&&!this.preserveObjectStacking){e=[],i=[];for(var s=0,a=this._objects.length;s<a;s++)-1===o.indexOf(t=this._objects[s])?e.push(t):i.push(t);1<o.length&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){return!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),o=fabric.util.invertTransform(i),s=this.restorePointerVpt(e);return fabric.util.transformPoint(s,o)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var o=this._normalizePointer(t,{x:e,y:i}),s=Math.max(t.cacheTranslationX+o.x*t.zoomX,0),a=Math.max(t.cacheTranslationY+o.y*t.zoomY,0);return fabric.util.isTransparent(t._cacheContext,Math.round(s),Math.round(a),this.targetFindTolerance)}var d=this.contextCache,_=t.selectionBackgroundColor,b=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(d),d.save(),d.transform(b[0],b[1],b[2],b[3],b[4],b[5]),t.render(d),d.restore(),t.selectionBackgroundColor=_,fabric.util.isTransparent(d,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===t[e]}):t[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),o=this._activeObject;return!e||e&&o&&1<i.length&&-1===i.indexOf(e)&&o!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&o&&o!==e},_shouldCenterTransform:function(t,e,i){var o;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?o=this.centeredScaling||t.centeredScaling:"rotate"===e&&(o=this.centeredRotation||t.centeredRotation),o?!i:i},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i,o){if(!e||!t)return"drag";var s=o.controls[e];return s.getActionName(i,s,o)},_setupCurrentTransform:function(t,e,i){if(e){var o=this.getPointer(t),s=e.__corner,a=e.controls[s],d=i&&s?a.getActionHandler(t,e,a):fabric.controlsUtils.dragHandler,_=this._getActionFromCorner(i,s,t,e),b=this._getOriginFromCorner(e,s),C=t[this.centeredKey],w={target:e,action:_,actionHandler:d,corner:s,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:o.x-e.left,offsetY:o.y-e.top,originX:b.x,originY:b.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:n(e.angle),width:e.width*e.scaleX,shiftKey:t.shiftKey,altKey:C,original:fabric.util.saveObjectTransform(e)};this._shouldCenterTransform(e,_,C)&&(w.originX="center",w.originY="center"),w.original.originX=b.x,w.original.originY=b.y,this._currentTransform=w,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new fabric.Point(e.ex,e.ey),o=fabric.util.transformPoint(i,this.viewportTransform),s=new fabric.Point(e.ex+e.left,e.ey+e.top),a=fabric.util.transformPoint(s,this.viewportTransform),d=Math.min(o.x,a.x),_=Math.min(o.y,a.y),b=Math.max(o.x,a.x),C=Math.max(o.y,a.y),w=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(d,_,b-d,C-_)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,d+=w,_+=w,b-=w,C-=w,fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(d,_,b-d,C-_))},findTarget:function(t,e){if(!this.skipTargetFind){var i,o,s=this.getPointer(t,!0),a=this._activeObject,d=this.getActiveObjects(),_=l(t),b=1<d.length&&!e||1===d.length;if(this.targets=[],b&&a._findTargetCorner(s,_)||1<d.length&&!e&&a===this._searchPossibleTargets([a],s))return a;if(1===d.length&&a===this._searchPossibleTargets([a],s)){if(!this.preserveObjectStacking)return a;i=a,o=this.targets,this.targets=[]}var C=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&C&&i&&C!==i&&(C=i,this.targets=o),C}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t)&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,i.x,i.y)))return!0},_searchPossibleTargets:function(t,e){for(var i,o,s=t.length;s--;){var a=t[s],d=a.group?this._normalizePointer(a.group,e):e;if(this._checkTarget(d,a,e)){(i=t[s]).subTargetCheck&&i instanceof fabric.Group&&(o=this._searchPossibleTargets(i._objects,e))&&this.targets.push(o);break}}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var i,o=u(t),s=this.upperCanvasEl,a=s.getBoundingClientRect(),d=a.width||0,_=a.height||0;d&&_||("top"in a&&"bottom"in a&&(_=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(d=Math.abs(a.right-a.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,e||(o=this.restorePointerVpt(o));var b=this.getRetinaScaling();return 1!==b&&(o.x/=b,o.y/=b),{x:o.x*(i=0===d||0===_?{width:1,height:1}:{width:s.width/d,height:s.height/_}).width,y:o.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),fabric.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,o=this.getActiveObjects(),s=[],a=[];t.forEach(function(d){-1===o.indexOf(d)&&(i=!0,d.fire("deselected",{e,target:d}),a.push(d))}),o.forEach(function(d){-1===t.indexOf(d)&&(i=!0,d.fire("selected",{e,target:d}),s.push(d))}),0<t.length&&0<o.length?i&&this.fire("selection:updated",{e,selected:s,deselected:a}):0<o.length?this.fire("selection:created",{e,selected:s}):0<t.length&&this.fire("selection:cleared",{e,deselected:a})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&!!this._discardActiveObject(e,t)&&!t.onSelect({e})&&(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){fabric.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,fabric.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var o=this._realizeGroupTransformOnObject(t),s=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,o),s},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(i){e[i]=t[i]}),fabric.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var o=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,o)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),fabric.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),fabric.StaticCanvas)"prototype"!==c&&(fabric.Canvas[c]=fabric.StaticCanvas[c])}(),function(){var u=fabric.util.addListener,n=fabric.util.removeListener,l={passive:!1};function c(t,e){return t.button&&t.button===e-1}fabric.util.object.extend(fabric.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(u,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,o=this._getEventPrefix();t(fabric.window,"resize",this._onResize),t(i,o+"down",this._onMouseDown),t(i,o+"move",this._onMouseMove,l),t(i,o+"out",this._onMouseOut),t(i,o+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var t=this._getEventPrefix();n(fabric.document,t+"up",this._onMouseUp),n(fabric.document,"touchend",this._onTouchEnd,l),n(fabric.document,t+"move",this._onMouseMove,l),n(fabric.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var i=this;this._hoveredTargets.forEach(function(o){i.fire("mouse:out",{target:e,e:t}),o&&e.fire("mouseout",{e:t})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(o){o.isEditing&&o.hiddenTextarea.focus()})},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler("drop:before",t),this._simpleEventHandler("drop",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();u(fabric.document,"touchend",this._onTouchEnd,l),u(fabric.document,"touchmove",this._onMouseMove,l),n(e,i+"down",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();n(e,i+"move",this._onMouseMove,l),u(fabric.document,i+"up",this._onMouseUp),u(fabric.document,i+"move",this._onMouseMove,l)},_onTouchEnd:function(t){if(!(0<t.touches.length)){this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;var e=this._getEventPrefix();n(fabric.document,"touchend",this._onTouchEnd,l),n(fabric.document,"touchmove",this._onMouseMove,l);var i=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){u(i.upperCanvasEl,e+"down",i._onMouseDown),i._willAddMouseDown=0},400)}},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();this._isMainEvent(t)&&(n(fabric.document,i+"up",this._onMouseUp),n(fabric.document,i+"move",this._onMouseMove,l),u(e,i+"move",this._onMouseMove,l))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||!1},__onMouseUp:function(t){var e,i=this._currentTransform,o=this._groupSelector,s=!1,a=!o||0===o.left&&0===o.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),c(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,a);else{if(c(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,a),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(i&&(this._finalizeCurrentTransform(t),s=i.actionPerformed),!a){var d=e===this._activeObject;this._maybeGroupObjects(t),s||(s=this._shouldRender(e)||!d&&e===this._activeObject)}var _,b;if(e){if(_=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),s=!0;else{var C=e.controls[_],w=C&&C.getMouseUpHandler(t,e,C);w&&w(t,i,(b=this.getPointer(t)).x,b.y)}e.isMoving=!1}if(i&&(i.target!==e||i.corner!==_)){var O=i.target&&i.target.controls[i.corner],A=O&&O.getMouseUpHandler(t,e,C);b=b||this.getPointer(t),A&&A(t,i,b.x,b.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,a),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),s?this.requestRenderAll():a||this.renderTop()}}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),o=this.targets,s={e,target:i,subTargets:o};if(this.fire(t,s),i&&i.fire(t,s),!o)return i;for(var a=0;a<o.length;a++)o[a].fire(t,s);return i},_handleEvent:function(t,e,i,o){var s=this._target,a=this.targets||[],d={e:t,target:s,subTargets:a,button:i||1,isClick:o||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(d.currentTarget=this.findTarget(t),d.currentSubTargets=this.targets),this.fire("mouse:"+e,d),s&&s.fire("mouse"+e,d);for(var _=0;_<a.length;_++)a[_].fire("mouse"+e,d)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target,o={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire("modified",o)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(c(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(c(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var o=this._shouldRender(e),s=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):s&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var a=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var d=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t));if(e.__corner=d,e===this._activeObject&&(d||!s)){this._setupCurrentTransform(t,e,a);var _=e.controls[d],b=(i=this.getPointer(t),_&&_.getMouseDownHandler(t,e,_));b&&b(t,this._currentTransform,i.x,i.y)}}this._handleEvent(t,"down"),(o||s)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,i;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var o=this._groupSelector;o?(o.left=(i=this._absolutePointer).x-o.ex,o.top=i.y-o.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,o=this._hoveredTargets,s=this.targets,a=Math.max(o.length,s.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var d=0;d<a;d++)this.fireSyntheticInOutEvents(s[d],e,{oldTarget:o[d],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,o=this._hoveredTargets,s=this.targets,a=Math.max(o.length,s.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var d=0;d<a;d++)this.fireSyntheticInOutEvents(s[d],e,{oldTarget:o[d],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var o,s,a,d=i.oldTarget,_=d!==t,b=i.canvasEvtIn,C=i.canvasEvtOut;_&&(o={e,target:t,previousTarget:d},s={e,target:d,nextTarget:t}),a=t&&_,d&&_&&(C&&this.fire(C,s),d.fire(i.evtOut,s)),a&&(b&&this.fire(b,o),t.fire(i.evtIn,o))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var a=e.action,d=!1,_=e.actionHandler;_&&(d=_(t,e,i.x,i.y)),"drag"===a&&d&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||d},_fire:fabric.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,o=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,s=(!o||!o.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));s?this.setCursor(this.getCornerCursor(s,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map(function(a){i=a.hoverCursor||i}),this.setCursor(i))},getCornerCursor:function(t,e,i){var o=e.controls[t];return o.cursorStyleHandler(i,o,e)}})}(),function(){var u=Math.min,n=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(l,c){var t=this._activeObject;return t&&this._isSelectionKeyPressed(l)&&c&&c.selectable&&this.selection&&(t!==c||"activeSelection"===t.type)&&!c.onSelect({e:l})},_handleGrouping:function(l,c){var t=this._activeObject;t.__corner||(c!==t||(c=this.findTarget(l,!0))&&c.selectable)&&(t&&"activeSelection"===t.type?this._updateActiveSelection(c,l):this._createActiveSelection(c,l))},_updateActiveSelection:function(l,c){var t=this._activeObject,e=t._objects.slice(0);t.contains(l)?(t.removeWithUpdate(l),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat(),1===t.size()&&this._setActiveObject(t.item(0),c)):(t.addWithUpdate(l),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(e,c)},_createActiveSelection:function(l,c){var t=this.getActiveObjects(),e=this._createGroup(l);this._hoveredTarget=e,this._setActiveObject(e,c),this._fireSelectionEvents(t,c)},_createGroup:function(l){var c=this._objects,t=c.indexOf(this._activeObject)<c.indexOf(l)?[this._activeObject,l]:[l,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.ActiveSelection(t,{canvas:this})},_groupSelectedObjects:function(l){var c,t=this._collectObjects(l);1===t.length?this.setActiveObject(t[0],l):1<t.length&&(c=new fabric.ActiveSelection(t.reverse(),{canvas:this}),this.setActiveObject(c,l))},_collectObjects:function(l){for(var c,t=[],e=this._groupSelector.ex,i=this._groupSelector.ey,o=e+this._groupSelector.left,s=i+this._groupSelector.top,a=new fabric.Point(u(e,o),u(i,s)),d=new fabric.Point(n(e,o),n(i,s)),_=!this.selectionFullyContained,b=e===o&&i===s,C=this._objects.length;C--&&!((c=this._objects[C])&&c.selectable&&c.visible&&(_&&c.intersectsWithRect(a,d,!0)||c.isContainedWithinRect(a,d,!0)||_&&c.containsPoint(a,null,!0)||_&&c.containsPoint(d,null,!0))&&(t.push(c),b)););return 1<t.length&&(t=t.filter(function(w){return!w.onSelect({e:l})})),t},_maybeGroupObjects:function(l){this.selection&&this._groupSelector&&this._groupSelectedObjects(l),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(u){u||(u={});var n=u.format||"png",l=u.quality||1,c=(u.multiplier||1)*(u.enableRetinaScaling?this.getRetinaScaling():1),t=this.toCanvasElement(c,u);return fabric.util.toDataURL(t,n,l)},toCanvasElement:function(u,n){var l=((n=n||{}).width||this.width)*(u=u||1),c=(n.height||this.height)*u,t=this.getZoom(),e=this.width,i=this.height,o=t*u,s=this.viewportTransform,_=this.interactive,b=[o,0,0,o,(s[4]-(n.left||0))*u,(s[5]-(n.top||0))*u],C=this.enableRetinaScaling,w=fabric.util.createCanvasElement(),O=this.contextTop;return w.width=l,w.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=l,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=s,this.width=e,this.height=i,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=C,this.contextTop=O,w}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromJSON:function(u,n,l){if(u){var c="string"==typeof u?JSON.parse(u):fabric.util.object.clone(u),t=this,e=c.clipPath,i=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(o){t.clear(),t._setBgOverlay(c,function(){e?t._enlivenObjects([e],function(s){t.clipPath=s[0],t.__setupCanvas.call(t,c,o,i,n)}):t.__setupCanvas.call(t,c,o,i,n)})},l),this}},__setupCanvas:function(u,n,l,c){var t=this;n.forEach(function(e,i){t.insertAt(e,i)}),this.renderOnAddRemove=l,delete u.objects,delete u.backgroundImage,delete u.overlayImage,delete u.background,delete u.overlay,this._setOptions(u),this.renderAll(),c&&c()},_setBgOverlay:function(u,n){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(u.backgroundImage||u.overlayImage||u.background||u.overlay){var c=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",u.backgroundImage,l,c),this.__setBgOverlay("overlayImage",u.overlayImage,l,c),this.__setBgOverlay("backgroundColor",u.background,l,c),this.__setBgOverlay("overlayColor",u.overlay,l,c)}else n&&n()},__setBgOverlay:function(u,n,l,c){var t=this;if(!n)return l[u]=!0,void(c&&c());"backgroundImage"===u||"overlayImage"===u?fabric.util.enlivenObjects([n],function(e){t[u]=e[0],l[u]=!0,c&&c()}):this["set"+fabric.util.string.capitalize(u,!0)](n,function(){l[u]=!0,c&&c()})},_enlivenObjects:function(u,n,l){u&&0!==u.length?fabric.util.enlivenObjects(u,function(c){n&&n(c)},null,l):n&&n([])},_toDataURL:function(u,n){this.clone(function(l){n(l.toDataURL(u))})},_toDataURLWithMultiplier:function(u,n,l){this.clone(function(c){l(c.toDataURLWithMultiplier(u,n))})},clone:function(u,n){var l=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(c){c.loadFromJSON(l,function(){u&&u(c)})})},cloneWithoutData:function(u){var n=fabric.util.createCanvasElement();n.width=this.width,n.height=this.height;var l=new fabric.Canvas(n);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),u&&u(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):u&&u(l)}}),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.extend,c=n.util.object.clone,t=n.util.toFixed,e=n.util.string.capitalize,i=n.util.degreesToRadians;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!n.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(s){s&&this.setOptions(s)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(s){var a=n.perfLimitSizeTotal,d=s.width,_=s.height,b=n.maxCacheSideLimit,C=n.minCacheSideLimit;if(d<=b&&_<=b&&d*_<=a)return d<C&&(s.width=C),_<C&&(s.height=C),s;var O=n.util.limitDimsByArea(d/_,a),A=n.util.capValue,F=A(C,O.x,b),N=A(C,O.y,b);return F<d&&(s.zoomX/=d/F,s.width=F,s.capped=!0),N<_&&(s.zoomY/=_/N,s.height=N,s.capped=!0),s},_getCacheCanvasDimensions:function(){var s=this.getTotalObjectScaling(),a=this._getTransformedDimensions(0,0),d=a.x*s.scaleX/this.scaleX,_=a.y*s.scaleY/this.scaleY;return{width:d+2,height:_+2,zoomX:s.scaleX,zoomY:s.scaleY,x:d,y:_}},_updateCacheCanvas:function(){var s=this.canvas;if(this.noScaleCache&&s&&s._currentTransform){var d=s._currentTransform.action;if(this===s._currentTransform.target&&d.slice&&"scale"===d.slice(0,5))return!1}var _,b,C=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),O=n.minCacheSideLimit,A=w.width,F=w.height,N=w.zoomX,Q=w.zoomY,Z=A!==this.cacheWidth||F!==this.cacheHeight,v=Z||this.zoomX!==N||this.zoomY!==Q,X=0,Y=0,tt=!1;if(Z){var st=this._cacheCanvas.width,W=this._cacheCanvas.height,I=st<A||W<F;tt=I||(A<.9*st||F<.9*W)&&O<st&&O<W,I&&!w.capped&&(O<A||O<F)&&(X=.1*A,Y=.1*F)}return this instanceof n.Text&&this.path&&(tt=v=!0,X+=this.getHeightOfLine(0)*this.zoomX,Y+=this.getHeightOfLine(0)*this.zoomY),!!v&&(tt?(C.width=Math.ceil(A+X),C.height=Math.ceil(F+Y)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,C.width,C.height)),_=w.x/2,b=w.y/2,this.cacheTranslationX=Math.round(C.width/2-_)+_,this.cacheTranslationY=Math.round(C.height/2-b)+b,this.cacheWidth=A,this.cacheHeight=F,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(N,Q),this.zoomX=N,this.zoomY=Q,!0)},setOptions:function(s){this._setOptions(s),this._initGradient(s.fill,"fill"),this._initGradient(s.stroke,"stroke"),this._initPattern(s.fill,"fill"),this._initPattern(s.stroke,"stroke")},transform:function(s){var d=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&s===this.canvas.contextTop));s.transform(d[0],d[1],d[2],d[3],d[4],d[5])},toObject:function(s){var a=n.Object.NUM_FRACTION_DIGITS,d={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:t(this.left,a),top:t(this.top,a),width:t(this.width,a),height:t(this.height,a),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:t(this.strokeWidth,a),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:t(this.strokeMiterLimit,a),scaleX:t(this.scaleX,a),scaleY:t(this.scaleY,a),angle:t(this.angle,a),flipX:this.flipX,flipY:this.flipY,opacity:t(this.opacity,a),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:t(this.skewX,a),skewY:t(this.skewY,a)};return this.clipPath&&!this.clipPath.excludeFromExport&&(d.clipPath=this.clipPath.toObject(s),d.clipPath.inverted=this.clipPath.inverted,d.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,d,s),this.includeDefaultValues||(d=this._removeDefaultValues(d)),d},toDatalessObject:function(s){return this.toObject(s)},_removeDefaultValues:function(s){var a=n.util.getKlass(s.type).prototype;return a.stateProperties.forEach(function(d){"left"!==d&&"top"!==d&&(s[d]===a[d]&&delete s[d],Array.isArray(s[d])&&Array.isArray(a[d])&&0===s[d].length&&0===a[d].length&&delete s[d])}),s},toString:function(){return"#<fabric."+e(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var s=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(s.scaleX),scaleY:Math.abs(s.scaleY)}},getTotalObjectScaling:function(){var s=this.getObjectScaling(),a=s.scaleX,d=s.scaleY;if(this.canvas){var _=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();a*=_*b,d*=_*b}return{scaleX:a,scaleY:d}},getObjectOpacity:function(){var s=this.opacity;return this.group&&(s*=this.group.getObjectOpacity()),s},_set:function(s,a){var _=this[s]!==a,b=!1;return("scaleX"===s||"scaleY"===s)&&(a=this._constrainScale(a)),"scaleX"===s&&a<0?(this.flipX=!this.flipX,a*=-1):"scaleY"===s&&a<0?(this.flipY=!this.flipY,a*=-1):"shadow"!==s||!a||a instanceof n.Shadow?"dirty"===s&&this.group&&this.group.set("dirty",a):a=new n.Shadow(a),this[s]=a,_&&(b=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(s)?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&-1<this.stateProperties.indexOf(s)&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(s){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(s.save(),this._setupCompositeOperation(s),this.drawSelectionBackground(s),this.transform(s),this._setOpacity(s),this._setShadow(s,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(s)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(s),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),s.restore())},renderCache:function(s){s=s||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,s.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(s,a){if(s.save(),s.globalCompositeOperation=a.inverted?"destination-out":"destination-in",a.absolutePositioned){var d=n.util.invertTransform(this.calcTransformMatrix());s.transform(d[0],d[1],d[2],d[3],d[4],d[5])}a.transform(s),s.scale(1/a.zoomX,1/a.zoomY),s.drawImage(a._cacheCanvas,-a.cacheTranslationX,-a.cacheTranslationY),s.restore()},drawObject:function(s,a){var d=this.fill,_=this.stroke;a?(this.fill="black",this.stroke="",this._setClippingProperties(s)):this._renderBackground(s),this._render(s),this._drawClipPath(s,this.clipPath),this.fill=d,this.stroke=_},_drawClipPath:function(s,a){a&&(a.canvas=this.canvas,a.shouldCache(),a._transformDone=!0,a.renderCache({forClipping:!0}),this.drawClipPathOnCache(s,a))},drawCacheOnCanvas:function(s){s.scale(1/this.zoomX,1/this.zoomY),s.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(s){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!s&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!s){var a=this.cacheWidth/this.zoomX,d=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-a/2,-d/2,a,d)}return!0}return!1},_renderBackground:function(s){if(this.backgroundColor){var a=this._getNonTransformedDimensions();s.fillStyle=this.backgroundColor,s.fillRect(-a.x/2,-a.y/2,a.x,a.y),this._removeShadow(s)}},_setOpacity:function(s){this.group&&!this.group._transformDone?s.globalAlpha=this.getObjectOpacity():s.globalAlpha*=this.opacity},_setStrokeStyles:function(s,a){var d=a.stroke;d&&(s.lineWidth=a.strokeWidth,s.lineCap=a.strokeLineCap,s.lineDashOffset=a.strokeDashOffset,s.lineJoin=a.strokeLineJoin,s.miterLimit=a.strokeMiterLimit,d.toLive?"percentage"===d.gradientUnits||d.gradientTransform||d.patternTransform?this._applyPatternForTransformedGradient(s,d):(s.strokeStyle=d.toLive(s,this),this._applyPatternGradientTransform(s,d)):s.strokeStyle=a.stroke)},_setFillStyles:function(s,a){var d=a.fill;d&&(d.toLive?(s.fillStyle=d.toLive(s,this),this._applyPatternGradientTransform(s,a.fill)):s.fillStyle=d)},_setClippingProperties:function(s){s.globalAlpha=1,s.strokeStyle="transparent",s.fillStyle="#000000"},_setLineDash:function(s,a){a&&0!==a.length&&(1&a.length&&a.push.apply(a,a),s.setLineDash(a))},_renderControls:function(s,a){var d,_,b,C=this.getViewportTransform(),w=this.calcTransformMatrix();_=void 0!==(a=a||{}).hasBorders?a.hasBorders:this.hasBorders,b=void 0!==a.hasControls?a.hasControls:this.hasControls,w=n.util.multiplyTransformMatrices(C,w),d=n.util.qrDecompose(w),s.save(),s.translate(d.translateX,d.translateY),s.lineWidth=1*this.borderScaleFactor,this.group||(s.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),s.rotate(i(this.group?d.angle:this.angle)),a.forActiveSelection||this.group?_&&this.drawBordersInGroup(s,d,a):_&&this.drawBorders(s,a),b&&this.drawControls(s,a),s.restore()},_setShadow:function(s){if(this.shadow){var a,d=this.shadow,_=this.canvas,b=_&&_.viewportTransform[0]||1,C=_&&_.viewportTransform[3]||1;a=d.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),_&&_._isRetinaScaling()&&(b*=n.devicePixelRatio,C*=n.devicePixelRatio),s.shadowColor=d.color,s.shadowBlur=d.blur*n.browserShadowBlurConstant*(b+C)*(a.scaleX+a.scaleY)/4,s.shadowOffsetX=d.offsetX*b*a.scaleX,s.shadowOffsetY=d.offsetY*C*a.scaleY}},_removeShadow:function(s){this.shadow&&(s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0)},_applyPatternGradientTransform:function(s,a){if(!a||!a.toLive)return{offsetX:0,offsetY:0};var d=a.gradientTransform||a.patternTransform,_=-this.width/2+a.offsetX||0,b=-this.height/2+a.offsetY||0;return"percentage"===a.gradientUnits?s.transform(this.width,0,0,this.height,_,b):s.transform(1,0,0,1,_,b),d&&s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),{offsetX:_,offsetY:b}},_renderPaintInOrder:function(s){"stroke"===this.paintFirst?(this._renderStroke(s),this._renderFill(s)):(this._renderFill(s),this._renderStroke(s))},_render:function(){},_renderFill:function(s){this.fill&&(s.save(),this._setFillStyles(s,this),"evenodd"===this.fillRule?s.fill("evenodd"):s.fill(),s.restore())},_renderStroke:function(s){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this.strokeUniform&&this.group){var a=this.getObjectScaling();s.scale(1/a.scaleX,1/a.scaleY)}else this.strokeUniform&&s.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(s,this.strokeDashArray),this._setStrokeStyles(s,this),s.stroke(),s.restore()}},_applyPatternForTransformedGradient:function(s,a){var d,_=this._limitCacheSize(this._getCacheCanvasDimensions()),b=n.util.createCanvasElement(),C=this.canvas.getRetinaScaling(),w=_.x/this.scaleX/C,O=_.y/this.scaleY/C;b.width=w,b.height=O,(d=b.getContext("2d")).beginPath(),d.moveTo(0,0),d.lineTo(w,0),d.lineTo(w,O),d.lineTo(0,O),d.closePath(),d.translate(w/2,O/2),d.scale(_.zoomX/this.scaleX/C,_.zoomY/this.scaleY/C),this._applyPatternGradientTransform(d,a),d.fillStyle=a.toLive(s),d.fill(),s.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),s.scale(C*this.scaleX/_.zoomX,C*this.scaleY/_.zoomY),s.strokeStyle=d.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var s=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",s.scaleX),this.set("scaleY",s.scaleY),this.angle=s.angle,this.skewX=s.skewX,this.skewY=0}},_removeTransformMatrix:function(s){var a=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),a=n.util.transformPoint(a,this.transformMatrix)),this.transformMatrix=null,s&&(this.scaleX*=s.scaleX,this.scaleY*=s.scaleY,this.cropX=s.cropX,this.cropY=s.cropY,a.x+=s.offsetLeft,a.y+=s.offsetTop,this.width=s.width,this.height=s.height),this.setPositionByOrigin(a,"center","center")},clone:function(s,a){var d=this.toObject(a);this.constructor.fromObject?this.constructor.fromObject(d,s):n.Object._fromObject("Object",d,s)},cloneAsImage:function(s,a){var d=this.toCanvasElement(a);return s&&s(new n.Image(d)),this},toCanvasElement:function(s){s||(s={});var a=n.util,d=a.saveObjectTransform(this),_=this.group,b=this.shadow,C=Math.abs,w=(s.multiplier||1)*(s.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,s.withoutTransform&&a.resetObjectTransform(this),s.withoutShadow&&(this.shadow=null);var O,A,N,Q=n.util.createCanvasElement(),Z=this.getBoundingRect(!0,!0),j=this.shadow,v={x:0,y:0};j&&(A=j.blur,O=j.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),v.x=2*Math.round(C(j.offsetX)+A)*C(O.scaleX),v.y=2*Math.round(C(j.offsetY)+A)*C(O.scaleY)),N=Z.height+v.y,Q.width=Math.ceil(Z.width+v.x),Q.height=Math.ceil(N);var X=new n.StaticCanvas(Q,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===s.format&&(X.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(X.width/2,X.height/2),"center","center");var Y=this.canvas;X.add(this);var tt=X.toCanvasElement(w||1,s);return this.shadow=b,this.set("canvas",Y),_&&(this.group=_),this.set(d).setCoords(),X._objects=[],X.dispose(),X=null,tt},toDataURL:function(s){return s||(s={}),n.util.toDataURL(this.toCanvasElement(s),s.format||"png",s.quality||1)},isType:function(s){return 1<arguments.length?Array.from(arguments).includes(this.type):this.type===s},complexity:function(){return 1},toJSON:function(s){return this.toObject(s)},rotate:function(s){var a=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return a&&this._setOriginToCenter(),this.set("angle",s),a&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(s,a){a=a||this.canvas.getPointer(s);var d=new n.Point(a.x,a.y),_=this._getLeftTopCoords();return this.angle&&(d=n.util.rotatePoint(d,_,i(-this.angle))),{x:d.x-_.x,y:d.y-_.y}},_setupCompositeOperation:function(s){this.globalCompositeOperation&&(s.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),l(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(s,a,d,_){var b=n[s];a=c(a,!0),n.util.enlivenPatterns([a.fill,a.stroke],function(C){void 0!==C[0]&&(a.fill=C[0]),void 0!==C[1]&&(a.stroke=C[1]),n.util.enlivenObjectEnlivables(a,a,function(){var w=_?new b(a[_],a):new b(a);d&&d(w)})})},n.Object.__uid=0)}(typeof exports<"u"?exports:this),function(){var u=fabric.util.degreesToRadians,n={left:-.5,center:0,right:.5},l={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(c,t,e,i,o){var s,a,d,_=c.x,b=c.y;return"string"==typeof t?t=n[t]:t-=.5,"string"==typeof i?i=n[i]:i-=.5,"string"==typeof e?e=l[e]:e-=.5,"string"==typeof o?o=l[o]:o-=.5,a=o-e,((s=i-t)||a)&&(d=this._getTransformedDimensions(),_=c.x+s*d.x,b=c.y+a*d.y),new fabric.Point(_,b)},translateToCenterPoint:function(c,t,e){var i=this.translateToGivenOrigin(c,t,e,"center","center");return this.angle?fabric.util.rotatePoint(i,c,u(this.angle)):i},translateToOriginPoint:function(c,t,e){var i=this.translateToGivenOrigin(c,"center","center",t,e);return this.angle?fabric.util.rotatePoint(i,c,u(this.angle)):i},getCenterPoint:function(){var c=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,t){var e=this.getCenterPoint();return this.translateToOriginPoint(e,c,t)},toLocalPoint:function(c,t,e){var i,o,s=this.getCenterPoint();return i=void 0!==t&&void 0!==e?this.translateToGivenOrigin(s,"center","center",t,e):new fabric.Point(this.left,this.top),o=new fabric.Point(c.x,c.y),this.angle&&(o=fabric.util.rotatePoint(o,s,-u(this.angle))),o.subtractEquals(i)},setPositionByOrigin:function(c,t,e){var i=this.translateToCenterPoint(c,t,e),o=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)},adjustPosition:function(c){var t,e,i=u(this.angle),o=this.getScaledWidth(),s=fabric.util.cos(i)*o,a=fabric.util.sin(i)*o;this.left+=s*((e="string"==typeof c?n[c]:c-.5)-(t="string"==typeof this.originX?n[this.originX]:this.originX-.5)),this.top+=a*(e-t),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var u=fabric.util,n=u.degreesToRadians,l=u.multiplyTransformMatrices,c=u.transformPoint;u.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return i=this._getCoords(t,e),[new fabric.Point(i.tl.x,i.tl.y),new fabric.Point(i.tr.x,i.tr.y),new fabric.Point(i.br.x,i.br.y),new fabric.Point(i.bl.x,i.bl.y)];var i},intersectsWithRect:function(t,e,i,o){var s=this.getCoords(i,o);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(s,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var o=this.getCoords(e,i),a=0,d=t._getImageLines(e?t.aCoords:t.lineCoords);a<4;a++)if(!t.containsPoint(o[a],d))return!1;return!0},isContainedWithinRect:function(t,e,i,o){var s=this.getBoundingRect(i,o);return s.left>=t.x&&s.left+s.width<=e.x&&s.top>=t.y&&s.top+s.height<=e.y},containsPoint:function(t,e,i,o){var s=this._getCoords(i,o),a=(e=e||this._getImageLines(s),this._findCrossPoints(t,e));return 0!==a&&a%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some(function(o){return o.x<=i.x&&o.x>=e.x&&o.y<=i.y&&o.y>=e.y})||!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t)},_containsCenterOfCanvas:function(t,e,i){return!!this.containsPoint({x:(t.x+e.x)/2,y:(t.y+e.y)/2},null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this.getCoords(!0,t).every(function(o){return(o.x>=i.x||o.x<=e.x)&&(o.y>=i.y||o.y<=e.y)})&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,o,s,a=0;for(var d in e)if(!((s=e[d]).o.y<t.y&&s.d.y<t.y||s.o.y>=t.y&&s.d.y>=t.y||(s.o.x===s.d.x&&s.o.x>=t.x?o=s.o.x:(i=(s.d.y-s.o.y)/(s.d.x-s.o.x),o=-(t.y-0*t.x-(s.o.y-i*s.o.x))/(0-i)),o>=t.x&&(a+=1),2!==a)))break;return a},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return u.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcLineCoords:function(){var t=this.getViewportTransform(),e=this.padding,i=n(this.angle),o=u.cos(i)*e,s=u.sin(i)*e,a=o+s,d=o-s,_=this.calcACoords(),b={tl:c(_.tl,t),tr:c(_.tr,t),bl:c(_.bl,t),br:c(_.br,t)};return e&&(b.tl.x-=d,b.tl.y-=a,b.tr.x+=a,b.tr.y-=d,b.bl.x-=a,b.bl.y+=d,b.br.x+=d,b.br.y+=a),b},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),o=l(i,e),s=l(o,t),a=(s=l(s,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),d={};return this.forEachControl(function(_,b,C){d[b]=_.positionHandler(a,s,C)}),d},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=l(e,t),o=this._getTransformedDimensions(),s=o.x/2,a=o.y/2;return{tl:c({x:-s,y:-a},i),tr:c({x:s,y:-a},i),bl:c({x:-s,y:a},i),br:c({x:s,y:a},i)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return u.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",i="";return!t&&this.group&&(i=this.group.transformMatrixKey(t)+e),i+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),o=this.matrixCache||(this.matrixCache={});return o.key===i?o.value:(this.group&&(e=l(this.group.calcTransformMatrix(!1),e)),o.key=i,o.value=e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var i=this._calcTranslateMatrix(),o={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=t,e.value=u.composeMatrix(o),e.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,o,s,a=0===t&&0===e;if(this.strokeUniform?(o=this.width,s=this.height):(o=(i=this._getNonTransformedDimensions()).x,s=i.y),a)return this._finalizeDimensions(o*this.scaleX,s*this.scaleY);var d=u.sizeAfterTransform(o,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:e});return this._finalizeDimensions(d.x,d.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return c(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(u){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,u):this.canvas&&this.canvas.sendBackwards(this,u),this},bringForward:function(u){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,u):this.canvas&&this.canvas.bringForward(this,u),this},moveTo:function(u){return this.group&&"activeSelection"!==this.group.type?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,u):this.canvas&&this.canvas.moveTo(this,u),this}}),function(){function u(l,c){if(c){if(c.toLive)return l+": url(#SVGID_"+c.id+"); ";var t=new fabric.Color(c),e=l+": "+t.toRgb()+"; ",i=t.getAlpha();return 1!==i&&(e+=l+"-opacity: "+i.toString()+"; "),e}return l+": none; "}var n=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(l){var c=this.fillRule?this.fillRule:"nonzero",t=this.strokeWidth?this.strokeWidth:"0",e=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=void 0!==this.opacity?this.opacity:"1",_=this.visible?"":" visibility: hidden;",b=l?"":this.getSvgFilter(),C=u("fill",this.fill);return[u("stroke",this.stroke),"stroke-width: ",t,"; ","stroke-dasharray: ",e,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",a,"; ",C,"fill-rule: ",c,"; ","opacity: ",d,";",b,_].join("")},getSvgSpanStyles:function(l,c){var t="; ",e=l.fontFamily?"font-family: "+(-1===l.fontFamily.indexOf("'")&&-1===l.fontFamily.indexOf('"')?"'"+l.fontFamily+"'":l.fontFamily)+t:"",i=l.strokeWidth?"stroke-width: "+l.strokeWidth+t:"",o=l.fontSize?"font-size: "+l.fontSize+"px"+t:"",s=l.fontStyle?"font-style: "+l.fontStyle+t:"",a=l.fontWeight?"font-weight: "+l.fontWeight+t:"",d=l.fill?u("fill",l.fill):"",_=l.stroke?u("stroke",l.stroke):"",b=this.getSvgTextDecoration(l);return b&&(b="text-decoration: "+b+t),[_,i,e,o,s,a,b,d,l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"",c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(c){return l[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,c){var t=l?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+fabric.util.matrixToSVG(t)+(c||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var c=fabric.Object.NUM_FRACTION_DIGITS;l.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,c),'" y="',n(-this.height/2,c),'" width="',n(this.width,c),'" height="',n(this.height,c),'"></rect>\n')}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,c){var t=(c=c||{}).reviver,i=[this.getSvgTransform(!0,c.additionalTransform||""),this.getSvgCommons()].join(""),o=l.indexOf("COMMON_PARTS");return l[o]=i,t?t(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,c){var t,e,i=(c=c||{}).noStyle,o=c.reviver,s=i?"":'style="'+this.getSvgStyles()+'" ',a=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",d=this.clipPath,_=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",b=d&&d.absolutePositioned,C=this.stroke,w=this.fill,O=this.shadow,A=[],F=l.indexOf("COMMON_PARTS"),N=c.additionalTransform;return d&&(d.clipPathId="CLIPPATH_"+fabric.Object.__uid++,e='<clipPath id="'+d.clipPathId+'" >\n'+d.toClipPathSVG(o)+"</clipPath>\n"),b&&A.push("<g ",a,this.getSvgCommons()," >\n"),A.push("<g ",this.getSvgTransform(!1),b?"":a+this.getSvgCommons()," >\n"),t=[s,_,i?"":this.addPaintOrder()," ",N?'transform="'+N+'" ':""].join(""),l[F]=t,w&&w.toLive&&A.push(w.toSVG(this)),C&&C.toLive&&A.push(C.toSVG(this)),O&&A.push(O.toSVG(this)),d&&A.push(e),A.push(l.join("")),A.push("</g>\n"),b&&A.push("</g>\n"),o?o(A.join("")):A.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var u=fabric.util.object.extend,n="stateProperties";function l(c,t,e){var i={};e.forEach(function(o){i[o]=c[o]}),u(c[t],i,!0)}fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(c){var t="_"+(c=c||n);return Object.keys(this[t]).length<this[c].length||!function e(i,o,s){if(i===o)return!0;if(Array.isArray(i)){if(!Array.isArray(o)||i.length!==o.length)return!1;for(var a=0,d=i.length;a<d;a++)if(!e(i[a],o[a]))return!1;return!0}if(i&&"object"==typeof i){var _,b=Object.keys(i);if(!o||"object"!=typeof o||!s&&b.length!==Object.keys(o).length)return!1;for(a=0,d=b.length;a<d;a++)if("canvas"!==(_=b[a])&&"group"!==_&&!e(i[_],o[_]))return!1;return!0}}(this[t],this,!0)},saveState:function(c){var t=c&&c.propertySet||n,e="_"+t;return this[e]?(l(this,e,this[t]),c&&c.stateProperties&&l(this,e,c.stateProperties),this):this.setupState(c)},setupState:function(c){var t=(c=c||{}).propertySet||n;return this["_"+(c.propertySet=t)]={},this.saveState(c),this}})}(),function(){var u=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(n,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c,t,e,i=n.x,o=n.y,s=Object.keys(this.oCoords),a=s.length-1;for(this.__corner=0;0<=a;a--)if(this.isControlVisible(e=s[a])&&(t=this._getImageLines(l?this.oCoords[e].touchCorner:this.oCoords[e].corner),0!==(c=this._findCrossPoints({x:i,y:o},t))&&c%2==1))return this.__corner=e;return!1},forEachControl:function(n){for(var l in this.controls)n(this.controls[l],l,this)},_setCornerCoords:function(){var n=this.oCoords;for(var l in n){var c=this.controls[l];n[l].corner=c.calcCornerCoords(this.angle,this.cornerSize,n[l].x,n[l].y,!1),n[l].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,n[l].x,n[l].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var l=this.getCenterPoint(),c=this._calculateCurrentDimensions(),t=this.canvas.viewportTransform;return n.translate(l.x,l.y),n.scale(1/t[0],1/t[3]),n.rotate(u(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-c.x/2,-c.y/2,c.x,c.y),n.restore(),this},drawBorders:function(n,l){l=l||{};var c=this._calculateCurrentDimensions(),t=this.borderScaleFactor,e=c.x+t,i=c.y+t,o=void 0!==l.hasControls?l.hasControls:this.hasControls,s=!1;return n.save(),n.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(n,l.borderDashArray||this.borderDashArray),n.strokeRect(-e/2,-i/2,e,i),o&&(n.beginPath(),this.forEachControl(function(a,d,_){a.withConnection&&a.getVisibility(_,d)&&(s=!0,n.moveTo(a.x*e,a.y*i),n.lineTo(a.x*e+a.offsetX,a.y*i+a.offsetY))}),s&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,l,c){c=c||{};var t=fabric.util.sizeAfterTransform(this.width,this.height,l),e=this.strokeWidth,i=this.strokeUniform,o=this.borderScaleFactor,s=t.x+e*(i?this.canvas.getZoom():l.scaleX)+o,a=t.y+e*(i?this.canvas.getZoom():l.scaleY)+o;return n.save(),this._setLineDash(n,c.borderDashArray||this.borderDashArray),n.strokeStyle=c.borderColor||this.borderColor,n.strokeRect(-s/2,-a/2,s,a),n.restore(),this},drawControls:function(n,l){l=l||{},n.save();var c,t,e=this.canvas.getRetinaScaling();return n.setTransform(e,0,0,e,0,0),n.strokeStyle=n.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,l.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(c=this.group.calcTransformMatrix()),this.forEachControl(function(i,o,s){t=s.oCoords[o],i.getVisibility(s,o)&&(c&&(t=fabric.util.transformPoint(t,c)),i.render(n,t.x,t.y,l,s))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=l,this},setControlsVisibility:function(n){for(var l in n||(n={}),n)this.setControlVisible(l,n[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(u,n){var l=function(){},c=(n=n||{}).onComplete||l,t=n.onChange||l,e=this;return fabric.util.animate({target:this,startValue:u.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(i){u.set("left",i),e.requestRenderAll(),t()},onComplete:function(){u.setCoords(),c()}})},fxCenterObjectV:function(u,n){var l=function(){},c=(n=n||{}).onComplete||l,t=n.onChange||l,e=this;return fabric.util.animate({target:this,startValue:u.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(i){u.set("top",i),e.requestRenderAll(),t()},onComplete:function(){u.setCoords(),c()}})},fxRemove:function(u,n){var l=function(){},c=(n=n||{}).onComplete||l,t=n.onChange||l,e=this;return fabric.util.animate({target:this,startValue:u.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){u.set("opacity",i),e.requestRenderAll(),t()},onComplete:function(){e.remove(u),c()}})}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var u,l=[],c=[];for(u in arguments[0])l.push(u);for(var t=0,e=l.length;t<e;t++)c.push(this._animate(u=l[t],arguments[0][u],arguments[1],t!==e-1));return c}return this._animate.apply(this,arguments)},_animate:function(u,n,l,c){var t,e=this;n=n.toString(),l=l?fabric.util.object.clone(l):{},~u.indexOf(".")&&(t=u.split("."));var i=-1<e.colorProperties.indexOf(u)||t&&-1<e.colorProperties.indexOf(t[1]),o=t?this.get(t[0])[t[1]]:this.get(u);"from"in l||(l.from=o),i||(n=~n.indexOf("=")?o+parseFloat(n.replace("=","")):parseFloat(n));var s={target:this,startValue:l.from,endValue:n,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(a,d,_){return l.abort.call(e,a,d,_)},onChange:function(a,d,_){t?e[t[0]][t[1]]=a:e.set(u,a),c||l.onChange&&l.onChange(a,d,_)},onComplete:function(a,d,_){c||(e.setCoords(),l.onComplete&&l.onComplete(a,d,_))}};return i?fabric.util.animateColor(s.startValue,s.endValue,s.duration,s):fabric.util.animate(s)}}),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.extend,c=n.util.object.clone,t={x1:1,x2:1,y1:1,y2:1};function e(i,o){var s=i.origin,a=i.axis1,d=i.axis2,_=i.dimension,b=o.nearest,C=o.center,w=o.farthest;return function(){switch(this.get(s)){case b:return Math.min(this.get(a),this.get(d));case C:return Math.min(this.get(a),this.get(d))+.5*this.get(_);case w:return Math.max(this.get(a),this.get(d))}}}n.Line?n.warn("fabric.Line is already defined"):(n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(i,o){i||(i=[0,0,0,0]),this.callSuper("initialize",o),this.set("x1",i[0]),this.set("y1",i[1]),this.set("x2",i[2]),this.set("y2",i[3]),this._setWidthHeight(o)},_setWidthHeight:function(i){i||(i={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in i?i.left:this._getLeftToOriginX(),this.top="top"in i?i.top:this._getTopToOriginY()},_set:function(i,o){return this.callSuper("_set",i,o),void 0!==t[i]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(i){i.beginPath();var o=this.calcLinePoints();i.moveTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineWidth=this.strokeWidth;var s=i.strokeStyle;i.strokeStyle=this.stroke||i.fillStyle,this.stroke&&this._renderStroke(i),i.strokeStyle=s},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(i){return l(this.callSuper("toObject",i),this.calcLinePoints())},_getNonTransformedDimensions:function(){var i=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(i.y-=this.strokeWidth),0===this.height&&(i.x-=this.strokeWidth)),i},calcLinePoints:function(){var i=this.x1<=this.x2?-1:1,o=this.y1<=this.y2?-1:1;return{x1:i*this.width*.5,x2:i*this.width*-.5,y1:o*this.height*.5,y2:o*this.height*-.5}},_toSVG:function(){var i=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" />\n']}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(i,o,s){s=s||{};var a=n.parseAttributes(i,n.Line.ATTRIBUTE_NAMES);o(new n.Line([a.x1||0,a.y1||0,a.x2||0,a.y2||0],l(a,s)))},n.Line.fromObject=function(i,o){var s=c(i,!0);s.points=[i.x1,i.y1,i.x2,i.y2],n.Object._fromObject("Line",s,function(a){delete a.points,o&&o(a)},"points")})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.degreesToRadians;n.Circle?n.warn("fabric.Circle is already defined."):(n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(c,t){return this.callSuper("_set",c,t),"radius"===c&&this.setRadius(t),this},toObject:function(c){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(c))},_toSVG:function(){var c,t=(this.endAngle-this.startAngle)%360;if(0===t)c=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var e=l(this.startAngle),i=l(this.endAngle),o=this.radius;c=['<path d="M '+n.util.cos(e)*o+" "+n.util.sin(e)*o," A "+o+" "+o," 0 ",+(180<t?"1":"0")+" 1"," "+n.util.cos(i)*o+" "+n.util.sin(i)*o,'" ',"COMMON_PARTS"," />\n"]}return c},_render:function(c){c.beginPath(),c.arc(0,0,this.radius,l(this.startAngle),l(this.endAngle),!1),this._renderPaintInOrder(c)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(c){return this.radius=c,this.set("width",2*c).set("height",2*c)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(c,t){var e,i=n.parseAttributes(c,n.Circle.ATTRIBUTE_NAMES);if(!("radius"in(e=i)&&0<=e.radius))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,t(new n.Circle(i))},n.Circle.fromObject=function(c,t){n.Object._fromObject("Circle",c,t)})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={});n.Triangle?n.warn("fabric.Triangle is already defined"):(n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(l){var c=this.width/2,t=this.height/2;l.beginPath(),l.moveTo(-c,t),l.lineTo(0,-t),l.lineTo(c,t),l.closePath(),this._renderPaintInOrder(l)},_toSVG:function(){var l=this.width/2,c=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-l+" "+c,"0 "+-c,l+" "+c].join(","),'" />']}}),n.Triangle.fromObject=function(l,c){return n.Object._fromObject("Triangle",l,c)})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=2*Math.PI;n.Ellipse?n.warn("fabric.Ellipse is already defined."):(n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,t){switch(this.callSuper("_set",c,t),c){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,l,!1),c.restore(),this._renderPaintInOrder(c)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(c,t){var e=n.parseAttributes(c,n.Ellipse.ATTRIBUTE_NAMES);e.left=(e.left||0)-e.rx,e.top=(e.top||0)-e.ry,t(new n.Ellipse(e))},n.Ellipse.fromObject=function(c,t){n.Object._fromObject("Ellipse",c,t)})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.extend;n.Rect?n.warn("fabric.Rect is already defined"):(n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var t=this.rx?Math.min(this.rx,this.width/2):0,e=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,o=this.height,s=-this.width/2,a=-this.height/2,d=0!==t||0!==e,_=.4477152502;c.beginPath(),c.moveTo(s+t,a),c.lineTo(s+i-t,a),d&&c.bezierCurveTo(s+i-_*t,a,s+i,a+_*e,s+i,a+e),c.lineTo(s+i,a+o-e),d&&c.bezierCurveTo(s+i,a+o-_*e,s+i-_*t,a+o,s+i-t,a+o),c.lineTo(s+t,a+o),d&&c.bezierCurveTo(s+_*t,a+o,s,a+o-_*e,s,a+o-e),c.lineTo(s,a+e),d&&c.bezierCurveTo(s,a+_*e,s+_*t,a,s+t,a),c.closePath(),this._renderPaintInOrder(c)},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(c,t,e){if(!c)return t(null);e=e||{};var i=n.parseAttributes(c,n.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var o=new n.Rect(l(e?n.util.object.clone(e):{},i));o.visible=o.visible&&0<o.width&&0<o.height,t(o)},n.Rect.fromObject=function(c,t){return n.Object._fromObject("Rect",c,t)})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.extend,c=n.util.array.min,t=n.util.array.max,e=n.util.toFixed,i=n.util.projectStrokeOnPoints;n.Polyline?n.warn("fabric.Polyline is already defined"):(n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(o,s){s=s||{},this.points=o||[],this.callSuper("initialize",s),this._setPositionDimensions(s)},_projectStrokeOnPoints:function(){return i(this.points,this,!0)},_setPositionDimensions:function(o){var s,a=this._calcDimensions(o),d=this.exactBoundingBox?this.strokeWidth:0;this.width=a.width-d,this.height=a.height-d,o.fromSVG||(s=this.translateToGivenOrigin({x:a.left-this.strokeWidth/2+d/2,y:a.top-this.strokeWidth/2+d/2},"left","top",this.originX,this.originY)),void 0===o.left&&(this.left=o.fromSVG?a.left:s.x),void 0===o.top&&(this.top=o.fromSVG?a.top:s.y),this.pathOffset={x:a.left+this.width/2+d/2,y:a.top+this.height/2+d/2}},_calcDimensions:function(){var o=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,s=c(o,"x")||0,a=c(o,"y")||0;return{left:s,top:a,width:(t(o,"x")||0)-s,height:(t(o,"y")||0)-a}},toObject:function(o){return l(this.callSuper("toObject",o),{points:this.points.concat()})},_toSVG:function(){for(var o=[],s=this.pathOffset.x,a=this.pathOffset.y,d=n.Object.NUM_FRACTION_DIGITS,_=0,b=this.points.length;_<b;_++)o.push(e(this.points[_].x-s,d),",",e(this.points[_].y-a,d)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',o.join(""),'" />\n']},commonRender:function(o){var s,a=this.points.length,d=this.pathOffset.x,_=this.pathOffset.y;if(!a||isNaN(this.points[a-1].y))return!1;o.beginPath(),o.moveTo(this.points[0].x-d,this.points[0].y-_);for(var b=0;b<a;b++)o.lineTo((s=this.points[b]).x-d,s.y-_);return!0},_render:function(o){this.commonRender(o)&&this._renderPaintInOrder(o)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(o){return function(s,a,d){if(!s)return a(null);d||(d={});var _=n.parsePointsAttribute(s.getAttribute("points")),b=n.parseAttributes(s,n[o].ATTRIBUTE_NAMES);b.fromSVG=!0,a(new n[o](_,l(b,d)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(o,s){return n.Object._fromObject("Polyline",o,s,"points")})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.projectStrokeOnPoints;n.Polygon?n.warn("fabric.Polygon is already defined"):(n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return l(this.points,this)},_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(c,t){n.Object._fromObject("Polygon",c,t,"points")})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.array.min,c=n.util.array.max,t=n.util.object.extend,e=n.util.object.clone,i=n.util.toFixed;n.Path?n.warn("fabric.Path is already defined"):(n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(o,s){delete(s=e(s||{})).path,this.callSuper("initialize",s),this._setPath(o||[],s)},_setPath:function(o,s){this.path=n.util.makePathSimpler(Array.isArray(o)?o:n.util.parsePath(o)),n.Polyline.prototype._setPositionDimensions.call(this,s||{})},_renderPathCommands:function(o){var s,a=0,d=0,_=0,b=0,O=-this.pathOffset.x,A=-this.pathOffset.y;o.beginPath();for(var F=0,N=this.path.length;F<N;++F)switch((s=this.path[F])[0]){case"L":o.lineTo((_=s[1])+O,(b=s[2])+A);break;case"M":a=_=s[1],d=b=s[2],o.moveTo(_+O,b+A);break;case"C":o.bezierCurveTo(s[1]+O,s[2]+A,s[3]+O,s[4]+A,(_=s[5])+O,(b=s[6])+A);break;case"Q":o.quadraticCurveTo(s[1]+O,s[2]+A,s[3]+O,s[4]+A),_=s[3],b=s[4];break;case"z":case"Z":_=a,b=d,o.closePath()}},_render:function(o){this._renderPathCommands(o),this._renderPaintInOrder(o)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(o){return t(this.callSuper("toObject",o),{path:this.path.map(function(s){return s.slice()})})},toDatalessObject:function(o){var s=this.toObject(["sourcePath"].concat(o));return s.sourcePath&&delete s.path,s},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',n.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var o=n.Object.NUM_FRACTION_DIGITS;return" translate("+i(-this.pathOffset.x,o)+", "+i(-this.pathOffset.y,o)+")"},toClipPathSVG:function(o){var s=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:o,additionalTransform:s})},toSVG:function(o){var s=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:o,additionalTransform:s})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var o,s,a=[],d=[],_=0,b=0,C=0,w=0,O=0,A=this.path.length;O<A;++O){switch((o=this.path[O])[0]){case"L":C=o[1],w=o[2],s=[];break;case"M":_=C=o[1],b=w=o[2],s=[];break;case"C":s=n.util.getBoundsOfCurve(C,w,o[1],o[2],o[3],o[4],o[5],o[6]),C=o[5],w=o[6];break;case"Q":s=n.util.getBoundsOfCurve(C,w,o[1],o[2],o[1],o[2],o[3],o[4]),C=o[3],w=o[4];break;case"z":case"Z":C=_,w=b}s.forEach(function(Q){a.push(Q.x),d.push(Q.y)}),a.push(C),d.push(w)}var F=l(a)||0,N=l(d)||0;return{left:F,top:N,width:(c(a)||0)-F,height:(c(d)||0)-N}}}),n.Path.fromObject=function(o,s){"string"==typeof o.sourcePath?n.loadSVGFromURL(o.sourcePath,function(d){var _=d[0];_.setOptions(o),s&&s(_)}):n.Object._fromObject("Path",o,s,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(o,s,a){var d=n.parseAttributes(o,n.Path.ATTRIBUTE_NAMES);d.fromSVG=!0,s(new n.Path(d.d,t(d,a)))})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.array.min,c=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;if(i)this._updateObjectsACoords();else{var s=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),s||this._calcBounds(),this._updateObjectsCoords(s),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){t.set({left:t.left-e.x,top:t.top-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var e=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),t&&(e&&n.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,e?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if("canvas"===t)for(;i--;)this._objects[i]._set(t,e);n.Object.prototype._set.call(this,t,e)},toObject:function(t){var e=this.includeDefaultValues,i=this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){var a=s.includeDefaultValues;s.includeDefaultValues=e;var d=s.toObject(t);return s.includeDefaultValues=a,d}),o=n.Object.prototype.toObject.call(this,t);return o.objects=i,o},toDatalessObject:function(t){var e,i=this.sourcePath;if(i)e=i;else{var o=this.includeDefaultValues;e=this._objects.map(function(a){var d=a.includeDefaultValues;a.includeDefaultValues=o;var _=a.toDatalessObject(t);return a.includeDefaultValues=d,_})}var s=n.Object.prototype.toDatalessObject.call(this,t);return s.objects=e,s},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=n.Object.prototype.shouldCache.call(this);if(t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1;return t},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var o=this.cacheWidth/this.zoomX,s=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-o/2,-s/2,o,s)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(e){n.util.addTransformToObject(e,t),delete e.group,e.setCoords()}),this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,e=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var o=new n.ActiveSelection([]);return o.set(i),o.type="activeSelection",e.remove(this),t.forEach(function(s){s.group=o,s.dirty=!0,e.add(s)}),o.canvas=e,o._objects=t,(e._activeObject=o).setCoords(),o}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0)}),this},_calcBounds:function(t){for(var e,i,o,s,a=[],d=[],_=["tr","br","bl","tl"],b=0,C=this._objects.length,w=_.length;b<C;++b){for(o=(e=this._objects[b]).calcACoords(),s=0;s<w;s++)a.push(o[i=_[s]].x),d.push(o[i].y);e.aCoords=o}this._getBounds(a,d,t)},_getBounds:function(t,e,i){var o=new n.Point(l(t),l(e)),s=new n.Point(c(t),c(e)),a=o.y||0,d=o.x||0,b=s.y-o.y||0;this.width=s.x-o.x||0,this.height=b,i||this.setPositionByOrigin({x:d,y:a},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],i=0,o=this._objects.length;i<o;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var e=this.visible?"":" visibility: hidden;";return[void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,o=this._objects.length;i<o;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),n.Group.fromObject=function(t,e){var i=t.objects,o=n.util.object.clone(t,!0);delete o.objects,"string"!=typeof i?n.util.enlivenObjects(i,function(s){var a=n.util.object.clone(t,!0);delete a.objects,n.util.enlivenObjectEnlivables(t,a,function(){e&&e(new n.Group(s,a,!0))})}):n.loadSVGFromURL(i,function(s){var a=n.util.groupSVGElements(s,t,i);a.set(o),e&&e(a)})})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(l,c){c=c||{},this._objects=l||[];for(var t=this._objects.length;t--;)this._objects[t].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var c=n.Object.prototype.toObject.call(this),t=new n.Group([]);if(delete c.type,t.set(c),l.forEach(function(i){i.canvas.remove(i),i.group=t}),t._objects=l,!this.canvas)return t;var e=this.canvas;return e.add(t),(e._activeObject=t).setCoords(),t},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,c,t){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,c),void 0===(t=t||{}).hasControls&&(t.hasControls=!1),t.forActiveSelection=!0;for(var e=0,i=this._objects.length;e<i;e++)this._objects[e]._renderControls(l,t);l.restore()}}),n.ActiveSelection.fromObject=function(l,c){n.util.enlivenObjects(l.objects,function(t){delete l.objects,c&&c(new n.ActiveSelection(t,l,!0))})})}(typeof exports<"u"?exports:this),function(u){"use strict";var n=fabric.util.object.extend;u.fabric||(u.fabric={}),u.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:fabric.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,c){c||(c={}),this.filters=[],this.cacheKey="texture"+fabric.Object.__uid++,this.callSuper("initialize",c),this._initElement(l,c)},getElement:function(){return this._element||{}},setElement:function(l,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(c),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var c=fabric.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(l)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(l){fabric.util.cleanUpJsdomNode(this[l]),this[l]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(this.stroke&&0!==this.strokeWidth){var c=this.width/2,t=this.height/2;l.beginPath(),l.moveTo(-c,-t),l.lineTo(c,-t),l.lineTo(c,t),l.lineTo(-c,t),l.lineTo(-c,-t),l.closePath()}},toObject:function(l){var c=[];this.filters.forEach(function(e){e&&c.push(e.toObject())});var t=n(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l,c=[],t=[],e=this._element,i=-this.width/2,o=-this.height/2,s="",a="";if(!e)return[];if(this.hasCrop()){var d=fabric.Object.__uid++;c.push('<clipPath id="imageCrop_'+d+'">\n','\t<rect x="'+i+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(a='" image-rendering="optimizeSpeed'),t.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',o-this.cropY,'" width="',e.width||e.naturalWidth,'" height="',e.height||e.height,a,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,l=["\t<rect ",'x="',i,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=_}return"fill"!==this.paintFirst?c.concat(l,t):c.concat(t,l)},getSrc:function(l){var c=l?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(l,c,t){return fabric.util.loadImage(l,function(e,i){this.setElement(e,t),this._setWidthHeight(),c&&c(this,i)},this,t&&t.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,c=this.minimumScaleTrigger,t=this.getTotalObjectScaling(),e=t.scaleX,i=t.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||c<e&&c<i)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=e,void(this._lastScaleY=i);fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var s=fabric.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,d=o.width,_=o.height;s.width=d,s.height=_,this._element=s,this._lastScaleX=l.scaleX=e,this._lastScaleY=l.scaleY=i,fabric.filterBackend.applyFilters([l],o,d,_,this._element,a),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(l){if(l=(l=l||this.filters||[]).filter(function(o){return o&&!o.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===l.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,t=c.naturalWidth||c.width,e=c.naturalHeight||c.height;if(this._element===this._originalElement){var i=fabric.util.createCanvasElement();i.width=t,i.height=e,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,t,e),this._lastScaleX=1,this._lastScaleY=1;return fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(l,this._originalElement,t,e,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){fabric.util.setImageSmoothing(l,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){fabric.util.setImageSmoothing(l,this.imageSmoothing),fabric.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var c=this._element;if(c){var t=this._filterScalingX,e=this._filterScalingY,i=this.width,o=this.height,s=Math.min,a=Math.max,d=a(this.cropX,0),_=a(this.cropY,0),b=c.naturalWidth||c.width,C=c.naturalHeight||c.height,w=d*t,O=_*e,A=s(i*t,b-w),F=s(o*e,C-O),N=-i/2,Q=-o/2,Z=s(i,b/t-d),j=s(o,C/e-_);c&&l.drawImage(c,w,O,A,F,N,Q,Z,j)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,c){this.setElement(fabric.util.getById(l),c),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,c){l&&l.length?fabric.util.enlivenObjects(l,function(t){c&&c(t)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(l){l||(l={});var c=this.getElement();this.width=l.width||c.naturalWidth||c.width||0,this.height=l.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var l,c=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),t=this._element.width,e=this._element.height,i=1,o=1,s=0,a=0,d=0,_=0,b=this.width,C=this.height,w={width:b,height:C};return!c||"none"===c.alignX&&"none"===c.alignY?(i=b/t,o=C/e):("meet"===c.meetOrSlice&&(l=(b-t*(i=o=fabric.util.findScaleToFit(this._element,w)))/2,"Min"===c.alignX&&(s=-l),"Max"===c.alignX&&(s=l),l=(C-e*o)/2,"Min"===c.alignY&&(a=-l),"Max"===c.alignY&&(a=l)),"slice"===c.meetOrSlice&&(l=t-b/(i=o=fabric.util.findScaleToCover(this._element,w)),"Mid"===c.alignX&&(d=l/2),"Max"===c.alignX&&(d=l),l=e-C/o,"Mid"===c.alignY&&(_=l/2),"Max"===c.alignY&&(_=l),t=b/i,e=C/o)),{width:t,height:e,scaleX:i,scaleY:o,offsetLeft:s,offsetTop:a,cropX:d,cropY:_}}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(l,c){var t=fabric.util.object.clone(l);fabric.util.loadImage(t.src,function(e,i){i?c&&c(null,!0):fabric.Image.prototype._initFilters.call(t,t.filters,function(o){t.filters=o||[],fabric.Image.prototype._initFilters.call(t,[t.resizeFilter],function(s){t.resizeFilter=s[0],fabric.util.enlivenObjectEnlivables(t,t,function(){var a=new fabric.Image(e,t);c(a,!1)})})})},null,t.crossOrigin)},fabric.Image.fromURL=function(l,c,t){fabric.util.loadImage(l,function(e,i){c&&c(new fabric.Image(e,t),i)},null,t&&t.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),fabric.Image.fromElement=function(l,c,t){var e=fabric.parseAttributes(l,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(e["xlink:href"],c,n(t?fabric.util.object.clone(t):{},e))})}(typeof exports<"u"?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var u=this.angle%360;return 0<u?90*Math.round((u-1)/90):90*Math.round(u/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(u){var n=function(){},l=(u=u||{}).onComplete||n,c=u.onChange||n,t=this;return fabric.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){t.rotate(e),c()},onComplete:function(){t.setCoords(),l()}})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(u){return u.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(u){return u.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";fabric.isWebglSupported=function(n){if(fabric.isLikelyNode)return!1;n=n||fabric.WebglFilterBackend.prototype.tileSize;var l,c,t,e=document.createElement("canvas"),i=e.getContext("webgl")||e.getContext("experimental-webgl"),o=!1;if(i){fabric.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),o=fabric.maxTextureSize>=n;for(var s=["highp","mediump","lowp"],a=0;a<3;a++)if(c="precision "+s[a]+" float;\nvoid main(){}",t=(l=i).createShader(l.FRAGMENT_SHADER),l.shaderSource(t,c),l.compileShader(t),l.getShaderParameter(t,l.COMPILE_STATUS)){fabric.webGlPrecision=s[a];break}}return this.isSupported=o},(fabric.WebglFilterBackend=function u(n){n&&n.tileSize&&(this.tileSize=n.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}).prototype={tileSize:2048,resources:{},setupGLContext:function(n,l){this.dispose(),this.createWebGLCanvas(n,l),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(n,l)},chooseFastestCopyGLTo2DMethod:function(n,l){var c,t=void 0!==window.performance;try{new ImageData(1,1),c=!0}catch{c=!1}var e=typeof ArrayBuffer<"u",i=typeof Uint8ClampedArray<"u";if(t&&c&&e&&i){var o=fabric.util.createCanvasElement(),s=new ArrayBuffer(n*l*4);if(fabric.forceGLPutImageData)return this.imageBuffer=s,void(this.copyGLTo2D=copyGLTo2DPutImageData);var a,d,_={imageBuffer:s,destinationWidth:n,destinationHeight:l,targetCanvas:o};o.width=n,o.height=l,a=window.performance.now(),copyGLTo2DDrawImage.call(_,this.gl,_),d=window.performance.now()-a,a=window.performance.now(),copyGLTo2DPutImageData.call(_,this.gl,_),window.performance.now()-a<d?(this.imageBuffer=s,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage}},createWebGLCanvas:function(n,l){var c=fabric.util.createCanvasElement();c.width=n,c.height=l;var t={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},e=c.getContext("webgl",t);e||(e=c.getContext("experimental-webgl",t)),e&&(e.clearColor(0,0,0,0),this.canvas=c,this.gl=e)},applyFilters:function(n,l,c,t,e,i){var o,s=this.gl;i&&(o=this.getCachedTexture(i,l));var a={originalWidth:l.width||l.originalWidth,originalHeight:l.height||l.originalHeight,sourceWidth:c,sourceHeight:t,destinationWidth:c,destinationHeight:t,context:s,sourceTexture:this.createTexture(s,c,t,!o&&l),targetTexture:this.createTexture(s,c,t),originalTexture:o||this.createTexture(s,c,t,!o&&l),passes:n.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:e},d=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,d),n.forEach(function(_){_&&_.applyTo(a)}),resizeCanvasIfNeeded(a),this.copyGLTo2D(s,a),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(a.sourceTexture),s.deleteTexture(a.targetTexture),s.deleteFramebuffer(d),e.getContext("2d").setTransform(1,0,0,1,0,0),a},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(n,l,c,t){var e=n.createTexture();return n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),t?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,l,c,0,n.RGBA,n.UNSIGNED_BYTE,null),e},getCachedTexture:function(n,l){if(this.textureCache[n])return this.textureCache[n];var c=this.createTexture(this.gl,l.width,l.height,l);return this.textureCache[n]=c},evictCachesForKey:function(n){this.textureCache[n]&&(this.gl.deleteTexture(this.textureCache[n]),delete this.textureCache[n])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var n=this.gl,l={renderer:"",vendor:""};if(!n)return l;var c=n.getExtension("WEBGL_debug_renderer_info");if(c){var t=n.getParameter(c.UNMASKED_RENDERER_WEBGL),e=n.getParameter(c.UNMASKED_VENDOR_WEBGL);t&&(l.renderer=t.toLowerCase()),e&&(l.vendor=e.toLowerCase())}return this.gpuInfo=l}}}(),function(){"use strict";var u=function(){};(fabric.Canvas2dFilterBackend=function n(){}).prototype={evictCachesForKey:u,dispose:u,clearWebGLCaches:u,resources:{},applyFilters:function(l,c,t,e,i){var o=i.getContext("2d");o.drawImage(c,0,0,t,e);var s={sourceWidth:t,sourceHeight:e,imageData:o.getImageData(0,0,t,e),originalEl:c,originalImageData:o.getImageData(0,0,t,e),canvasEl:i,ctx:o,filterBackend:this};return l.forEach(function(a){a.applyTo(s)}),s.imageData.width===t&&s.imageData.height===e||(i.width=s.imageData.width,i.height=s.imageData.height),o.putImageData(s.imageData,0,0),s}}}(),fabric.Image=fabric.Image||{},fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(u){u&&this.setOptions(u)},setOptions:function(u){for(var n in u)this[n]=u[n]},createProgram:function(u,n,l){n=n||this.fragmentSource,l=l||this.vertexSource,"highp"!==fabric.webGlPrecision&&(n=n.replace(/precision highp float/g,"precision "+fabric.webGlPrecision+" float"));var c=u.createShader(u.VERTEX_SHADER);if(u.shaderSource(c,l),u.compileShader(c),!u.getShaderParameter(c,u.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+u.getShaderInfoLog(c));var t=u.createShader(u.FRAGMENT_SHADER);if(u.shaderSource(t,n),u.compileShader(t),!u.getShaderParameter(t,u.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+u.getShaderInfoLog(t));var e=u.createProgram();if(u.attachShader(e,c),u.attachShader(e,t),u.linkProgram(e),!u.getProgramParameter(e,u.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+u.getProgramInfoLog(e));var i=this.getAttributeLocations(u,e),o=this.getUniformLocations(u,e)||{};return o.uStepW=u.getUniformLocation(e,"uStepW"),o.uStepH=u.getUniformLocation(e,"uStepH"),{program:e,attributeLocations:i,uniformLocations:o}},getAttributeLocations:function(u,n){return{aPosition:u.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(u,n,l){var c=n.aPosition,t=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,t),u.enableVertexAttribArray(c),u.vertexAttribPointer(c,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,l,u.STATIC_DRAW)},_setupFrameBuffer:function(u){var n,l,c=u.context;1<u.passes?(l=u.destinationHeight,u.sourceWidth===(n=u.destinationWidth)&&u.sourceHeight===l||(c.deleteTexture(u.targetTexture),u.targetTexture=u.filterBackend.createTexture(c,n,l)),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,u.targetTexture,0)):(c.bindFramebuffer(c.FRAMEBUFFER,null),c.finish())},_swapTextures:function(u){u.passes--,u.pass++;var n=u.targetTexture;u.targetTexture=u.sourceTexture,u.sourceTexture=n},isNeutralState:function(){var u=this.mainParameter,n=fabric.Image.filters[this.type].prototype;if(u){if(Array.isArray(n[u])){for(var l=n[u].length;l--;)if(this[u][l]!==n[u][l])return!1;return!0}return n[u]===this[u]}return!1},applyTo:function(u){u.webgl?(this._setupFrameBuffer(u),this.applyToWebGL(u),this._swapTextures(u)):this.applyTo2d(u)},retrieveShader:function(u){return u.programCache.hasOwnProperty(this.type)||(u.programCache[this.type]=this.createProgram(u.context)),u.programCache[this.type]},applyToWebGL:function(u){var n=u.context,l=this.retrieveShader(u);n.bindTexture(n.TEXTURE_2D,0===u.pass&&u.originalTexture?u.originalTexture:u.sourceTexture),n.useProgram(l.program),this.sendAttributeData(n,l.attributeLocations,u.aPosition),n.uniform1f(l.uniformLocations.uStepW,1/u.sourceWidth),n.uniform1f(l.uniformLocations.uStepH,1/u.sourceHeight),this.sendUniformData(n,l.uniformLocations),n.viewport(0,0,u.destinationWidth,u.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(u,n,l){u.activeTexture(l),u.bindTexture(u.TEXTURE_2D,n),u.activeTexture(u.TEXTURE0)},unbindAdditionalTexture:function(u,n){u.activeTexture(n),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(u){this[this.mainParameter]=u},sendUniformData:function(){},createHelpLayer:function(u){if(!u.helpLayer){var n=document.createElement("canvas");n.width=u.sourceWidth,n.height=u.sourceHeight,u.helpLayer=n}},toObject:function(){var u={type:this.type},n=this.mainParameter;return n&&(u[n]=this[n]),u},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(u,n){var l=new fabric.Image.filters[u.type](u);return n&&n(l),l},function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.ColorMatrix=(0,n.util.createClass)(l.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,o,s,a,d=t.imageData.data,_=d.length,b=this.matrix,C=this.colorsOnly;for(a=0;a<_;a+=4)e=d[a],i=d[a+1],o=d[a+2],C?(d[a]=e*b[0]+i*b[1]+o*b[2]+255*b[4],d[a+1]=e*b[5]+i*b[6]+o*b[7]+255*b[9],d[a+2]=e*b[10]+i*b[11]+o*b[12]+255*b[14]):(d[a]=e*b[0]+i*b[1]+o*b[2]+(s=d[a+3])*b[3]+255*b[4],d[a+1]=e*b[5]+i*b[6]+o*b[7]+s*b[8]+255*b[9],d[a+2]=e*b[10]+i*b[11]+o*b[12]+s*b[13]+255*b[14],d[a+3]=e*b[15]+i*b[16]+o*b[17]+s*b[18]+255*b[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,s=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]]),t.uniform4fv(e.uConstants,s)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Brightness=(0,n.util.createClass)(l.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData.data,o=i.length,s=Math.round(255*this.brightness);for(e=0;e<o;e+=4)i[e]=i[e]+s,i[e+1]=i[e+1]+s,i[e+2]=i[e+2]+s}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.extend,c=n.Image.filters;c.Convolute=(0,n.util.createClass)(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var i=Math.sqrt(this.matrix.length),o=this.type+"_"+i+"_"+(this.opaque?1:0),s=this.fragmentSource[o];return e.programCache.hasOwnProperty(o)||(e.programCache[o]=this.createProgram(e.context,s)),e.programCache[o]},applyTo2d:function(e){var i,o,s,a,d,_,b,C,w,O,A,F,N,Q=e.imageData,Z=Q.data,j=this.matrix,v=Math.round(Math.sqrt(j.length)),X=Math.floor(v/2),Y=Q.width,tt=Q.height,st=e.ctx.createImageData(Y,tt),W=st.data,I=this.opaque?1:0;for(A=0;A<tt;A++)for(O=0;O<Y;O++){for(d=4*(A*Y+O),N=a=s=o=i=0;N<v;N++)for(F=0;F<v;F++)_=O+F-X,(b=A+N-X)<0||tt<=b||_<0||Y<=_||(i+=Z[C=4*(b*Y+_)]*(w=j[N*v+F]),o+=Z[C+1]*w,s+=Z[C+2]*w,I||(a+=Z[C+3]*w));W[d]=i,W[d+1]=o,W[d+2]=s,W[d+3]=I?Z[d+3]:a}e.imageData=st},getUniformLocations:function(e,i){return{uMatrix:e.getUniformLocation(i,"uMatrix"),uOpaque:e.getUniformLocation(i,"uOpaque"),uHalfSize:e.getUniformLocation(i,"uHalfSize"),uSize:e.getUniformLocation(i,"uSize")}},sendUniformData:function(e,i){e.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Grayscale=(0,n.util.createClass)(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,o=t.imageData.data,s=o.length,a=this.mode;for(e=0;e<s;e+=4)"average"===a?i=(o[e]+o[e+1]+o[e+2])/3:"lightness"===a?i=(Math.min(o[e],o[e+1],o[e+2])+Math.max(o[e],o[e+1],o[e+2]))/2:"luminosity"===a&&(i=.21*o[e]+.72*o[e+1]+.07*o[e+2]),o[e]=i,o[e+1]=i,o[e+2]=i},retrieveShader:function(t){var e=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,this.fragmentSource[this.mode])),t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Invert=(0,n.util.createClass)(l.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,i=t.imageData.data,o=i.length;for(e=0;e<o;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.extend,c=n.Image.filters;c.Noise=(0,n.util.createClass)(c.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var i,o,a,s=e.imageData.data,d=this.noise;for(i=0,a=s.length;i<a;i+=4)o=(.5-Math.random())*d,s[i]+=o,s[i+1]+=o,s[i+2]+=o}},getUniformLocations:function(e,i){return{uNoise:e.getUniformLocation(i,"uNoise"),uSeed:e.getUniformLocation(i,"uSeed")}},sendUniformData:function(e,i){e.uniform1f(i.uNoise,this.noise/255),e.uniform1f(i.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Pixelate=(0,n.util.createClass)(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,i,o,s,a,d,_,b,C,w,O,A=t.imageData,F=A.data,N=A.height,Q=A.width;for(i=0;i<N;i+=this.blocksize)for(o=0;o<Q;o+=this.blocksize)for(s=F[e=4*i*Q+4*o],a=F[e+1],d=F[e+2],_=F[e+3],w=Math.min(i+this.blocksize,N),O=Math.min(o+this.blocksize,Q),b=i;b<w;b++)for(C=o;C<O;C++)F[e=4*b*Q+4*C]=s,F[e+1]=a,F[e+2]=d,F[e+3]=_},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.extend,c=n.Image.filters;c.RemoveColor=(0,n.util.createClass)(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var i,o,s,a,d=e.imageData.data,_=255*this.distance,b=new n.Color(this.color).getSource(),C=[b[0]-_,b[1]-_,b[2]-_],w=[b[0]+_,b[1]+_,b[2]+_];for(i=0;i<d.length;i+=4)s=d[i+1],a=d[i+2],C[0]<(o=d[i])&&C[1]<s&&C[2]<a&&o<w[0]&&s<w[1]&&a<w[2]&&(d[i+3]=0)},getUniformLocations:function(e,i){return{uLow:e.getUniformLocation(i,"uLow"),uHigh:e.getUniformLocation(i,"uHigh")}},sendUniformData:function(e,i){var o=new n.Color(this.color).getSource(),s=parseFloat(this.distance),d=[o[0]/255+s,o[1]/255+s,o[2]/255+s,1];e.uniform4fv(i.uLow,[0+o[0]/255-s,0+o[1]/255-s,0+o[2]/255-s,1]),e.uniform4fv(i.uHigh,d)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters,c=n.util.createClass,t={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var e in t)l[e]=c(l.ColorMatrix,{type:e,matrix:t[e],mainParameter:!1,colorsOnly:!0}),n.Image.filters[e].fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric,l=n.Image.filters;l.BlendColor=(0,n.util.createClass)(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var e,i,o,s,a,d,_,b=t.imageData.data,C=b.length,w=1-this.alpha;e=(_=new n.Color(this.color).getSource())[0]*this.alpha,i=_[1]*this.alpha,o=_[2]*this.alpha;for(var O=0;O<C;O+=4)switch(s=b[O],a=b[O+1],d=b[O+2],this.mode){case"multiply":b[O]=s*e/255,b[O+1]=a*i/255,b[O+2]=d*o/255;break;case"screen":b[O]=255-(255-s)*(255-e)/255,b[O+1]=255-(255-a)*(255-i)/255,b[O+2]=255-(255-d)*(255-o)/255;break;case"add":b[O]=s+e,b[O+1]=a+i,b[O+2]=d+o;break;case"diff":case"difference":b[O]=Math.abs(s-e),b[O+1]=Math.abs(a-i),b[O+2]=Math.abs(d-o);break;case"subtract":b[O]=s-e,b[O+1]=a-i,b[O+2]=d-o;break;case"darken":b[O]=Math.min(s,e),b[O+1]=Math.min(a,i),b[O+2]=Math.min(d,o);break;case"lighten":b[O]=Math.max(s,e),b[O+1]=Math.max(a,i),b[O+2]=Math.max(d,o);break;case"overlay":b[O]=e<128?2*s*e/255:255-2*(255-s)*(255-e)/255,b[O+1]=i<128?2*a*i/255:255-2*(255-a)*(255-i)/255,b[O+2]=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255;break;case"exclusion":b[O]=e+s-2*e*s/255,b[O+1]=i+a-2*i*a/255,b[O+2]=o+d-2*o*d/255;break;case"tint":b[O]=e+s*w,b[O+1]=i+a*w,b[O+2]=o+d*w}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var i=new n.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric,l=n.Image.filters;l.BlendImage=(0,n.util.createClass)(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/t._element.width,-t.top/t._element.height,1]},applyTo2d:function(t){var e,i,o,s,a,d,_,b,C,w,O,A=t.imageData,F=t.filterBackend.resources,N=A.data,Q=N.length,Z=A.width,j=A.height,v=this.image;F.blendImage||(F.blendImage=n.util.createCanvasElement()),w=(C=F.blendImage).getContext("2d"),C.width!==Z||C.height!==j?(C.width=Z,C.height=j):w.clearRect(0,0,Z,j),w.setTransform(v.scaleX,0,0,v.scaleY,v.left,v.top),w.drawImage(v._element,0,0,Z,j),O=w.getImageData(0,0,Z,j).data;for(var X=0;X<Q;X+=4)switch(a=N[X],d=N[X+1],_=N[X+2],b=N[X+3],e=O[X],i=O[X+1],o=O[X+2],s=O[X+3],this.mode){case"multiply":N[X]=a*e/255,N[X+1]=d*i/255,N[X+2]=_*o/255,N[X+3]=b*s/255;break;case"mask":N[X+3]=s}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(t,e){n.Image.fromObject(t.image,function(i){var o=n.util.object.clone(t);o.image=i,e(new n.Image.filters.BlendImage(o))})}}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=Math.pow,c=Math.floor,t=Math.sqrt,e=Math.abs,i=Math.round,o=Math.sin,s=Math.ceil,a=n.Image.filters;a.Resize=(0,n.util.createClass)(a.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,b){return{uDelta:_.getUniformLocation(b,"uDelta"),uTaps:_.getUniformLocation(b,"uTaps")}},sendUniformData:function(_,b){_.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(_){var b=this.getFilterWindow(),C=this.type+"_"+b;if(!_.programCache.hasOwnProperty(C)){var w=this.generateShader(b);_.programCache[C]=this.createProgram(_.context,w)}return _.programCache[C]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,C=this.getFilterWindow(),w=new Array(C),O=1;O<=C;O++)w[O-1]=_(O*b);return w},generateShader:function(_){for(var b=new Array(_),C=this.fragmentSourceTOP,w=1;w<=_;w++)b[w-1]=w+".0 * uDelta";return C+="uniform float uTaps["+_+"];\n",C+="void main() {\n",C+="  vec4 color = texture2D(uTexture, vTexCoord);\n",C+="  float sum = 1.0;\n",b.forEach(function(O,A){C+="  color += texture2D(uTexture, vTexCoord + "+O+") * uTaps["+A+"];\n",C+="  color += texture2D(uTexture, vTexCoord - "+O+") * uTaps["+A+"];\n",C+="  sum += 2.0 * uTaps["+A+"];\n"}),C+="  gl_FragColor = color / sum;\n",C+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(_){return function(b){if(_<=b||b<=-_)return 0;if(b<1.1920929e-7&&-1.1920929e-7<b)return 1;var C=(b*=Math.PI)/_;return o(b)/b*o(C)/C}},applyTo2d:function(_){var b=_.imageData,C=this.scaleX,w=this.scaleY;this.rcpScaleX=1/C,this.rcpScaleY=1/w;var O,A=b.width,F=b.height,N=i(A*C),Q=i(F*w);"sliceHack"===this.resizeType?O=this.sliceByTwo(_,A,F,N,Q):"hermite"===this.resizeType?O=this.hermiteFastResize(_,A,F,N,Q):"bilinear"===this.resizeType?O=this.bilinearFiltering(_,A,F,N,Q):"lanczos"===this.resizeType&&(O=this.lanczosResize(_,A,F,N,Q)),_.imageData=O},sliceByTwo:function(_,b,C,w,O){var A,F,N=_.imageData,Q=!1,Z=!1,j=.5*b,v=.5*C,X=n.filterBackend.resources,Y=0,tt=0,st=b,W=0;for(X.sliceByTwo||(X.sliceByTwo=document.createElement("canvas")),((A=X.sliceByTwo).width<1.5*b||A.height<C)&&(A.width=1.5*b,A.height=C),(F=A.getContext("2d")).clearRect(0,0,1.5*b,C),F.putImageData(N,0,0),w=c(w),O=c(O);!Q||!Z;)C=v,w<c(.5*(b=j))?j=c(.5*j):(j=w,Q=!0),O<c(.5*v)?v=c(.5*v):(v=O,Z=!0),F.drawImage(A,Y,tt,b,C,st,W,j,v),Y=st,tt=W,W+=v;return F.getImageData(Y,tt,w,O)},lanczosResize:function(_,b,C,w,O){var A=_.imageData.data,F=_.ctx.createImageData(w,O),N=F.data,Q=this.lanczosCreate(this.lanczosLobes),Z=this.rcpScaleX,j=this.rcpScaleY,v=2/this.rcpScaleX,X=2/this.rcpScaleY,Y=s(Z*this.lanczosLobes/2),tt=s(j*this.lanczosLobes/2),st={},W={},I={};return function q(lt){var et,ft,pt,H,mt,yt,G,bt,vt,Pt,Bt;for(W.x=(lt+.5)*Z,I.x=c(W.x),et=0;et<O;et++){for(W.y=(et+.5)*j,I.y=c(W.y),vt=bt=G=yt=mt=0,ft=I.x-Y;ft<=I.x+Y;ft++)if(!(ft<0||b<=ft)){Pt=c(1e3*e(ft-W.x)),st[Pt]||(st[Pt]={});for(var Yt=I.y-tt;Yt<=I.y+tt;Yt++)Yt<0||C<=Yt||(Bt=c(1e3*e(Yt-W.y)),st[Pt][Bt]||(st[Pt][Bt]=Q(t(l(Pt*v,2)+l(Bt*X,2))/1e3)),0<(pt=st[Pt][Bt])&&(mt+=pt,yt+=pt*A[H=4*(Yt*b+ft)],G+=pt*A[H+1],bt+=pt*A[H+2],vt+=pt*A[H+3]))}N[H=4*(et*w+lt)]=yt/mt,N[H+1]=G/mt,N[H+2]=bt/mt,N[H+3]=vt/mt}return++lt<w?q(lt):F}(0)},bilinearFiltering:function(_,b,C,w,O){var A,F,N,Q,Z,j,v,Y,tt=0,st=this.rcpScaleX,W=this.rcpScaleY,I=4*(b-1),q=_.imageData.data,lt=_.ctx.createImageData(w,O),et=lt.data;for(N=0;N<O;N++)for(Q=0;Q<w;Q++)for(Z=st*Q-(A=c(st*Q)),j=W*N-(F=c(W*N)),Y=4*(F*b+A),v=0;v<4;v++)et[tt++]=q[Y+v]*(1-Z)*(1-j)+q[Y+4+v]*Z*(1-j)+q[Y+I+v]*j*(1-Z)+q[Y+I+4+v]*Z*j;return lt},hermiteFastResize:function(_,b,C,w,O){for(var A=this.rcpScaleX,F=this.rcpScaleY,N=s(A/2),Q=s(F/2),Z=_.imageData.data,j=_.ctx.createImageData(w,O),v=j.data,X=0;X<O;X++)for(var Y=0;Y<w;Y++){for(var tt=4*(Y+X*w),st=0,W=0,I=0,q=0,lt=0,et=0,ft=0,pt=(X+.5)*F,H=c(X*F);H<(X+1)*F;H++)for(var mt=e(pt-(H+.5))/Q,yt=(Y+.5)*A,G=mt*mt,bt=c(Y*A);bt<(Y+1)*A;bt++){var vt=e(yt-(bt+.5))/N,Pt=t(G+vt*vt);1<Pt&&Pt<-1||0<(st=2*Pt*Pt*Pt-3*Pt*Pt+1)&&(ft+=st*Z[3+(vt=4*(bt+H*b))],I+=st,Z[vt+3]<255&&(st=st*Z[vt+3]/250),q+=st*Z[vt],lt+=st*Z[vt+1],et+=st*Z[vt+2],W+=st)}v[tt]=q/W,v[tt+1]=lt/W,v[tt+2]=et/W,v[tt+3]=ft/I}return j},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Contrast=(0,n.util.createClass)(l.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData.data,o=i.length,s=Math.floor(255*this.contrast),a=259*(s+255)/(255*(259-s));for(e=0;e<o;e+=4)i[e]=a*(i[e]-128)+128,i[e+1]=a*(i[e+1]-128)+128,i[e+2]=a*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Saturation=(0,n.util.createClass)(l.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,i,o=t.imageData.data,s=o.length,a=-this.saturation;for(e=0;e<s;e+=4)i=Math.max(o[e],o[e+1],o[e+2]),o[e]+=i!==o[e]?(i-o[e])*a:0,o[e+1]+=i!==o[e+1]?(i-o[e+1])*a:0,o[e+2]+=i!==o[e+2]?(i-o[e+2])*a:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Vibrance=(0,n.util.createClass)(l.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,i,s,a=t.imageData.data,d=a.length,_=-this.vibrance;for(e=0;e<d;e+=4)i=Math.max(a[e],a[e+1],a[e+2]),s=2*Math.abs(i-(a[e]+a[e+1]+a[e+2])/3)/255*_,a[e]+=i!==a[e]?(i-a[e])*s:0,a[e+1]+=i!==a[e+1]?(i-a[e+1])*s:0,a[e+2]+=i!==a[e+2]?(i-a[e+2])*s:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Blur=(0,n.util.createClass)(l.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e,i,o=t.filterBackend.resources,s=t.imageData.width,a=t.imageData.height;o.blurLayer1||(o.blurLayer1=n.util.createCanvasElement(),o.blurLayer2=n.util.createCanvasElement()),i=o.blurLayer2,(e=o.blurLayer1).width===s&&e.height===a||(i.width=e.width=s,i.height=e.height=a);var d,_,b,C,w=e.getContext("2d"),O=i.getContext("2d"),A=.06*this.blur*.5;for(w.putImageData(t.imageData,0,0),O.clearRect(0,0,s,a),C=-15;C<=15;C++)b=A*(_=C/15)*s+(d=(Math.random()-.5)/4),O.globalAlpha=1-Math.abs(_),O.drawImage(e,b,d),w.drawImage(i,0,0),O.globalAlpha=1,O.clearRect(0,0,i.width,i.height);for(C=-15;C<=15;C++)b=A*(_=C/15)*a+(d=(Math.random()-.5)/4),O.globalAlpha=1-Math.abs(_),O.drawImage(e,d,b),w.drawImage(i,0,0),O.globalAlpha=1,O.clearRect(0,0,i.width,i.height);t.ctx.drawImage(e,0,0);var F=t.ctx.getImageData(0,0,e.width,e.height);return w.globalAlpha=1,w.clearRect(0,0,e.width,e.height),F},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?1<this.aspectRatio&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),l.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Gamma=(0,n.util.createClass)(l.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData.data,o=this.gamma,s=i.length,a=1/o[0],d=1/o[1],_=1/o[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,s=256;e<s;e++)this.rVals[e]=255*Math.pow(e/255,a),this.gVals[e]=255*Math.pow(e/255,d),this.bVals[e]=255*Math.pow(e/255,_);for(e=0,s=i.length;e<s;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.Composed=(0,n.util.createClass)(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(t,e){var i=(t.subFilters||[]).map(function(s){return new n.Image.filters[s.type](s)}),o=new n.Image.filters.Composed({subFilters:i});return e&&e(o),o}}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.Image.filters;l.HueRotation=(0,n.util.createClass)(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,e=n.util.cos(t),i=n.util.sin(t),o=Math.sqrt(1/3)*i,s=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+s/3,this.matrix[1]=1/3*s-o,this.matrix[2]=1/3*s+o,this.matrix[5]=1/3*s+o,this.matrix[6]=e+1/3*s,this.matrix[7]=1/3*s-o,this.matrix[10]=1/3*s-o,this.matrix[11]=1/3*s+o,this.matrix[12]=e+1/3*s},isNeutralState:function(t){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,t)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(typeof exports<"u"?exports:this),function(u){"use strict";var n=u.fabric||(u.fabric={}),l=n.util.object.clone;if(n.Text)n.warn("fabric.Text is already defined");else{var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(c),cacheProperties:n.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=n.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,o,s,a,d,_=0,b=this._textLines.length;_<b;_++)if(("justify"===this.textAlign||_!==b-1&&!this.isEndOfWrapping(_))&&(o=0,s=this._textLines[_],(e=this.getLineWidth(_))<this.width&&(d=this.textLines[_].match(this._reSpacesAndTabs)))){t=(this.width-e)/d.length;for(var C=0,w=s.length;C<=w;C++)a=this.__charBounds[_][C],this._reSpaceAndTab.test(s[C])?(a.width+=t,a.kernedWidth+=t,a.left+=o,o+=t):a.left+=o}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){if(t.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":t.textBaseline="middle";break;case"ascender":t.textBaseline="top";break;case"descender":t.textBaseline="bottom"}t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var o=this.getLineWidth(e);t<o&&(t=o)}return t},_renderTextLine:function(t,e,i,o,s,a){this._renderChars(t,e,i,o,s,a)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,o,s,a,d,_,b=t.fillStyle,C=this._getLeftOffset(),w=this._getTopOffset(),O=0,A=0,F=this.path,N=0,Q=this._textLines.length;N<Q;N++)if(e=this.getHeightOfLine(N),this.textBackgroundColor||this.styleHas("textBackgroundColor",N)){o=this._textLines[N],i=this._getLineLeftOffset(N),O=A=0,s=this.getValueOfPropertyAt(N,0,"textBackgroundColor");for(var Z=0,j=o.length;Z<j;Z++)a=this.__charBounds[N][Z],d=this.getValueOfPropertyAt(N,Z,"textBackgroundColor"),F?(t.save(),t.translate(a.renderLeft,a.renderTop),t.rotate(a.angle),(t.fillStyle=d)&&t.fillRect(-a.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),a.width,e/this.lineHeight),t.restore()):d!==s?(_=C+i+O,"rtl"===this.direction&&(_=this.width-_-A),(t.fillStyle=s)&&t.fillRect(_,w,A,e/this.lineHeight),O=a.left,A=a.width,s=d):A+=a.kernedWidth;d&&!F&&(_=C+i+O,"rtl"===this.direction&&(_=this.width-_-A),t.fillStyle=d,t.fillRect(_,w,A,e/this.lineHeight)),w+=e}else w+=e;t.fillStyle=b,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase();n.charWidthsCache[e]||(n.charWidthsCache[e]={});var i=n.charWidthsCache[e],o=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[o]||(i[o]={}),i[o]},_measureChar:function(t,e,i,o){var s,a,d,_,b=this.getFontCache(e),C=i+t,w=this._getFontDeclaration(e)===this._getFontDeclaration(o),O=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==b[i]&&(d=b[i]),void 0!==b[t]&&(_=s=b[t]),w&&void 0!==b[C]&&(_=(a=b[C])-d),void 0===s||void 0===d||void 0===a){var A=this.getMeasuringContext();this._setTextStyles(A,e,!0)}return void 0===s&&(_=s=A.measureText(t).width,b[t]=s),void 0===d&&w&&i&&(d=A.measureText(i).width,b[i]=d),w&&void 0===a&&(a=A.measureText(C).width,_=(b[C]=a)-d),{width:s*O,kernedWidth:_*O}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e,i,o,s,a,d,_=0,b=this._textLines[t],C=new Array(b.length),w=0,O=this.path,A="right"===this.pathSide;for(this.__charBounds[t]=C,e=0;e<b.length;e++)s=this._getGraphemeBox(i=b[e],t,e,o),_+=(C[e]=s).kernedWidth,o=i;if(C[e]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize},O){switch(d=O.segmentsInfo[O.segmentsInfo.length-1].length,(a=n.util.getPointOnPath(O.path,0,O.segmentsInfo)).x+=O.pathOffset.x,a.y+=O.pathOffset.y,this.textAlign){case"left":w=A?d-_:0;break;case"center":w=(d-_)/2;break;case"right":w=A?0:d-_}for(w+=this.pathStartOffset*(A?-1:1),e=A?b.length-1:0;A?0<=e:e<b.length;A?e--:e++)d<w?w%=d:w<0&&(w+=d),this._setGraphemeOnPath(w,s=C[e],a),w+=s.kernedWidth}return{width:_,numOfSpaces:0}},_setGraphemeOnPath:function(t,e,i){var s=this.path,a=n.util.getPointOnPath(s.path,t+e.kernedWidth/2,s.segmentsInfo);e.renderLeft=a.x-i.x,e.renderTop=a.y-i.y,e.angle=a.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,o,s){var a,d=this.getCompleteStyleDeclaration(e,i),_=o?this.getCompleteStyleDeclaration(e,i-1):{},b=this._measureChar(t,d,o,_),C=b.kernedWidth,w=b.width;0!==this.charSpacing&&(w+=a=this._getWidthOfCharSpacing(),C+=a);var O={width:w,left:0,height:d.fontSize,kernedWidth:C,deltaY:d.deltaY};if(0<i&&!s){var A=this.__charBounds[e][i-1];O.left=A.left+A.width+b.kernedWidth-b.width}return O},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),o=1,s=e.length;o<s;o++)i=Math.max(this.getHeightOfChar(t,o),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,o=this._textLines.length;i<o;i++)t=this.getHeightOfLine(i),e+=i===o-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,o=this._getLeftOffset(),s=this._getTopOffset(),a=0,d=this._textLines.length;a<d;a++){var _=this.getHeightOfLine(a),b=_/this.lineHeight,C=this._getLineLeftOffset(a);this._renderTextLine(e,t,this._textLines[a],o+C,s+i+b,a),i+=_}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,o,s,a){var d,_,b,C,O=this.getHeightOfLine(a),A=-1!==this.textAlign.indexOf("justify"),F="",N=0,Q=this.path,Z=!A&&0===this.charSpacing&&this.isEmptyStyles(a)&&!Q,j="ltr"===this.direction,v="ltr"===this.direction?1:-1,X=e.canvas.getAttribute("dir");if(e.save(),X!==this.direction&&(e.canvas.setAttribute("dir",j?"ltr":"rtl"),e.direction=j?"ltr":"rtl",e.textAlign=j?"left":"right"),s-=O*this._fontSizeFraction/this.lineHeight,Z)return this._renderChar(t,e,a,0,i.join(""),o,s,O),void e.restore();for(var Y=0,tt=i.length-1;Y<=tt;Y++)C=Y===tt||this.charSpacing||Q,F+=i[Y],b=this.__charBounds[a][Y],0===N?(o+=v*(b.kernedWidth-b.width),N+=b.width):N+=b.kernedWidth,A&&!C&&this._reSpaceAndTab.test(i[Y])&&(C=!0),C||(d=d||this.getCompleteStyleDeclaration(a,Y),_=this.getCompleteStyleDeclaration(a,Y+1),C=this._hasStyleChanged(d,_)),C&&(Q?(e.save(),e.translate(b.renderLeft,b.renderTop),e.rotate(b.angle),this._renderChar(t,e,a,Y,F,-N/2,0,O),e.restore()):this._renderChar(t,e,a,Y,F,o,s,O),F="",d=_,o+=v*N,N=0);e.restore()},_applyPatternGradientTransformText:function(t){var e,i=n.util.createCanvasElement(),o=this.width+this.strokeWidth,s=this.height+this.strokeWidth;return i.width=o,i.height=s,(e=i.getContext("2d")).beginPath(),e.moveTo(0,0),e.lineTo(o,0),e.lineTo(o,s),e.lineTo(0,s),e.closePath(),e.translate(o/2,s/2),e.fillStyle=t.toLive(e),this._applyPatternGradientTransform(e,t),e.fill(),e.createPattern(i,"no-repeat")},handleFiller:function(t,e,i){var o,s;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(t.translate(o=-this.width/2,s=-this.height/2),t[e]=this._applyPatternGradientTransformText(i),{offsetX:o,offsetY:s}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,o,s,a,d){var _,b,C=this._getStyleDeclaration(i,o),w=this.getCompleteStyleDeclaration(i,o),O="fillText"===t&&w.fill,A="strokeText"===t&&w.stroke&&w.strokeWidth;(A||O)&&(e.save(),O&&(_=this._setFillStyles(e,w)),A&&(b=this._setStrokeStyles(e,w)),e.font=this._getFontDeclaration(w),C&&C.textBackgroundColor&&this._removeShadow(e),C&&C.deltaY&&(d+=C.deltaY),O&&e.fillText(s,a-_.offsetX,d-_.offsetY),A&&e.strokeText(s,a-b.offsetX,d-b.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var o=this.get2DCursorLocation(t,!0),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),a=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY");return this.setSelectionStyles({fontSize:s*i.size,deltaY:a+s*i.baseline},t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),i=this.width-e,o=this.textAlign,s=this.direction,a=0,d=this.isEndOfWrapping(t);return"justify"===o||"justify-center"===o&&!d||"justify-right"===o&&!d||"justify-left"===o&&!d?0:("center"===o&&(a=i/2),"right"===o&&(a=i),"justify-center"===o&&(a=i/2),"justify-right"===o&&(a=i),"rtl"===s&&(a-=i),a)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var o=this._getStyleDeclaration(t,e);return o&&void 0!==o[i]?o[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,o,s,a,d,_,b,C,w,O,A,F,N,Q,Z,j,v=this._getLeftOffset(),X=this._getTopOffset(),Y=this.path,tt=this._getWidthOfCharSpacing(),st=this.offsets[e],W=0,I=this._textLines.length;W<I;W++)if(i=this.getHeightOfLine(W),this[e]||this.styleHas(e,W)){b=this._textLines[W],Q=i/this.lineHeight,a=this._getLineLeftOffset(W),A=O=0,C=this.getValueOfPropertyAt(W,0,e),j=this.getValueOfPropertyAt(W,0,"fill"),w=X+Q*(1-this._fontSizeFraction),o=this.getHeightOfChar(W,0),d=this.getValueOfPropertyAt(W,0,"deltaY");for(var q=0,lt=b.length;q<lt;q++)if(F=this.__charBounds[W][q],N=this.getValueOfPropertyAt(W,q,e),Z=this.getValueOfPropertyAt(W,q,"fill"),s=this.getHeightOfChar(W,q),_=this.getValueOfPropertyAt(W,q,"deltaY"),Y&&N&&Z)t.save(),t.fillStyle=j,t.translate(F.renderLeft,F.renderTop),t.rotate(F.angle),t.fillRect(-F.kernedWidth/2,st*s+_,F.kernedWidth,this.fontSize/15),t.restore();else if((N!==C||Z!==j||s!==o||_!==d)&&0<A){var et=v+a+O;"rtl"===this.direction&&(et=this.width-et-A),C&&j&&(t.fillStyle=j,t.fillRect(et,w+st*o+d,A,this.fontSize/15)),O=F.left,A=F.width,C=N,j=Z,o=s,d=_}else A+=F.kernedWidth;et=v+a+O,"rtl"===this.direction&&(et=this.width-et-A),t.fillStyle=Z,N&&Z&&t.fillRect(et,w+st*o+d,A-tt,this.fontSize/15),X+=i}else X+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,e){var i=t||this,o=this.fontFamily,s=-1<n.Text.genericFonts.indexOf(o.toLowerCase()),a=void 0===o||-1<o.indexOf("'")||-1<o.indexOf(",")||-1<o.indexOf('"')||s?i.fontFamily:'"'+i.fontFamily+'"';return[n.isLikelyNode?i.fontWeight:i.fontStyle,n.isLikelyNode?i.fontStyle:i.fontWeight,e?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",a].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),o=["\n"],s=[],a=0;a<e.length;a++)i[a]=n.util.string.graphemeSplit(e[a]),s=s.concat(i[a],o);return s.pop(),{_unwrappedLines:i,lines:e,graphemeText:s,graphemeLines:i}},toObject:function(t){var e=c.concat(t),i=this.callSuper("toObject",e);return i.styles=l(this.styles,!0),i.path&&(i.path=this.path.toObject()),i},set:function(t,e){this.callSuper("set",t,e);var i=!1,o=!1;if("object"==typeof t)for(var s in t)"path"===s&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(s),o=o||"path"===s;else i=-1!==this._dimensionAffectingProps.indexOf(t),o="path"===t;return o&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(t,e,i){if(!t)return e(null);var o=n.parseAttributes(t,n.Text.ATTRIBUTE_NAMES),s=o.textAnchor||"left";if((i=n.util.object.extend(i?l(i):{},o)).top=i.top||0,i.left=i.left||0,o.textDecoration){var a=o.textDecoration;-1!==a.indexOf("underline")&&(i.underline=!0),-1!==a.indexOf("overline")&&(i.overline=!0),-1!==a.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration}"dx"in o&&(i.left+=o.dx),"dy"in o&&(i.top+=o.dy),"fontSize"in i||(i.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var d="";"textContent"in t?d=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(d=t.firstChild.data),d=d.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=i.strokeWidth;i.strokeWidth=0;var b=new n.Text(d,i),C=b.getScaledHeight()/b.height,w=((b.height+b.strokeWidth)*b.lineHeight-b.height)*C,O=b.getScaledHeight()+w,A=0;"center"===s&&(A=b.getScaledWidth()/2),"right"===s&&(A=b.getScaledWidth()),b.set({left:b.left-A,top:b.top-(O-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:void 0!==_?_:1}),e(b)},n.Text.fromObject=function(t,e){var i=l(t),o=t.path;return delete i.path,n.Object._fromObject("Text",i,function(s){o?n.Object._fromObject("Path",o,function(a){s.set("path",a),e(s)},"path"):e(s)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}}(typeof exports<"u"?exports:this),fabric.util.object.extend(fabric.Text.prototype,{isEmptyStyles:function(u){if(!this.styles||void 0!==u&&!this.styles[u])return!0;var n=void 0===u?this.styles:{line:this.styles[u]};for(var l in n)for(var c in n[l])for(var t in n[l][c])return!1;return!0},styleHas:function(u,n){if(!this.styles||!u||""===u||void 0!==n&&!this.styles[n])return!1;var l=void 0===n?this.styles:{0:this.styles[n]};for(var c in l)for(var t in l[c])if(void 0!==l[c][t][u])return!0;return!1},cleanStyle:function(u){if(!this.styles||!u||""===u)return!1;var n,l,c=this.styles,t=0,e=!0,i=0;for(var o in c){for(var s in n=0,c[o]){var a;t++,(a=c[o][s]).hasOwnProperty(u)?(l?a[u]!==l&&(e=!1):l=a[u],a[u]===this[u]&&delete a[u]):e=!1,0!==Object.keys(a).length?n++:delete c[o][s]}0===n&&delete c[o]}for(var d=0;d<this._textLines.length;d++)i+=this._textLines[d].length;e&&t===i&&(this[u]=l,this.removeStyle(u))},removeStyle:function(u){if(this.styles&&u&&""!==u){var n,l,c,t=this.styles;for(l in t){for(c in n=t[l])delete n[c][u],0===Object.keys(n[c]).length&&delete n[c];0===Object.keys(n).length&&delete t[l]}}},_extendStyles:function(u,n){var l=this.get2DCursorLocation(u);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),n)},get2DCursorLocation:function(u,n){void 0===u&&(u=this.selectionStart);for(var l=n?this._unwrappedTextLines:this._textLines,c=l.length,t=0;t<c;t++){if(u<=l[t].length)return{lineIndex:t,charIndex:u};u-=l[t].length+this.missingNewlineOffset(t)}return{lineIndex:t-1,charIndex:l[t-1].length<u?l[t-1].length:u}},getSelectionStyles:function(u,n,l){void 0===u&&(u=this.selectionStart||0),void 0===n&&(n=this.selectionEnd||u);for(var c=[],t=u;t<n;t++)c.push(this.getStyleAtPosition(t,l));return c},getStyleAtPosition:function(u,n){var l=this.get2DCursorLocation(u);return(n?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex))||{}},setSelectionStyles:function(u,n,l){void 0===n&&(n=this.selectionStart||0),void 0===l&&(l=this.selectionEnd||n);for(var c=n;c<l;c++)this._extendStyles(c,u);return this._forceClearCache=!0,this},_getStyleDeclaration:function(u,n){var l=this.styles&&this.styles[u];return l?l[n]:null},getCompleteStyleDeclaration:function(u,n){for(var l,c=this._getStyleDeclaration(u,n)||{},t={},e=0;e<this._styleProperties.length;e++)t[l=this._styleProperties[e]]=void 0===c[l]?this[l]:c[l];return t},_setStyleDeclaration:function(u,n,l){this.styles[u][n]=l},_deleteStyleDeclaration:function(u,n){delete this.styles[u][n]},_getLineStyle:function(u){return!!this.styles[u]},_setLineStyle:function(u){this.styles[u]={}},_deleteLineStyle:function(u){delete this.styles[u]}}),function(){function u(n){n.textDecoration&&(-1<n.textDecoration.indexOf("underline")&&(n.underline=!0),-1<n.textDecoration.indexOf("line-through")&&(n.linethrough=!0),-1<n.textDecoration.indexOf("overline")&&(n.overline=!0),delete n.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,l){this.callSuper("initialize",n,l),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,l){this[n]!==l&&(this._fireSelectionChanged(),this[n]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var l=this.canvas.contextTop,c=this.canvas.viewportTransform;l.save(),l.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(l),this._clearTextArea(l),n||l.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var n=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,l):this.renderSelection(n,l),l.restore()}},_clearTextArea:function(n){var l=this.width+4,c=this.height+4;n.clearRect(-l/2,-c/2,l,c)},_getCursorBoundaries:function(n){void 0===n&&(n=this.selectionStart);var l=this._getLeftOffset(),c=this._getTopOffset(),t=this._getCursorBoundariesOffsets(n);return{left:l,top:c,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,c,t,e,i=0,o=0,s=this.get2DCursorLocation(n);t=s.charIndex,c=s.lineIndex;for(var a=0;a<c;a++)i+=this.getHeightOfLine(a);l=this._getLineLeftOffset(c);var d=this.__charBounds[c][t];return d&&(o=d.left),0!==this.charSpacing&&t===this._textLines[c].length&&(o-=this._getWidthOfCharSpacing()),e={top:i,left:l+(0<o?o:0)},"rtl"===this.direction&&(e.left*=-1),this.cursorOffsetCache=e,this.cursorOffsetCache},renderCursor:function(n,l){var c=this.get2DCursorLocation(),t=c.lineIndex,e=0<c.charIndex?c.charIndex-1:0,i=this.getValueOfPropertyAt(t,e,"fontSize"),o=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/o,a=n.topOffset,d=this.getValueOfPropertyAt(t,e,"deltaY");a+=(1-this._fontSizeFraction)*this.getHeightOfLine(t)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(t,e,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(n.left+n.leftOffset-s/2,a+n.top+d,s,i)},renderSelection:function(n,l){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,t=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,e=-1!==this.textAlign.indexOf("justify"),i=this.get2DCursorLocation(c),o=this.get2DCursorLocation(t),s=i.lineIndex,a=o.lineIndex,d=i.charIndex<0?0:i.charIndex,_=o.charIndex<0?0:o.charIndex,b=s;b<=a;b++){var C,w=this._getLineLeftOffset(b)||0,O=this.getHeightOfLine(b),A=0,F=0;if(b===s&&(A=this.__charBounds[s][d].left),s<=b&&b<a)F=e&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===a)if(0===_)F=this.__charBounds[a][_].left;else{var N=this._getWidthOfCharSpacing();F=this.__charBounds[a][_-1].left+this.__charBounds[a][_-1].width-N}C=O,(this.lineHeight<1||b===a&&1<this.lineHeight)&&(O/=this.lineHeight);var Q=n.left+w+A,Z=F-A,j=O,v=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",j=1,v=O):l.fillStyle=this.selectionColor,"rtl"===this.direction&&(Q=this.width-Q-Z),l.fillRect(Q,n.top+n.topOffset+v,Z,j),n.topOffset+=C}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0);return{l:n.lineIndex,c:0<n.charIndex?n.charIndex-1:0}}}),fabric.IText.fromObject=function(n,l){if(u(n),n.styles)for(var c in n.styles)for(var t in n.styles[c])u(n.styles[c][t]);fabric.Object._fromObject("IText",n,l,"text")}}(),function(){var u=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var l=n.canvas;l&&(l._hasITextHandlers||(l._hasITextHandlers=!0,n._initCanvasHandlers(l)),l._iTextInstances=l._iTextInstances||[],l._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var l=n.canvas;l&&(l._iTextInstances=l._iTextInstances||[],fabric.util.removeFromArray(l._iTextInstances,n),0===l._iTextInstances.length&&(l._hasITextHandlers=!1,n._removeCanvasHandlers(l)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(l){l.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,l,c,t){var e;return e={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",l,{duration:c,onComplete:function(){e.isAborted||n[t]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return e.isAborted}}),e},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var l=this,c=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){l._tick()},c)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,l=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&l&&l.clearContext(l.contextTop||l.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var l=0,c=n-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)l++,c--;for(;/\S/.test(this._text[c])&&-1<c;)l++,c--;return n-l},findWordBoundaryRight:function(n){var l=0,c=n;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)l++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)l++,c++;return n+l},findLineBoundaryLeft:function(n){for(var l=0,c=n-1;!/\n/.test(this._text[c])&&-1<c;)l++,c--;return n-l},findLineBoundaryRight:function(n){for(var l=0,c=n;!/\n/.test(this._text[c])&&c<this._text.length;)l++,c++;return n+l},searchWordBoundary:function(n,l){for(var c=this._text,t=this._reSpace.test(c[n])?n-1:n,e=c[t],i=fabric.reNonWord;!i.test(e)&&0<t&&t<c.length;)e=c[t+=l];return i.test(e)&&(t+=1===l?0:1),t},selectWord:function(n){var l=this.searchWordBoundary(n=n||this.selectionStart,-1),c=this.searchWordBoundary(n,1);this.selectionStart=l,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){var l=this.findLineBoundaryLeft(n=n||this.selectionStart),c=this.findLineBoundaryRight(n);return this.selectionStart=l,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(l){l.selected=!1,l.isEditing&&l.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(this.__isMousedown&&this.isEditing){var l=this.getSelectionStartFromPointer(n.e),c=this.selectionStart,t=this.selectionEnd;(l===this.__selectionStartOnMouseDown&&c!==t||c!==l&&t!==l)&&(l>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=l):(this.selectionStart=l,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===c&&this.selectionEnd===t||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,l,c){var t=c.slice(0,n),e=fabric.util.string.graphemeSplit(t).length;if(n===l)return{selectionStart:e,selectionEnd:e};var i=c.slice(n,l);return{selectionStart:e,selectionEnd:e+fabric.util.string.graphemeSplit(i).length}},fromGraphemeToStringSelection:function(n,l,c){var t=c.slice(0,n).join("").length;return n===l?{selectionStart:t,selectionEnd:t}:{selectionStart:t,selectionEnd:t+c.slice(n,l).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,l=this._getCursorBoundaries(n),c=this.get2DCursorLocation(n),i=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"fontSize")*this.lineHeight,o=l.leftOffset,s=this.calcTransformMatrix(),a={x:l.left+o,y:l.top+l.topOffset+i},d=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,b=_.width/d,C=_.height/d,w=b-i,O=C-i,A=_.clientWidth/b,F=_.clientHeight/C;return a=fabric.util.transformPoint(a,s),(a=fabric.util.transformPoint(a,this.canvas.viewportTransform)).x*=A,a.y*=F,a.x<0&&(a.x=0),a.x>w&&(a.x=w),a.y<0&&(a.y=0),a.y>O&&(a.y=O),a.x+=this.canvas._offset.left,a.y+=this.canvas._offset.top,{left:a.x+"px",top:a.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,l=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,l&&(l.blur&&l.blur(),l.parentNode&&l.parentNode.removeChild(l)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,l){var c,t,e=this.get2DCursorLocation(n,!0),i=this.get2DCursorLocation(l,!0),o=e.lineIndex,s=e.charIndex,a=i.lineIndex,d=i.charIndex;if(o!==a){if(this.styles[o])for(c=s;c<this._unwrappedTextLines[o].length;c++)delete this.styles[o][c];if(this.styles[a])for(c=d;c<this._unwrappedTextLines[a].length;c++)(t=this.styles[a][c])&&(this.styles[o]||(this.styles[o]={}),this.styles[o][s+c-d]=t);for(c=o+1;c<=a;c++)delete this.styles[c];this.shiftLineStyles(a,o-a)}else if(this.styles[o]){t=this.styles[o];var _,b,C=d-s;for(c=s;c<d;c++)delete t[c];for(b in this.styles[o])d<=(_=parseInt(b,10))&&(t[_-C]=t[b],delete t[b])}},shiftLineStyles:function(n,l){var c=u(this.styles);for(var t in this.styles){var e=parseInt(t,10);n<e&&(this.styles[e+l]=c[e],c[e-l]||delete this.styles[e])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(n,l,c,t){var e,i={},o=!1,s=this._unwrappedTextLines[n].length===l;for(var a in c||(c=1),this.shiftLineStyles(n,c),this.styles[n]&&(e=this.styles[n][0===l?l:l-1]),this.styles[n]){var d=parseInt(a,10);l<=d&&(o=!0,i[d-l]=this.styles[n][a],s&&0===l||delete this.styles[n][a])}var _=!1;for(o&&!s&&(this.styles[n+c]=i,_=!0),_&&c--;0<c;)t&&t[c-1]?this.styles[n+c]={0:u(t[c-1])}:e?this.styles[n+c]={0:u(e)}:delete this.styles[n+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(n,l,c,t){this.styles||(this.styles={});var e=this.styles[n],i=e?u(e):{};for(var o in c||(c=1),i){var s=parseInt(o,10);l<=s&&(e[s+c]=i[s],i[s-c]||delete e[s])}if(this._forceClearCache=!0,t)for(;c--;)Object.keys(t[c]).length&&(this.styles[n]||(this.styles[n]={}),this.styles[n][l+c]=u(t[c]));else if(e)for(var a=e[l?l-1:1];a&&c--;)this.styles[n][l+c]=u(a)},insertNewStyleBlock:function(n,l,c){for(var t=this.get2DCursorLocation(l,!0),e=[0],i=0,o=0;o<n.length;o++)"\n"===n[o]?e[++i]=0:e[i]++;for(0<e[0]&&(this.insertCharStyleObject(t.lineIndex,t.charIndex,e[0],c),c=c&&c.slice(e[0]+1)),i&&this.insertNewlineStyleObject(t.lineIndex,t.charIndex+e[0],i),o=1;o<i;o++)0<e[o]?this.insertCharStyleObject(t.lineIndex+o,0,e[o],c):c&&this.styles[t.lineIndex+o]&&c[0]&&(this.styles[t.lineIndex+o][0]=c[0]),c=c&&c.slice(e[o]+1);0<e[o]&&this.insertCharStyleObject(t.lineIndex+o,0,e[o],c)},setSelectionStartEndWithShift:function(n,l,c){c<=n?(l===n?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=c):n<c&&c<l?"right"===this._selectionDirection?this.selectionEnd=c:this.selectionStart=c:(l===n?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=l),this.selectionEnd=c)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(u){if(this.canvas){this.__newClickTime=+new Date;var n=u.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",u),this._stopEvent(u.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(u){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===u.x&&this.__lastPointer.y===u.y},_stopEvent:function(u){u.preventDefault&&u.preventDefault(),u.stopPropagation&&u.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(u){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(u.e))},tripleClickHandler:function(u){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(u.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(u){!this.canvas||!this.editable||u.e.button&&1!==u.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(u.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(u){!this.canvas||!this.editable||u.e.button&&1!==u.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(u){if(this.__isMousedown=!1,!(!this.editable||this.group||u.transform&&u.transform.actionPerformed||u.e.button&&1!==u.e.button)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(u.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(u){var n=this.getSelectionStartFromPointer(u);u.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(u){for(var n,l=this.getLocalPointer(u),c=0,t=0,e=0,i=0,o=0,s=0,a=this._textLines.length;s<a&&e<=l.y;s++)e+=this.getHeightOfLine(s)*this.scaleY,0<(o=s)&&(i+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));t=this._getLineLeftOffset(o)*this.scaleX,n=this._textLines[o],"rtl"===this.direction&&(l.x=this.width*this.scaleX-l.x+t);for(var d=0,_=n.length;d<_&&(c=t,(t+=this.__charBounds[o][d].kernedWidth*this.scaleX)<=l.x);d++)i++;return this._getNewSelectionStartFromOffset(l,c,t,i,_)},_getNewSelectionStartFromOffset:function(u,n,l,c,t){var i=l-u.x,o=c+(u.x-n<i||i<0?0:1);return this.flipX&&(o=t-o),o>this._text.length&&(o=this._text.length),o}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var u=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+u.top+"; left: "+u.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: "+u.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(u){if(this.isEditing){var n="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(u.keyCode in n)this[n[u.keyCode]](u);else{if(!(u.keyCode in this.ctrlKeysMapDown)||!u.ctrlKey&&!u.metaKey)return;this[this.ctrlKeysMapDown[u.keyCode]](u)}u.stopImmediatePropagation(),u.preventDefault(),33<=u.keyCode&&u.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(u){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:u.keyCode in this.ctrlKeysMapUp&&(u.ctrlKey||u.metaKey)&&(this[this.ctrlKeysMapUp[u.keyCode]](u),u.stopImmediatePropagation(),u.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(u){var n=this.fromPaste;if(this.fromPaste=!1,u&&u.stopPropagation(),this.isEditing){var l,c,t,e,i,o=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,a=o.length,d=a-s,_=this.selectionStart,b=this.selectionEnd,C=_!==b;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),O=_>w.selectionStart;C?(l=this._text.slice(_,b),d+=b-_):a<s&&(l=O?this._text.slice(b+d,b):this._text.slice(_,_-d)),c=o.slice(w.selectionEnd-d,w.selectionEnd),l&&l.length&&(c.length&&(t=this.getSelectionStyles(_,_+1,!1),t=c.map(function(){return t[0]})),C?(e=_,i=b):O?(e=b-l.length,i=b):i=(e=b)+l.length,this.removeStyleFromTo(e,i)),c.length&&(n&&c.join("")===fabric.copiedText&&!fabric.disableStyleCopyPaste&&(t=fabric.copiedTextStyle),this.insertNewStyleBlock(c,_,t)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(u){this.compositionStart=u.target.selectionStart,this.compositionEnd=u.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(fabric.copiedText=this.getSelectedText(),fabric.copiedTextStyle=fabric.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(u){return u&&u.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(u,n){var l,c=this._getLineLeftOffset(u);return 0<n&&(c+=(l=this.__charBounds[u][n-1]).left+l.width),c},getDownCursorOffset:function(u,n){var l=this._getSelectionForOffset(u,n),c=this.get2DCursorLocation(l),t=c.lineIndex;if(t===this._textLines.length-1||u.metaKey||34===u.keyCode)return this._text.length-l;var e=c.charIndex,i=this._getWidthBeforeCursor(t,e),o=this._getIndexOnLine(t+1,i);return this._textLines[t].slice(e).length+o+1+this.missingNewlineOffset(t)},_getSelectionForOffset:function(u,n){return u.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(u,n){var l=this._getSelectionForOffset(u,n),c=this.get2DCursorLocation(l),t=c.lineIndex;if(0===t||u.metaKey||33===u.keyCode)return-l;var e=c.charIndex,i=this._getWidthBeforeCursor(t,e),o=this._getIndexOnLine(t-1,i),s=this._textLines[t].slice(0,e),a=this.missingNewlineOffset(t-1);return-this._textLines[t-1].length+o-s.length+(1-a)},_getIndexOnLine:function(u,n){for(var l,c,t=this._textLines[u],e=this._getLineLeftOffset(u),i=0,o=0,s=t.length;o<s;o++)if(n<(e+=l=this.__charBounds[u][o].width)){c=!0;var d=e,_=Math.abs(e-l-n);i=Math.abs(d-n)<_?o:o-1;break}return c||(i=t.length-1),i},moveCursorDown:function(u){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",u)},moveCursorUp:function(u){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",u)},_moveCursorUpOrDown:function(u,n){var l=this["get"+u+"CursorOffset"](n,"right"===this._selectionDirection);n.shiftKey?this.moveCursorWithShift(l):this.moveCursorWithoutShift(l),0!==l&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(u){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+u:this.selectionEnd+u),0!==u},moveCursorWithoutShift:function(u){return u<0?(this.selectionStart+=u,this.selectionEnd=this.selectionStart):(this.selectionEnd+=u,this.selectionStart=this.selectionEnd),0!==u},moveCursorLeft:function(u){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",u)},_move:function(u,n,l){var c;if(u.altKey)c=this["findWordBoundary"+l](this[n]);else{if(!u.metaKey&&35!==u.keyCode&&36!==u.keyCode)return this[n]+="Left"===l?-1:1,!0;c=this["findLineBoundary"+l](this[n])}if(void 0!==typeof c&&this[n]!==c)return this[n]=c,!0},_moveLeft:function(u,n){return this._move(u,n,"Left")},_moveRight:function(u,n){return this._move(u,n,"Right")},moveCursorLeftWithoutShift:function(u){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(n=this._moveLeft(u,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(u){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(u,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(u,"selectionStart")):void 0},moveCursorRight:function(u){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",u)},_moveCursorLeftOrRight:function(u,n){var l="moveCursor"+u+"With";this._currentCursorOpacity=1,this[l+=n.shiftKey?"Shift":"outShift"](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(u){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(u,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(u,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(u){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(u,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(u,n){void 0===n&&(n=u+1),this.removeStyleFromTo(u,n),this._text.splice(u,n-u),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(u,n,l,c){void 0===c&&(c=l),l<c&&this.removeStyleFromTo(l,c);var t=fabric.util.string.graphemeSplit(u);this.insertNewStyleBlock(t,l,n),this._text=[].concat(this._text.slice(0,l),t,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var u=fabric.util.toFixed,n=/  +/g;fabric.util.object.extend(fabric.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var c=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",c?'text-decoration="'+c+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",l.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(l,c){var t,e=[],i=[],o=l;this._setSVGBg(i);for(var s=0,a=this._textLines.length;s<a;s++)t=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(i,s,c+t,o),this._setSVGTextLineText(e,s,c+t,o),o+=this.getHeightOfLine(s);return{textSpans:e,textBgRects:i}},_createTextCharSpan:function(l,c,t,e){var i=l!==l.trim()||l.match(n),o=this.getSvgSpanStyles(c,i),s=o?'style="'+o+'"':"",a=c.deltaY,d="",_=fabric.Object.NUM_FRACTION_DIGITS;return a&&(d=' dy="'+u(a,_)+'" '),['<tspan x="',u(t,_),'" y="',u(e,_),'" ',d,s,">",fabric.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,c,t,e){var i,o,s,a,d,_=this.getHeightOfLine(c),b=-1!==this.textAlign.indexOf("justify"),C="",w=0,O=this._textLines[c];e+=_*(1-this._fontSizeFraction)/this.lineHeight;for(var A=0,F=O.length-1;A<=F;A++)d=A===F||this.charSpacing,C+=O[A],s=this.__charBounds[c][A],0===w?(t+=s.kernedWidth-s.width,w+=s.width):w+=s.kernedWidth,b&&!d&&this._reSpaceAndTab.test(O[A])&&(d=!0),d||(i=i||this.getCompleteStyleDeclaration(c,A),o=this.getCompleteStyleDeclaration(c,A+1),d=this._hasStyleChangedForSvg(i,o)),d&&(a=this._getStyleDeclaration(c,A)||{},l.push(this._createTextCharSpan(C,a,t,e)),C="",i=o,t+=w,w=0)},_pushTextBgRect:function(l,c,t,e,i,o){var s=fabric.Object.NUM_FRACTION_DIGITS;l.push("\t\t<rect ",this._getFillAttributes(c),' x="',u(t,s),'" y="',u(e,s),'" width="',u(i,s),'" height="',u(o,s),'"></rect>\n')},_setSVGTextLineBg:function(l,c,t,e){for(var i,o,s=this._textLines[c],a=this.getHeightOfLine(c)/this.lineHeight,d=0,_=0,b=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),C=0,w=s.length;C<w;C++)i=this.__charBounds[c][C],(o=this.getValueOfPropertyAt(c,C,"textBackgroundColor"))!==b?(b&&this._pushTextBgRect(l,b,t+_,e,d,a),_=i.left,d=i.width,b=o):d+=i.kernedWidth;o&&this._pushTextBgRect(l,o,t+_,e,d,a)},_getFillAttributes:function(l){var c=l&&"string"==typeof l?new fabric.Color(l):"";return c&&c.getSource()&&1!==c.getAlpha()?'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"':'fill="'+l+'"'},_getSVGLineTopOffset:function(l){for(var c,t=0,e=0;e<l;e++)t+=this.getHeightOfLine(e);return c=this.getHeightOfLine(e),{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*c/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){return fabric.Object.prototype.getSvgStyles.call(this,l)+" white-space: pre;"}})}(),function(u){"use strict";var n=u.fabric||(u.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var c=0,t=0,e=0,i={},o=0;o<l.graphemeLines.length;o++)"\n"===l.graphemeText[e]&&0<o?(t=0,e++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[e])&&0<o&&(t++,e++),i[o]={line:c,offset:t},e+=l.graphemeLines[o].length,t+=l.graphemeLines[o].length;return i},styleHas:function(l,c){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[c];t&&(c=t.line)}return n.Text.prototype.styleHas.call(this,l,c)},isEmptyStyles:function(l){if(!this.styles)return!0;var c,t,e=0,i=!1,o=this._styleMap[l],s=this._styleMap[l+1];for(var a in o&&(l=o.line,e=o.offset),s&&(i=s.line===l,c=s.offset),t=void 0===l?this.styles:{line:this.styles[l]})for(var d in t[a])if(e<=d&&(!i||d<c))for(var _ in t[a][d])return!1;return!0},_getStyleDeclaration:function(l,c){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[l];if(!t)return null;l=t.line,c=t.offset+c}return this.callSuper("_getStyleDeclaration",l,c)},_setStyleDeclaration:function(l,c,t){var e=this._styleMap[l];this.styles[l=e.line][c=e.offset+c]=t},_deleteStyleDeclaration:function(l,c){var t=this._styleMap[l];delete this.styles[l=t.line][c=t.offset+c]},_getLineStyle:function(l){return!!this.styles[this._styleMap[l].line]},_setLineStyle:function(l){this.styles[this._styleMap[l].line]={}},_wrapText:function(l,c){var t,e=[];for(this.isWrapping=!0,t=0;t<l.length;t++)e=e.concat(this._wrapLine(l[t],t,c));return this.isWrapping=!1,e},_measureWord:function(l,c,t){var e,i=0;t=t||0;for(var o=0,s=l.length;o<s;o++)i+=this._getGraphemeBox(l[o],c,o+t,e,!0).kernedWidth,e=l[o];return i},_wrapLine:function(l,c,t,e){var i=0,o=this.splitByGrapheme,s=[],a=[],d=o?n.util.string.graphemeSplit(l):l.split(this._wordJoiners),_="",b=0,C=o?"":" ",w=0,O=0,A=0,F=!0,N=this._getWidthOfCharSpacing();e=e||0,0===d.length&&d.push([]),t-=e;for(var Q=0;Q<d.length;Q++)_=o?d[Q]:n.util.string.graphemeSplit(d[Q]),w=this._measureWord(_,c,b),b+=_.length,t<(i+=O+w-N)&&!F?(s.push(a),a=[],i=w,F=!0):i+=N,F||o||a.push(C),a=a.concat(_),O=o?0:this._measureWord([C],c,b),b++,F=!1,A<w&&(A=w);return Q&&s.push(a),A+e>this.dynamicMinWidth&&(this.dynamicMinWidth=A-N+e),s},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var c=n.Text.prototype._splitTextIntoLines.call(this,l),t=this._wrapText(c.lines,this.width),e=new Array(t.length),i=0;i<t.length;i++)e[i]=t[i].join("");return c.lines=e,c.graphemeLines=t,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var c in this._styleMap)this._textLines[c]&&(l[this._styleMap[c].line]=1);for(var c in this.styles)l[c]||delete this.styles[c]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),n.Textbox.fromObject=function(l,c){return n.Object._fromObject("Textbox",l,c,"text")}}(typeof exports<"u"?exports:this),function(){var u=fabric.controlsUtils,n=u.scaleSkewCursorStyleHandler,l=u.scaleCursorStyleHandler,c=u.scalingEqually,t=u.scalingYOrSkewingX,e=u.scalingXOrSkewingY,i=u.scaleOrSkewActionName,o=fabric.Object.prototype.controls;if(o.ml=new fabric.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:e,getActionName:i}),o.mr=new fabric.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:e,getActionName:i}),o.mb=new fabric.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:t,getActionName:i}),o.mt=new fabric.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:t,getActionName:i}),o.tl=new fabric.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:c}),o.tr=new fabric.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:c}),o.bl=new fabric.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:c}),o.br=new fabric.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:c}),o.mtr=new fabric.Control({x:0,y:-.5,actionHandler:u.rotationWithSnapping,cursorStyleHandler:u.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),fabric.Textbox){var s=fabric.Textbox.prototype.controls={};s.mtr=o.mtr,s.tr=o.tr,s.br=o.br,s.tl=o.tl,s.bl=o.bl,s.mt=o.mt,s.mb=o.mb,s.mr=new fabric.Control({x:.5,y:0,actionHandler:u.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),s.ml=new fabric.Control({x:-.5,y:0,actionHandler:u.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}(),function(u,n){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=u.document?n(u,!0):function(l){if(!l.document)throw new Error("jQuery requires a window with a document");return n(l)}:n(u)}(typeof window<"u"?window:this,function(u,n){"use strict";var l=[],c=Object.getPrototypeOf,t=l.slice,e=l.flat?function(h){return l.flat.call(h)}:function(h){return l.concat.apply([],h)},i=l.push,o=l.indexOf,s={},a=s.toString,d=s.hasOwnProperty,_=d.toString,b=_.call(Object),C={},w=function(h){return"function"==typeof h&&"number"!=typeof h.nodeType&&"function"!=typeof h.item},O=function(h){return null!=h&&h===h.window},A=u.document,F={type:!0,src:!0,nonce:!0,noModule:!0};function N(h,p,g){var r,m,y=(g=g||A).createElement("script");if(y.text=h,p)for(r in F)(m=p[r]||p.getAttribute&&p.getAttribute(r))&&y.setAttribute(r,m);g.head.appendChild(y).parentNode.removeChild(y)}function Q(h){return null==h?h+"":"object"==typeof h||"function"==typeof h?s[a.call(h)]||"object":typeof h}var Z="3.7.1",j=/HTML$/i,v=function(h,p){return new v.fn.init(h,p)};function X(h){var p=!!h&&"length"in h&&h.length,g=Q(h);return!w(h)&&!O(h)&&("array"===g||0===p||"number"==typeof p&&0<p&&p-1 in h)}function Y(h,p){return h.nodeName&&h.nodeName.toLowerCase()===p.toLowerCase()}v.fn=v.prototype={jquery:Z,constructor:v,length:0,toArray:function(){return t.call(this)},get:function(h){return null==h?t.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var p=v.merge(this.constructor(),h);return p.prevObject=this,p},each:function(h){return v.each(this,h)},map:function(h){return this.pushStack(v.map(this,function(p,g){return h.call(p,g,p)}))},slice:function(){return this.pushStack(t.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(h,p){return(p+1)%2}))},odd:function(){return this.pushStack(v.grep(this,function(h,p){return p%2}))},eq:function(h){var p=this.length,g=+h+(h<0?p:0);return this.pushStack(0<=g&&g<p?[this[g]]:[])},end:function(){return this.prevObject||this.constructor()},push:i,sort:l.sort,splice:l.splice},v.extend=v.fn.extend=function(){var h,p,g,r,m,y,T=arguments[0]||{},D=1,P=arguments.length,B=!1;for("boolean"==typeof T&&(B=T,T=arguments[D]||{},D++),"object"==typeof T||w(T)||(T={}),D===P&&(T=this,D--);D<P;D++)if(null!=(h=arguments[D]))for(p in h)r=h[p],"__proto__"!==p&&T!==r&&(B&&r&&(v.isPlainObject(r)||(m=Array.isArray(r)))?(g=T[p],y=m&&!Array.isArray(g)?[]:m||v.isPlainObject(g)?g:{},m=!1,T[p]=v.extend(B,y,r)):void 0!==r&&(T[p]=r));return T},v.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var p,g;return!(!h||"[object Object]"!==a.call(h)||(p=c(h))&&("function"!=typeof(g=d.call(p,"constructor")&&p.constructor)||_.call(g)!==b))},isEmptyObject:function(h){var p;for(p in h)return!1;return!0},globalEval:function(h,p,g){N(h,{nonce:p&&p.nonce},g)},each:function(h,p){var g,r=0;if(X(h))for(g=h.length;r<g&&!1!==p.call(h[r],r,h[r]);r++);else for(r in h)if(!1===p.call(h[r],r,h[r]))break;return h},text:function(h){var p,g="",r=0,m=h.nodeType;if(!m)for(;p=h[r++];)g+=v.text(p);return 1===m||11===m?h.textContent:9===m?h.documentElement.textContent:3===m||4===m?h.nodeValue:g},makeArray:function(h,p){var g=p||[];return null!=h&&(X(Object(h))?v.merge(g,"string"==typeof h?[h]:h):i.call(g,h)),g},inArray:function(h,p,g){return null==p?-1:o.call(p,h,g)},isXMLDoc:function(h){var g=h&&(h.ownerDocument||h).documentElement;return!j.test(h&&h.namespaceURI||g&&g.nodeName||"HTML")},merge:function(h,p){for(var g=+p.length,r=0,m=h.length;r<g;r++)h[m++]=p[r];return h.length=m,h},grep:function(h,p,g){for(var r=[],m=0,y=h.length,T=!g;m<y;m++)!p(h[m],m)!==T&&r.push(h[m]);return r},map:function(h,p,g){var r,m,y=0,T=[];if(X(h))for(r=h.length;y<r;y++)null!=(m=p(h[y],y,g))&&T.push(m);else for(y in h)null!=(m=p(h[y],y,g))&&T.push(m);return e(T)},guid:1,support:C}),"function"==typeof Symbol&&(v.fn[Symbol.iterator]=l[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,p){s["[object "+p+"]"]=p.toLowerCase()});var tt=l.pop,st=l.sort,W=l.splice,I="[\\x20\\t\\r\\n\\f]",q=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g");v.contains=function(h,p){var g=p&&p.parentNode;return h===g||!(!g||1!==g.nodeType||!(h.contains?h.contains(g):h.compareDocumentPosition&&16&h.compareDocumentPosition(g)))};var lt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function et(h,p){return p?"\0"===h?"\ufffd":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}v.escapeSelector=function(h){return(h+"").replace(lt,et)};var ft=A,pt=i;!function(){var h,p,g,r,m,y,T,D,P,B,K=pt,nt=v.expando,J=0,at=0,Dt=pe(),Nt=pe(),Ht=pe(),oe=pe(),Te=function(L,z){return L===z&&(m=!0),0},ti="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ki="(?:\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",$t="\\["+I+"*("+ki+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ki+"))|)"+I+"*\\]",Yi=":("+ki+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$t+")*)|.*)\\)|)",ae=new RegExp(I+"+","g"),Le=new RegExp("^"+I+"*,"+I+"*"),Wn=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),ur=new RegExp(I+"|>"),Di=new RegExp(Yi),Jn=new RegExp("^"+ki+"$"),tn={ID:new RegExp("^#("+ki+")"),CLASS:new RegExp("^\\.("+ki+")"),TAG:new RegExp("^("+ki+"|[*])"),ATTR:new RegExp("^"+$t),PSEUDO:new RegExp("^"+Yi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+ti+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},di=/^(?:input|select|textarea|button)$/i,On=/^h\d$/i,bi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,He=/[+~]/,Fe=new RegExp("\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\([^\\r\\n\\f])","g"),ei=function(L,z){var it="0x"+L.slice(1)-65536;return z||(it<0?String.fromCharCode(it+65536):String.fromCharCode(it>>10|55296,1023&it|56320))},en=function(){hn()},li=An(function(L){return!0===L.disabled&&Y(L,"fieldset")},{dir:"parentNode",next:"legend"});try{K.apply(l=t.call(ft.childNodes),ft.childNodes)}catch{K={apply:function(z,it){pt.apply(z,t.call(it))},call:function(z){pt.apply(z,t.call(arguments,1))}}}function Xt(L,z,it,rt){var dt,Et,Tt,It,At,fe,zt,Jt=z&&z.ownerDocument,se=z?z.nodeType:9;if(it=it||[],"string"!=typeof L||!L||1!==se&&9!==se&&11!==se)return it;if(!rt&&(hn(z),z=z||y,D)){if(11!==se&&(At=bi.exec(L)))if(dt=At[1]){if(9===se){if(!(Tt=z.getElementById(dt)))return it;if(Tt.id===dt)return K.call(it,Tt),it}else if(Jt&&(Tt=Jt.getElementById(dt))&&Xt.contains(z,Tt)&&Tt.id===dt)return K.call(it,Tt),it}else{if(At[2])return K.apply(it,z.getElementsByTagName(L)),it;if((dt=At[3])&&z.getElementsByClassName)return K.apply(it,z.getElementsByClassName(dt)),it}if(!(oe[L+" "]||P&&P.test(L))){if(zt=L,Jt=z,1===se&&(ur.test(L)||Wn.test(L))){for((Jt=He.test(L)&&vr(z.parentNode)||z)==z&&C.scope||((It=z.getAttribute("id"))?It=v.escapeSelector(It):z.setAttribute("id",It=nt)),Et=(fe=tr(L)).length;Et--;)fe[Et]=(It?"#"+It:":scope")+" "+zn(fe[Et]);zt=fe.join(",")}try{return K.apply(it,Jt.querySelectorAll(zt)),it}catch{oe(L,!0)}finally{It===nt&&z.removeAttribute("id")}}}return br(L.replace(q,"$1"),z,it,rt)}function pe(){var L=[];return function z(it,rt){return L.push(it+" ")>p.cacheLength&&delete z[L.shift()],z[it+" "]=rt}}function Re(L){return L[nt]=!0,L}function Se(L){var z=y.createElement("fieldset");try{return!!L(z)}catch{return!1}finally{z.parentNode&&z.parentNode.removeChild(z),z=null}}function Vi(L){return function(z){return Y(z,"input")&&z.type===L}}function Xn(L){return function(z){return(Y(z,"input")||Y(z,"button"))&&z.type===L}}function Zn(L){return function(z){return"form"in z?z.parentNode&&!1===z.disabled?"label"in z?"label"in z.parentNode?z.parentNode.disabled===L:z.disabled===L:z.isDisabled===L||z.isDisabled!==!L&&li(z)===L:z.disabled===L:"label"in z&&z.disabled===L}}function En(L){return Re(function(z){return z=+z,Re(function(it,rt){for(var dt,Et=L([],it.length,z),Tt=Et.length;Tt--;)it[dt=Et[Tt]]&&(it[dt]=!(rt[dt]=it[dt]))})})}function vr(L){return L&&typeof L.getElementsByTagName<"u"&&L}function hn(L){var z,it=L?L.ownerDocument||L:ft;return it!=y&&9===it.nodeType&&it.documentElement&&(T=(y=it).documentElement,D=!v.isXMLDoc(y),B=T.matches||T.webkitMatchesSelector||T.msMatchesSelector,T.msMatchesSelector&&ft!=y&&(z=y.defaultView)&&z.top!==z&&z.addEventListener("unload",en),C.getById=Se(function(rt){return T.appendChild(rt).id=v.expando,!y.getElementsByName||!y.getElementsByName(v.expando).length}),C.disconnectedMatch=Se(function(rt){return B.call(rt,"*")}),C.scope=Se(function(){return y.querySelectorAll(":scope")}),C.cssHas=Se(function(){try{return y.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),C.getById?(p.filter.ID=function(rt){var dt=rt.replace(Fe,ei);return function(Et){return Et.getAttribute("id")===dt}},p.find.ID=function(rt,dt){if(typeof dt.getElementById<"u"&&D){var Et=dt.getElementById(rt);return Et?[Et]:[]}}):(p.filter.ID=function(rt){var dt=rt.replace(Fe,ei);return function(Et){var Tt=typeof Et.getAttributeNode<"u"&&Et.getAttributeNode("id");return Tt&&Tt.value===dt}},p.find.ID=function(rt,dt){if(typeof dt.getElementById<"u"&&D){var Et,Tt,It,At=dt.getElementById(rt);if(At){if((Et=At.getAttributeNode("id"))&&Et.value===rt)return[At];for(It=dt.getElementsByName(rt),Tt=0;At=It[Tt++];)if((Et=At.getAttributeNode("id"))&&Et.value===rt)return[At]}return[]}}),p.find.TAG=function(rt,dt){return typeof dt.getElementsByTagName<"u"?dt.getElementsByTagName(rt):dt.querySelectorAll(rt)},p.find.CLASS=function(rt,dt){if(typeof dt.getElementsByClassName<"u"&&D)return dt.getElementsByClassName(rt)},P=[],Se(function(rt){var dt;T.appendChild(rt).innerHTML="<a id='"+nt+"' href='' disabled='disabled'></a><select id='"+nt+"-\r\\' disabled='disabled'><option selected=''></option></select>",rt.querySelectorAll("[selected]").length||P.push("\\["+I+"*(?:value|"+ti+")"),rt.querySelectorAll("[id~="+nt+"-]").length||P.push("~="),rt.querySelectorAll("a#"+nt+"+*").length||P.push(".#.+[+~]"),rt.querySelectorAll(":checked").length||P.push(":checked"),(dt=y.createElement("input")).setAttribute("type","hidden"),rt.appendChild(dt).setAttribute("name","D"),T.appendChild(rt).disabled=!0,2!==rt.querySelectorAll(":disabled").length&&P.push(":enabled",":disabled"),(dt=y.createElement("input")).setAttribute("name",""),rt.appendChild(dt),rt.querySelectorAll("[name='']").length||P.push("\\["+I+"*name"+I+"*="+I+"*(?:''|\"\")")}),C.cssHas||P.push(":has"),P=P.length&&new RegExp(P.join("|")),Te=function(rt,dt){if(rt===dt)return m=!0,0;var Et=!rt.compareDocumentPosition-!dt.compareDocumentPosition;return Et||(1&(Et=(rt.ownerDocument||rt)==(dt.ownerDocument||dt)?rt.compareDocumentPosition(dt):1)||!C.sortDetached&&dt.compareDocumentPosition(rt)===Et?rt===y||rt.ownerDocument==ft&&Xt.contains(ft,rt)?-1:dt===y||dt.ownerDocument==ft&&Xt.contains(ft,dt)?1:r?o.call(r,rt)-o.call(r,dt):0:4&Et?-1:1)}),y}for(h in Xt.matches=function(L,z){return Xt(L,null,null,z)},Xt.matchesSelector=function(L,z){if(hn(L),D&&!oe[z+" "]&&(!P||!P.test(z)))try{var it=B.call(L,z);if(it||C.disconnectedMatch||L.document&&11!==L.document.nodeType)return it}catch{oe(z,!0)}return 0<Xt(z,y,null,[L]).length},Xt.contains=function(L,z){return(L.ownerDocument||L)!=y&&hn(L),v.contains(L,z)},Xt.attr=function(L,z){(L.ownerDocument||L)!=y&&hn(L);var it=p.attrHandle[z.toLowerCase()],rt=it&&d.call(p.attrHandle,z.toLowerCase())?it(L,z,!D):void 0;return void 0!==rt?rt:L.getAttribute(z)},Xt.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},v.uniqueSort=function(L){var z,it=[],rt=0,dt=0;if(m=!C.sortStable,r=!C.sortStable&&t.call(L,0),st.call(L,Te),m){for(;z=L[dt++];)z===L[dt]&&(rt=it.push(dt));for(;rt--;)W.call(L,it[rt],1)}return r=null,L},v.fn.uniqueSort=function(){return this.pushStack(v.uniqueSort(t.apply(this)))},(p=v.expr={cacheLength:50,createPseudo:Re,match:tn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(Fe,ei),L[3]=(L[3]||L[4]||L[5]||"").replace(Fe,ei),"~="===L[2]&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),"nth"===L[1].slice(0,3)?(L[3]||Xt.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*("even"===L[3]||"odd"===L[3])),L[5]=+(L[7]+L[8]||"odd"===L[3])):L[3]&&Xt.error(L[0]),L},PSEUDO:function(L){var z,it=!L[6]&&L[2];return tn.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":it&&Di.test(it)&&(z=tr(it,!0))&&(z=it.indexOf(")",it.length-z)-it.length)&&(L[0]=L[0].slice(0,z),L[2]=it.slice(0,z)),L.slice(0,3))}},filter:{TAG:function(L){var z=L.replace(Fe,ei).toLowerCase();return"*"===L?function(){return!0}:function(it){return Y(it,z)}},CLASS:function(L){var z=Dt[L+" "];return z||(z=new RegExp("(^|"+I+")"+L+"("+I+"|$)"))&&Dt(L,function(it){return z.test("string"==typeof it.className&&it.className||typeof it.getAttribute<"u"&&it.getAttribute("class")||"")})},ATTR:function(L,z,it){return function(rt){var dt=Xt.attr(rt,L);return null==dt?"!="===z:!z||(dt+="","="===z?dt===it:"!="===z?dt!==it:"^="===z?it&&0===dt.indexOf(it):"*="===z?it&&-1<dt.indexOf(it):"$="===z?it&&dt.slice(-it.length)===it:"~="===z?-1<(" "+dt.replace(ae," ")+" ").indexOf(it):"|="===z&&(dt===it||dt.slice(0,it.length+1)===it+"-"))}},CHILD:function(L,z,it,rt,dt){var Et="nth"!==L.slice(0,3),Tt="last"!==L.slice(-4),It="of-type"===z;return 1===rt&&0===dt?function(At){return!!At.parentNode}:function(At,fe,zt){var Jt,se,Vt,Ne,We,Xe=Et!==Tt?"nextSibling":"previousSibling",ii=At.parentNode,pi=It&&At.nodeName.toLowerCase(),xi=!zt&&!It,de=!1;if(ii){if(Et){for(;Xe;){for(Vt=At;Vt=Vt[Xe];)if(It?Y(Vt,pi):1===Vt.nodeType)return!1;We=Xe="only"===L&&!We&&"nextSibling"}return!0}if(We=[Tt?ii.firstChild:ii.lastChild],Tt&&xi){for(de=(Ne=(Jt=(se=ii[nt]||(ii[nt]={}))[L]||[])[0]===J&&Jt[1])&&Jt[2],Vt=Ne&&ii.childNodes[Ne];Vt=++Ne&&Vt&&Vt[Xe]||(de=Ne=0)||We.pop();)if(1===Vt.nodeType&&++de&&Vt===At){se[L]=[J,Ne,de];break}}else if(xi&&(de=Ne=(Jt=(se=At[nt]||(At[nt]={}))[L]||[])[0]===J&&Jt[1]),!1===de)for(;(Vt=++Ne&&Vt&&Vt[Xe]||(de=Ne=0)||We.pop())&&(!(It?Y(Vt,pi):1===Vt.nodeType)||!++de||(xi&&((se=Vt[nt]||(Vt[nt]={}))[L]=[J,de]),Vt!==At)););return(de-=dt)===rt||de%rt==0&&0<=de/rt}}},PSEUDO:function(L,z){var it,rt=p.pseudos[L]||p.setFilters[L.toLowerCase()]||Xt.error("unsupported pseudo: "+L);return rt[nt]?rt(z):1<rt.length?(it=[L,L,"",z],p.setFilters.hasOwnProperty(L.toLowerCase())?Re(function(dt,Et){for(var Tt,It=rt(dt,z),At=It.length;At--;)dt[Tt=o.call(dt,It[At])]=!(Et[Tt]=It[At])}):function(dt){return rt(dt,0,it)}):rt}},pseudos:{not:Re(function(L){var z=[],it=[],rt=_r(L.replace(q,"$1"));return rt[nt]?Re(function(dt,Et,Tt,It){for(var At,fe=rt(dt,null,It,[]),zt=dt.length;zt--;)(At=fe[zt])&&(dt[zt]=!(Et[zt]=At))}):function(dt,Et,Tt){return z[0]=dt,rt(z,null,Tt,it),z[0]=null,!it.pop()}}),has:Re(function(L){return function(z){return 0<Xt(L,z).length}}),contains:Re(function(L){return L=L.replace(Fe,ei),function(z){return-1<(z.textContent||v.text(z)).indexOf(L)}}),lang:Re(function(L){return Jn.test(L||"")||Xt.error("unsupported lang: "+L),L=L.replace(Fe,ei).toLowerCase(),function(z){var it;do{if(it=D?z.lang:z.getAttribute("xml:lang")||z.getAttribute("lang"))return(it=it.toLowerCase())===L||0===it.indexOf(L+"-")}while((z=z.parentNode)&&1===z.nodeType);return!1}}),target:function(L){var z=u.location&&u.location.hash;return z&&z.slice(1)===L.id},root:function(L){return L===T},focus:function(L){return L===function(){try{return y.activeElement}catch{}}()&&y.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:Zn(!1),disabled:Zn(!0),checked:function(L){return Y(L,"input")&&!!L.checked||Y(L,"option")&&!!L.selected},selected:function(L){return!0===L.selected},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!p.pseudos.empty(L)},header:function(L){return On.test(L.nodeName)},input:function(L){return di.test(L.nodeName)},button:function(L){return Y(L,"input")&&"button"===L.type||Y(L,"button")},text:function(L){var z;return Y(L,"input")&&"text"===L.type&&(null==(z=L.getAttribute("type"))||"text"===z.toLowerCase())},first:En(function(){return[0]}),last:En(function(L,z){return[z-1]}),eq:En(function(L,z,it){return[it<0?it+z:it]}),even:En(function(L,z){for(var it=0;it<z;it+=2)L.push(it);return L}),odd:En(function(L,z){for(var it=1;it<z;it+=2)L.push(it);return L}),lt:En(function(L,z,it){var rt;for(rt=it<0?it+z:z<it?z:it;0<=--rt;)L.push(rt);return L}),gt:En(function(L,z,it){for(var rt=it<0?it+z:it;++rt<z;)L.push(rt);return L})}}).pseudos.nth=p.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[h]=Vi(h);for(h in{submit:!0,reset:!0})p.pseudos[h]=Xn(h);function yr(){}function tr(L,z){var it,rt,dt,Et,Tt,It,At,fe=Nt[L+" "];if(fe)return z?0:fe.slice(0);for(Tt=L,It=[],At=p.preFilter;Tt;){for(Et in it&&!(rt=Le.exec(Tt))||(rt&&(Tt=Tt.slice(rt[0].length)||Tt),It.push(dt=[])),it=!1,(rt=Wn.exec(Tt))&&(it=rt.shift(),dt.push({value:it,type:rt[0].replace(q," ")}),Tt=Tt.slice(it.length)),p.filter)!(rt=tn[Et].exec(Tt))||At[Et]&&!(rt=At[Et](rt))||(it=rt.shift(),dt.push({value:it,type:Et,matches:rt}),Tt=Tt.slice(it.length));if(!it)break}return z?Tt.length:Tt?Xt.error(L):Nt(L,It).slice(0)}function zn(L){for(var z=0,it=L.length,rt="";z<it;z++)rt+=L[z].value;return rt}function An(L,z,it){var rt=z.dir,dt=z.next,Et=dt||rt,Tt=it&&"parentNode"===Et,It=at++;return z.first?function(At,fe,zt){for(;At=At[rt];)if(1===At.nodeType||Tt)return L(At,fe,zt);return!1}:function(At,fe,zt){var Jt,se,Vt=[J,It];if(zt){for(;At=At[rt];)if((1===At.nodeType||Tt)&&L(At,fe,zt))return!0}else for(;At=At[rt];)if(1===At.nodeType||Tt)if(se=At[nt]||(At[nt]={}),dt&&Y(At,dt))At=At[rt]||At;else{if((Jt=se[Et])&&Jt[0]===J&&Jt[1]===It)return Vt[2]=Jt[2];if((se[Et]=Vt)[2]=L(At,fe,zt))return!0}return!1}}function fr(L){return 1<L.length?function(z,it,rt){for(var dt=L.length;dt--;)if(!L[dt](z,it,rt))return!1;return!0}:L[0]}function er(L,z,it,rt,dt){for(var Et,Tt=[],It=0,At=L.length,fe=null!=z;It<At;It++)(Et=L[It])&&(it&&!it(Et,rt,dt)||(Tt.push(Et),fe&&z.push(It)));return Tt}function Yn(L,z,it,rt,dt,Et){return rt&&!rt[nt]&&(rt=Yn(rt)),dt&&!dt[nt]&&(dt=Yn(dt,Et)),Re(function(Tt,It,At,fe){var zt,Jt,se,Vt,Ne=[],We=[],Xe=It.length,ii=Tt||function(xi,de,un){for(var gi=0,kn=de.length;gi<kn;gi++)Xt(xi,de[gi],un);return un}(z||"*",At.nodeType?[At]:At,[]),pi=!L||!Tt&&z?ii:er(ii,Ne,L,At,fe);if(it?it(pi,Vt=dt||(Tt?L:Xe||rt)?[]:It,At,fe):Vt=pi,rt)for(zt=er(Vt,We),rt(zt,[],At,fe),Jt=zt.length;Jt--;)(se=zt[Jt])&&(Vt[We[Jt]]=!(pi[We[Jt]]=se));if(Tt){if(dt||L){if(dt){for(zt=[],Jt=Vt.length;Jt--;)(se=Vt[Jt])&&zt.push(pi[Jt]=se);dt(null,Vt=[],zt,fe)}for(Jt=Vt.length;Jt--;)(se=Vt[Jt])&&-1<(zt=dt?o.call(Tt,se):Ne[Jt])&&(Tt[zt]=!(It[zt]=se))}}else Vt=er(Vt===It?Vt.splice(Xe,Vt.length):Vt),dt?dt(null,It,Vt,fe):K.apply(It,Vt)})}function dr(L){for(var z,it,rt,dt=L.length,Et=p.relative[L[0].type],Tt=Et||p.relative[" "],It=Et?1:0,At=An(function(Jt){return Jt===z},Tt,!0),fe=An(function(Jt){return-1<o.call(z,Jt)},Tt,!0),zt=[function(Jt,se,Vt){var Ne=!Et&&(Vt||se!=g)||((z=se).nodeType?At(Jt,se,Vt):fe(Jt,se,Vt));return z=null,Ne}];It<dt;It++)if(it=p.relative[L[It].type])zt=[An(fr(zt),it)];else{if((it=p.filter[L[It].type].apply(null,L[It].matches))[nt]){for(rt=++It;rt<dt&&!p.relative[L[rt].type];rt++);return Yn(1<It&&fr(zt),1<It&&zn(L.slice(0,It-1).concat({value:" "===L[It-2].type?"*":""})).replace(q,"$1"),it,It<rt&&dr(L.slice(It,rt)),rt<dt&&dr(L=L.slice(rt)),rt<dt&&zn(L))}zt.push(it)}return fr(zt)}function _r(L,z){var it,rt,dt,Et,Tt,It,At=[],fe=[],zt=Ht[L+" "];if(!zt){for(z||(z=tr(L)),it=z.length;it--;)(zt=dr(z[it]))[nt]?At.push(zt):fe.push(zt);(zt=Ht(L,(rt=fe,Et=0<(dt=At).length,Tt=0<rt.length,It=function(Jt,se,Vt,Ne,We){var Xe,ii,pi,xi=0,de="0",un=Jt&&[],gi=[],kn=g,xr=Jt||Tt&&p.find.TAG("*",We),wr=J+=null==kn?1:Math.random()||.1,ir=xr.length;for(We&&(g=se==y||se||We);de!==ir&&null!=(Xe=xr[de]);de++){if(Tt&&Xe){for(ii=0,se||Xe.ownerDocument==y||(hn(Xe),Vt=!D);pi=rt[ii++];)if(pi(Xe,se||y,Vt)){K.call(Ne,Xe);break}We&&(J=wr)}Et&&((Xe=!pi&&Xe)&&xi--,Jt&&un.push(Xe))}if(xi+=de,Et&&de!==xi){for(ii=0;pi=dt[ii++];)pi(un,gi,se,Vt);if(Jt){if(0<xi)for(;de--;)un[de]||gi[de]||(gi[de]=tt.call(Ne));gi=er(gi)}K.apply(Ne,gi),We&&!Jt&&0<gi.length&&1<xi+dt.length&&v.uniqueSort(Ne)}return We&&(J=wr,g=kn),un},Et?Re(It):It))).selector=L}return zt}function br(L,z,it,rt){var dt,Et,Tt,It,At,fe="function"==typeof L&&L,zt=!rt&&tr(L=fe.selector||L);if(it=it||[],1===zt.length){if(2<(Et=zt[0]=zt[0].slice(0)).length&&"ID"===(Tt=Et[0]).type&&9===z.nodeType&&D&&p.relative[Et[1].type]){if(!(z=(p.find.ID(Tt.matches[0].replace(Fe,ei),z)||[])[0]))return it;fe&&(z=z.parentNode),L=L.slice(Et.shift().value.length)}for(dt=tn.needsContext.test(L)?0:Et.length;dt--&&!p.relative[It=(Tt=Et[dt]).type];)if((At=p.find[It])&&(rt=At(Tt.matches[0].replace(Fe,ei),He.test(Et[0].type)&&vr(z.parentNode)||z))){if(Et.splice(dt,1),!(L=rt.length&&zn(Et)))return K.apply(it,rt),it;break}}return(fe||_r(L,zt))(rt,z,!D,it,!z||He.test(L)&&vr(z.parentNode)||z),it}yr.prototype=p.filters=p.pseudos,p.setFilters=new yr,C.sortStable=nt.split("").sort(Te).join("")===nt,hn(),C.sortDetached=Se(function(L){return 1&L.compareDocumentPosition(y.createElement("fieldset"))}),v.find=Xt,v.expr[":"]=v.expr.pseudos,v.unique=v.uniqueSort,Xt.compile=_r,Xt.select=br,Xt.setDocument=hn,Xt.tokenize=tr,Xt.escape=v.escapeSelector,Xt.getText=v.text,Xt.isXML=v.isXMLDoc,Xt.selectors=v.expr,Xt.support=v.support,Xt.uniqueSort=v.uniqueSort}();var H=function(h,p,g){for(var r=[],m=void 0!==g;(h=h[p])&&9!==h.nodeType;)if(1===h.nodeType){if(m&&v(h).is(g))break;r.push(h)}return r},mt=function(h,p){for(var g=[];h;h=h.nextSibling)1===h.nodeType&&h!==p&&g.push(h);return g},yt=v.expr.match.needsContext,G=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function bt(h,p,g){return w(p)?v.grep(h,function(r,m){return!!p.call(r,m,r)!==g}):p.nodeType?v.grep(h,function(r){return r===p!==g}):"string"!=typeof p?v.grep(h,function(r){return-1<o.call(p,r)!==g}):v.filter(p,h,g)}v.filter=function(h,p,g){var r=p[0];return g&&(h=":not("+h+")"),1===p.length&&1===r.nodeType?v.find.matchesSelector(r,h)?[r]:[]:v.find.matches(h,v.grep(p,function(m){return 1===m.nodeType}))},v.fn.extend({find:function(h){var p,g,r=this.length,m=this;if("string"!=typeof h)return this.pushStack(v(h).filter(function(){for(p=0;p<r;p++)if(v.contains(m[p],this))return!0}));for(g=this.pushStack([]),p=0;p<r;p++)v.find(h,m[p],g);return 1<r?v.uniqueSort(g):g},filter:function(h){return this.pushStack(bt(this,h||[],!1))},not:function(h){return this.pushStack(bt(this,h||[],!0))},is:function(h){return!!bt(this,"string"==typeof h&&yt.test(h)?v(h):h||[],!1).length}});var vt,Pt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(v.fn.init=function(h,p,g){var r,m;if(!h)return this;if(g=g||vt,"string"==typeof h){if(!(r="<"===h[0]&&">"===h[h.length-1]&&3<=h.length?[null,h,null]:Pt.exec(h))||!r[1]&&p)return!p||p.jquery?(p||g).find(h):this.constructor(p).find(h);if(r[1]){if(v.merge(this,v.parseHTML(r[1],(p=p instanceof v?p[0]:p)&&p.nodeType?p.ownerDocument||p:A,!0)),G.test(r[1])&&v.isPlainObject(p))for(r in p)w(this[r])?this[r](p[r]):this.attr(r,p[r]);return this}return(m=A.getElementById(r[2]))&&(this[0]=m,this.length=1),this}return h.nodeType?(this[0]=h,this.length=1,this):w(h)?void 0!==g.ready?g.ready(h):h(v):v.makeArray(h,this)}).prototype=v.fn,vt=v(A);var Bt=/^(?:parents|prev(?:Until|All))/,Yt={children:!0,contents:!0,next:!0,prev:!0};function me(h,p){for(;(h=h[p])&&1!==h.nodeType;);return h}v.fn.extend({has:function(h){var p=v(h,this),g=p.length;return this.filter(function(){for(var r=0;r<g;r++)if(v.contains(this,p[r]))return!0})},closest:function(h,p){var g,r=0,m=this.length,y=[],T="string"!=typeof h&&v(h);if(!yt.test(h))for(;r<m;r++)for(g=this[r];g&&g!==p;g=g.parentNode)if(g.nodeType<11&&(T?-1<T.index(g):1===g.nodeType&&v.find.matchesSelector(g,h))){y.push(g);break}return this.pushStack(1<y.length?v.uniqueSort(y):y)},index:function(h){return h?"string"==typeof h?o.call(v(h),this[0]):o.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,p){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(h,p))))},addBack:function(h){return this.add(null==h?this.prevObject:this.prevObject.filter(h))}}),v.each({parent:function(h){var p=h.parentNode;return p&&11!==p.nodeType?p:null},parents:function(h){return H(h,"parentNode")},parentsUntil:function(h,p,g){return H(h,"parentNode",g)},next:function(h){return me(h,"nextSibling")},prev:function(h){return me(h,"previousSibling")},nextAll:function(h){return H(h,"nextSibling")},prevAll:function(h){return H(h,"previousSibling")},nextUntil:function(h,p,g){return H(h,"nextSibling",g)},prevUntil:function(h,p,g){return H(h,"previousSibling",g)},siblings:function(h){return mt((h.parentNode||{}).firstChild,h)},children:function(h){return mt(h.firstChild)},contents:function(h){return null!=h.contentDocument&&c(h.contentDocument)?h.contentDocument:(Y(h,"template")&&(h=h.content||h),v.merge([],h.childNodes))}},function(h,p){v.fn[h]=function(g,r){var m=v.map(this,p,g);return"Until"!==h.slice(-5)&&(r=g),r&&"string"==typeof r&&(m=v.filter(r,m)),1<this.length&&(Yt[h]||v.uniqueSort(m),Bt.test(h)&&m.reverse()),this.pushStack(m)}});var ne=/[^\x20\t\r\n\f]+/g;function qt(h){return h}function he(h){throw h}function Ot(h,p,g,r){var m;try{h&&w(m=h.promise)?m.call(h).done(p).fail(g):h&&w(m=h.then)?m.call(h,p,g):p.apply(void 0,[h].slice(r))}catch(y){g.apply(void 0,[y])}}v.Callbacks=function(h){var g;h="string"==typeof h?(g={},v.each(h.match(ne)||[],function(J,at){g[at]=!0}),g):v.extend({},h);var r,m,y,T,D=[],P=[],B=-1,K=function(){for(T=T||h.once,y=r=!0;P.length;B=-1)for(m=P.shift();++B<D.length;)!1===D[B].apply(m[0],m[1])&&h.stopOnFalse&&(B=D.length,m=!1);h.memory||(m=!1),r=!1,T&&(D=m?[]:"")},nt={add:function(){return D&&(m&&!r&&(B=D.length-1,P.push(m)),function J(at){v.each(at,function(Dt,Nt){w(Nt)?h.unique&&nt.has(Nt)||D.push(Nt):Nt&&Nt.length&&"string"!==Q(Nt)&&J(Nt)})}(arguments),m&&!r&&K()),this},remove:function(){return v.each(arguments,function(J,at){for(var Dt;-1<(Dt=v.inArray(at,D,Dt));)D.splice(Dt,1),Dt<=B&&B--}),this},has:function(J){return J?-1<v.inArray(J,D):0<D.length},empty:function(){return D&&(D=[]),this},disable:function(){return T=P=[],D=m="",this},disabled:function(){return!D},lock:function(){return T=P=[],m||r||(D=m=""),this},locked:function(){return!!T},fireWith:function(J,at){return T||(at=[J,(at=at||[]).slice?at.slice():at],P.push(at),r||K()),this},fire:function(){return nt.fireWith(this,arguments),this},fired:function(){return!!y}};return nt},v.extend({Deferred:function(h){var p=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],g="pending",r={state:function(){return g},always:function(){return m.done(arguments).fail(arguments),this},catch:function(y){return r.then(null,y)},pipe:function(){var y=arguments;return v.Deferred(function(T){v.each(p,function(D,P){var B=w(y[P[4]])&&y[P[4]];m[P[1]](function(){var K=B&&B.apply(this,arguments);K&&w(K.promise)?K.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[P[0]+"With"](this,B?[K]:arguments)})}),y=null}).promise()},then:function(y,T,D){var P=0;function B(K,nt,J,at){return function(){var Dt=this,Nt=arguments,Ht=function(){var Te,ti;if(!(K<P)){if((Te=J.apply(Dt,Nt))===nt.promise())throw new TypeError("Thenable self-resolution");w(ti=Te&&("object"==typeof Te||"function"==typeof Te)&&Te.then)?at?ti.call(Te,B(P,nt,qt,at),B(P,nt,he,at)):(P++,ti.call(Te,B(P,nt,qt,at),B(P,nt,he,at),B(P,nt,qt,nt.notifyWith))):(J!==qt&&(Dt=void 0,Nt=[Te]),(at||nt.resolveWith)(Dt,Nt))}},oe=at?Ht:function(){try{Ht()}catch(Te){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(Te,oe.error),P<=K+1&&(J!==he&&(Dt=void 0,Nt=[Te]),nt.rejectWith(Dt,Nt))}};K?oe():(v.Deferred.getErrorHook?oe.error=v.Deferred.getErrorHook():v.Deferred.getStackHook&&(oe.error=v.Deferred.getStackHook()),u.setTimeout(oe))}}return v.Deferred(function(K){p[0][3].add(B(0,K,w(D)?D:qt,K.notifyWith)),p[1][3].add(B(0,K,w(y)?y:qt)),p[2][3].add(B(0,K,w(T)?T:he))}).promise()},promise:function(y){return null!=y?v.extend(y,r):r}},m={};return v.each(p,function(y,T){var D=T[2],P=T[5];r[T[1]]=D.add,P&&D.add(function(){g=P},p[3-y][2].disable,p[3-y][3].disable,p[0][2].lock,p[0][3].lock),D.add(T[3].fire),m[T[0]]=function(){return m[T[0]+"With"](this===m?void 0:this,arguments),this},m[T[0]+"With"]=D.fireWith}),r.promise(m),h&&h.call(m,m),m},when:function(h){var p=arguments.length,g=p,r=Array(g),m=t.call(arguments),y=v.Deferred(),T=function(D){return function(P){r[D]=this,m[D]=1<arguments.length?t.call(arguments):P,--p||y.resolveWith(r,m)}};if(p<=1&&(Ot(h,y.done(T(g)).resolve,y.reject,!p),"pending"===y.state()||w(m[g]&&m[g].then)))return y.then();for(;g--;)Ot(m[g],T(g),y.reject);return y.promise()}});var ri=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(h,p){u.console&&u.console.warn&&h&&ri.test(h.name)&&u.console.warn("jQuery.Deferred exception: "+h.message,h.stack,p)},v.readyException=function(h){u.setTimeout(function(){throw h})};var Be=v.Deferred();function Wt(){A.removeEventListener("DOMContentLoaded",Wt),u.removeEventListener("load",Wt),v.ready()}v.fn.ready=function(h){return Be.then(h).catch(function(p){v.readyException(p)}),this},v.extend({isReady:!1,readyWait:1,ready:function(h){(!0===h?--v.readyWait:v.isReady)||(v.isReady=!0)!==h&&0<--v.readyWait||Be.resolveWith(A,[v])}}),v.ready.then=Be.then,"complete"===A.readyState||"loading"!==A.readyState&&!A.documentElement.doScroll?u.setTimeout(v.ready):(A.addEventListener("DOMContentLoaded",Wt),u.addEventListener("load",Wt));var Ce=function(h,p,g,r,m,y,T){var D=0,P=h.length,B=null==g;if("object"===Q(g))for(D in m=!0,g)Ce(h,p,D,g[D],!0,y,T);else if(void 0!==r&&(m=!0,w(r)||(T=!0),B&&(T?(p.call(h,r),p=null):(B=p,p=function(K,nt,J){return B.call(v(K),J)})),p))for(;D<P;D++)p(h[D],g,T?r:r.call(h[D],D,p(h[D],g)));return m?h:B?p.call(h):P?p(h[0],g):y},Ke=/^-ms-/,Ye=/-([a-z])/g;function ve(h,p){return p.toUpperCase()}function le(h){return h.replace(Ke,"ms-").replace(Ye,ve)}var Ae=function(h){return 1===h.nodeType||9===h.nodeType||!+h.nodeType};function ke(){this.expando=v.expando+ke.uid++}ke.uid=1,ke.prototype={cache:function(h){var p=h[this.expando];return p||(p={},Ae(h)&&(h.nodeType?h[this.expando]=p:Object.defineProperty(h,this.expando,{value:p,configurable:!0}))),p},set:function(h,p,g){var r,m=this.cache(h);if("string"==typeof p)m[le(p)]=g;else for(r in p)m[le(r)]=p[r];return m},get:function(h,p){return void 0===p?this.cache(h):h[this.expando]&&h[this.expando][le(p)]},access:function(h,p,g){return void 0===p||p&&"string"==typeof p&&void 0===g?this.get(h,p):(this.set(h,p,g),void 0!==g?g:p)},remove:function(h,p){var g,r=h[this.expando];if(void 0!==r){if(void 0!==p)for((g=(p=Array.isArray(p)?p.map(le):(p=le(p))in r?[p]:p.match(ne)||[]).length);g--;)delete r[p[g]];(void 0===p||v.isEmptyObject(r))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var p=h[this.expando];return void 0!==p&&!v.isEmptyObject(p)}};var jt=new ke,De=new ke,si=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,mi=/[A-Z]/g;function Pi(h,p,g){var r,m;if(void 0===g&&1===h.nodeType)if(r="data-"+p.replace(mi,"-$&").toLowerCase(),"string"==typeof(g=h.getAttribute(r))){try{g="true"===(m=g)||"false"!==m&&("null"===m?null:m===+m+""?+m:si.test(m)?JSON.parse(m):m)}catch{}De.set(h,p,g)}else g=void 0;return g}v.extend({hasData:function(h){return De.hasData(h)||jt.hasData(h)},data:function(h,p,g){return De.access(h,p,g)},removeData:function(h,p){De.remove(h,p)},_data:function(h,p,g){return jt.access(h,p,g)},_removeData:function(h,p){jt.remove(h,p)}}),v.fn.extend({data:function(h,p){var g,r,m,y=this[0],T=y&&y.attributes;if(void 0===h){if(this.length&&(m=De.get(y),1===y.nodeType&&!jt.get(y,"hasDataAttrs"))){for(g=T.length;g--;)T[g]&&0===(r=T[g].name).indexOf("data-")&&(r=le(r.slice(5)),Pi(y,r,m[r]));jt.set(y,"hasDataAttrs",!0)}return m}return"object"==typeof h?this.each(function(){De.set(this,h)}):Ce(this,function(D){var P;if(y&&void 0===D)return void 0!==(P=De.get(y,h))||void 0!==(P=Pi(y,h))?P:void 0;this.each(function(){De.set(this,h,D)})},null,p,1<arguments.length,null,!0)},removeData:function(h){return this.each(function(){De.remove(this,h)})}}),v.extend({queue:function(h,p,g){var r;if(h)return r=jt.get(h,p=(p||"fx")+"queue"),g&&(!r||Array.isArray(g)?r=jt.access(h,p,v.makeArray(g)):r.push(g)),r||[]},dequeue:function(h,p){var g=v.queue(h,p=p||"fx"),r=g.length,m=g.shift(),y=v._queueHooks(h,p);"inprogress"===m&&(m=g.shift(),r--),m&&("fx"===p&&g.unshift("inprogress"),delete y.stop,m.call(h,function(){v.dequeue(h,p)},y)),!r&&y&&y.empty.fire()},_queueHooks:function(h,p){var g=p+"queueHooks";return jt.get(h,g)||jt.access(h,g,{empty:v.Callbacks("once memory").add(function(){jt.remove(h,[p+"queue",g])})})}}),v.fn.extend({queue:function(h,p){var g=2;return"string"!=typeof h&&(p=h,h="fx",g--),arguments.length<g?v.queue(this[0],h):void 0===p?this:this.each(function(){var r=v.queue(this,h,p);v._queueHooks(this,h),"fx"===h&&"inprogress"!==r[0]&&v.dequeue(this,h)})},dequeue:function(h){return this.each(function(){v.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,p){var g,r=1,m=v.Deferred(),y=this,T=this.length,D=function(){--r||m.resolveWith(y,[y])};for("string"!=typeof h&&(p=h,h=void 0),h=h||"fx";T--;)(g=jt.get(y[T],h+"queueHooks"))&&g.empty&&(r++,g.empty.add(D));return D(),m.promise(p)}});var Ve=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ue=new RegExp("^(?:([+-])=|)("+Ve+")([a-z%]*)$","i"),Pe=["Top","Right","Bottom","Left"],Ie=A.documentElement,Ue=function(h){return v.contains(h.ownerDocument,h)},Ge={composed:!0};Ie.getRootNode&&(Ue=function(h){return v.contains(h.ownerDocument,h)||h.getRootNode(Ge)===h.ownerDocument});var _e=function(h,p){return"none"===(h=p||h).style.display||""===h.style.display&&Ue(h)&&"none"===v.css(h,"display")};function E(h,p,g,r){var m,y,T=20,D=r?function(){return r.cur()}:function(){return v.css(h,p,"")},P=D(),B=g&&g[3]||(v.cssNumber[p]?"":"px"),K=h.nodeType&&(v.cssNumber[p]||"px"!==B&&+P)&&ue.exec(v.css(h,p));if(K&&K[3]!==B){for(B=B||K[3],K=+(P/=2)||1;T--;)v.style(h,p,K+B),(1-y)*(1-(y=D()/P||.5))<=0&&(T=0),K/=y;v.style(h,p,(K*=2)+B),g=g||[]}return g&&(K=+K||+P||0,m=g[1]?K+(g[1]+1)*g[2]:+g[2],r&&(r.unit=B,r.start=K,r.end=m)),m}var M={};function R(h,p){for(var g,r,m,y,T,D,P,B=[],K=0,nt=h.length;K<nt;K++)(r=h[K]).style&&(g=r.style.display,p?("none"===g&&(B[K]=jt.get(r,"display")||null,B[K]||(r.style.display="")),""===r.style.display&&_e(r)&&(B[K]=(P=T=y=void 0,T=(m=r).ownerDocument,(P=M[D=m.nodeName])||(y=T.body.appendChild(T.createElement(D)),P=v.css(y,"display"),y.parentNode.removeChild(y),"none"===P&&(P="block"),M[D]=P)))):"none"!==g&&(B[K]="none",jt.set(r,"display",g)));for(K=0;K<nt;K++)null!=B[K]&&(h[K].style.display=B[K]);return h}v.fn.extend({show:function(){return R(this,!0)},hide:function(){return R(this)},toggle:function(h){return"boolean"==typeof h?h?this.show():this.hide():this.each(function(){_e(this)?v(this).show():v(this).hide()})}});var U,ht,ut=/^(?:checkbox|radio)$/i,ct=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,xt=/^$|^module$|\/(?:java|ecma)script/i;U=A.createDocumentFragment().appendChild(A.createElement("div")),(ht=A.createElement("input")).setAttribute("type","radio"),ht.setAttribute("checked","checked"),ht.setAttribute("name","t"),U.appendChild(ht),C.checkClone=U.cloneNode(!0).cloneNode(!0).lastChild.checked,U.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!U.cloneNode(!0).lastChild.defaultValue,U.innerHTML="<option></option>",C.option=!!U.lastChild;var _t={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ct(h,p){var g;return g=typeof h.getElementsByTagName<"u"?h.getElementsByTagName(p||"*"):typeof h.querySelectorAll<"u"?h.querySelectorAll(p||"*"):[],void 0===p||p&&Y(h,p)?v.merge([h],g):g}function Rt(h,p){for(var g=0,r=h.length;g<r;g++)jt.set(h[g],"globalEval",!p||jt.get(p[g],"globalEval"))}_t.tbody=_t.tfoot=_t.colgroup=_t.caption=_t.thead,_t.th=_t.td,C.option||(_t.optgroup=_t.option=[1,"<select multiple='multiple'>","</select>"]);var kt=/<|&#?\w+;/;function Ft(h,p,g,r,m){for(var y,T,D,P,B,K,nt=p.createDocumentFragment(),J=[],at=0,Dt=h.length;at<Dt;at++)if((y=h[at])||0===y)if("object"===Q(y))v.merge(J,y.nodeType?[y]:y);else if(kt.test(y)){for(T=T||nt.appendChild(p.createElement("div")),D=(ct.exec(y)||["",""])[1].toLowerCase(),T.innerHTML=(P=_t[D]||_t._default)[1]+v.htmlPrefilter(y)+P[2],K=P[0];K--;)T=T.lastChild;v.merge(J,T.childNodes),(T=nt.firstChild).textContent=""}else J.push(p.createTextNode(y));for(nt.textContent="",at=0;y=J[at++];)if(r&&-1<v.inArray(y,r))m&&m.push(y);else if(B=Ue(y),T=Ct(nt.appendChild(y),"script"),B&&Rt(T),g)for(K=0;y=T[K++];)xt.test(y.type||"")&&g.push(y);return nt}var Gt=/^([^.]*)(?:\.(.+)|)/;function Qt(){return!0}function je(){return!1}function oi(h,p,g,r,m,y){var T,D;if("object"==typeof p){for(D in"string"!=typeof g&&(r=r||g,g=void 0),p)oi(h,D,g,r,p[D],y);return h}if(null==r&&null==m?(m=g,r=g=void 0):null==m&&("string"==typeof g?(m=r,r=void 0):(m=r,r=g,g=void 0)),!1===m)m=je;else if(!m)return h;return 1===y&&(T=m,(m=function(P){return v().off(P),T.apply(this,arguments)}).guid=T.guid||(T.guid=v.guid++)),h.each(function(){v.event.add(this,p,m,r,g)})}function hi(h,p,g){g?(jt.set(h,p,!1),v.event.add(h,p,{namespace:!1,handler:function(r){var m,y=jt.get(this,p);if(1&r.isTrigger&&this[p]){if(y)(v.event.special[p]||{}).delegateType&&r.stopPropagation();else if(y=t.call(arguments),jt.set(this,p,y),this[p](),m=jt.get(this,p),jt.set(this,p,!1),y!==m)return r.stopImmediatePropagation(),r.preventDefault(),m}else y&&(jt.set(this,p,v.event.trigger(y[0],y.slice(1),this)),r.stopPropagation(),r.isImmediatePropagationStopped=Qt)}})):void 0===jt.get(h,p)&&v.event.add(h,p,Qt)}v.event={global:{},add:function(h,p,g,r,m){var y,T,D,P,B,K,nt,J,at,Dt,Nt,Ht=jt.get(h);if(Ae(h))for(g.handler&&(g=(y=g).handler,m=y.selector),m&&v.find.matchesSelector(Ie,m),g.guid||(g.guid=v.guid++),(P=Ht.events)||(P=Ht.events=Object.create(null)),(T=Ht.handle)||(T=Ht.handle=function(oe){return typeof v<"u"&&v.event.triggered!==oe.type?v.event.dispatch.apply(h,arguments):void 0}),B=(p=(p||"").match(ne)||[""]).length;B--;)at=Nt=(D=Gt.exec(p[B])||[])[1],Dt=(D[2]||"").split(".").sort(),at&&(nt=v.event.special[at]||{},nt=v.event.special[at=(m?nt.delegateType:nt.bindType)||at]||{},K=v.extend({type:at,origType:Nt,data:r,handler:g,guid:g.guid,selector:m,needsContext:m&&v.expr.match.needsContext.test(m),namespace:Dt.join(".")},y),(J=P[at])||((J=P[at]=[]).delegateCount=0,nt.setup&&!1!==nt.setup.call(h,r,Dt,T)||h.addEventListener&&h.addEventListener(at,T)),nt.add&&(nt.add.call(h,K),K.handler.guid||(K.handler.guid=g.guid)),m?J.splice(J.delegateCount++,0,K):J.push(K),v.event.global[at]=!0)},remove:function(h,p,g,r,m){var y,T,D,P,B,K,nt,J,at,Dt,Nt,Ht=jt.hasData(h)&&jt.get(h);if(Ht&&(P=Ht.events)){for(B=(p=(p||"").match(ne)||[""]).length;B--;)if(at=Nt=(D=Gt.exec(p[B])||[])[1],Dt=(D[2]||"").split(".").sort(),at){for(nt=v.event.special[at]||{},J=P[at=(r?nt.delegateType:nt.bindType)||at]||[],D=D[2]&&new RegExp("(^|\\.)"+Dt.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=y=J.length;y--;)K=J[y],!m&&Nt!==K.origType||g&&g.guid!==K.guid||D&&!D.test(K.namespace)||r&&r!==K.selector&&("**"!==r||!K.selector)||(J.splice(y,1),K.selector&&J.delegateCount--,nt.remove&&nt.remove.call(h,K));T&&!J.length&&(nt.teardown&&!1!==nt.teardown.call(h,Dt,Ht.handle)||v.removeEvent(h,at,Ht.handle),delete P[at])}else for(at in P)v.event.remove(h,at+p[B],g,r,!0);v.isEmptyObject(P)&&jt.remove(h,"handle events")}},dispatch:function(h){var p,g,r,m,y,T,D=new Array(arguments.length),P=v.event.fix(h),B=(jt.get(this,"events")||Object.create(null))[P.type]||[],K=v.event.special[P.type]||{};for(D[0]=P,p=1;p<arguments.length;p++)D[p]=arguments[p];if(P.delegateTarget=this,!K.preDispatch||!1!==K.preDispatch.call(this,P)){for(T=v.event.handlers.call(this,P,B),p=0;(m=T[p++])&&!P.isPropagationStopped();)for(P.currentTarget=m.elem,g=0;(y=m.handlers[g++])&&!P.isImmediatePropagationStopped();)P.rnamespace&&!1!==y.namespace&&!P.rnamespace.test(y.namespace)||(P.handleObj=y,P.data=y.data,void 0!==(r=((v.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,D))&&!1===(P.result=r)&&(P.preventDefault(),P.stopPropagation()));return K.postDispatch&&K.postDispatch.call(this,P),P.result}},handlers:function(h,p){var g,r,m,y,T,D=[],P=p.delegateCount,B=h.target;if(P&&B.nodeType&&!("click"===h.type&&1<=h.button))for(;B!==this;B=B.parentNode||this)if(1===B.nodeType&&("click"!==h.type||!0!==B.disabled)){for(y=[],T={},g=0;g<P;g++)void 0===T[m=(r=p[g]).selector+" "]&&(T[m]=r.needsContext?-1<v(m,this).index(B):v.find(m,this,null,[B]).length),T[m]&&y.push(r);y.length&&D.push({elem:B,handlers:y})}return B=this,P<p.length&&D.push({elem:B,handlers:p.slice(P)}),D},addProp:function(h,p){Object.defineProperty(v.Event.prototype,h,{enumerable:!0,configurable:!0,get:w(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(g){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:g})}})},fix:function(h){return h[v.expando]?h:new v.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var p=this||h;return ut.test(p.type)&&p.click&&Y(p,"input")&&hi(p,"click",!0),!1},trigger:function(h){var p=this||h;return ut.test(p.type)&&p.click&&Y(p,"input")&&hi(p,"click"),!0},_default:function(h){var p=h.target;return ut.test(p.type)&&p.click&&Y(p,"input")&&jt.get(p,"click")||Y(p,"a")}},beforeunload:{postDispatch:function(h){void 0!==h.result&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}},v.removeEvent=function(h,p,g){h.removeEventListener&&h.removeEventListener(p,g)},v.Event=function(h,p){if(!(this instanceof v.Event))return new v.Event(h,p);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||void 0===h.defaultPrevented&&!1===h.returnValue?Qt:je,this.target=h.target&&3===h.target.nodeType?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,p&&v.extend(this,p),this.timeStamp=h&&h.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:je,isPropagationStopped:je,isImmediatePropagationStopped:je,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=Qt,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=Qt,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=Qt,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},function(h,p){function g(r){if(A.documentMode){var m=jt.get(this,"handle"),y=v.event.fix(r);y.type="focusin"===r.type?"focus":"blur",y.isSimulated=!0,m(r),y.target===y.currentTarget&&m(y)}else v.event.simulate(p,r.target,v.event.fix(r))}v.event.special[h]={setup:function(){var r;if(hi(this,h,!0),!A.documentMode)return!1;(r=jt.get(this,p))||this.addEventListener(p,g),jt.set(this,p,(r||0)+1)},trigger:function(){return hi(this,h),!0},teardown:function(){var r;if(!A.documentMode)return!1;(r=jt.get(this,p)-1)?jt.set(this,p,r):(this.removeEventListener(p,g),jt.remove(this,p))},_default:function(r){return jt.get(r.target,h)},delegateType:p},v.event.special[p]={setup:function(){var r=this.ownerDocument||this.document||this,m=A.documentMode?this:r,y=jt.get(m,p);y||(A.documentMode?this.addEventListener(p,g):r.addEventListener(h,g,!0)),jt.set(m,p,(y||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,m=A.documentMode?this:r,y=jt.get(m,p)-1;y?jt.set(m,p,y):(A.documentMode?this.removeEventListener(p,g):r.removeEventListener(h,g,!0),jt.remove(m,p))}}}),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,p){v.event.special[h]={delegateType:p,bindType:p,handle:function(g){var r,m=g.relatedTarget,y=g.handleObj;return m&&(m===this||v.contains(this,m))||(g.type=y.origType,r=y.handler.apply(this,arguments),g.type=p),r}}}),v.fn.extend({on:function(h,p,g,r){return oi(this,h,p,g,r)},one:function(h,p,g,r){return oi(this,h,p,g,r,1)},off:function(h,p,g){var r,m;if(h&&h.preventDefault&&h.handleObj)return r=h.handleObj,v(h.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof h){for(m in h)this.off(m,p,h[m]);return this}return!1!==p&&"function"!=typeof p||(g=p,p=void 0),!1===g&&(g=je),this.each(function(){v.event.remove(this,h,g,p)})}});var qe=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,pn=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function qi(h,p){return Y(h,"table")&&Y(11!==p.nodeType?p:p.firstChild,"tr")&&v(h).children("tbody")[0]||h}function gn(h){return h.type=(null!==h.getAttribute("type"))+"/"+h.type,h}function vi(h){return"true/"===(h.type||"").slice(0,5)?h.type=h.type.slice(5):h.removeAttribute("type"),h}function $e(h,p){var g,r,m,y,T,D;if(1===p.nodeType){if(jt.hasData(h)&&(D=jt.get(h).events))for(m in jt.remove(p,"handle events"),D)for(g=0,r=D[m].length;g<r;g++)v.event.add(p,m,D[m][g]);De.hasData(h)&&(y=De.access(h),T=v.extend({},y),De.set(p,T))}}function ai(h,p,g,r){p=e(p);var m,y,T,D,P,B,K=0,nt=h.length,J=nt-1,at=p[0],Dt=w(at);if(Dt||1<nt&&"string"==typeof at&&!C.checkClone&&Me.test(at))return h.each(function(Nt){var Ht=h.eq(Nt);Dt&&(p[0]=at.call(this,Nt,Ht.html())),ai(Ht,p,g,r)});if(nt&&(y=(m=Ft(p,h[0].ownerDocument,!1,h,r)).firstChild,1===m.childNodes.length&&(m=y),y||r)){for(D=(T=v.map(Ct(m,"script"),gn)).length;K<nt;K++)P=m,K!==J&&(P=v.clone(P,!0,!0),D&&v.merge(T,Ct(P,"script"))),g.call(h[K],P,K);if(D)for(B=T[T.length-1].ownerDocument,v.map(T,vi),K=0;K<D;K++)xt.test((P=T[K]).type||"")&&!jt.access(P,"globalEval")&&v.contains(B,P)&&(P.src&&"module"!==(P.type||"").toLowerCase()?v._evalUrl&&!P.noModule&&v._evalUrl(P.src,{nonce:P.nonce||P.getAttribute("nonce")},B):N(P.textContent.replace(pn,""),P,B))}return h}function Qe(h,p,g){for(var r,m=p?v.filter(p,h):h,y=0;null!=(r=m[y]);y++)g||1!==r.nodeType||v.cleanData(Ct(r)),r.parentNode&&(g&&Ue(r)&&Rt(Ct(r,"script")),r.parentNode.removeChild(r));return h}v.extend({htmlPrefilter:function(h){return h},clone:function(h,p,g){var r,m,y,T,D,P,B,K=h.cloneNode(!0),nt=Ue(h);if(!(C.noCloneChecked||1!==h.nodeType&&11!==h.nodeType||v.isXMLDoc(h)))for(T=Ct(K),r=0,m=(y=Ct(h)).length;r<m;r++)D=y[r],"input"===(B=(P=T[r]).nodeName.toLowerCase())&&ut.test(D.type)?P.checked=D.checked:"input"!==B&&"textarea"!==B||(P.defaultValue=D.defaultValue);if(p)if(g)for(y=y||Ct(h),T=T||Ct(K),r=0,m=y.length;r<m;r++)$e(y[r],T[r]);else $e(h,K);return 0<(T=Ct(K,"script")).length&&Rt(T,!nt&&Ct(h,"script")),K},cleanData:function(h){for(var p,g,r,m=v.event.special,y=0;void 0!==(g=h[y]);y++)if(Ae(g)){if(p=g[jt.expando]){if(p.events)for(r in p.events)m[r]?v.event.remove(g,r):v.removeEvent(g,r,p.handle);g[jt.expando]=void 0}g[De.expando]&&(g[De.expando]=void 0)}}}),v.fn.extend({detach:function(h){return Qe(this,h,!0)},remove:function(h){return Qe(this,h)},text:function(h){return Ce(this,function(p){return void 0===p?v.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=p)})},null,h,arguments.length)},append:function(){return ai(this,arguments,function(h){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qi(this,h).appendChild(h)})},prepend:function(){return ai(this,arguments,function(h){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var p=qi(this,h);p.insertBefore(h,p.firstChild)}})},before:function(){return ai(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return ai(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,p=0;null!=(h=this[p]);p++)1===h.nodeType&&(v.cleanData(Ct(h,!1)),h.textContent="");return this},clone:function(h,p){return h=null!=h&&h,p=p??h,this.map(function(){return v.clone(this,h,p)})},html:function(h){return Ce(this,function(p){var g=this[0]||{},r=0,m=this.length;if(void 0===p&&1===g.nodeType)return g.innerHTML;if("string"==typeof p&&!qe.test(p)&&!_t[(ct.exec(p)||["",""])[1].toLowerCase()]){p=v.htmlPrefilter(p);try{for(;r<m;r++)1===(g=this[r]||{}).nodeType&&(v.cleanData(Ct(g,!1)),g.innerHTML=p);g=0}catch{}}g&&this.empty().append(p)},null,h,arguments.length)},replaceWith:function(){var h=[];return ai(this,arguments,function(p){var g=this.parentNode;v.inArray(this,h)<0&&(v.cleanData(Ct(this)),g&&g.replaceChild(p,this))},h)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,p){v.fn[h]=function(g){for(var r,m=[],y=v(g),T=y.length-1,D=0;D<=T;D++)r=D===T?this:this.clone(!0),v(y[D])[p](r),i.apply(m,r.get());return this.pushStack(m)}});var mn=new RegExp("^("+Ve+")(?!px)[a-z%]+$","i"),vn=/^--/,Je=function(h){var p=h.ownerDocument.defaultView;return p&&p.opener||(p=u),p.getComputedStyle(h)},ji=function(h,p,g){var r,m,y={};for(m in p)y[m]=h.style[m],h.style[m]=p[m];for(m in r=g.call(h),p)h.style[m]=y[m];return r},_n=new RegExp(Pe.join("|"),"i");function Si(h,p,g){var r,m,y,T,D=vn.test(p),P=h.style;return(g=g||Je(h))&&(T=g.getPropertyValue(p)||g[p],D&&T&&(T=T.replace(q,"$1")||void 0),""!==T||Ue(h)||(T=v.style(h,p)),!C.pixelBoxStyles()&&mn.test(T)&&_n.test(p)&&(r=P.width,m=P.minWidth,y=P.maxWidth,P.minWidth=P.maxWidth=P.width=T,T=g.width,P.width=r,P.minWidth=m,P.maxWidth=y)),void 0!==T?T+"":T}function Dn(h,p){return{get:function(){if(!h())return(this.get=p).apply(this,arguments);delete this.get}}}!function(){function h(){if(B){P.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",B.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ie.appendChild(P).appendChild(B);var K=u.getComputedStyle(B);g="1%"!==K.top,D=12===p(K.marginLeft),B.style.right="60%",y=36===p(K.right),r=36===p(K.width),B.style.position="absolute",m=12===p(B.offsetWidth/3),Ie.removeChild(P),B=null}}function p(K){return Math.round(parseFloat(K))}var g,r,m,y,T,D,P=A.createElement("div"),B=A.createElement("div");B.style&&(B.style.backgroundClip="content-box",B.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle="content-box"===B.style.backgroundClip,v.extend(C,{boxSizingReliable:function(){return h(),r},pixelBoxStyles:function(){return h(),y},pixelPosition:function(){return h(),g},reliableMarginLeft:function(){return h(),D},scrollboxSize:function(){return h(),m},reliableTrDimensions:function(){var K,nt,J,at;return null==T&&(K=A.createElement("table"),nt=A.createElement("tr"),J=A.createElement("div"),K.style.cssText="position:absolute;left:-11111px;border-collapse:separate",nt.style.cssText="box-sizing:content-box;border:1px solid",nt.style.height="1px",J.style.height="9px",J.style.display="block",Ie.appendChild(K).appendChild(nt).appendChild(J),at=u.getComputedStyle(nt),T=parseInt(at.height,10)+parseInt(at.borderTopWidth,10)+parseInt(at.borderBottomWidth,10)===nt.offsetHeight,Ie.removeChild(K)),T}}))}();var Pn=["Webkit","Moz","ms"],Ni=A.createElement("div").style,yn={};function bn(h){return v.cssProps[h]||yn[h]||(h in Ni?h:yn[h]=function(g){for(var r=g[0].toUpperCase()+g.slice(1),m=Pn.length;m--;)if((g=Pn[m]+r)in Ni)return g}(h)||h)}var Oi=/^(none|table(?!-c[ea]).+)/,Un={position:"absolute",visibility:"hidden",display:"block"},Li={letterSpacing:"0",fontWeight:"400"};function xn(h,p,g){var r=ue.exec(p);return r?Math.max(0,r[2]-(g||0))+(r[3]||"px"):p}function Ei(h,p,g,r,m,y){var T="width"===p?1:0,D=0,P=0,B=0;if(g===(r?"border":"content"))return 0;for(;T<4;T+=2)"margin"===g&&(B+=v.css(h,g+Pe[T],!0,m)),r?("content"===g&&(P-=v.css(h,"padding"+Pe[T],!0,m)),"margin"!==g&&(P-=v.css(h,"border"+Pe[T]+"Width",!0,m))):(P+=v.css(h,"padding"+Pe[T],!0,m),"padding"!==g?P+=v.css(h,"border"+Pe[T]+"Width",!0,m):D+=v.css(h,"border"+Pe[T]+"Width",!0,m));return!r&&0<=y&&(P+=Math.max(0,Math.ceil(h["offset"+p[0].toUpperCase()+p.slice(1)]-y-P-D-.5))||0),P+B}function $i(h,p,g){var r=Je(h),m=(!C.boxSizingReliable()||g)&&"border-box"===v.css(h,"boxSizing",!1,r),y=m,T=Si(h,p,r),D="offset"+p[0].toUpperCase()+p.slice(1);if(mn.test(T)){if(!g)return T;T="auto"}return(!C.boxSizingReliable()&&m||!C.reliableTrDimensions()&&Y(h,"tr")||"auto"===T||!parseFloat(T)&&"inline"===v.css(h,"display",!1,r))&&h.getClientRects().length&&(m="border-box"===v.css(h,"boxSizing",!1,r),(y=D in h)&&(T=h[D])),(T=parseFloat(T)||0)+Ei(h,p,g||(m?"border":"content"),y,r,T)+"px"}function Ze(h,p,g,r,m){return new Ze.prototype.init(h,p,g,r,m)}v.extend({cssHooks:{opacity:{get:function(h,p){if(p){var g=Si(h,"opacity");return""===g?"1":g}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,p,g,r){if(h&&3!==h.nodeType&&8!==h.nodeType&&h.style){var m,y,T,D=le(p),P=vn.test(p),B=h.style;if(P||(p=bn(D)),T=v.cssHooks[p]||v.cssHooks[D],void 0===g)return T&&"get"in T&&void 0!==(m=T.get(h,!1,r))?m:B[p];"string"==(y=typeof g)&&(m=ue.exec(g))&&m[1]&&(g=E(h,p,m),y="number"),null!=g&&g==g&&("number"!==y||P||(g+=m&&m[3]||(v.cssNumber[D]?"":"px")),C.clearCloneStyle||""!==g||0!==p.indexOf("background")||(B[p]="inherit"),T&&"set"in T&&void 0===(g=T.set(h,g,r))||(P?B.setProperty(p,g):B[p]=g))}},css:function(h,p,g,r){var m,y,T,D=le(p);return vn.test(p)||(p=bn(D)),(T=v.cssHooks[p]||v.cssHooks[D])&&"get"in T&&(m=T.get(h,!0,g)),void 0===m&&(m=Si(h,p,r)),"normal"===m&&p in Li&&(m=Li[p]),""===g||g?(y=parseFloat(m),!0===g||isFinite(y)?y||0:m):m}}),v.each(["height","width"],function(h,p){v.cssHooks[p]={get:function(g,r,m){if(r)return!Oi.test(v.css(g,"display"))||g.getClientRects().length&&g.getBoundingClientRect().width?$i(g,p,m):ji(g,Un,function(){return $i(g,p,m)})},set:function(g,r,m){var y,T=Je(g),D=!C.scrollboxSize()&&"absolute"===T.position,P=(D||m)&&"border-box"===v.css(g,"boxSizing",!1,T),B=m?Ei(g,p,m,P,T):0;return P&&D&&(B-=Math.ceil(g["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(T[p])-Ei(g,p,"border",!1,T)-.5)),B&&(y=ue.exec(r))&&"px"!==(y[3]||"px")&&(g.style[p]=r,r=v.css(g,p)),xn(0,r,B)}}}),v.cssHooks.marginLeft=Dn(C.reliableMarginLeft,function(h,p){if(p)return(parseFloat(Si(h,"marginLeft"))||h.getBoundingClientRect().left-ji(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),v.each({margin:"",padding:"",border:"Width"},function(h,p){v.cssHooks[h+p]={expand:function(g){for(var r=0,m={},y="string"==typeof g?g.split(" "):[g];r<4;r++)m[h+Pe[r]+p]=y[r]||y[r-2]||y[0];return m}},"margin"!==h&&(v.cssHooks[h+p].set=xn)}),v.fn.extend({css:function(h,p){return Ce(this,function(g,r,m){var y,T,D={},P=0;if(Array.isArray(r)){for(y=Je(g),T=r.length;P<T;P++)D[r[P]]=v.css(g,r[P],!1,y);return D}return void 0!==m?v.style(g,r,m):v.css(g,r)},h,p,1<arguments.length)}}),((v.Tween=Ze).prototype={constructor:Ze,init:function(h,p,g,r,m,y){this.elem=h,this.prop=g,this.easing=m||v.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=r,this.unit=y||(v.cssNumber[g]?"":"px")},cur:function(){var h=Ze.propHooks[this.prop];return h&&h.get?h.get(this):Ze.propHooks._default.get(this)},run:function(h){var p,g=Ze.propHooks[this.prop];return this.pos=p=this.options.duration?v.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):h,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):Ze.propHooks._default.set(this),this}}).init.prototype=Ze.prototype,(Ze.propHooks={_default:{get:function(h){var p;return 1!==h.elem.nodeType||null!=h.elem[h.prop]&&null==h.elem.style[h.prop]?h.elem[h.prop]:(p=v.css(h.elem,h.prop,""))&&"auto"!==p?p:0},set:function(h){v.fx.step[h.prop]?v.fx.step[h.prop](h):1!==h.elem.nodeType||!v.cssHooks[h.prop]&&null==h.elem.style[bn(h.prop)]?h.elem[h.prop]=h.now:v.style(h.elem,h.prop,h.now+h.unit)}}}).scrollTop=Ze.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},v.easing={linear:function(h){return h},swing:function(h){return.5-Math.cos(h*Math.PI)/2},_default:"swing"},v.fx=Ze.prototype.init,v.fx.step={};var _i,rn,Bi,jn,sn=/^(?:toggle|show|hide)$/,gr=/queueHooks$/;function ui(){rn&&(!1===A.hidden&&u.requestAnimationFrame?u.requestAnimationFrame(ui):u.setTimeout(ui,v.fx.interval),v.fx.tick())}function Ln(){return u.setTimeout(function(){_i=void 0}),_i=Date.now()}function Ki(h,p){var g,r=0,m={height:h};for(p=p?1:0;r<4;r+=2-p)m["margin"+(g=Pe[r])]=m["padding"+g]=h;return p&&(m.opacity=m.width=h),m}function Mn(h,p,g){for(var r,m=(yi.tweeners[p]||[]).concat(yi.tweeners["*"]),y=0,T=m.length;y<T;y++)if(r=m[y].call(g,p,h))return r}function yi(h,p,g){var r,m,y=0,T=yi.prefilters.length,D=v.Deferred().always(function(){delete P.elem}),P=function(){if(m)return!1;for(var nt=_i||Ln(),J=Math.max(0,B.startTime+B.duration-nt),at=1-(J/B.duration||0),Dt=0,Nt=B.tweens.length;Dt<Nt;Dt++)B.tweens[Dt].run(at);return D.notifyWith(h,[B,at,J]),at<1&&Nt?J:(Nt||D.notifyWith(h,[B,1,0]),D.resolveWith(h,[B]),!1)},B=D.promise({elem:h,props:v.extend({},p),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},g),originalProperties:p,originalOptions:g,startTime:_i||Ln(),duration:g.duration,tweens:[],createTween:function(nt,J){var at=v.Tween(h,B.opts,nt,J,B.opts.specialEasing[nt]||B.opts.easing);return B.tweens.push(at),at},stop:function(nt){var J=0,at=nt?B.tweens.length:0;if(m)return this;for(m=!0;J<at;J++)B.tweens[J].run(1);return nt?(D.notifyWith(h,[B,1,0]),D.resolveWith(h,[B,nt])):D.rejectWith(h,[B,nt]),this}}),K=B.props;for(function(nt,J){var at,Dt,Nt,Ht,oe;for(at in nt)if(Nt=J[Dt=le(at)],Ht=nt[at],Array.isArray(Ht)&&(Nt=Ht[1],Ht=nt[at]=Ht[0]),at!==Dt&&(nt[Dt]=Ht,delete nt[at]),(oe=v.cssHooks[Dt])&&"expand"in oe)for(at in Ht=oe.expand(Ht),delete nt[Dt],Ht)at in nt||(nt[at]=Ht[at],J[at]=Nt);else J[Dt]=Nt}(K,B.opts.specialEasing);y<T;y++)if(r=yi.prefilters[y].call(B,h,K,B.opts))return w(r.stop)&&(v._queueHooks(B.elem,B.opts.queue).stop=r.stop.bind(r)),r;return v.map(K,Mn,B),w(B.opts.start)&&B.opts.start.call(h,B),B.progress(B.opts.progress).done(B.opts.done,B.opts.complete).fail(B.opts.fail).always(B.opts.always),v.fx.timer(v.extend(P,{elem:h,anim:B,queue:B.opts.queue})),B}v.Animation=v.extend(yi,{tweeners:{"*":[function(h,p){var g=this.createTween(h,p);return E(g.elem,h,ue.exec(p),g),g}]},tweener:function(h,p){w(h)?(p=h,h=["*"]):h=h.match(ne);for(var g,r=0,m=h.length;r<m;r++)(yi.tweeners[g=h[r]]=yi.tweeners[g]||[]).unshift(p)},prefilters:[function(h,p,g){var r,m,y,T,D,P,B,K,nt="width"in p||"height"in p,J=this,at={},Dt=h.style,Nt=h.nodeType&&_e(h),Ht=jt.get(h,"fxshow");for(r in g.queue||(null==(T=v._queueHooks(h,"fx")).unqueued&&(T.unqueued=0,D=T.empty.fire,T.empty.fire=function(){T.unqueued||D()}),T.unqueued++,J.always(function(){J.always(function(){T.unqueued--,v.queue(h,"fx").length||T.empty.fire()})})),p)if(sn.test(m=p[r])){if(delete p[r],y=y||"toggle"===m,m===(Nt?"hide":"show")){if("show"!==m||!Ht||void 0===Ht[r])continue;Nt=!0}at[r]=Ht&&Ht[r]||v.style(h,r)}if((P=!v.isEmptyObject(p))||!v.isEmptyObject(at))for(r in nt&&1===h.nodeType&&(g.overflow=[Dt.overflow,Dt.overflowX,Dt.overflowY],null==(B=Ht&&Ht.display)&&(B=jt.get(h,"display")),"none"===(K=v.css(h,"display"))&&(B?K=B:(R([h],!0),B=h.style.display||B,K=v.css(h,"display"),R([h]))),("inline"===K||"inline-block"===K&&null!=B)&&"none"===v.css(h,"float")&&(P||(J.done(function(){Dt.display=B}),null==B&&(B="none"===(K=Dt.display)?"":K)),Dt.display="inline-block")),g.overflow&&(Dt.overflow="hidden",J.always(function(){Dt.overflow=g.overflow[0],Dt.overflowX=g.overflow[1],Dt.overflowY=g.overflow[2]})),P=!1,at)P||(Ht?"hidden"in Ht&&(Nt=Ht.hidden):Ht=jt.access(h,"fxshow",{display:B}),y&&(Ht.hidden=!Nt),Nt&&R([h],!0),J.done(function(){for(r in Nt||R([h]),jt.remove(h,"fxshow"),at)v.style(h,r,at[r])})),P=Mn(Nt?Ht[r]:0,r,J),r in Ht||(Ht[r]=P.start,Nt&&(P.end=P.start,P.start=0))}],prefilter:function(h,p){p?yi.prefilters.unshift(h):yi.prefilters.push(h)}}),v.speed=function(h,p,g){var r=h&&"object"==typeof h?v.extend({},h):{complete:g||!g&&p||w(h)&&h,duration:h,easing:g&&p||p&&!w(p)&&p};return v.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){w(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.fn.extend({fadeTo:function(h,p,g,r){return this.filter(_e).css("opacity",0).show().end().animate({opacity:p},h,g,r)},animate:function(h,p,g,r){var m=v.isEmptyObject(h),y=v.speed(p,g,r),T=function(){var D=yi(this,v.extend({},h),y);(m||jt.get(this,"finish"))&&D.stop(!0)};return T.finish=T,m||!1===y.queue?this.each(T):this.queue(y.queue,T)},stop:function(h,p,g){var r=function(m){var y=m.stop;delete m.stop,y(g)};return"string"!=typeof h&&(g=p,p=h,h=void 0),p&&this.queue(h||"fx",[]),this.each(function(){var m=!0,y=null!=h&&h+"queueHooks",T=v.timers,D=jt.get(this);if(y)D[y]&&D[y].stop&&r(D[y]);else for(y in D)D[y]&&D[y].stop&&gr.test(y)&&r(D[y]);for(y=T.length;y--;)T[y].elem!==this||null!=h&&T[y].queue!==h||(T[y].anim.stop(g),m=!1,T.splice(y,1));!m&&g||v.dequeue(this,h)})},finish:function(h){return!1!==h&&(h=h||"fx"),this.each(function(){var p,g=jt.get(this),r=g[h+"queue"],m=g[h+"queueHooks"],y=v.timers,T=r?r.length:0;for(g.finish=!0,v.queue(this,h,[]),m&&m.stop&&m.stop.call(this,!0),p=y.length;p--;)y[p].elem===this&&y[p].queue===h&&(y[p].anim.stop(!0),y.splice(p,1));for(p=0;p<T;p++)r[p]&&r[p].finish&&r[p].finish.call(this);delete g.finish})}}),v.each(["toggle","show","hide"],function(h,p){var g=v.fn[p];v.fn[p]=function(r,m,y){return null==r||"boolean"==typeof r?g.apply(this,arguments):this.animate(Ki(p,!0),r,m,y)}}),v.each({slideDown:Ki("show"),slideUp:Ki("hide"),slideToggle:Ki("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,p){v.fn[h]=function(g,r,m){return this.animate(p,g,r,m)}}),v.timers=[],v.fx.tick=function(){var h,p=0,g=v.timers;for(_i=Date.now();p<g.length;p++)(h=g[p])()||g[p]!==h||g.splice(p--,1);g.length||v.fx.stop(),_i=void 0},v.fx.timer=function(h){v.timers.push(h),v.fx.start()},v.fx.interval=13,v.fx.start=function(){rn||(rn=!0,ui())},v.fx.stop=function(){rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(h,p){return h=v.fx&&v.fx.speeds[h]||h,this.queue(p=p||"fx",function(g,r){var m=u.setTimeout(g,h);r.stop=function(){u.clearTimeout(m)}})},Bi=A.createElement("input"),jn=A.createElement("select").appendChild(A.createElement("option")),Bi.type="checkbox",C.checkOn=""!==Bi.value,C.optSelected=jn.selected,(Bi=A.createElement("input")).value="t",Bi.type="radio",C.radioValue="t"===Bi.value;var on,wn=v.expr.attrHandle;v.fn.extend({attr:function(h,p){return Ce(this,v.attr,h,p,1<arguments.length)},removeAttr:function(h){return this.each(function(){v.removeAttr(this,h)})}}),v.extend({attr:function(h,p,g){var r,m,y=h.nodeType;if(3!==y&&8!==y&&2!==y)return typeof h.getAttribute>"u"?v.prop(h,p,g):(1===y&&v.isXMLDoc(h)||(m=v.attrHooks[p.toLowerCase()]||(v.expr.match.bool.test(p)?on:void 0)),void 0!==g?null===g?void v.removeAttr(h,p):m&&"set"in m&&void 0!==(r=m.set(h,g,p))?r:(h.setAttribute(p,g+""),g):m&&"get"in m&&null!==(r=m.get(h,p))?r:null==(r=v.find.attr(h,p))?void 0:r)},attrHooks:{type:{set:function(h,p){if(!C.radioValue&&"radio"===p&&Y(h,"input")){var g=h.value;return h.setAttribute("type",p),g&&(h.value=g),p}}}},removeAttr:function(h,p){var g,r=0,m=p&&p.match(ne);if(m&&1===h.nodeType)for(;g=m[r++];)h.removeAttribute(g)}}),on={set:function(h,p,g){return!1===p?v.removeAttr(h,g):h.setAttribute(g,g),g}},v.each(v.expr.match.bool.source.match(/\w+/g),function(h,p){var g=wn[p]||v.find.attr;wn[p]=function(r,m,y){var T,D,P=m.toLowerCase();return y||(D=wn[P],wn[P]=T,T=null!=g(r,m,y)?P:null,wn[P]=D),T}});var rr=/^(?:input|select|textarea|button)$/i,Gn=/^(?:a|area)$/i;function Mi(h){return(h.match(ne)||[]).join(" ")}function Ii(h){return h.getAttribute&&h.getAttribute("class")||""}function an(h){return Array.isArray(h)?h:"string"==typeof h&&h.match(ne)||[]}v.fn.extend({prop:function(h,p){return Ce(this,v.prop,h,p,1<arguments.length)},removeProp:function(h){return this.each(function(){delete this[v.propFix[h]||h]})}}),v.extend({prop:function(h,p,g){var r,m,y=h.nodeType;if(3!==y&&8!==y&&2!==y)return 1===y&&v.isXMLDoc(h)||(m=v.propHooks[p=v.propFix[p]||p]),void 0!==g?m&&"set"in m&&void 0!==(r=m.set(h,g,p))?r:h[p]=g:m&&"get"in m&&null!==(r=m.get(h,p))?r:h[p]},propHooks:{tabIndex:{get:function(h){var p=v.find.attr(h,"tabindex");return p?parseInt(p,10):rr.test(h.nodeName)||Gn.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(v.propHooks.selected={get:function(h){return null},set:function(h){}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){v.propFix[this.toLowerCase()]=this}),v.fn.extend({addClass:function(h){var p,g,r,m,y,T;return w(h)?this.each(function(D){v(this).addClass(h.call(this,D,Ii(this)))}):(p=an(h)).length?this.each(function(){if(r=Ii(this),g=1===this.nodeType&&" "+Mi(r)+" "){for(y=0;y<p.length;y++)g.indexOf(" "+(m=p[y])+" ")<0&&(g+=m+" ");T=Mi(g),r!==T&&this.setAttribute("class",T)}}):this},removeClass:function(h){var p,g,r,m,y,T;return w(h)?this.each(function(D){v(this).removeClass(h.call(this,D,Ii(this)))}):arguments.length?(p=an(h)).length?this.each(function(){if(r=Ii(this),g=1===this.nodeType&&" "+Mi(r)+" "){for(y=0;y<p.length;y++)for(m=p[y];-1<g.indexOf(" "+m+" ");)g=g.replace(" "+m+" "," ");T=Mi(g),r!==T&&this.setAttribute("class",T)}}):this:this.attr("class","")},toggleClass:function(h,p){var g,r,m,y,T=typeof h,D="string"===T||Array.isArray(h);return w(h)?this.each(function(P){v(this).toggleClass(h.call(this,P,Ii(this),p),p)}):"boolean"==typeof p&&D?p?this.addClass(h):this.removeClass(h):(g=an(h),this.each(function(){if(D)for(y=v(this),m=0;m<g.length;m++)y.hasClass(r=g[m])?y.removeClass(r):y.addClass(r);else void 0!==h&&"boolean"!==T||((r=Ii(this))&&jt.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===h?"":jt.get(this,"__className__")||""))}))},hasClass:function(h){var p,g,r=0;for(p=" "+h+" ";g=this[r++];)if(1===g.nodeType&&-1<(" "+Mi(Ii(g))+" ").indexOf(p))return!0;return!1}});var Hi=/\r/g;v.fn.extend({val:function(h){var p,g,r,m=this[0];return arguments.length?(r=w(h),this.each(function(y){var T;1===this.nodeType&&(null==(T=r?h.call(this,y,v(this).val()):h)?T="":"number"==typeof T?T+="":Array.isArray(T)&&(T=v.map(T,function(D){return null==D?"":D+""})),(p=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in p&&void 0!==p.set(this,T,"value")||(this.value=T))})):m?(p=v.valHooks[m.type]||v.valHooks[m.nodeName.toLowerCase()])&&"get"in p&&void 0!==(g=p.get(m,"value"))?g:"string"==typeof(g=m.value)?g.replace(Hi,""):g??"":void 0}}),v.extend({valHooks:{option:{get:function(h){return v.find.attr(h,"value")??Mi(v.text(h))}},select:{get:function(h){var p,g,r,m=h.options,y=h.selectedIndex,T="select-one"===h.type,D=T?null:[],P=T?y+1:m.length;for(r=y<0?P:T?y:0;r<P;r++)if(((g=m[r]).selected||r===y)&&!g.disabled&&(!g.parentNode.disabled||!Y(g.parentNode,"optgroup"))){if(p=v(g).val(),T)return p;D.push(p)}return D},set:function(h,p){for(var g,r,m=h.options,y=v.makeArray(p),T=m.length;T--;)((r=m[T]).selected=-1<v.inArray(v.valHooks.option.get(r),y))&&(g=!0);return g||(h.selectedIndex=-1),y}}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(h,p){if(Array.isArray(p))return h.checked=-1<v.inArray(v(h).val(),p)}},C.checkOn||(v.valHooks[this].get=function(h){return null===h.getAttribute("value")?"on":h.value})});var Wi=u.location,In={guid:Date.now()},Qi=/\?/;v.parseXML=function(h){var p,g;if(!h||"string"!=typeof h)return null;try{p=(new u.DOMParser).parseFromString(h,"text/xml")}catch{}return g=p&&p.getElementsByTagName("parsererror")[0],p&&!g||v.error("Invalid XML: "+(g?v.map(g.childNodes,function(r){return r.textContent}).join("\n"):h)),p};var Xi=/^(?:focusinfocus|focusoutblur)$/,sr=function(h){h.stopPropagation()};v.extend(v.event,{trigger:function(h,p,g,r){var m,y,T,D,P,B,K,nt,J=[g||A],at=d.call(h,"type")?h.type:h,Dt=d.call(h,"namespace")?h.namespace.split("."):[];if(y=nt=T=g=g||A,3!==g.nodeType&&8!==g.nodeType&&!Xi.test(at+v.event.triggered)&&(-1<at.indexOf(".")&&(at=(Dt=at.split(".")).shift(),Dt.sort()),P=at.indexOf(":")<0&&"on"+at,(h=h[v.expando]?h:new v.Event(at,"object"==typeof h&&h)).isTrigger=r?2:3,h.namespace=Dt.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+Dt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=g),p=null==p?[h]:v.makeArray(p,[h]),K=v.event.special[at]||{},r||!K.trigger||!1!==K.trigger.apply(g,p))){if(!r&&!K.noBubble&&!O(g)){for(Xi.test((D=K.delegateType||at)+at)||(y=y.parentNode);y;y=y.parentNode)J.push(y),T=y;T===(g.ownerDocument||A)&&J.push(T.defaultView||T.parentWindow||u)}for(m=0;(y=J[m++])&&!h.isPropagationStopped();)nt=y,h.type=1<m?D:K.bindType||at,(B=(jt.get(y,"events")||Object.create(null))[h.type]&&jt.get(y,"handle"))&&B.apply(y,p),(B=P&&y[P])&&B.apply&&Ae(y)&&(h.result=B.apply(y,p),!1===h.result&&h.preventDefault());return h.type=at,r||h.isDefaultPrevented()||K._default&&!1!==K._default.apply(J.pop(),p)||!Ae(g)||P&&w(g[at])&&!O(g)&&((T=g[P])&&(g[P]=null),v.event.triggered=at,h.isPropagationStopped()&&nt.addEventListener(at,sr),g[at](),h.isPropagationStopped()&&nt.removeEventListener(at,sr),v.event.triggered=void 0,T&&(g[P]=T)),h.result}},simulate:function(h,p,g){var r=v.extend(new v.Event,g,{type:h,isSimulated:!0});v.event.trigger(r,null,p)}}),v.fn.extend({trigger:function(h,p){return this.each(function(){v.event.trigger(h,p,this)})},triggerHandler:function(h,p){var g=this[0];if(g)return v.event.trigger(h,p,g,!0)}});var or=/\[\]$/,qn=/\r?\n/g,zi=/^(?:submit|button|image|reset|file)$/i,ar=/^(?:input|select|textarea|keygen)/i;function Fn(h,p,g,r){var m;if(Array.isArray(p))v.each(p,function(y,T){g||or.test(h)?r(h,T):Fn(h+"["+("object"==typeof T&&null!=T?y:"")+"]",T,g,r)});else if(g||"object"!==Q(p))r(h,p);else for(m in p)Fn(h+"["+m+"]",p[m],g,r)}v.param=function(h,p){var g,r=[],m=function(y,T){var D=w(T)?T():T;r[r.length]=encodeURIComponent(y)+"="+encodeURIComponent(D??"")};if(null==h)return"";if(Array.isArray(h)||h.jquery&&!v.isPlainObject(h))v.each(h,function(){m(this.name,this.value)});else for(g in h)Fn(g,h[g],p,m);return r.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=v.prop(this,"elements");return h?v.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!v(this).is(":disabled")&&ar.test(this.nodeName)&&!zi.test(h)&&(this.checked||!ut.test(h))}).map(function(h,p){var g=v(this).val();return null==g?null:Array.isArray(g)?v.map(g,function(r){return{name:p.name,value:r.replace(qn,"\r\n")}}):{name:p.name,value:g.replace(qn,"\r\n")}}).get()}});var ln=/%20/g,$n=/#.*$/,Cn=/([?&])_=[^&]*/,lr=/^(.*?):[ \t]*([^\r\n]*)$/gm,cr=/^(?:GET|HEAD)$/,hr=/^\/\//,Fi={},Kn={},Qn="*/".concat("*"),Tn=A.createElement("a");function Rn(h){return function(p,g){"string"!=typeof p&&(g=p,p="*");var r,m=0,y=p.toLowerCase().match(ne)||[];if(w(g))for(;r=y[m++];)"+"===r[0]?(r=r.slice(1)||"*",(h[r]=h[r]||[]).unshift(g)):(h[r]=h[r]||[]).push(g)}}function cn(h,p,g,r){var m={},y=h===Kn;function T(D){var P;return m[D]=!0,v.each(h[D]||[],function(B,K){var nt=K(p,g,r);return"string"!=typeof nt||y||m[nt]?y?!(P=nt):void 0:(p.dataTypes.unshift(nt),T(nt),!1)}),P}return T(p.dataTypes[0])||!m["*"]&&T("*")}function Nn(h,p){var g,r,m=v.ajaxSettings.flatOptions||{};for(g in p)void 0!==p[g]&&((m[g]?h:r||(r={}))[g]=p[g]);return r&&v.extend(!0,h,r),h}Tn.href=Wi.href,v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Wi.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Wi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,p){return p?Nn(Nn(h,v.ajaxSettings),p):Nn(v.ajaxSettings,h)},ajaxPrefilter:Rn(Fi),ajaxTransport:Rn(Kn),ajax:function(h,p){"object"==typeof h&&(p=h,h=void 0);var g,r,m,y,T,D,P,B,K,nt,J=v.ajaxSetup({},p=p||{}),at=J.context||J,Dt=J.context&&(at.nodeType||at.jquery)?v(at):v.event,Nt=v.Deferred(),Ht=v.Callbacks("once memory"),oe=J.statusCode||{},Te={},ti={},ki="canceled",$t={readyState:0,getResponseHeader:function(ae){var Le;if(P){if(!y)for(y={};Le=lr.exec(m);)y[Le[1].toLowerCase()+" "]=(y[Le[1].toLowerCase()+" "]||[]).concat(Le[2]);Le=y[ae.toLowerCase()+" "]}return null==Le?null:Le.join(", ")},getAllResponseHeaders:function(){return P?m:null},setRequestHeader:function(ae,Le){return null==P&&(ae=ti[ae.toLowerCase()]=ti[ae.toLowerCase()]||ae,Te[ae]=Le),this},overrideMimeType:function(ae){return null==P&&(J.mimeType=ae),this},statusCode:function(ae){var Le;if(ae)if(P)$t.always(ae[$t.status]);else for(Le in ae)oe[Le]=[oe[Le],ae[Le]];return this},abort:function(ae){var Le=ae||ki;return g&&g.abort(Le),Yi(0,Le),this}};if(Nt.promise($t),J.url=((h||J.url||Wi.href)+"").replace(hr,Wi.protocol+"//"),J.type=p.method||p.type||J.method||J.type,J.dataTypes=(J.dataType||"*").toLowerCase().match(ne)||[""],null==J.crossDomain){D=A.createElement("a");try{D.href=J.url,D.href=D.href,J.crossDomain=Tn.protocol+"//"+Tn.host!=D.protocol+"//"+D.host}catch{J.crossDomain=!0}}if(J.data&&J.processData&&"string"!=typeof J.data&&(J.data=v.param(J.data,J.traditional)),cn(Fi,J,p,$t),P)return $t;for(K in(B=v.event&&J.global)&&0==v.active++&&v.event.trigger("ajaxStart"),J.type=J.type.toUpperCase(),J.hasContent=!cr.test(J.type),r=J.url.replace($n,""),J.hasContent?J.data&&J.processData&&0===(J.contentType||"").indexOf("application/x-www-form-urlencoded")&&(J.data=J.data.replace(ln,"+")):(nt=J.url.slice(r.length),J.data&&(J.processData||"string"==typeof J.data)&&(r+=(Qi.test(r)?"&":"?")+J.data,delete J.data),!1===J.cache&&(r=r.replace(Cn,"$1"),nt=(Qi.test(r)?"&":"?")+"_="+In.guid+++nt),J.url=r+nt),J.ifModified&&(v.lastModified[r]&&$t.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&$t.setRequestHeader("If-None-Match",v.etag[r])),(J.data&&J.hasContent&&!1!==J.contentType||p.contentType)&&$t.setRequestHeader("Content-Type",J.contentType),$t.setRequestHeader("Accept",J.dataTypes[0]&&J.accepts[J.dataTypes[0]]?J.accepts[J.dataTypes[0]]+("*"!==J.dataTypes[0]?", "+Qn+"; q=0.01":""):J.accepts["*"]),J.headers)$t.setRequestHeader(K,J.headers[K]);if(J.beforeSend&&(!1===J.beforeSend.call(at,$t,J)||P))return $t.abort();if(ki="abort",Ht.add(J.complete),$t.done(J.success),$t.fail(J.error),g=cn(Kn,J,p,$t)){if($t.readyState=1,B&&Dt.trigger("ajaxSend",[$t,J]),P)return $t;J.async&&0<J.timeout&&(T=u.setTimeout(function(){$t.abort("timeout")},J.timeout));try{P=!1,g.send(Te,Yi)}catch(ae){if(P)throw ae;Yi(-1,ae)}}else Yi(-1,"No Transport");function Yi(ae,Le,Wn,ur){var Di,Jn,tn,di,On,bi=Le;P||(P=!0,T&&u.clearTimeout(T),g=void 0,m=ur||"",$t.readyState=0<ae?4:0,Di=200<=ae&&ae<300||304===ae,Wn&&(di=function(He,Fe,ei){for(var en,li,Xt,pe,Re=He.contents,Se=He.dataTypes;"*"===Se[0];)Se.shift(),void 0===en&&(en=He.mimeType||Fe.getResponseHeader("Content-Type"));if(en)for(li in Re)if(Re[li]&&Re[li].test(en)){Se.unshift(li);break}if(Se[0]in ei)Xt=Se[0];else{for(li in ei){if(!Se[0]||He.converters[li+" "+Se[0]]){Xt=li;break}pe||(pe=li)}Xt=Xt||pe}if(Xt)return Xt!==Se[0]&&Se.unshift(Xt),ei[Xt]}(J,$t,Wn)),!Di&&-1<v.inArray("script",J.dataTypes)&&v.inArray("json",J.dataTypes)<0&&(J.converters["text script"]=function(){}),di=function(He,Fe,ei,en){var li,Xt,pe,Re,Se,Vi={},Xn=He.dataTypes.slice();if(Xn[1])for(pe in He.converters)Vi[pe.toLowerCase()]=He.converters[pe];for(Xt=Xn.shift();Xt;)if(He.responseFields[Xt]&&(ei[He.responseFields[Xt]]=Fe),!Se&&en&&He.dataFilter&&(Fe=He.dataFilter(Fe,He.dataType)),Se=Xt,Xt=Xn.shift())if("*"===Xt)Xt=Se;else if("*"!==Se&&Se!==Xt){if(!(pe=Vi[Se+" "+Xt]||Vi["* "+Xt]))for(li in Vi)if((Re=li.split(" "))[1]===Xt&&(pe=Vi[Se+" "+Re[0]]||Vi["* "+Re[0]])){!0===pe?pe=Vi[li]:!0!==Vi[li]&&(Xt=Re[0],Xn.unshift(Re[1]));break}if(!0!==pe)if(pe&&He.throws)Fe=pe(Fe);else try{Fe=pe(Fe)}catch(Zn){return{state:"parsererror",error:pe?Zn:"No conversion from "+Se+" to "+Xt}}}return{state:"success",data:Fe}}(J,di,$t,Di),Di?(J.ifModified&&((On=$t.getResponseHeader("Last-Modified"))&&(v.lastModified[r]=On),(On=$t.getResponseHeader("etag"))&&(v.etag[r]=On)),204===ae||"HEAD"===J.type?bi="nocontent":304===ae?bi="notmodified":(bi=di.state,Jn=di.data,Di=!(tn=di.error))):(tn=bi,!ae&&bi||(bi="error",ae<0&&(ae=0))),$t.status=ae,$t.statusText=(Le||bi)+"",Di?Nt.resolveWith(at,[Jn,bi,$t]):Nt.rejectWith(at,[$t,bi,tn]),$t.statusCode(oe),oe=void 0,B&&Dt.trigger(Di?"ajaxSuccess":"ajaxError",[$t,J,Di?Jn:tn]),Ht.fireWith(at,[$t,bi]),B&&(Dt.trigger("ajaxComplete",[$t,J]),--v.active||v.event.trigger("ajaxStop")))}return $t},getJSON:function(h,p,g){return v.get(h,p,g,"json")},getScript:function(h,p){return v.get(h,void 0,p,"script")}}),v.each(["get","post"],function(h,p){v[p]=function(g,r,m,y){return w(r)&&(y=y||m,m=r,r=void 0),v.ajax(v.extend({url:g,type:p,dataType:y,data:r,success:m},v.isPlainObject(g)&&g))}}),v.ajaxPrefilter(function(h){var p;for(p in h.headers)"content-type"===p.toLowerCase()&&(h.contentType=h.headers[p]||"")}),v._evalUrl=function(h,p,g){return v.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(r){v.globalEval(r,p,g)}})},v.fn.extend({wrapAll:function(h){var p;return this[0]&&(w(h)&&(h=h.call(this[0])),p=v(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var g=this;g.firstElementChild;)g=g.firstElementChild;return g}).append(this)),this},wrapInner:function(h){return w(h)?this.each(function(p){v(this).wrapInner(h.call(this,p))}):this.each(function(){var p=v(this),g=p.contents();g.length?g.wrapAll(h):p.append(h)})},wrap:function(h){var p=w(h);return this.each(function(g){v(this).wrapAll(p?h.call(this,g):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}}),v.expr.pseudos.hidden=function(h){return!v.expr.pseudos.visible(h)},v.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new u.XMLHttpRequest}catch{}};var Bn={0:200,1223:204},Ji=v.ajaxSettings.xhr();C.cors=!!Ji&&"withCredentials"in Ji,C.ajax=Ji=!!Ji,v.ajaxTransport(function(h){var p,g;if(C.cors||Ji&&!h.crossDomain)return{send:function(r,m){var y,T=h.xhr();if(T.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for(y in h.xhrFields)T[y]=h.xhrFields[y];for(y in h.mimeType&&T.overrideMimeType&&T.overrideMimeType(h.mimeType),h.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)T.setRequestHeader(y,r[y]);p=function(D){return function(){p&&(p=g=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,"abort"===D?T.abort():"error"===D?"number"!=typeof T.status?m(0,"error"):m(T.status,T.statusText):m(Bn[T.status]||T.status,T.statusText,"text"!==(T.responseType||"text")||"string"!=typeof T.responseText?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=p(),g=T.onerror=T.ontimeout=p("error"),void 0!==T.onabort?T.onabort=g:T.onreadystatechange=function(){4===T.readyState&&u.setTimeout(function(){p&&g()})},p=p("abort");try{T.send(h.hasContent&&h.data||null)}catch(D){if(p)throw D}},abort:function(){p&&p()}}}),v.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return v.globalEval(h),h}}}),v.ajaxPrefilter("script",function(h){void 0===h.cache&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),v.ajaxTransport("script",function(h){var p,g;if(h.crossDomain||h.scriptAttrs)return{send:function(r,m){p=v("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",g=function(y){p.remove(),g=null,y&&m("error"===y.type?404:200,y.type)}),A.head.appendChild(p[0])},abort:function(){g&&g()}}});var Sn,fi=[],Ai=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=fi.pop()||v.expando+"_"+In.guid++;return this[h]=!0,h}}),v.ajaxPrefilter("json jsonp",function(h,p,g){var r,m,y,T=!1!==h.jsonp&&(Ai.test(h.url)?"url":"string"==typeof h.data&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ai.test(h.data)&&"data");if(T||"jsonp"===h.dataTypes[0])return r=h.jsonpCallback=w(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,T?h[T]=h[T].replace(Ai,"$1"+r):!1!==h.jsonp&&(h.url+=(Qi.test(h.url)?"&":"?")+h.jsonp+"="+r),h.converters["script json"]=function(){return y||v.error(r+" was not called"),y[0]},h.dataTypes[0]="json",m=u[r],u[r]=function(){y=arguments},g.always(function(){void 0===m?v(u).removeProp(r):u[r]=m,h[r]&&(h.jsonpCallback=p.jsonpCallback,fi.push(r)),y&&w(m)&&m(y[0]),y=m=void 0}),"script"}),C.createHTMLDocument=((Sn=A.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Sn.childNodes.length),v.parseHTML=function(h,p,g){return"string"!=typeof h?[]:("boolean"==typeof p&&(g=p,p=!1),p||(C.createHTMLDocument?((r=(p=A.implementation.createHTMLDocument("")).createElement("base")).href=A.location.href,p.head.appendChild(r)):p=A),y=!g&&[],(m=G.exec(h))?[p.createElement(m[1])]:(m=Ft([h],p,y),y&&y.length&&v(y).remove(),v.merge([],m.childNodes)));var r,m,y},v.fn.load=function(h,p,g){var r,m,y,T=this,D=h.indexOf(" ");return-1<D&&(r=Mi(h.slice(D)),h=h.slice(0,D)),w(p)?(g=p,p=void 0):p&&"object"==typeof p&&(m="POST"),0<T.length&&v.ajax({url:h,type:m||"GET",dataType:"html",data:p}).done(function(P){y=arguments,T.html(r?v("<div>").append(v.parseHTML(P)).find(r):P)}).always(g&&function(P,B){T.each(function(){g.apply(this,y||[P.responseText,B,P])})}),this},v.expr.pseudos.animated=function(h){return v.grep(v.timers,function(p){return h===p.elem}).length},v.offset={setOffset:function(h,p,g){var r,m,y,T,D,P,B=v.css(h,"position"),K=v(h),nt={};"static"===B&&(h.style.position="relative"),D=K.offset(),y=v.css(h,"top"),P=v.css(h,"left"),("absolute"===B||"fixed"===B)&&-1<(y+P).indexOf("auto")?(T=(r=K.position()).top,m=r.left):(T=parseFloat(y)||0,m=parseFloat(P)||0),w(p)&&(p=p.call(h,g,v.extend({},D))),null!=p.top&&(nt.top=p.top-D.top+T),null!=p.left&&(nt.left=p.left-D.left+m),"using"in p?p.using.call(h,nt):K.css(nt)}},v.fn.extend({offset:function(h){if(arguments.length)return void 0===h?this:this.each(function(m){v.offset.setOffset(this,h,m)});var p,g,r=this[0];return r?r.getClientRects().length?{top:(p=r.getBoundingClientRect()).top+(g=r.ownerDocument.defaultView).pageYOffset,left:p.left+g.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var h,p,g,r=this[0],m={top:0,left:0};if("fixed"===v.css(r,"position"))p=r.getBoundingClientRect();else{for(p=this.offset(),g=r.ownerDocument,h=r.offsetParent||g.documentElement;h&&(h===g.body||h===g.documentElement)&&"static"===v.css(h,"position");)h=h.parentNode;h&&h!==r&&1===h.nodeType&&((m=v(h).offset()).top+=v.css(h,"borderTopWidth",!0),m.left+=v.css(h,"borderLeftWidth",!0))}return{top:p.top-m.top-v.css(r,"marginTop",!0),left:p.left-m.left-v.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&"static"===v.css(h,"position");)h=h.offsetParent;return h||Ie})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,p){var g="pageYOffset"===p;v.fn[h]=function(r){return Ce(this,function(m,y,T){var D;if(O(m)?D=m:9===m.nodeType&&(D=m.defaultView),void 0===T)return D?D[p]:m[y];D?D.scrollTo(g?D.pageXOffset:T,g?T:D.pageYOffset):m[y]=T},h,r,arguments.length)}}),v.each(["top","left"],function(h,p){v.cssHooks[p]=Dn(C.pixelPosition,function(g,r){if(r)return r=Si(g,p),mn.test(r)?v(g).position()[p]+"px":r})}),v.each({Height:"height",Width:"width"},function(h,p){v.each({padding:"inner"+h,content:p,"":"outer"+h},function(g,r){v.fn[r]=function(m,y){var T=arguments.length&&(g||"boolean"!=typeof m),D=g||(!0===m||!0===y?"margin":"border");return Ce(this,function(P,B,K){var nt;return O(P)?0===r.indexOf("outer")?P["inner"+h]:P.document.documentElement["client"+h]:9===P.nodeType?(nt=P.documentElement,Math.max(P.body["scroll"+h],nt["scroll"+h],P.body["offset"+h],nt["offset"+h],nt["client"+h])):void 0===K?v.css(P,B,D):v.style(P,B,K,D)},p,T?m:void 0,T)}})}),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,p){v.fn[p]=function(g){return this.on(p,g)}}),v.fn.extend({bind:function(h,p,g){return this.on(h,null,p,g)},unbind:function(h,p){return this.off(h,null,p)},delegate:function(h,p,g,r){return this.on(p,h,g,r)},undelegate:function(h,p,g){return 1===arguments.length?this.off(h,"**"):this.off(p,h||"**",g)},hover:function(h,p){return this.on("mouseenter",h).on("mouseleave",p||h)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,p){v.fn[p]=function(g,r){return 0<arguments.length?this.on(p,null,g,r):this.trigger(p)}});var Hn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(h,p){var g,r,m;if("string"==typeof p&&(g=h[p],p=h,h=g),w(h))return r=t.call(arguments,2),(m=function(){return h.apply(p||this,r.concat(t.call(arguments)))}).guid=h.guid=h.guid||v.guid++,m},v.holdReady=function(h){h?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=Y,v.isFunction=w,v.isWindow=O,v.camelCase=le,v.type=Q,v.now=Date.now,v.isNumeric=function(h){var p=v.type(h);return("number"===p||"string"===p)&&!isNaN(h-parseFloat(h))},v.trim=function(h){return null==h?"":(h+"").replace(Hn,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return v});var Zi=u.jQuery,mr=u.$;return v.noConflict=function(h){return u.$===v&&(u.$=mr),h&&u.jQuery===v&&(u.jQuery=Zi),v},typeof n>"u"&&(u.jQuery=u.$=v),v}),function(u,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):u.Popper=n()}(this,function(){"use strict";function u(E){return E&&"[object Function]"==={}.toString.call(E)}function n(E,M){if(1!==E.nodeType)return[];var U=E.ownerDocument.defaultView.getComputedStyle(E,null);return M?U[M]:U}function l(E){return"HTML"===E.nodeName?E:E.parentNode||E.host}function c(E){if(!E)return document.body;switch(E.nodeName){case"HTML":case"BODY":return E.ownerDocument.body;case"#document":return E.body}var M=n(E);return/(auto|scroll|overlay)/.test(M.overflow+M.overflowY+M.overflowX)?E:c(l(E))}function t(E){return E&&E.referenceNode?E.referenceNode:E}function e(E){return 11===E?De:10===E?si:De||si}function i(E){if(!E)return document.documentElement;for(var M=e(10)?document.body:null,R=E.offsetParent||null;R===M&&E.nextElementSibling;)R=(E=E.nextElementSibling).offsetParent;var U=R&&R.nodeName;return U&&"BODY"!==U&&"HTML"!==U?-1!==["TH","TD","TABLE"].indexOf(R.nodeName)&&"static"===n(R,"position")?i(R):R:E?E.ownerDocument.documentElement:document.documentElement}function s(E){return null===E.parentNode?E:s(E.parentNode)}function a(E,M){if(!(E&&E.nodeType&&M&&M.nodeType))return document.documentElement;var R=E.compareDocumentPosition(M)&Node.DOCUMENT_POSITION_FOLLOWING,U=R?E:M,ht=R?M:E,ut=document.createRange();ut.setStart(U,0),ut.setEnd(ht,0);var ct=ut.commonAncestorContainer;if(E!==ct&&M!==ct||U.contains(ht))return function o(E){var M=E.nodeName;return"BODY"!==M&&("HTML"===M||i(E.firstElementChild)===E)}(ct)?ct:i(ct);var xt=s(E);return xt.host?a(xt.host,M):a(E,s(M).host)}function d(E){var R="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",U=E.nodeName;return"BODY"===U||"HTML"===U?(E.ownerDocument.scrollingElement||E.ownerDocument.documentElement)[R]:E[R]}function b(E,M){var R="x"===M?"Left":"Top",U="Left"==R?"Right":"Bottom";return parseFloat(E["border"+R+"Width"])+parseFloat(E["border"+U+"Width"])}function C(E,M,R,U){return ve(M["offset"+E],M["scroll"+E],R["client"+E],R["offset"+E],R["scroll"+E],e(10)?parseInt(R["offset"+E])+parseInt(U["margin"+("Height"===E?"Top":"Left")])+parseInt(U["margin"+("Height"===E?"Bottom":"Right")]):0)}function w(E){var M=E.body,R=E.documentElement,U=e(10)&&getComputedStyle(R);return{height:C("Height",M,R,U),width:C("Width",M,R,U)}}function O(E){return ue({},E,{right:E.left+E.width,bottom:E.top+E.height})}function A(E){var M={};try{if(e(10)){M=E.getBoundingClientRect();var R=d(E,"top"),U=d(E,"left");M.top+=R,M.left+=U,M.bottom+=R,M.right+=U}else M=E.getBoundingClientRect()}catch{}var ht={left:M.left,top:M.top,width:M.right-M.left,height:M.bottom-M.top},ut="HTML"===E.nodeName?w(E.ownerDocument):{},_t=E.offsetWidth-(ut.width||E.clientWidth||ht.width),Ct=E.offsetHeight-(ut.height||E.clientHeight||ht.height);if(_t||Ct){var Rt=n(E);_t-=b(Rt,"x"),Ct-=b(Rt,"y"),ht.width-=_t,ht.height-=Ct}return O(ht)}function F(E,M){var R=2<arguments.length&&void 0!==arguments[2]&&arguments[2],U=e(10),ht="HTML"===M.nodeName,ut=A(E),ct=A(M),xt=c(E),_t=n(M),Ct=parseFloat(_t.borderTopWidth),Rt=parseFloat(_t.borderLeftWidth);R&&ht&&(ct.top=ve(ct.top,0),ct.left=ve(ct.left,0));var kt=O({top:ut.top-ct.top-Ct,left:ut.left-ct.left-Rt,width:ut.width,height:ut.height});if(kt.marginTop=0,kt.marginLeft=0,!U&&ht){var Ft=parseFloat(_t.marginTop),Gt=parseFloat(_t.marginLeft);kt.top-=Ct-Ft,kt.bottom-=Ct-Ft,kt.left-=Rt-Gt,kt.right-=Rt-Gt,kt.marginTop=Ft,kt.marginLeft=Gt}return(U&&!R?M.contains(xt):M===xt&&"BODY"!==xt.nodeName)&&(kt=function _(E,M){var R=2<arguments.length&&void 0!==arguments[2]&&arguments[2],U=d(M,"top"),ht=d(M,"left"),ut=R?-1:1;return E.top+=U*ut,E.bottom+=U*ut,E.left+=ht*ut,E.right+=ht*ut,E}(kt,M)),kt}function Q(E){var M=E.nodeName;if("BODY"===M||"HTML"===M)return!1;if("fixed"===n(E,"position"))return!0;var R=l(E);return!!R&&Q(R)}function Z(E){if(!E||!E.parentElement||e())return document.documentElement;for(var M=E.parentElement;M&&"none"===n(M,"transform");)M=M.parentElement;return M||document.documentElement}function j(E,M,R,U){var ht=4<arguments.length&&void 0!==arguments[4]&&arguments[4],ut={top:0,left:0},ct=ht?Z(E):a(E,t(M));if("viewport"===U)ut=function N(E){var M=1<arguments.length&&void 0!==arguments[1]&&arguments[1],R=E.ownerDocument.documentElement,U=F(E,R),ht=ve(R.clientWidth,window.innerWidth||0),ut=ve(R.clientHeight,window.innerHeight||0),ct=M?0:d(R),xt=M?0:d(R,"left");return O({top:ct-U.top+U.marginTop,left:xt-U.left+U.marginLeft,width:ht,height:ut})}(ct,ht);else{var xt;"scrollParent"===U?"BODY"===(xt=c(l(M))).nodeName&&(xt=E.ownerDocument.documentElement):xt="window"===U?E.ownerDocument.documentElement:U;var _t=F(xt,ct,ht);if("HTML"!==xt.nodeName||Q(ct))ut=_t;else{var Ct=w(E.ownerDocument),Rt=Ct.height,kt=Ct.width;ut.top+=_t.top-_t.marginTop,ut.bottom=Rt+_t.top,ut.left+=_t.left-_t.marginLeft,ut.right=kt+_t.left}}var Ft="number"==typeof(R=R||0);return ut.left+=Ft?R:R.left||0,ut.top+=Ft?R:R.top||0,ut.right-=Ft?R:R.right||0,ut.bottom-=Ft?R:R.bottom||0,ut}function v(E){return E.width*E.height}function X(E,M,R,U,ht){var ut=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===E.indexOf("auto"))return E;var ct=j(R,U,ut,ht),xt={top:{width:ct.width,height:M.top-ct.top},right:{width:ct.right-M.right,height:ct.height},bottom:{width:ct.width,height:ct.bottom-M.bottom},left:{width:M.left-ct.left,height:ct.height}},_t=Object.keys(xt).map(function(Ft){return ue({key:Ft},xt[Ft],{area:v(xt[Ft])})}).sort(function(Ft,Gt){return Gt.area-Ft.area}),Ct=_t.filter(function(Ft){return Ft.width>=R.clientWidth&&Ft.height>=R.clientHeight}),Rt=0<Ct.length?Ct[0].key:_t[0].key,kt=E.split("-")[1];return Rt+(kt?"-"+kt:"")}function Y(E,M,R){var U=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return F(R,U?Z(M):a(M,t(R)),U)}function tt(E){var R=E.ownerDocument.defaultView.getComputedStyle(E),U=parseFloat(R.marginTop||0)+parseFloat(R.marginBottom||0),ht=parseFloat(R.marginLeft||0)+parseFloat(R.marginRight||0);return{width:E.offsetWidth+ht,height:E.offsetHeight+U}}function st(E){var M={left:"right",right:"left",bottom:"top",top:"bottom"};return E.replace(/left|right|bottom|top/g,function(R){return M[R]})}function W(E,M,R){R=R.split("-")[0];var U=tt(E),ht={width:U.width,height:U.height},ut=-1!==["right","left"].indexOf(R),ct=ut?"top":"left",xt=ut?"left":"top",_t=ut?"height":"width",Ct=ut?"width":"height";return ht[ct]=M[ct]+M[_t]/2-U[_t]/2,ht[xt]=R===xt?M[xt]-U[Ct]:M[st(xt)],ht}function I(E,M){return Array.prototype.find?E.find(M):E.filter(M)[0]}function lt(E,M,R){var U=void 0===R?E:E.slice(0,function q(E,M,R){if(Array.prototype.findIndex)return E.findIndex(function(ht){return ht[M]===R});var U=I(E,function(ht){return ht[M]===R});return E.indexOf(U)}(E,"name",R));return U.forEach(function(ht){ht.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var ut=ht.function||ht.fn;ht.enabled&&u(ut)&&(M.offsets.popper=O(M.offsets.popper),M.offsets.reference=O(M.offsets.reference),M=ut(M,ht))}),M}function et(){if(!this.state.isDestroyed){var E={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};E.offsets.reference=Y(this.state,this.popper,this.reference,this.options.positionFixed),E.placement=X(this.options.placement,E.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),E.originalPlacement=E.placement,E.positionFixed=this.options.positionFixed,E.offsets.popper=W(this.popper,E.offsets.reference,E.placement),E.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",E=lt(this.modifiers,E),this.state.isCreated?this.options.onUpdate(E):(this.state.isCreated=!0,this.options.onCreate(E))}}function ft(E,M){return E.some(function(R){return R.enabled&&R.name===M})}function pt(E){for(var M=[!1,"ms","Webkit","Moz","O"],R=E.charAt(0).toUpperCase()+E.slice(1),U=0;U<M.length;U++){var ht=M[U],ut=ht?""+ht+R:E;if(typeof document.body.style[ut]<"u")return ut}return null}function H(){return this.state.isDestroyed=!0,ft(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[pt("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function mt(E){var M=E.ownerDocument;return M?M.defaultView:window}function yt(E,M,R,U){var ht="BODY"===E.nodeName,ut=ht?E.ownerDocument.defaultView:E;ut.addEventListener(M,R,{passive:!0}),ht||yt(c(ut.parentNode),M,R,U),U.push(ut)}function G(E,M,R,U){R.updateBound=U,mt(E).addEventListener("resize",R.updateBound,{passive:!0});var ht=c(E);return yt(ht,"scroll",R.updateBound,R.scrollParents),R.scrollElement=ht,R.eventsEnabled=!0,R}function bt(){this.state.eventsEnabled||(this.state=G(this.reference,0,this.state,this.scheduleUpdate))}function Pt(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function vt(E,M){return mt(E).removeEventListener("resize",M.updateBound),M.scrollParents.forEach(function(R){R.removeEventListener("scroll",M.updateBound)}),M.updateBound=null,M.scrollParents=[],M.scrollElement=null,M.eventsEnabled=!1,M}(this.reference,this.state))}function Bt(E){return""!==E&&!isNaN(parseFloat(E))&&isFinite(E)}function Yt(E,M){Object.keys(M).forEach(function(R){var U="";-1!==["width","height","top","right","bottom","left"].indexOf(R)&&Bt(M[R])&&(U="px"),E.style[R]=M[R]+U})}function qt(E,M,R){var U=I(E,function(ct){return ct.name===M}),ht=!!U&&E.some(function(ct){return ct.name===R&&ct.enabled&&ct.order<U.order});if(!ht){var ut="`"+M+"`";console.warn("`"+R+"` modifier is required by "+ut+" modifier in order to work, be sure to include it before "+ut+"!")}return ht}function Ot(E){var M=1<arguments.length&&void 0!==arguments[1]&&arguments[1],R=Ue.indexOf(E),U=Ue.slice(R+1).concat(Ue.slice(0,R));return M?U.reverse():U}var Ce=Math.min,Ke=Math.floor,Ye=Math.round,ve=Math.max,le=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",Ae=function(){for(var E=["Edge","Trident","Firefox"],M=0;M<E.length;M+=1)if(le&&0<=navigator.userAgent.indexOf(E[M]))return 1;return 0}(),jt=le&&window.Promise?function(E){var M=!1;return function(){M||(M=!0,window.Promise.resolve().then(function(){M=!1,E()}))}}:function(E){var M=!1;return function(){M||(M=!0,setTimeout(function(){M=!1,E()},Ae))}},De=le&&!(!window.MSInputMethodContext||!document.documentMode),si=le&&/MSIE 10/.test(navigator.userAgent),mi=function(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")},Pi=function(){function E(M,R){for(var U,ht=0;ht<R.length;ht++)(U=R[ht]).enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(M,U.key,U)}return function(M,R,U){return R&&E(M.prototype,R),U&&E(M,U),M}}(),Ve=function(E,M,R){return M in E?Object.defineProperty(E,M,{value:R,enumerable:!0,configurable:!0,writable:!0}):E[M]=R,E},ue=Object.assign||function(E){for(var M,R=1;R<arguments.length;R++)for(var U in M=arguments[R])Object.prototype.hasOwnProperty.call(M,U)&&(E[U]=M[U]);return E},Pe=le&&/Firefox/i.test(navigator.userAgent),Ie=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Ue=Ie.slice(3),_e=function(){function E(M,R){var U=this,ht=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};mi(this,E),this.scheduleUpdate=function(){return requestAnimationFrame(U.update)},this.update=jt(this.update.bind(this)),this.options=ue({},E.Defaults,ht),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=M&&M.jquery?M[0]:M,this.popper=R&&R.jquery?R[0]:R,this.options.modifiers={},Object.keys(ue({},E.Defaults.modifiers,ht.modifiers)).forEach(function(ct){U.options.modifiers[ct]=ue({},E.Defaults.modifiers[ct]||{},ht.modifiers?ht.modifiers[ct]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(ct){return ue({name:ct},U.options.modifiers[ct])}).sort(function(ct,xt){return ct.order-xt.order}),this.modifiers.forEach(function(ct){ct.enabled&&u(ct.onLoad)&&ct.onLoad(U.reference,U.popper,U.options,ct,U.state)}),this.update();var ut=this.options.eventsEnabled;ut&&this.enableEventListeners(),this.state.eventsEnabled=ut}return Pi(E,[{key:"update",value:function(){return et.call(this)}},{key:"destroy",value:function(){return H.call(this)}},{key:"enableEventListeners",value:function(){return bt.call(this)}},{key:"disableEventListeners",value:function(){return Pt.call(this)}}]),E}();return _e.Utils=(typeof window>"u"?global:window).PopperUtils,_e.placements=Ie,_e.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(E){var M=E.placement,R=M.split("-")[0],U=M.split("-")[1];if(U){var ht=E.offsets,ut=ht.reference,ct=ht.popper,xt=-1!==["bottom","top"].indexOf(R),_t=xt?"left":"top",Ct=xt?"width":"height",Rt={start:Ve({},_t,ut[_t]),end:Ve({},_t,ut[_t]+ut[Ct]-ct[Ct])};E.offsets.popper=ue({},ct,Rt[U])}return E}},offset:{order:200,enabled:!0,fn:function Wt(E,M){var R,U=M.offset,ut=E.offsets,ct=ut.popper,xt=ut.reference,_t=E.placement.split("-")[0];return R=Bt(+U)?[+U,0]:function Be(E,M,R,U){var ht=[0,0],ut=-1!==["right","left"].indexOf(U),ct=E.split(/(\+|\-)/).map(function(Rt){return Rt.trim()}),xt=ct.indexOf(I(ct,function(Rt){return-1!==Rt.search(/,|\s/)}));ct[xt]&&-1===ct[xt].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var _t=/\s*,\s*|\s+/,Ct=-1===xt?[ct]:[ct.slice(0,xt).concat([ct[xt].split(_t)[0]]),[ct[xt].split(_t)[1]].concat(ct.slice(xt+1))];return Ct=Ct.map(function(Rt,kt){var Ft=(1===kt?!ut:ut)?"height":"width",Gt=!1;return Rt.reduce(function(Qt,je){return""===Qt[Qt.length-1]&&-1!==["+","-"].indexOf(je)?(Qt[Qt.length-1]=je,Gt=!0,Qt):Gt?(Qt[Qt.length-1]+=je,Gt=!1,Qt):Qt.concat(je)},[]).map(function(Qt){return function ri(E,M,R,U){var ht=E.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),ut=+ht[1],ct=ht[2];return ut?0===ct.indexOf("%")?O("%p"===ct?R:U)[M]/100*ut:"vh"===ct||"vw"===ct?("vh"===ct?ve(document.documentElement.clientHeight,window.innerHeight||0):ve(document.documentElement.clientWidth,window.innerWidth||0))/100*ut:ut:E}(Qt,Ft,M,R)})}),Ct.forEach(function(Rt,kt){Rt.forEach(function(Ft,Gt){Bt(Ft)&&(ht[kt]+=Ft*("-"===Rt[Gt-1]?-1:1))})}),ht}(U,ct,xt,_t),"left"===_t?(ct.top+=R[0],ct.left-=R[1]):"right"===_t?(ct.top+=R[0],ct.left+=R[1]):"top"===_t?(ct.left+=R[0],ct.top-=R[1]):"bottom"===_t&&(ct.left+=R[0],ct.top+=R[1]),E.popper=ct,E},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(E,M){var R=M.boundariesElement||i(E.instance.popper);E.instance.reference===R&&(R=i(R));var U=pt("transform"),ht=E.instance.popper.style,ut=ht.top,ct=ht.left,xt=ht[U];ht.top="",ht.left="",ht[U]="";var _t=j(E.instance.popper,E.instance.reference,M.padding,R,E.positionFixed);ht.top=ut,ht.left=ct,ht[U]=xt,M.boundaries=_t;var Rt=E.offsets.popper,kt={primary:function(Ft){var Gt=Rt[Ft];return Rt[Ft]<_t[Ft]&&!M.escapeWithReference&&(Gt=ve(Rt[Ft],_t[Ft])),Ve({},Ft,Gt)},secondary:function(Ft){var Gt="right"===Ft?"left":"top",Qt=Rt[Gt];return Rt[Ft]>_t[Ft]&&!M.escapeWithReference&&(Qt=Ce(Rt[Gt],_t[Ft]-("right"===Ft?Rt.width:Rt.height))),Ve({},Gt,Qt)}};return M.priority.forEach(function(Ft){var Gt=-1===["left","top"].indexOf(Ft)?"secondary":"primary";Rt=ue({},Rt,kt[Gt](Ft))}),E.offsets.popper=Rt,E},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(E){var M=E.offsets,R=M.popper,U=M.reference,ht=E.placement.split("-")[0],ut=Ke,ct=-1!==["top","bottom"].indexOf(ht),xt=ct?"right":"bottom",_t=ct?"left":"top",Ct=ct?"width":"height";return R[xt]<ut(U[_t])&&(E.offsets.popper[_t]=ut(U[_t])-R[Ct]),R[_t]>ut(U[xt])&&(E.offsets.popper[_t]=ut(U[xt])),E}},arrow:{order:500,enabled:!0,fn:function(E,M){var R;if(!qt(E.instance.modifiers,"arrow","keepTogether"))return E;var U=M.element;if("string"==typeof U){if(!(U=E.instance.popper.querySelector(U)))return E}else if(!E.instance.popper.contains(U))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),E;var ht=E.placement.split("-")[0],ut=E.offsets,ct=ut.popper,xt=ut.reference,_t=-1!==["left","right"].indexOf(ht),Ct=_t?"height":"width",Rt=_t?"Top":"Left",kt=Rt.toLowerCase(),Ft=_t?"left":"top",Gt=_t?"bottom":"right",Qt=tt(U)[Ct];xt[Gt]-Qt<ct[kt]&&(E.offsets.popper[kt]-=ct[kt]-(xt[Gt]-Qt)),xt[kt]+Qt>ct[Gt]&&(E.offsets.popper[kt]+=xt[kt]+Qt-ct[Gt]),E.offsets.popper=O(E.offsets.popper);var je=xt[kt]+xt[Ct]/2-Qt/2,oi=n(E.instance.popper),hi=parseFloat(oi["margin"+Rt]),qe=parseFloat(oi["border"+Rt+"Width"]),Me=je-E.offsets.popper[kt]-hi-qe;return Me=ve(Ce(ct[Ct]-Qt,Me),0),E.arrowElement=U,E.offsets.arrow=(Ve(R={},kt,Ye(Me)),Ve(R,Ft,""),R),E},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(E,M){if(ft(E.instance.modifiers,"inner")||E.flipped&&E.placement===E.originalPlacement)return E;var R=j(E.instance.popper,E.instance.reference,M.padding,M.boundariesElement,E.positionFixed),U=E.placement.split("-")[0],ht=st(U),ut=E.placement.split("-")[1]||"",ct=[];switch(M.behavior){case"flip":ct=[U,ht];break;case"clockwise":ct=Ot(U);break;case"counterclockwise":ct=Ot(U,!0);break;default:ct=M.behavior}return ct.forEach(function(xt,_t){if(U!==xt||ct.length===_t+1)return E;U=E.placement.split("-")[0],ht=st(U);var Ct=E.offsets.popper,Rt=E.offsets.reference,kt=Ke,Ft="left"===U&&kt(Ct.right)>kt(Rt.left)||"right"===U&&kt(Ct.left)<kt(Rt.right)||"top"===U&&kt(Ct.bottom)>kt(Rt.top)||"bottom"===U&&kt(Ct.top)<kt(Rt.bottom),Gt=kt(Ct.left)<kt(R.left),Qt=kt(Ct.right)>kt(R.right),je=kt(Ct.top)<kt(R.top),oi=kt(Ct.bottom)>kt(R.bottom),hi="left"===U&&Gt||"right"===U&&Qt||"top"===U&&je||"bottom"===U&&oi,qe=-1!==["top","bottom"].indexOf(U),qi=!!M.flipVariations&&(qe&&"start"===ut&&Gt||qe&&"end"===ut&&Qt||!qe&&"start"===ut&&je||!qe&&"end"===ut&&oi)||!!M.flipVariationsByContent&&(qe&&"start"===ut&&Qt||qe&&"end"===ut&&Gt||!qe&&"start"===ut&&oi||!qe&&"end"===ut&&je);(Ft||hi||qi)&&(E.flipped=!0,(Ft||hi)&&(U=ct[_t+1]),qi&&(ut=function he(E){return"end"===E?"start":"start"===E?"end":E}(ut)),E.placement=U+(ut?"-"+ut:""),E.offsets.popper=ue({},E.offsets.popper,W(E.instance.popper,E.offsets.reference,E.placement)),E=lt(E.instance.modifiers,E,"flip"))}),E},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(E){var M=E.placement,R=M.split("-")[0],U=E.offsets,ht=U.popper,ut=U.reference,ct=-1!==["left","right"].indexOf(R),xt=-1===["top","left"].indexOf(R);return ht[ct?"left":"top"]=ut[R]-(xt?ht[ct?"width":"height"]:0),E.placement=st(M),E.offsets.popper=O(ht),E}},hide:{order:800,enabled:!0,fn:function(E){if(!qt(E.instance.modifiers,"hide","preventOverflow"))return E;var M=E.offsets.reference,R=I(E.instance.modifiers,function(U){return"preventOverflow"===U.name}).boundaries;if(M.bottom<R.top||M.left>R.right||M.top>R.bottom||M.right<R.left){if(!0===E.hide)return E;E.hide=!0,E.attributes["x-out-of-boundaries"]=""}else{if(!1===E.hide)return E;E.hide=!1,E.attributes["x-out-of-boundaries"]=!1}return E}},computeStyle:{order:850,enabled:!0,fn:function(E,M){var R=M.x,U=M.y,ht=E.offsets.popper,ut=I(E.instance.modifiers,function(Me){return"applyStyle"===Me.name}).gpuAcceleration;void 0!==ut&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var ct,xt,_t=void 0===ut?M.gpuAcceleration:ut,Ct=i(E.instance.popper),Rt=A(Ct),kt={position:ht.position},Ft=function ne(E,M){var R=E.offsets,U=R.popper,ut=Ye,ct=function(Gt){return Gt},xt=ut(R.reference.width),_t=ut(U.width),Ct=-1!==["left","right"].indexOf(E.placement),Rt=-1!==E.placement.indexOf("-"),kt=M?Ct||Rt||xt%2==_t%2?ut:Ke:ct,Ft=M?ut:ct;return{left:kt(xt%2==1&&_t%2==1&&!Rt&&M?U.left-1:U.left),top:Ft(U.top),bottom:Ft(U.bottom),right:kt(U.right)}}(E,2>window.devicePixelRatio||!Pe),Gt="bottom"===R?"top":"bottom",Qt="right"===U?"left":"right",je=pt("transform");if(xt="bottom"==Gt?"HTML"===Ct.nodeName?-Ct.clientHeight+Ft.bottom:-Rt.height+Ft.bottom:Ft.top,ct="right"==Qt?"HTML"===Ct.nodeName?-Ct.clientWidth+Ft.right:-Rt.width+Ft.right:Ft.left,_t&&je)kt[je]="translate3d("+ct+"px, "+xt+"px, 0)",kt[Gt]=0,kt[Qt]=0,kt.willChange="transform";else{var hi="right"==Qt?-1:1;kt[Gt]=xt*("bottom"==Gt?-1:1),kt[Qt]=ct*hi,kt.willChange=Gt+", "+Qt}return E.attributes=ue({},{"x-placement":E.placement},E.attributes),E.styles=ue({},kt,E.styles),E.arrowStyles=ue({},E.offsets.arrow,E.arrowStyles),E},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(E){return Yt(E.instance.popper,E.styles),function me(E,M){Object.keys(M).forEach(function(R){!1===M[R]?E.removeAttribute(R):E.setAttribute(R,M[R])})}(E.instance.popper,E.attributes),E.arrowElement&&Object.keys(E.arrowStyles).length&&Yt(E.arrowElement,E.arrowStyles),E},onLoad:function(E,M,R,U,ht){var ut=Y(ht,M,E,R.positionFixed),ct=X(R.placement,ut,M,E,R.modifiers.flip.boundariesElement,R.modifiers.flip.padding);return M.setAttribute("x-placement",ct),Yt(M,{position:R.positionFixed?"fixed":"absolute"}),R},gpuAcceleration:void 0}}},_e}),function(u,n){"object"==typeof exports&&typeof module<"u"?module.exports=n(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],n):(u=typeof globalThis<"u"?globalThis:u||self).bootstrap=n(u.Popper)}(this,function(u){"use strict";const l=function n(g){if(g&&g.__esModule)return g;const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(g)for(const m in g)if("default"!==m){const y=Object.getOwnPropertyDescriptor(g,m);Object.defineProperty(r,m,y.get?y:{enumerable:!0,get:()=>g[m]})}return r.default=g,Object.freeze(r)}(u),c="transitionend",t=g=>{let r=g.getAttribute("data-bs-target");if(!r||"#"===r){let m=g.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),r=m&&"#"!==m?m.trim():null}return r},e=g=>{const r=t(g);return r&&document.querySelector(r)?r:null},i=g=>{const r=t(g);return r?document.querySelector(r):null},o=g=>{g.dispatchEvent(new Event(c))},s=g=>!(!g||"object"!=typeof g)&&(void 0!==g.jquery&&(g=g[0]),void 0!==g.nodeType),a=g=>s(g)?g.jquery?g[0]:g:"string"==typeof g&&g.length>0?document.querySelector(g):null,d=g=>{if(!s(g)||0===g.getClientRects().length)return!1;const r="visible"===getComputedStyle(g).getPropertyValue("visibility"),m=g.closest("details:not([open])");if(!m)return r;if(m!==g){const y=g.closest("summary");if(y&&y.parentNode!==m||null===y)return!1}return r},_=g=>!g||g.nodeType!==Node.ELEMENT_NODE||!!g.classList.contains("disabled")||(void 0!==g.disabled?g.disabled:g.hasAttribute("disabled")&&"false"!==g.getAttribute("disabled")),b=g=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof g.getRootNode){const r=g.getRootNode();return r instanceof ShadowRoot?r:null}return g instanceof ShadowRoot?g:g.parentNode?b(g.parentNode):null},C=()=>{},O=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,A=[],F=()=>"rtl"===document.documentElement.dir,N=g=>{var r;r=()=>{const m=O();if(m){const y=g.NAME,T=m.fn[y];m.fn[y]=g.jQueryInterface,m.fn[y].Constructor=g,m.fn[y].noConflict=()=>(m.fn[y]=T,g.jQueryInterface)}},"loading"===document.readyState?(A.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of A)m()}),A.push(r)):r()},Q=g=>{"function"==typeof g&&g()},Z=(g,r,m=!0)=>{if(!m)return void Q(g);const y=(P=>{if(!P)return 0;let{transitionDuration:B,transitionDelay:K}=window.getComputedStyle(P);const nt=Number.parseFloat(B),J=Number.parseFloat(K);return nt||J?(B=B.split(",")[0],K=K.split(",")[0],1e3*(Number.parseFloat(B)+Number.parseFloat(K))):0})(r)+5;let T=!1;const D=({target:P})=>{P===r&&(T=!0,r.removeEventListener(c,D),Q(g))};r.addEventListener(c,D),setTimeout(()=>{T||o(r)},y)},j=(g,r,m,y)=>{const T=g.length;let D=g.indexOf(r);return-1===D?!m&&y?g[T-1]:g[0]:(D+=m?1:-1,y&&(D=(D+T)%T),g[Math.max(0,Math.min(D,T-1))])},v=/[^.]*(?=\..*)\.|.*/,X=/\..*/,Y=/::\d+$/,tt={};let st=1;const W={mouseenter:"mouseover",mouseleave:"mouseout"},I=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function q(g,r){return r&&`${r}::${st++}`||g.uidEvent||st++}function lt(g){const r=q(g);return g.uidEvent=r,tt[r]=tt[r]||{},tt[r]}function et(g,r,m=null){return Object.values(g).find(y=>y.callable===r&&y.delegationSelector===m)}function ft(g,r,m){const y="string"==typeof r,T=y?m:r||m;let D=yt(g);return I.has(D)||(D=g),[y,T,D]}function pt(g,r,m,y,T){if("string"!=typeof r||!g)return;let[D,P,B]=ft(r,m,y);var Ht;r in W&&(Ht=P,P=function(oe){if(!oe.relatedTarget||oe.relatedTarget!==oe.delegateTarget&&!oe.delegateTarget.contains(oe.relatedTarget))return Ht.call(this,oe)});const K=lt(g),nt=K[B]||(K[B]={}),J=et(nt,P,D?m:null);if(J)return void(J.oneOff=J.oneOff&&T);const at=q(P,r.replace(v,"")),Dt=D?function(Nt,Ht,oe){return function Te(ti){const ki=Nt.querySelectorAll(Ht);for(let{target:$t}=ti;$t&&$t!==this;$t=$t.parentNode)for(const Yi of ki)if(Yi===$t)return bt(ti,{delegateTarget:$t}),Te.oneOff&&G.off(Nt,ti.type,Ht,oe),oe.apply($t,[ti])}}(g,m,P):function(Nt,Ht){return function oe(Te){return bt(Te,{delegateTarget:Nt}),oe.oneOff&&G.off(Nt,Te.type,Ht),Ht.apply(Nt,[Te])}}(g,P);Dt.delegationSelector=D?m:null,Dt.callable=P,Dt.oneOff=T,Dt.uidEvent=at,nt[at]=Dt,g.addEventListener(B,Dt,D)}function H(g,r,m,y,T){const D=et(r[m],y,T);D&&(g.removeEventListener(m,D,Boolean(T)),delete r[m][D.uidEvent])}function mt(g,r,m,y){const T=r[m]||{};for(const D of Object.keys(T))if(D.includes(y)){const P=T[D];H(g,r,m,P.callable,P.delegationSelector)}}function yt(g){return g=g.replace(X,""),W[g]||g}const G={on(g,r,m,y){pt(g,r,m,y,!1)},one(g,r,m,y){pt(g,r,m,y,!0)},off(g,r,m,y){if("string"!=typeof r||!g)return;const[T,D,P]=ft(r,m,y),B=P!==r,K=lt(g),nt=K[P]||{},J=r.startsWith(".");if(void 0===D){if(J)for(const at of Object.keys(K))mt(g,K,at,r.slice(1));for(const at of Object.keys(nt)){const Dt=at.replace(Y,"");if(!B||r.includes(Dt)){const Nt=nt[at];H(g,K,P,Nt.callable,Nt.delegationSelector)}}}else{if(!Object.keys(nt).length)return;H(g,K,P,D,T?m:null)}},trigger(g,r,m){if("string"!=typeof r||!g)return null;const y=O();let T=null,D=!0,P=!0,B=!1;r!==yt(r)&&y&&(T=y.Event(r,m),y(g).trigger(T),D=!T.isPropagationStopped(),P=!T.isImmediatePropagationStopped(),B=T.isDefaultPrevented());let K=new Event(r,{bubbles:D,cancelable:!0});return K=bt(K,m),B&&K.preventDefault(),P&&g.dispatchEvent(K),K.defaultPrevented&&T&&T.preventDefault(),K}};function bt(g,r){for(const[m,y]of Object.entries(r||{}))try{g[m]=y}catch{Object.defineProperty(g,m,{configurable:!0,get:()=>y})}return g}const vt=new Map,Pt={set(g,r,m){vt.has(g)||vt.set(g,new Map);const y=vt.get(g);y.has(r)||0===y.size?y.set(r,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(y.keys())[0]}.`)},get:(g,r)=>vt.has(g)&&vt.get(g).get(r)||null,remove(g,r){if(!vt.has(g))return;const m=vt.get(g);m.delete(r),0===m.size&&vt.delete(g)}};function Bt(g){if("true"===g)return!0;if("false"===g)return!1;if(g===Number(g).toString())return Number(g);if(""===g||"null"===g)return null;if("string"!=typeof g)return g;try{return JSON.parse(decodeURIComponent(g))}catch{return g}}function Yt(g){return g.replace(/[A-Z]/g,r=>`-${r.toLowerCase()}`)}const me={setDataAttribute(g,r,m){g.setAttribute(`data-bs-${Yt(r)}`,m)},removeDataAttribute(g,r){g.removeAttribute(`data-bs-${Yt(r)}`)},getDataAttributes(g){if(!g)return{};const r={},m=Object.keys(g.dataset).filter(y=>y.startsWith("bs")&&!y.startsWith("bsConfig"));for(const y of m){let T=y.replace(/^bs/,"");T=T.charAt(0).toLowerCase()+T.slice(1,T.length),r[T]=Bt(g.dataset[y])}return r},getDataAttribute:(g,r)=>Bt(g.getAttribute(`data-bs-${Yt(r)}`))};class ne{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(r){return r=this._mergeConfigObj(r),r=this._configAfterMerge(r),this._typeCheckConfig(r),r}_configAfterMerge(r){return r}_mergeConfigObj(r,m){const y=s(m)?me.getDataAttribute(m,"config"):{};return{...this.constructor.Default,..."object"==typeof y?y:{},...s(m)?me.getDataAttributes(m):{},..."object"==typeof r?r:{}}}_typeCheckConfig(r,m=this.constructor.DefaultType){for(const T of Object.keys(m)){const D=m[T],P=r[T],B=s(P)?"element":null==(y=P)?`${y}`:Object.prototype.toString.call(y).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(D).test(B))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${T}" provided type "${B}" but expected type "${D}".`)}var y}}class qt extends ne{constructor(r,m){super(),(r=a(r))&&(this._element=r,this._config=this._getConfig(m),Pt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Pt.remove(this._element,this.constructor.DATA_KEY),G.off(this._element,this.constructor.EVENT_KEY);for(const r of Object.getOwnPropertyNames(this))this[r]=null}_queueCallback(r,m,y=!0){Z(r,m,y)}_getConfig(r){return r=this._mergeConfigObj(r,this._element),r=this._configAfterMerge(r),this._typeCheckConfig(r),r}static getInstance(r){return Pt.get(a(r),this.DATA_KEY)}static getOrCreateInstance(r,m={}){return this.getInstance(r)||new this(r,"object"==typeof m?m:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(r){return`${r}${this.EVENT_KEY}`}}const he=(g,r="hide")=>{const y=g.NAME;G.on(document,`click.dismiss${g.EVENT_KEY}`,`[data-bs-dismiss="${y}"]`,function(T){if(["A","AREA"].includes(this.tagName)&&T.preventDefault(),_(this))return;const D=i(this)||this.closest(`.${y}`);g.getOrCreateInstance(D)[r]()})};class Ot extends qt{static get NAME(){return"alert"}close(){if(G.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const r=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),G.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(r){return this.each(function(){const m=Ot.getOrCreateInstance(this);if("string"==typeof r){if(void 0===m[r]||r.startsWith("_")||"constructor"===r)throw new TypeError(`No method named "${r}"`);m[r](this)}})}}he(Ot,"close"),N(Ot);const ri='[data-bs-toggle="button"]';class Be extends qt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(r){return this.each(function(){const m=Be.getOrCreateInstance(this);"toggle"===r&&m[r]()})}}G.on(document,"click.bs.button.data-api",ri,g=>{g.preventDefault();const r=g.target.closest(ri);Be.getOrCreateInstance(r).toggle()}),N(Be);const Wt={find:(g,r=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(r,g)),findOne:(g,r=document.documentElement)=>Element.prototype.querySelector.call(r,g),children:(g,r)=>[].concat(...g.children).filter(m=>m.matches(r)),parents(g,r){const m=[];let y=g.parentNode.closest(r);for(;y;)m.push(y),y=y.parentNode.closest(r);return m},prev(g,r){let m=g.previousElementSibling;for(;m;){if(m.matches(r))return[m];m=m.previousElementSibling}return[]},next(g,r){let m=g.nextElementSibling;for(;m;){if(m.matches(r))return[m];m=m.nextElementSibling}return[]},focusableChildren(g){const r=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(r,g).filter(m=>!_(m)&&d(m))}},Ce={endCallback:null,leftCallback:null,rightCallback:null},Ke={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ye extends ne{constructor(r,m){super(),this._element=r,r&&Ye.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Ce}static get DefaultType(){return Ke}static get NAME(){return"swipe"}dispose(){G.off(this._element,".bs.swipe")}_start(r){this._supportPointerEvents?this._eventIsPointerPenTouch(r)&&(this._deltaX=r.clientX):this._deltaX=r.touches[0].clientX}_end(r){this._eventIsPointerPenTouch(r)&&(this._deltaX=r.clientX-this._deltaX),this._handleSwipe(),Q(this._config.endCallback)}_move(r){this._deltaX=r.touches&&r.touches.length>1?0:r.touches[0].clientX-this._deltaX}_handleSwipe(){const r=Math.abs(this._deltaX);if(r<=40)return;const m=r/this._deltaX;this._deltaX=0,m&&Q(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(G.on(this._element,"pointerdown.bs.swipe",r=>this._start(r)),G.on(this._element,"pointerup.bs.swipe",r=>this._end(r)),this._element.classList.add("pointer-event")):(G.on(this._element,"touchstart.bs.swipe",r=>this._start(r)),G.on(this._element,"touchmove.bs.swipe",r=>this._move(r)),G.on(this._element,"touchend.bs.swipe",r=>this._end(r)))}_eventIsPointerPenTouch(r){return this._supportPointerEvents&&("pen"===r.pointerType||"touch"===r.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ve="next",le="prev",Ae="left",ke="right",jt="slid.bs.carousel",De="carousel",si="active",mi={ArrowLeft:ke,ArrowRight:Ae},Pi={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ve={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ue extends qt{constructor(r,m){super(r,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Wt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===De&&this.cycle()}static get Default(){return Pi}static get DefaultType(){return Ve}static get NAME(){return"carousel"}next(){this._slide(ve)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(le)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?G.one(this._element,jt,()=>this.cycle()):this.cycle())}to(r){const m=this._getItems();if(r>m.length-1||r<0)return;if(this._isSliding)return void G.one(this._element,jt,()=>this.to(r));const y=this._getItemIndex(this._getActive());y!==r&&this._slide(r>y?ve:le,m[r])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(r){return r.defaultInterval=r.interval,r}_addEventListeners(){this._config.keyboard&&G.on(this._element,"keydown.bs.carousel",r=>this._keydown(r)),"hover"===this._config.pause&&(G.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),G.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Ye.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of Wt.find(".carousel-item img",this._element))G.on(m,"dragstart.bs.carousel",y=>y.preventDefault());this._swipeHelper=new Ye(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Ae)),rightCallback:()=>this._slide(this._directionToOrder(ke)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(r){if(/input|textarea/i.test(r.target.tagName))return;const m=mi[r.key];m&&(r.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(r){return this._getItems().indexOf(r)}_setActiveIndicatorElement(r){if(!this._indicatorsElement)return;const m=Wt.findOne(".active",this._indicatorsElement);m.classList.remove(si),m.removeAttribute("aria-current");const y=Wt.findOne(`[data-bs-slide-to="${r}"]`,this._indicatorsElement);y&&(y.classList.add(si),y.setAttribute("aria-current","true"))}_updateInterval(){const r=this._activeElement||this._getActive();if(!r)return;const m=Number.parseInt(r.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(r,m=null){if(this._isSliding)return;const y=this._getActive(),T=r===ve,D=m||j(this._getItems(),y,T,this._config.wrap);if(D===y)return;const P=this._getItemIndex(D),B=at=>G.trigger(this._element,at,{relatedTarget:D,direction:this._orderToDirection(r),from:this._getItemIndex(y),to:P});if(B("slide.bs.carousel").defaultPrevented||!y||!D)return;const K=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(P),this._activeElement=D;const nt=T?"carousel-item-start":"carousel-item-end",J=T?"carousel-item-next":"carousel-item-prev";D.classList.add(J),y.classList.add(nt),D.classList.add(nt),this._queueCallback(()=>{D.classList.remove(nt,J),D.classList.add(si),y.classList.remove(si,J,nt),this._isSliding=!1,B(jt)},y,this._isAnimated()),K&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Wt.findOne(".active.carousel-item",this._element)}_getItems(){return Wt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(r){return F()?r===Ae?le:ve:r===Ae?ve:le}_orderToDirection(r){return F()?r===le?Ae:ke:r===le?ke:Ae}static jQueryInterface(r){return this.each(function(){const m=ue.getOrCreateInstance(this,r);if("number"!=typeof r){if("string"==typeof r){if(void 0===m[r]||r.startsWith("_")||"constructor"===r)throw new TypeError(`No method named "${r}"`);m[r]()}}else m.to(r)})}}G.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(g){const r=i(this);if(!r||!r.classList.contains(De))return;g.preventDefault();const m=ue.getOrCreateInstance(r),y=this.getAttribute("data-bs-slide-to");return y?(m.to(y),void m._maybeEnableCycle()):"next"===me.getDataAttribute(this,"slide")?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),G.on(window,"load.bs.carousel.data-api",()=>{const g=Wt.find('[data-bs-ride="carousel"]');for(const r of g)ue.getOrCreateInstance(r)}),N(ue);const Pe="show",Ie="collapse",Ue="collapsing",Ge='[data-bs-toggle="collapse"]',_e={parent:null,toggle:!0},E={parent:"(null|element)",toggle:"boolean"};class M extends qt{constructor(r,m){super(r,m),this._isTransitioning=!1,this._triggerArray=[];const y=Wt.find(Ge);for(const T of y){const D=e(T),P=Wt.find(D).filter(B=>B===this._element);null!==D&&P.length&&this._triggerArray.push(T)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return _e}static get DefaultType(){return E}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let r=[];if(this._config.parent&&(r=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(T=>T!==this._element).map(T=>M.getOrCreateInstance(T,{toggle:!1}))),r.length&&r[0]._isTransitioning||G.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const T of r)T.hide();const m=this._getDimension();this._element.classList.remove(Ie),this._element.classList.add(Ue),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const y=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ue),this._element.classList.add(Ie,Pe),this._element.style[m]="",G.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[m]=`${this._element[y]}px`}hide(){if(this._isTransitioning||!this._isShown()||G.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,this._element.classList.add(Ue),this._element.classList.remove(Ie,Pe);for(const m of this._triggerArray){const y=i(m);y&&!this._isShown(y)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[r]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ue),this._element.classList.add(Ie),G.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(r=this._element){return r.classList.contains(Pe)}_configAfterMerge(r){return r.toggle=Boolean(r.toggle),r.parent=a(r.parent),r}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const r=this._getFirstLevelChildren(Ge);for(const m of r){const y=i(m);y&&this._addAriaAndCollapsedClass([m],this._isShown(y))}}_getFirstLevelChildren(r){const m=Wt.find(":scope .collapse .collapse",this._config.parent);return Wt.find(r,this._config.parent).filter(y=>!m.includes(y))}_addAriaAndCollapsedClass(r,m){if(r.length)for(const y of r)y.classList.toggle("collapsed",!m),y.setAttribute("aria-expanded",m)}static jQueryInterface(r){const m={};return"string"==typeof r&&/show|hide/.test(r)&&(m.toggle=!1),this.each(function(){const y=M.getOrCreateInstance(this,m);if("string"==typeof r){if(void 0===y[r])throw new TypeError(`No method named "${r}"`);y[r]()}})}}G.on(document,"click.bs.collapse.data-api",Ge,function(g){("A"===g.target.tagName||g.delegateTarget&&"A"===g.delegateTarget.tagName)&&g.preventDefault();const r=e(this),m=Wt.find(r);for(const y of m)M.getOrCreateInstance(y,{toggle:!1}).toggle()}),N(M);const R="dropdown",U="ArrowUp",ht="ArrowDown",ut="click.bs.dropdown.data-api",ct="keydown.bs.dropdown.data-api",xt="show",_t='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ct=`${_t}.show`,Rt=".dropdown-menu",kt=F()?"top-end":"top-start",Ft=F()?"top-start":"top-end",Gt=F()?"bottom-end":"bottom-start",Qt=F()?"bottom-start":"bottom-end",je=F()?"left-start":"right-start",oi=F()?"right-start":"left-start",hi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},qe={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Me extends qt{constructor(r,m){super(r,m),this._popper=null,this._parent=this._element.parentNode,this._menu=Wt.next(this._element,Rt)[0]||Wt.prev(this._element,Rt)[0]||Wt.findOne(Rt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return hi}static get DefaultType(){return qe}static get NAME(){return R}toggle(){return this._isShown()?this.hide():this.show()}show(){if(_(this._element)||this._isShown())return;const r={relatedTarget:this._element};if(!G.trigger(this._element,"show.bs.dropdown",r).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))G.on(m,"mouseover",C);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(xt),this._element.classList.add(xt),G.trigger(this._element,"shown.bs.dropdown",r)}}hide(){!_(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(r){if(!G.trigger(this._element,"hide.bs.dropdown",r).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))G.off(m,"mouseover",C);this._popper&&this._popper.destroy(),this._menu.classList.remove(xt),this._element.classList.remove(xt),this._element.setAttribute("aria-expanded","false"),me.removeDataAttribute(this._menu,"popper"),G.trigger(this._element,"hidden.bs.dropdown",r)}}_getConfig(r){if("object"==typeof(r=super._getConfig(r)).reference&&!s(r.reference)&&"function"!=typeof r.reference.getBoundingClientRect)throw new TypeError(`${R.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return r}_createPopper(){if(void 0===l)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let r=this._element;"parent"===this._config.reference?r=this._parent:s(this._config.reference)?r=a(this._config.reference):"object"==typeof this._config.reference&&(r=this._config.reference);const m=this._getPopperConfig();this._popper=l.createPopper(r,this._menu,m)}_isShown(){return this._menu.classList.contains(xt)}_getPlacement(){const r=this._parent;if(r.classList.contains("dropend"))return je;if(r.classList.contains("dropstart"))return oi;if(r.classList.contains("dropup-center"))return"top";if(r.classList.contains("dropdown-center"))return"bottom";const m="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return r.classList.contains("dropup")?m?Ft:kt:m?Qt:Gt}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:r}=this._config;return"string"==typeof r?r.split(",").map(m=>Number.parseInt(m,10)):"function"==typeof r?m=>r(m,this._element):r}_getPopperConfig(){const r={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(me.setDataAttribute(this._menu,"popper","static"),r.modifiers=[{name:"applyStyles",enabled:!1}]),{...r,..."function"==typeof this._config.popperConfig?this._config.popperConfig(r):this._config.popperConfig}}_selectMenuItem({key:r,target:m}){const y=Wt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(T=>d(T));y.length&&j(y,m,r===ht,!y.includes(m)).focus()}static jQueryInterface(r){return this.each(function(){const m=Me.getOrCreateInstance(this,r);if("string"==typeof r){if(void 0===m[r])throw new TypeError(`No method named "${r}"`);m[r]()}})}static clearMenus(r){if(2===r.button||"keyup"===r.type&&"Tab"!==r.key)return;const m=Wt.find(Ct);for(const y of m){const T=Me.getInstance(y);if(!T||!1===T._config.autoClose)continue;const D=r.composedPath(),P=D.includes(T._menu);if(D.includes(T._element)||"inside"===T._config.autoClose&&!P||"outside"===T._config.autoClose&&P||T._menu.contains(r.target)&&("keyup"===r.type&&"Tab"===r.key||/input|select|option|textarea|form/i.test(r.target.tagName)))continue;const B={relatedTarget:T._element};"click"===r.type&&(B.clickEvent=r),T._completeHide(B)}}static dataApiKeydownHandler(r){const m=/input|textarea/i.test(r.target.tagName),y="Escape"===r.key,T=[U,ht].includes(r.key);if(!T&&!y||m&&!y)return;r.preventDefault();const D=this.matches(_t)?this:Wt.prev(this,_t)[0]||Wt.next(this,_t)[0]||Wt.findOne(_t,r.delegateTarget.parentNode),P=Me.getOrCreateInstance(D);if(T)return r.stopPropagation(),P.show(),void P._selectMenuItem(r);P._isShown()&&(r.stopPropagation(),P.hide(),D.focus())}}G.on(document,ct,_t,Me.dataApiKeydownHandler),G.on(document,ct,Rt,Me.dataApiKeydownHandler),G.on(document,ut,Me.clearMenus),G.on(document,"keyup.bs.dropdown.data-api",Me.clearMenus),G.on(document,ut,_t,function(g){g.preventDefault(),Me.getOrCreateInstance(this).toggle()}),N(Me);const pn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qi=".sticky-top",gn="padding-right",vi="margin-right";class $e{constructor(){this._element=document.body}getWidth(){const r=document.documentElement.clientWidth;return Math.abs(window.innerWidth-r)}hide(){const r=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,gn,m=>m+r),this._setElementAttributes(pn,gn,m=>m+r),this._setElementAttributes(qi,vi,m=>m-r)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,gn),this._resetElementAttributes(pn,gn),this._resetElementAttributes(qi,vi)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(r,m,y){const T=this.getWidth();this._applyManipulationCallback(r,D=>{if(D!==this._element&&window.innerWidth>D.clientWidth+T)return;this._saveInitialAttribute(D,m);const P=window.getComputedStyle(D).getPropertyValue(m);D.style.setProperty(m,`${y(Number.parseFloat(P))}px`)})}_saveInitialAttribute(r,m){const y=r.style.getPropertyValue(m);y&&me.setDataAttribute(r,m,y)}_resetElementAttributes(r,m){this._applyManipulationCallback(r,y=>{const T=me.getDataAttribute(y,m);null!==T?(me.removeDataAttribute(y,m),y.style.setProperty(m,T)):y.style.removeProperty(m)})}_applyManipulationCallback(r,m){if(s(r))m(r);else for(const y of Wt.find(r,this._element))m(y)}}const Qe="mousedown.bs.backdrop",mn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},vn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Je extends ne{constructor(r){super(),this._config=this._getConfig(r),this._isAppended=!1,this._element=null}static get Default(){return mn}static get DefaultType(){return vn}static get NAME(){return"backdrop"}show(r){if(!this._config.isVisible)return void Q(r);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{Q(r)})}hide(r){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),Q(r)})):Q(r)}dispose(){this._isAppended&&(G.off(this._element,Qe),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const r=document.createElement("div");r.className=this._config.className,this._config.isAnimated&&r.classList.add("fade"),this._element=r}return this._element}_configAfterMerge(r){return r.rootElement=a(r.rootElement),r}_append(){if(this._isAppended)return;const r=this._getElement();this._config.rootElement.append(r),G.on(r,Qe,()=>{Q(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(r){Z(r,this._getElement(),this._config.isAnimated)}}const ji=".bs.focustrap",_n="backward",Si={autofocus:!0,trapElement:null},Dn={autofocus:"boolean",trapElement:"element"};class Pn extends ne{constructor(r){super(),this._config=this._getConfig(r),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Si}static get DefaultType(){return Dn}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),G.off(document,ji),G.on(document,"focusin.bs.focustrap",r=>this._handleFocusin(r)),G.on(document,"keydown.tab.bs.focustrap",r=>this._handleKeydown(r)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,G.off(document,ji))}_handleFocusin(r){const{trapElement:m}=this._config;if(r.target===document||r.target===m||m.contains(r.target))return;const y=Wt.focusableChildren(m);0===y.length?m.focus():this._lastTabNavDirection===_n?y[y.length-1].focus():y[0].focus()}_handleKeydown(r){"Tab"===r.key&&(this._lastTabNavDirection=r.shiftKey?_n:"forward")}}const Ni="hidden.bs.modal",yn="show.bs.modal",bn="modal-open",Un="modal-static",Li={backdrop:!0,focus:!0,keyboard:!0},xn={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ei extends qt{constructor(r,m){super(r,m),this._dialog=Wt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new $e,this._addEventListeners()}static get Default(){return Li}static get DefaultType(){return xn}static get NAME(){return"modal"}toggle(r){return this._isShown?this.hide():this.show(r)}show(r){this._isShown||this._isTransitioning||G.trigger(this._element,yn,{relatedTarget:r}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(bn),this._adjustDialog(),this._backdrop.show(()=>this._showElement(r)))}hide(){this._isShown&&!this._isTransitioning&&(G.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const r of[window,this._dialog])G.off(r,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Je({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Pn({trapElement:this._element})}_showElement(r){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=Wt.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,G.trigger(this._element,"shown.bs.modal",{relatedTarget:r})},this._dialog,this._isAnimated())}_addEventListeners(){G.on(this._element,"keydown.dismiss.bs.modal",r=>{if("Escape"===r.key)return this._config.keyboard?(r.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),G.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),G.on(this._element,"mousedown.dismiss.bs.modal",r=>{G.one(this._element,"click.dismiss.bs.modal",m=>{this._element===r.target&&this._element===m.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(bn),this._resetAdjustments(),this._scrollBar.reset(),G.trigger(this._element,Ni)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(G.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;"hidden"===m||this._element.classList.contains(Un)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(Un),this._queueCallback(()=>{this._element.classList.remove(Un),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const r=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),y=m>0;if(y&&!r){const T=F()?"paddingLeft":"paddingRight";this._element.style[T]=`${m}px`}if(!y&&r){const T=F()?"paddingRight":"paddingLeft";this._element.style[T]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(r,m){return this.each(function(){const y=Ei.getOrCreateInstance(this,r);if("string"==typeof r){if(void 0===y[r])throw new TypeError(`No method named "${r}"`);y[r](m)}})}}G.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(g){const r=i(this);["A","AREA"].includes(this.tagName)&&g.preventDefault(),G.one(r,yn,y=>{y.defaultPrevented||G.one(r,Ni,()=>{d(this)&&this.focus()})});const m=Wt.findOne(".modal.show");m&&Ei.getInstance(m).hide(),Ei.getOrCreateInstance(r).toggle(this)}),he(Ei),N(Ei);const Ze="showing",rn=".offcanvas.show",Bi="hidePrevented.bs.offcanvas",jn="hidden.bs.offcanvas",sn={backdrop:!0,keyboard:!0,scroll:!1},gr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ui extends qt{constructor(r,m){super(r,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return sn}static get DefaultType(){return gr}static get NAME(){return"offcanvas"}toggle(r){return this._isShown?this.hide():this.show(r)}show(r){this._isShown||G.trigger(this._element,"show.bs.offcanvas",{relatedTarget:r}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new $e).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ze),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(Ze),G.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:r})},this._element,!0))}hide(){this._isShown&&(G.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new $e).reset(),G.trigger(this._element,jn)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const r=Boolean(this._config.backdrop);return new Je({className:"offcanvas-backdrop",isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?()=>{"static"!==this._config.backdrop?this.hide():G.trigger(this._element,Bi)}:null})}_initializeFocusTrap(){return new Pn({trapElement:this._element})}_addEventListeners(){G.on(this._element,"keydown.dismiss.bs.offcanvas",r=>{"Escape"===r.key&&(this._config.keyboard?this.hide():G.trigger(this._element,Bi))})}static jQueryInterface(r){return this.each(function(){const m=ui.getOrCreateInstance(this,r);if("string"==typeof r){if(void 0===m[r]||r.startsWith("_")||"constructor"===r)throw new TypeError(`No method named "${r}"`);m[r](this)}})}}G.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(g){const r=i(this);if(["A","AREA"].includes(this.tagName)&&g.preventDefault(),_(this))return;G.one(r,jn,()=>{d(this)&&this.focus()});const m=Wt.findOne(rn);m&&m!==r&&ui.getInstance(m).hide(),ui.getOrCreateInstance(r).toggle(this)}),G.on(window,"load.bs.offcanvas.data-api",()=>{for(const g of Wt.find(rn))ui.getOrCreateInstance(g).show()}),G.on(window,"resize.bs.offcanvas",()=>{for(const g of Wt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(g).position&&ui.getOrCreateInstance(g).hide()}),he(ui),N(ui);const Ln=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ki=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Mn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,yi=(g,r)=>{const m=g.nodeName.toLowerCase();return r.includes(m)?!Ln.has(m)||Boolean(Ki.test(g.nodeValue)||Mn.test(g.nodeValue)):r.filter(y=>y instanceof RegExp).some(y=>y.test(m))},on={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},wn={allowList:on,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},rr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Gn={entry:"(string|element|function|null)",selector:"(string|element)"};class Mi extends ne{constructor(r){super(),this._config=this._getConfig(r)}static get Default(){return wn}static get DefaultType(){return rr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(r=>this._resolvePossibleFunction(r)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(r){return this._checkContent(r),this._config.content={...this._config.content,...r},this}toHtml(){const r=document.createElement("div");r.innerHTML=this._maybeSanitize(this._config.template);for(const[T,D]of Object.entries(this._config.content))this._setContent(r,D,T);const m=r.children[0],y=this._resolvePossibleFunction(this._config.extraClass);return y&&m.classList.add(...y.split(" ")),m}_typeCheckConfig(r){super._typeCheckConfig(r),this._checkContent(r.content)}_checkContent(r){for(const[m,y]of Object.entries(r))super._typeCheckConfig({selector:m,entry:y},Gn)}_setContent(r,m,y){const T=Wt.findOne(y,r);T&&((m=this._resolvePossibleFunction(m))?s(m)?this._putElementInTemplate(a(m),T):this._config.html?T.innerHTML=this._maybeSanitize(m):T.textContent=m:T.remove())}_maybeSanitize(r){return this._config.sanitize?function(m,y,T){if(!m.length)return m;if(T&&"function"==typeof T)return T(m);const D=(new window.DOMParser).parseFromString(m,"text/html"),P=[].concat(...D.body.querySelectorAll("*"));for(const B of P){const K=B.nodeName.toLowerCase();if(!Object.keys(y).includes(K)){B.remove();continue}const nt=[].concat(...B.attributes),J=[].concat(y["*"]||[],y[K]||[]);for(const at of nt)yi(at,J)||B.removeAttribute(at.nodeName)}return D.body.innerHTML}(r,this._config.allowList,this._config.sanitizeFn):r}_resolvePossibleFunction(r){return"function"==typeof r?r(this):r}_putElementInTemplate(r,m){if(this._config.html)return m.innerHTML="",void m.append(r);m.textContent=r.textContent}}const Ii=new Set(["sanitize","allowList","sanitizeFn"]),an="fade",Hi="show",In="hide.bs.modal",Qi="hover",sr={AUTO:"auto",TOP:"top",RIGHT:F()?"left":"right",BOTTOM:"bottom",LEFT:F()?"right":"left"},or={allowList:on,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},qn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class zi extends qt{constructor(r,m){if(void 0===l)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(r,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return or}static get DefaultType(){return qn}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),G.off(this._element.closest(".modal"),In,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const r=G.trigger(this._element,this.constructor.eventName("show")),m=(b(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(r.defaultPrevented||!m)return;this._disposePopper();const y=this._getTipElement();this._element.setAttribute("aria-describedby",y.getAttribute("id"));const{container:T}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(T.append(y),G.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(y),y.classList.add(Hi),"ontouchstart"in document.documentElement)for(const D of[].concat(...document.body.children))G.on(D,"mouseover",C);this._queueCallback(()=>{G.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!G.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Hi),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))G.off(r,"mouseover",C);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),G.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(r){const m=this._getTemplateFactory(r).toHtml();if(!m)return null;m.classList.remove(an,Hi),m.classList.add(`bs-${this.constructor.NAME}-auto`);const y=(T=>{do{T+=Math.floor(1e6*Math.random())}while(document.getElementById(T));return T})(this.constructor.NAME).toString();return m.setAttribute("id",y),this._isAnimated()&&m.classList.add(an),m}setContent(r){this._newContent=r,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(r){return this._templateFactory?this._templateFactory.changeContent(r):this._templateFactory=new Mi({...this._config,content:r,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(r){return this.constructor.getOrCreateInstance(r.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(an)}_isShown(){return this.tip&&this.tip.classList.contains(Hi)}_createPopper(r){const m="function"==typeof this._config.placement?this._config.placement.call(this,r,this._element):this._config.placement,y=sr[m.toUpperCase()];return l.createPopper(this._element,r,this._getPopperConfig(y))}_getOffset(){const{offset:r}=this._config;return"string"==typeof r?r.split(",").map(m=>Number.parseInt(m,10)):"function"==typeof r?m=>r(m,this._element):r}_resolvePossibleFunction(r){return"function"==typeof r?r.call(this._element):r}_getPopperConfig(r){const m={placement:r,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:y=>{this._getTipElement().setAttribute("data-popper-placement",y.state.placement)}}]};return{...m,..."function"==typeof this._config.popperConfig?this._config.popperConfig(m):this._config.popperConfig}}_setListeners(){const r=this._config.trigger.split(" ");for(const m of r)if("click"===m)G.on(this._element,this.constructor.eventName("click"),this._config.selector,y=>{this._initializeOnDelegatedTarget(y).toggle()});else if("manual"!==m){const y=this.constructor.eventName(m===Qi?"mouseenter":"focusin"),T=this.constructor.eventName(m===Qi?"mouseleave":"focusout");G.on(this._element,y,this._config.selector,D=>{const P=this._initializeOnDelegatedTarget(D);P._activeTrigger["focusin"===D.type?"focus":Qi]=!0,P._enter()}),G.on(this._element,T,this._config.selector,D=>{const P=this._initializeOnDelegatedTarget(D);P._activeTrigger["focusout"===D.type?"focus":Qi]=P._element.contains(D.relatedTarget),P._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},G.on(this._element.closest(".modal"),In,this._hideModalHandler)}_fixTitle(){const r=this._element.getAttribute("title");r&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",r),this._element.setAttribute("data-bs-original-title",r),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(r,m){clearTimeout(this._timeout),this._timeout=setTimeout(r,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(r){const m=me.getDataAttributes(this._element);for(const y of Object.keys(m))Ii.has(y)&&delete m[y];return r={...m,..."object"==typeof r&&r?r:{}},r=this._mergeConfigObj(r),r=this._configAfterMerge(r),this._typeCheckConfig(r),r}_configAfterMerge(r){return r.container=!1===r.container?document.body:a(r.container),"number"==typeof r.delay&&(r.delay={show:r.delay,hide:r.delay}),"number"==typeof r.title&&(r.title=r.title.toString()),"number"==typeof r.content&&(r.content=r.content.toString()),r}_getDelegateConfig(){const r={};for(const m in this._config)this.constructor.Default[m]!==this._config[m]&&(r[m]=this._config[m]);return r.selector=!1,r.trigger="manual",r}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(r){return this.each(function(){const m=zi.getOrCreateInstance(this,r);if("string"==typeof r){if(void 0===m[r])throw new TypeError(`No method named "${r}"`);m[r]()}})}}N(zi);const ar={...zi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Fn={...zi.DefaultType,content:"(null|string|element|function)"};class ln extends zi{static get Default(){return ar}static get DefaultType(){return Fn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(r){return this.each(function(){const m=ln.getOrCreateInstance(this,r);if("string"==typeof r){if(void 0===m[r])throw new TypeError(`No method named "${r}"`);m[r]()}})}}N(ln);const $n="click.bs.scrollspy",Cn="active",cr={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},hr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Fi extends qt{constructor(r,m){super(r,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return cr}static get DefaultType(){return hr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const r of this._observableSections.values())this._observer.observe(r)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(r){return r.target=a(r.target)||document.body,r.rootMargin=r.offset?`${r.offset}px 0px -30%`:r.rootMargin,"string"==typeof r.threshold&&(r.threshold=r.threshold.split(",").map(m=>Number.parseFloat(m))),r}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(G.off(this._config.target,$n),G.on(this._config.target,$n,"[href]",r=>{const m=this._observableSections.get(r.target.hash);if(m){r.preventDefault();const y=this._rootElement||window,T=m.offsetTop-this._element.offsetTop;if(y.scrollTo)return void y.scrollTo({top:T,behavior:"smooth"});y.scrollTop=T}}))}_getNewObserver(){return new IntersectionObserver(m=>this._observerCallback(m),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(r){const m=P=>this._targetLinks.get(`#${P.target.id}`),y=P=>{this._previousScrollData.visibleEntryTop=P.target.offsetTop,this._process(m(P))},T=(this._rootElement||document.documentElement).scrollTop,D=T>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=T;for(const P of r){if(!P.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(P));continue}const B=P.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(D&&B){if(y(P),!T)return}else D||B||y(P)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const r=Wt.find("[href]",this._config.target);for(const m of r){if(!m.hash||_(m))continue;const y=Wt.findOne(m.hash,this._element);d(y)&&(this._targetLinks.set(m.hash,m),this._observableSections.set(m.hash,y))}}_process(r){this._activeTarget!==r&&(this._clearActiveClass(this._config.target),this._activeTarget=r,r.classList.add(Cn),this._activateParents(r),G.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:r}))}_activateParents(r){if(r.classList.contains("dropdown-item"))Wt.findOne(".dropdown-toggle",r.closest(".dropdown")).classList.add(Cn);else for(const m of Wt.parents(r,".nav, .list-group"))for(const y of Wt.prev(m,".nav-link, .nav-item > .nav-link, .list-group-item"))y.classList.add(Cn)}_clearActiveClass(r){r.classList.remove(Cn);const m=Wt.find("[href].active",r);for(const y of m)y.classList.remove(Cn)}static jQueryInterface(r){return this.each(function(){const m=Fi.getOrCreateInstance(this,r);if("string"==typeof r){if(void 0===m[r]||r.startsWith("_")||"constructor"===r)throw new TypeError(`No method named "${r}"`);m[r]()}})}}G.on(window,"load.bs.scrollspy.data-api",()=>{for(const g of Wt.find('[data-bs-spy="scroll"]'))Fi.getOrCreateInstance(g)}),N(Fi);const Kn="ArrowLeft",Qn="ArrowRight",Tn="ArrowUp",Rn="ArrowDown",cn="active",Bn="show",Ji='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Sn=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${Ji}`;class fi extends qt{constructor(r){super(r),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),G.on(this._element,"keydown.bs.tab",m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const r=this._element;if(this._elemIsActive(r))return;const m=this._getActiveElem(),y=m?G.trigger(m,"hide.bs.tab",{relatedTarget:r}):null;G.trigger(r,"show.bs.tab",{relatedTarget:m}).defaultPrevented||y&&y.defaultPrevented||(this._deactivate(m,r),this._activate(r,m))}_activate(r,m){r&&(r.classList.add(cn),this._activate(i(r)),this._queueCallback(()=>{"tab"===r.getAttribute("role")?(r.removeAttribute("tabindex"),r.setAttribute("aria-selected",!0),this._toggleDropDown(r,!0),G.trigger(r,"shown.bs.tab",{relatedTarget:m})):r.classList.add(Bn)},r,r.classList.contains("fade")))}_deactivate(r,m){r&&(r.classList.remove(cn),r.blur(),this._deactivate(i(r)),this._queueCallback(()=>{"tab"===r.getAttribute("role")?(r.setAttribute("aria-selected",!1),r.setAttribute("tabindex","-1"),this._toggleDropDown(r,!1),G.trigger(r,"hidden.bs.tab",{relatedTarget:m})):r.classList.remove(Bn)},r,r.classList.contains("fade")))}_keydown(r){if(![Kn,Qn,Tn,Rn].includes(r.key))return;r.stopPropagation(),r.preventDefault();const m=[Qn,Rn].includes(r.key),y=j(this._getChildren().filter(T=>!_(T)),r.target,m,!0);y&&(y.focus({preventScroll:!0}),fi.getOrCreateInstance(y).show())}_getChildren(){return Wt.find(Sn,this._parent)}_getActiveElem(){return this._getChildren().find(r=>this._elemIsActive(r))||null}_setInitialAttributes(r,m){this._setAttributeIfNotExists(r,"role","tablist");for(const y of m)this._setInitialAttributesOnChild(y)}_setInitialAttributesOnChild(r){r=this._getInnerElement(r);const m=this._elemIsActive(r),y=this._getOuterElement(r);r.setAttribute("aria-selected",m),y!==r&&this._setAttributeIfNotExists(y,"role","presentation"),m||r.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(r,"role","tab"),this._setInitialAttributesOnTargetPanel(r)}_setInitialAttributesOnTargetPanel(r){const m=i(r);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),r.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`#${r.id}`))}_toggleDropDown(r,m){const y=this._getOuterElement(r);if(!y.classList.contains("dropdown"))return;const T=(D,P)=>{const B=Wt.findOne(D,y);B&&B.classList.toggle(P,m)};T(".dropdown-toggle",cn),T(".dropdown-menu",Bn),y.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(r,m,y){r.hasAttribute(m)||r.setAttribute(m,y)}_elemIsActive(r){return r.classList.contains(cn)}_getInnerElement(r){return r.matches(Sn)?r:Wt.findOne(Sn,r)}_getOuterElement(r){return r.closest(".nav-item, .list-group-item")||r}static jQueryInterface(r){return this.each(function(){const m=fi.getOrCreateInstance(this);if("string"==typeof r){if(void 0===m[r]||r.startsWith("_")||"constructor"===r)throw new TypeError(`No method named "${r}"`);m[r]()}})}}G.on(document,"click.bs.tab",Ji,function(g){["A","AREA"].includes(this.tagName)&&g.preventDefault(),_(this)||fi.getOrCreateInstance(this).show()}),G.on(window,"load.bs.tab",()=>{for(const g of Wt.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))fi.getOrCreateInstance(g)}),N(fi);const Hn="show",Zi="showing",mr={animation:"boolean",autohide:"boolean",delay:"number"},h={animation:!0,autohide:!0,delay:5e3};class p extends qt{constructor(r,m){super(r,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return h}static get DefaultType(){return mr}static get NAME(){return"toast"}show(){G.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Hn,Zi),this._queueCallback(()=>{this._element.classList.remove(Zi),G.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(G.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Zi),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Zi,Hn),G.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Hn),super.dispose()}isShown(){return this._element.classList.contains(Hn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(r,m){switch(r.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const y=r.relatedTarget;this._element===y||this._element.contains(y)||this._maybeScheduleHide()}_setListeners(){G.on(this._element,"mouseover.bs.toast",r=>this._onInteraction(r,!0)),G.on(this._element,"mouseout.bs.toast",r=>this._onInteraction(r,!1)),G.on(this._element,"focusin.bs.toast",r=>this._onInteraction(r,!0)),G.on(this._element,"focusout.bs.toast",r=>this._onInteraction(r,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(r){return this.each(function(){const m=p.getOrCreateInstance(this,r);if("string"==typeof r){if(void 0===m[r])throw new TypeError(`No method named "${r}"`);m[r](this)}})}}return he(p),N(p),{Alert:Ot,Button:Be,Carousel:ue,Collapse:M,Dropdown:Me,Modal:Ei,Offcanvas:ui,Popover:ln,ScrollSpy:Fi,Tab:fi,Toast:p,Tooltip:zi}}),function(u,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):(u=typeof globalThis<"u"?globalThis:u||self).bootstrap=n()}(this,function(){"use strict";const u="transitionend",n=S=>{let f=S.getAttribute("data-bs-target");if(!f||"#"===f){let x=S.getAttribute("href");if(!x||!x.includes("#")&&!x.startsWith("."))return null;x.includes("#")&&!x.startsWith("#")&&(x=`#${x.split("#")[1]}`),f=x&&"#"!==x?x.trim():null}return f},l=S=>{const f=n(S);return f&&document.querySelector(f)?f:null},c=S=>{const f=n(S);return f?document.querySelector(f):null},t=S=>{S.dispatchEvent(new Event(u))},e=S=>!(!S||"object"!=typeof S)&&(void 0!==S.jquery&&(S=S[0]),void 0!==S.nodeType),i=S=>e(S)?S.jquery?S[0]:S:"string"==typeof S&&S.length>0?document.querySelector(S):null,o=S=>{if(!e(S)||0===S.getClientRects().length)return!1;const f="visible"===getComputedStyle(S).getPropertyValue("visibility"),x=S.closest("details:not([open])");if(!x)return f;if(x!==S){const k=S.closest("summary");if(k&&k.parentNode!==x||null===k)return!1}return f},s=S=>!S||S.nodeType!==Node.ELEMENT_NODE||!!S.classList.contains("disabled")||(void 0!==S.disabled?S.disabled:S.hasAttribute("disabled")&&"false"!==S.getAttribute("disabled")),a=S=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof S.getRootNode){const f=S.getRootNode();return f instanceof ShadowRoot?f:null}return S instanceof ShadowRoot?S:S.parentNode?a(S.parentNode):null},d=()=>{},b=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,C=[],w=()=>"rtl"===document.documentElement.dir,O=S=>{var f;f=()=>{const x=b();if(x){const k=S.NAME,V=x.fn[k];x.fn[k]=S.jQueryInterface,x.fn[k].Constructor=S,x.fn[k].noConflict=()=>(x.fn[k]=V,S.jQueryInterface)}},"loading"===document.readyState?(C.length||document.addEventListener("DOMContentLoaded",()=>{for(const x of C)x()}),C.push(f)):f()},A=S=>{"function"==typeof S&&S()},F=(S,f,x=!0)=>{if(!x)return void A(S);const k=(ot=>{if(!ot)return 0;let{transitionDuration:gt,transitionDelay:wt}=window.getComputedStyle(ot);const Lt=Number.parseFloat(gt),Mt=Number.parseFloat(wt);return Lt||Mt?(gt=gt.split(",")[0],wt=wt.split(",")[0],1e3*(Number.parseFloat(gt)+Number.parseFloat(wt))):0})(f)+5;let V=!1;const $=({target:ot})=>{ot===f&&(V=!0,f.removeEventListener(u,$),A(S))};f.addEventListener(u,$),setTimeout(()=>{V||t(f)},k)},N=(S,f,x,k)=>{const V=S.length;let $=S.indexOf(f);return-1===$?!x&&k?S[V-1]:S[0]:($+=x?1:-1,k&&($=($+V)%V),S[Math.max(0,Math.min($,V-1))])},Q=/[^.]*(?=\..*)\.|.*/,Z=/\..*/,j=/::\d+$/,v={};let X=1;const Y={mouseenter:"mouseover",mouseleave:"mouseout"},tt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function st(S,f){return f&&`${f}::${X++}`||S.uidEvent||X++}function W(S){const f=st(S);return S.uidEvent=f,v[f]=v[f]||{},v[f]}function I(S,f,x=null){return Object.values(S).find(k=>k.callable===f&&k.delegationSelector===x)}function q(S,f,x){const k="string"==typeof f,V=k?x:f||x;let $=pt(S);return tt.has($)||($=S),[k,V,$]}function lt(S,f,x,k,V){if("string"!=typeof f||!S)return;let[$,ot,gt]=q(f,x,k);var Zt;f in Y&&(Zt=ot,ot=function(Kt){if(!Kt.relatedTarget||Kt.relatedTarget!==Kt.delegateTarget&&!Kt.delegateTarget.contains(Kt.relatedTarget))return Zt.call(this,Kt)});const wt=W(S),Lt=wt[gt]||(wt[gt]={}),Mt=I(Lt,ot,$?x:null);if(Mt)return void(Mt.oneOff=Mt.oneOff&&V);const St=st(ot,f.replace(Q,"")),ee=$?function(Ut,Zt,Kt){return function te(xe){const Ee=Ut.querySelectorAll(Zt);for(let{target:re}=xe;re&&re!==this;re=re.parentNode)for(const ge of Ee)if(ge===re)return mt(xe,{delegateTarget:re}),te.oneOff&&H.off(Ut,xe.type,Zt,Kt),Kt.apply(re,[xe])}}(S,x,ot):function(Ut,Zt){return function Kt(te){return mt(te,{delegateTarget:Ut}),Kt.oneOff&&H.off(Ut,te.type,Zt),Zt.apply(Ut,[te])}}(S,ot);ee.delegationSelector=$?x:null,ee.callable=ot,ee.oneOff=V,ee.uidEvent=St,Lt[St]=ee,S.addEventListener(gt,ee,$)}function et(S,f,x,k,V){const $=I(f[x],k,V);$&&(S.removeEventListener(x,$,Boolean(V)),delete f[x][$.uidEvent])}function ft(S,f,x,k){const V=f[x]||{};for(const $ of Object.keys(V))if($.includes(k)){const ot=V[$];et(S,f,x,ot.callable,ot.delegationSelector)}}function pt(S){return S=S.replace(Z,""),Y[S]||S}const H={on(S,f,x,k){lt(S,f,x,k,!1)},one(S,f,x,k){lt(S,f,x,k,!0)},off(S,f,x,k){if("string"!=typeof f||!S)return;const[V,$,ot]=q(f,x,k),gt=ot!==f,wt=W(S),Lt=wt[ot]||{},Mt=f.startsWith(".");if(void 0===$){if(Mt)for(const St of Object.keys(wt))ft(S,wt,St,f.slice(1));for(const St of Object.keys(Lt)){const ee=St.replace(j,"");if(!gt||f.includes(ee)){const Ut=Lt[St];et(S,wt,ot,Ut.callable,Ut.delegationSelector)}}}else{if(!Object.keys(Lt).length)return;et(S,wt,ot,$,V?x:null)}},trigger(S,f,x){if("string"!=typeof f||!S)return null;const k=b();let V=null,$=!0,ot=!0,gt=!1;f!==pt(f)&&k&&(V=k.Event(f,x),k(S).trigger(V),$=!V.isPropagationStopped(),ot=!V.isImmediatePropagationStopped(),gt=V.isDefaultPrevented());let wt=new Event(f,{bubbles:$,cancelable:!0});return wt=mt(wt,x),gt&&wt.preventDefault(),ot&&S.dispatchEvent(wt),wt.defaultPrevented&&V&&V.preventDefault(),wt}};function mt(S,f){for(const[x,k]of Object.entries(f||{}))try{S[x]=k}catch{Object.defineProperty(S,x,{configurable:!0,get:()=>k})}return S}const yt=new Map,G={set(S,f,x){yt.has(S)||yt.set(S,new Map);const k=yt.get(S);k.has(f)||0===k.size?k.set(f,x):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(k.keys())[0]}.`)},get:(S,f)=>yt.has(S)&&yt.get(S).get(f)||null,remove(S,f){if(!yt.has(S))return;const x=yt.get(S);x.delete(f),0===x.size&&yt.delete(S)}};function bt(S){if("true"===S)return!0;if("false"===S)return!1;if(S===Number(S).toString())return Number(S);if(""===S||"null"===S)return null;if("string"!=typeof S)return S;try{return JSON.parse(decodeURIComponent(S))}catch{return S}}function vt(S){return S.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`)}const Pt={setDataAttribute(S,f,x){S.setAttribute(`data-bs-${vt(f)}`,x)},removeDataAttribute(S,f){S.removeAttribute(`data-bs-${vt(f)}`)},getDataAttributes(S){if(!S)return{};const f={},x=Object.keys(S.dataset).filter(k=>k.startsWith("bs")&&!k.startsWith("bsConfig"));for(const k of x){let V=k.replace(/^bs/,"");V=V.charAt(0).toLowerCase()+V.slice(1,V.length),f[V]=bt(S.dataset[k])}return f},getDataAttribute:(S,f)=>bt(S.getAttribute(`data-bs-${vt(f)}`))};class Bt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(f){return f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f}_mergeConfigObj(f,x){const k=e(x)?Pt.getDataAttribute(x,"config"):{};return{...this.constructor.Default,..."object"==typeof k?k:{},...e(x)?Pt.getDataAttributes(x):{},..."object"==typeof f?f:{}}}_typeCheckConfig(f,x=this.constructor.DefaultType){for(const V of Object.keys(x)){const $=x[V],ot=f[V],gt=e(ot)?"element":null==(k=ot)?`${k}`:Object.prototype.toString.call(k).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp($).test(gt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${V}" provided type "${gt}" but expected type "${$}".`)}var k}}class Yt extends Bt{constructor(f,x){super(),(f=i(f))&&(this._element=f,this._config=this._getConfig(x),G.set(this._element,this.constructor.DATA_KEY,this))}dispose(){G.remove(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY);for(const f of Object.getOwnPropertyNames(this))this[f]=null}_queueCallback(f,x,k=!0){F(f,x,k)}_getConfig(f){return f=this._mergeConfigObj(f,this._element),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}static getInstance(f){return G.get(i(f),this.DATA_KEY)}static getOrCreateInstance(f,x={}){return this.getInstance(f)||new this(f,"object"==typeof x?x:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(f){return`${f}${this.EVENT_KEY}`}}const me=(S,f="hide")=>{const k=S.NAME;H.on(document,`click.dismiss${S.EVENT_KEY}`,`[data-bs-dismiss="${k}"]`,function(V){if(["A","AREA"].includes(this.tagName)&&V.preventDefault(),s(this))return;const $=c(this)||this.closest(`.${k}`);S.getOrCreateInstance($)[f]()})};class ne extends Yt{static get NAME(){return"alert"}close(){if(H.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const f=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),H.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(f){return this.each(function(){const x=ne.getOrCreateInstance(this);if("string"==typeof f){if(void 0===x[f]||f.startsWith("_")||"constructor"===f)throw new TypeError(`No method named "${f}"`);x[f](this)}})}}me(ne,"close"),O(ne);const qt='[data-bs-toggle="button"]';class he extends Yt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(f){return this.each(function(){const x=he.getOrCreateInstance(this);"toggle"===f&&x[f]()})}}H.on(document,"click.bs.button.data-api",qt,S=>{S.preventDefault();const f=S.target.closest(qt);he.getOrCreateInstance(f).toggle()}),O(he);const Ot={find:(S,f=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(f,S)),findOne:(S,f=document.documentElement)=>Element.prototype.querySelector.call(f,S),children:(S,f)=>[].concat(...S.children).filter(x=>x.matches(f)),parents(S,f){const x=[];let k=S.parentNode.closest(f);for(;k;)x.push(k),k=k.parentNode.closest(f);return x},prev(S,f){let x=S.previousElementSibling;for(;x;){if(x.matches(f))return[x];x=x.previousElementSibling}return[]},next(S,f){let x=S.nextElementSibling;for(;x;){if(x.matches(f))return[x];x=x.nextElementSibling}return[]},focusableChildren(S){const f=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(x=>`${x}:not([tabindex^="-"])`).join(",");return this.find(f,S).filter(x=>!s(x)&&o(x))}},ri={endCallback:null,leftCallback:null,rightCallback:null},Be={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Wt extends Bt{constructor(f,x){super(),this._element=f,f&&Wt.isSupported()&&(this._config=this._getConfig(x),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ri}static get DefaultType(){return Be}static get NAME(){return"swipe"}dispose(){H.off(this._element,".bs.swipe")}_start(f){this._supportPointerEvents?this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX):this._deltaX=f.touches[0].clientX}_end(f){this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX-this._deltaX),this._handleSwipe(),A(this._config.endCallback)}_move(f){this._deltaX=f.touches&&f.touches.length>1?0:f.touches[0].clientX-this._deltaX}_handleSwipe(){const f=Math.abs(this._deltaX);if(f<=40)return;const x=f/this._deltaX;this._deltaX=0,x&&A(x>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(H.on(this._element,"pointerdown.bs.swipe",f=>this._start(f)),H.on(this._element,"pointerup.bs.swipe",f=>this._end(f)),this._element.classList.add("pointer-event")):(H.on(this._element,"touchstart.bs.swipe",f=>this._start(f)),H.on(this._element,"touchmove.bs.swipe",f=>this._move(f)),H.on(this._element,"touchend.bs.swipe",f=>this._end(f)))}_eventIsPointerPenTouch(f){return this._supportPointerEvents&&("pen"===f.pointerType||"touch"===f.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ce="next",Ke="prev",Ye="left",ve="right",le="slid.bs.carousel",Ae="carousel",ke="active",jt={ArrowLeft:ve,ArrowRight:Ye},De={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},si={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class mi extends Yt{constructor(f,x){super(f,x),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ot.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ae&&this.cycle()}static get Default(){return De}static get DefaultType(){return si}static get NAME(){return"carousel"}next(){this._slide(Ce)}nextWhenVisible(){!document.hidden&&o(this._element)&&this.next()}prev(){this._slide(Ke)}pause(){this._isSliding&&t(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?H.one(this._element,le,()=>this.cycle()):this.cycle())}to(f){const x=this._getItems();if(f>x.length-1||f<0)return;if(this._isSliding)return void H.one(this._element,le,()=>this.to(f));const k=this._getItemIndex(this._getActive());k!==f&&this._slide(f>k?Ce:Ke,x[f])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(f){return f.defaultInterval=f.interval,f}_addEventListeners(){this._config.keyboard&&H.on(this._element,"keydown.bs.carousel",f=>this._keydown(f)),"hover"===this._config.pause&&(H.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),H.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Wt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const x of Ot.find(".carousel-item img",this._element))H.on(x,"dragstart.bs.carousel",k=>k.preventDefault());this._swipeHelper=new Wt(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Ye)),rightCallback:()=>this._slide(this._directionToOrder(ve)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(f){if(/input|textarea/i.test(f.target.tagName))return;const x=jt[f.key];x&&(f.preventDefault(),this._slide(this._directionToOrder(x)))}_getItemIndex(f){return this._getItems().indexOf(f)}_setActiveIndicatorElement(f){if(!this._indicatorsElement)return;const x=Ot.findOne(".active",this._indicatorsElement);x.classList.remove(ke),x.removeAttribute("aria-current");const k=Ot.findOne(`[data-bs-slide-to="${f}"]`,this._indicatorsElement);k&&(k.classList.add(ke),k.setAttribute("aria-current","true"))}_updateInterval(){const f=this._activeElement||this._getActive();if(!f)return;const x=Number.parseInt(f.getAttribute("data-bs-interval"),10);this._config.interval=x||this._config.defaultInterval}_slide(f,x=null){if(this._isSliding)return;const k=this._getActive(),V=f===Ce,$=x||N(this._getItems(),k,V,this._config.wrap);if($===k)return;const ot=this._getItemIndex($),gt=St=>H.trigger(this._element,St,{relatedTarget:$,direction:this._orderToDirection(f),from:this._getItemIndex(k),to:ot});if(gt("slide.bs.carousel").defaultPrevented||!k||!$)return;const wt=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ot),this._activeElement=$;const Lt=V?"carousel-item-start":"carousel-item-end",Mt=V?"carousel-item-next":"carousel-item-prev";$.classList.add(Mt),k.classList.add(Lt),$.classList.add(Lt),this._queueCallback(()=>{$.classList.remove(Lt,Mt),$.classList.add(ke),k.classList.remove(ke,Mt,Lt),this._isSliding=!1,gt(le)},k,this._isAnimated()),wt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Ot.findOne(".active.carousel-item",this._element)}_getItems(){return Ot.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(f){return w()?f===Ye?Ke:Ce:f===Ye?Ce:Ke}_orderToDirection(f){return w()?f===Ke?Ye:ve:f===Ke?ve:Ye}static jQueryInterface(f){return this.each(function(){const x=mi.getOrCreateInstance(this,f);if("number"!=typeof f){if("string"==typeof f){if(void 0===x[f]||f.startsWith("_")||"constructor"===f)throw new TypeError(`No method named "${f}"`);x[f]()}}else x.to(f)})}}H.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(S){const f=c(this);if(!f||!f.classList.contains(Ae))return;S.preventDefault();const x=mi.getOrCreateInstance(f),k=this.getAttribute("data-bs-slide-to");return k?(x.to(k),void x._maybeEnableCycle()):"next"===Pt.getDataAttribute(this,"slide")?(x.next(),void x._maybeEnableCycle()):(x.prev(),void x._maybeEnableCycle())}),H.on(window,"load.bs.carousel.data-api",()=>{const S=Ot.find('[data-bs-ride="carousel"]');for(const f of S)mi.getOrCreateInstance(f)}),O(mi);const Pi="show",Ve="collapse",ue="collapsing",Pe='[data-bs-toggle="collapse"]',Ie={parent:null,toggle:!0},Ue={parent:"(null|element)",toggle:"boolean"};class Ge extends Yt{constructor(f,x){super(f,x),this._isTransitioning=!1,this._triggerArray=[];const k=Ot.find(Pe);for(const V of k){const $=l(V),ot=Ot.find($).filter(gt=>gt===this._element);null!==$&&ot.length&&this._triggerArray.push(V)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ie}static get DefaultType(){return Ue}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let f=[];if(this._config.parent&&(f=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(V=>V!==this._element).map(V=>Ge.getOrCreateInstance(V,{toggle:!1}))),f.length&&f[0]._isTransitioning||H.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const V of f)V.hide();const x=this._getDimension();this._element.classList.remove(Ve),this._element.classList.add(ue),this._element.style[x]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const k=`scroll${x[0].toUpperCase()+x.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ue),this._element.classList.add(Ve,Pi),this._element.style[x]="",H.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[x]=`${this._element[k]}px`}hide(){if(this._isTransitioning||!this._isShown()||H.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,this._element.classList.add(ue),this._element.classList.remove(Ve,Pi);for(const x of this._triggerArray){const k=c(x);k&&!this._isShown(k)&&this._addAriaAndCollapsedClass([x],!1)}this._isTransitioning=!0,this._element.style[f]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ue),this._element.classList.add(Ve),H.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(f=this._element){return f.classList.contains(Pi)}_configAfterMerge(f){return f.toggle=Boolean(f.toggle),f.parent=i(f.parent),f}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const f=this._getFirstLevelChildren(Pe);for(const x of f){const k=c(x);k&&this._addAriaAndCollapsedClass([x],this._isShown(k))}}_getFirstLevelChildren(f){const x=Ot.find(":scope .collapse .collapse",this._config.parent);return Ot.find(f,this._config.parent).filter(k=>!x.includes(k))}_addAriaAndCollapsedClass(f,x){if(f.length)for(const k of f)k.classList.toggle("collapsed",!x),k.setAttribute("aria-expanded",x)}static jQueryInterface(f){const x={};return"string"==typeof f&&/show|hide/.test(f)&&(x.toggle=!1),this.each(function(){const k=Ge.getOrCreateInstance(this,x);if("string"==typeof f){if(void 0===k[f])throw new TypeError(`No method named "${f}"`);k[f]()}})}}H.on(document,"click.bs.collapse.data-api",Pe,function(S){("A"===S.target.tagName||S.delegateTarget&&"A"===S.delegateTarget.tagName)&&S.preventDefault();const f=l(this),x=Ot.find(f);for(const k of x)Ge.getOrCreateInstance(k,{toggle:!1}).toggle()}),O(Ge);var _e="top",E="bottom",M="right",R="left",U="auto",ht=[_e,E,M,R],ut="start",ct="end",xt="clippingParents",_t="viewport",Ct="popper",Rt="reference",kt=ht.reduce(function(S,f){return S.concat([f+"-"+ut,f+"-"+ct])},[]),Ft=[].concat(ht,[U]).reduce(function(S,f){return S.concat([f,f+"-"+ut,f+"-"+ct])},[]),Gt="beforeRead",je="afterRead",oi="beforeMain",qe="afterMain",Me="beforeWrite",qi="afterWrite",gn=[Gt,"read",je,oi,"main",qe,Me,"write",qi];function vi(S){return S?(S.nodeName||"").toLowerCase():null}function $e(S){if(null==S)return window;if("[object Window]"!==S.toString()){var f=S.ownerDocument;return f&&f.defaultView||window}return S}function ai(S){return S instanceof $e(S).Element||S instanceof Element}function Qe(S){return S instanceof $e(S).HTMLElement||S instanceof HTMLElement}function mn(S){return typeof ShadowRoot<"u"&&(S instanceof $e(S).ShadowRoot||S instanceof ShadowRoot)}const vn={name:"applyStyles",enabled:!0,phase:"write",fn:function(S){var f=S.state;Object.keys(f.elements).forEach(function(x){var k=f.styles[x]||{},V=f.attributes[x]||{},$=f.elements[x];Qe($)&&vi($)&&(Object.assign($.style,k),Object.keys(V).forEach(function(ot){var gt=V[ot];!1===gt?$.removeAttribute(ot):$.setAttribute(ot,!0===gt?"":gt)}))})},effect:function(S){var f=S.state,x={popper:{position:f.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(f.elements.popper.style,x.popper),f.styles=x,f.elements.arrow&&Object.assign(f.elements.arrow.style,x.arrow),function(){Object.keys(f.elements).forEach(function(k){var V=f.elements[k],$=f.attributes[k]||{},ot=Object.keys(f.styles.hasOwnProperty(k)?f.styles[k]:x[k]).reduce(function(gt,wt){return gt[wt]="",gt},{});Qe(V)&&vi(V)&&(Object.assign(V.style,ot),Object.keys($).forEach(function(gt){V.removeAttribute(gt)}))})}},requires:["computeStyles"]};function Je(S){return S.split("-")[0]}var ji=Math.max,_n=Math.min,Si=Math.round;function Dn(){var S=navigator.userAgentData;return null!=S&&S.brands?S.brands.map(function(f){return f.brand+"/"+f.version}).join(" "):navigator.userAgent}function Pn(){return!/^((?!chrome|android).)*safari/i.test(Dn())}function Ni(S,f,x){void 0===f&&(f=!1),void 0===x&&(x=!1);var k=S.getBoundingClientRect(),V=1,$=1;f&&Qe(S)&&(V=S.offsetWidth>0&&Si(k.width)/S.offsetWidth||1,$=S.offsetHeight>0&&Si(k.height)/S.offsetHeight||1);var ot=(ai(S)?$e(S):window).visualViewport,gt=!Pn()&&x,wt=(k.left+(gt&&ot?ot.offsetLeft:0))/V,Lt=(k.top+(gt&&ot?ot.offsetTop:0))/$,Mt=k.width/V,St=k.height/$;return{width:Mt,height:St,top:Lt,right:wt+Mt,bottom:Lt+St,left:wt,x:wt,y:Lt}}function yn(S){var f=Ni(S),x=S.offsetWidth,k=S.offsetHeight;return Math.abs(f.width-x)<=1&&(x=f.width),Math.abs(f.height-k)<=1&&(k=f.height),{x:S.offsetLeft,y:S.offsetTop,width:x,height:k}}function bn(S,f){var x=f.getRootNode&&f.getRootNode();if(S.contains(f))return!0;if(x&&mn(x)){var k=f;do{if(k&&S.isSameNode(k))return!0;k=k.parentNode||k.host}while(k)}return!1}function Oi(S){return $e(S).getComputedStyle(S)}function Un(S){return["table","td","th"].indexOf(vi(S))>=0}function Li(S){return((ai(S)?S.ownerDocument:S.document)||window.document).documentElement}function xn(S){return"html"===vi(S)?S:S.assignedSlot||S.parentNode||(mn(S)?S.host:null)||Li(S)}function Ei(S){return Qe(S)&&"fixed"!==Oi(S).position?S.offsetParent:null}function $i(S){for(var f=$e(S),x=Ei(S);x&&Un(x)&&"static"===Oi(x).position;)x=Ei(x);return x&&("html"===vi(x)||"body"===vi(x)&&"static"===Oi(x).position)?f:x||function(k){var V=/firefox/i.test(Dn());if(/Trident/i.test(Dn())&&Qe(k)&&"fixed"===Oi(k).position)return null;var $=xn(k);for(mn($)&&($=$.host);Qe($)&&["html","body"].indexOf(vi($))<0;){var ot=Oi($);if("none"!==ot.transform||"none"!==ot.perspective||"paint"===ot.contain||-1!==["transform","perspective"].indexOf(ot.willChange)||V&&"filter"===ot.willChange||V&&ot.filter&&"none"!==ot.filter)return $;$=$.parentNode}return null}(S)||f}function Ze(S){return["top","bottom"].indexOf(S)>=0?"x":"y"}function _i(S,f,x){return ji(S,_n(f,x))}function rn(S){return Object.assign({},{top:0,right:0,bottom:0,left:0},S)}function Bi(S,f){return f.reduce(function(x,k){return x[k]=S,x},{})}const jn={name:"arrow",enabled:!0,phase:"main",fn:function(S){var f,we,be,x=S.state,k=S.name,V=S.options,$=x.elements.arrow,ot=x.modifiersData.popperOffsets,gt=Je(x.placement),wt=Ze(gt),Lt=[R,M].indexOf(gt)>=0?"height":"width";if($&&ot){var Mt=(be=x,rn("number"!=typeof(we="function"==typeof(we=V.padding)?we(Object.assign({},be.rects,{placement:be.placement})):we)?we:Bi(we,ht))),St=yn($),ee="y"===wt?_e:R,Ut="y"===wt?E:M,Zt=x.rects.reference[Lt]+x.rects.reference[wt]-ot[wt]-x.rects.popper[Lt],Kt=ot[wt]-x.rects.reference[wt],te=$i($),xe=te?"y"===wt?te.clientHeight||0:te.clientWidth||0:0,ie=xe/2-St[Lt]/2+(Zt/2-Kt/2),ce=_i(Mt[ee],ie,xe-St[Lt]-Mt[Ut]);x.modifiersData[k]=((f={})[wt]=ce,f.centerOffset=ce-ie,f)}},effect:function(S){var f=S.state,x=S.options.element,k=void 0===x?"[data-popper-arrow]":x;null!=k&&("string"!=typeof k||(k=f.elements.popper.querySelector(k)))&&bn(f.elements.popper,k)&&(f.elements.arrow=k)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function sn(S){return S.split("-")[1]}var gr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ui(S){var f,x=S.popper,k=S.popperRect,V=S.placement,$=S.variation,ot=S.offsets,gt=S.position,wt=S.gpuAcceleration,Lt=S.adaptive,Mt=S.roundOffsets,St=S.isFixed,ee=ot.x,Ut=void 0===ee?0:ee,Zt=ot.y,Kt=void 0===Zt?0:Zt,te="function"==typeof Mt?Mt({x:Ut,y:Kt}):{x:Ut,y:Kt};Ut=te.x,Kt=te.y;var xe=ot.hasOwnProperty("x"),Ee=ot.hasOwnProperty("y"),re=R,ge=_e,ie=window;if(Lt){var ce=$i(x),ye="clientHeight",we="clientWidth";ce===$e(x)&&"static"!==Oi(ce=Li(x)).position&&"absolute"===gt&&(ye="scrollHeight",we="scrollWidth"),(V===_e||(V===R||V===M)&&$===ct)&&(ge=E,Kt-=(St&&ce===ie&&ie.visualViewport?ie.visualViewport.height:ce[ye])-k.height,Kt*=wt?1:-1),V!==R&&(V!==_e&&V!==E||$!==ct)||(re=M,Ut-=(St&&ce===ie&&ie.visualViewport?ie.visualViewport.width:ce[we])-k.width,Ut*=wt?1:-1)}var be,nn,Ui,Ci,ze=Object.assign({position:gt},Lt&&gr),Ri=!0===Mt?(Ui=(nn={x:Ut,y:Kt}).y,Ci=window.devicePixelRatio||1,{x:Si(nn.x*Ci)/Ci||0,y:Si(Ui*Ci)/Ci||0}):{x:Ut,y:Kt};return Ut=Ri.x,Kt=Ri.y,Object.assign({},ze,wt?((be={})[ge]=Ee?"0":"",be[re]=xe?"0":"",be.transform=(ie.devicePixelRatio||1)<=1?"translate("+Ut+"px, "+Kt+"px)":"translate3d("+Ut+"px, "+Kt+"px, 0)",be):((f={})[ge]=Ee?Kt+"px":"",f[re]=xe?Ut+"px":"",f.transform="",f))}const Ln={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(S){var f=S.state,x=S.options,k=x.gpuAcceleration,V=void 0===k||k,$=x.adaptive,ot=void 0===$||$,gt=x.roundOffsets,wt=void 0===gt||gt,Lt={placement:Je(f.placement),variation:sn(f.placement),popper:f.elements.popper,popperRect:f.rects.popper,gpuAcceleration:V,isFixed:"fixed"===f.options.strategy};null!=f.modifiersData.popperOffsets&&(f.styles.popper=Object.assign({},f.styles.popper,ui(Object.assign({},Lt,{offsets:f.modifiersData.popperOffsets,position:f.options.strategy,adaptive:ot,roundOffsets:wt})))),null!=f.modifiersData.arrow&&(f.styles.arrow=Object.assign({},f.styles.arrow,ui(Object.assign({},Lt,{offsets:f.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:wt})))),f.attributes.popper=Object.assign({},f.attributes.popper,{"data-popper-placement":f.placement})},data:{}};var Ki={passive:!0};const Mn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(S){var f=S.state,x=S.instance,k=S.options,V=k.scroll,$=void 0===V||V,ot=k.resize,gt=void 0===ot||ot,wt=$e(f.elements.popper),Lt=[].concat(f.scrollParents.reference,f.scrollParents.popper);return $&&Lt.forEach(function(Mt){Mt.addEventListener("scroll",x.update,Ki)}),gt&&wt.addEventListener("resize",x.update,Ki),function(){$&&Lt.forEach(function(Mt){Mt.removeEventListener("scroll",x.update,Ki)}),gt&&wt.removeEventListener("resize",x.update,Ki)}},data:{}};var yi={left:"right",right:"left",bottom:"top",top:"bottom"};function on(S){return S.replace(/left|right|bottom|top/g,function(f){return yi[f]})}var wn={start:"end",end:"start"};function rr(S){return S.replace(/start|end/g,function(f){return wn[f]})}function Gn(S){var f=$e(S);return{scrollLeft:f.pageXOffset,scrollTop:f.pageYOffset}}function Mi(S){return Ni(Li(S)).left+Gn(S).scrollLeft}function Ii(S){var f=Oi(S);return/auto|scroll|overlay|hidden/.test(f.overflow+f.overflowY+f.overflowX)}function an(S){return["html","body","#document"].indexOf(vi(S))>=0?S.ownerDocument.body:Qe(S)&&Ii(S)?S:an(xn(S))}function Hi(S,f){var x;void 0===f&&(f=[]);var k=an(S),V=k===(null==(x=S.ownerDocument)?void 0:x.body),$=$e(k),ot=V?[$].concat($.visualViewport||[],Ii(k)?k:[]):k,gt=f.concat(ot);return V?gt:gt.concat(Hi(xn(ot)))}function Wi(S){return Object.assign({},S,{left:S.x,top:S.y,right:S.x+S.width,bottom:S.y+S.height})}function In(S,f,x){return f===_t?Wi(function(k,V){var $=$e(k),ot=Li(k),gt=$.visualViewport,wt=ot.clientWidth,Lt=ot.clientHeight,Mt=0,St=0;if(gt){wt=gt.width,Lt=gt.height;var ee=Pn();(ee||!ee&&"fixed"===V)&&(Mt=gt.offsetLeft,St=gt.offsetTop)}return{width:wt,height:Lt,x:Mt+Mi(k),y:St}}(S,x)):ai(f)?(($=Ni(k=f,!1,"fixed"===x)).top=$.top+k.clientTop,$.left=$.left+k.clientLeft,$.bottom=$.top+k.clientHeight,$.right=$.left+k.clientWidth,$.width=k.clientWidth,$.height=k.clientHeight,$.x=$.left,$.y=$.top,$):Wi(function(k){var V,$=Li(k),ot=Gn(k),gt=null==(V=k.ownerDocument)?void 0:V.body,wt=ji($.scrollWidth,$.clientWidth,gt?gt.scrollWidth:0,gt?gt.clientWidth:0),Lt=ji($.scrollHeight,$.clientHeight,gt?gt.scrollHeight:0,gt?gt.clientHeight:0),Mt=-ot.scrollLeft+Mi(k),St=-ot.scrollTop;return"rtl"===Oi(gt||$).direction&&(Mt+=ji($.clientWidth,gt?gt.clientWidth:0)-wt),{width:wt,height:Lt,x:Mt,y:St}}(Li(S)));var k,$}function Qi(S){var f,x=S.reference,k=S.element,V=S.placement,$=V?Je(V):null,ot=V?sn(V):null,gt=x.x+x.width/2-k.width/2,wt=x.y+x.height/2-k.height/2;switch($){case _e:f={x:gt,y:x.y-k.height};break;case E:f={x:gt,y:x.y+x.height};break;case M:f={x:x.x+x.width,y:wt};break;case R:f={x:x.x-k.width,y:wt};break;default:f={x:x.x,y:x.y}}var Lt=$?Ze($):null;if(null!=Lt){var Mt="y"===Lt?"height":"width";switch(ot){case ut:f[Lt]=f[Lt]-(x[Mt]/2-k[Mt]/2);break;case ct:f[Lt]=f[Lt]+(x[Mt]/2-k[Mt]/2)}}return f}function Xi(S,f){void 0===f&&(f={});var wi,Ui,Ci,ci,Oe,Ti,Gi,fn,dn,ni,k=f.placement,V=void 0===k?S.placement:k,$=f.strategy,ot=void 0===$?S.strategy:$,gt=f.boundary,wt=void 0===gt?xt:gt,Lt=f.rootBoundary,Mt=void 0===Lt?_t:Lt,St=f.elementContext,ee=void 0===St?Ct:St,Ut=f.altBoundary,Zt=void 0!==Ut&&Ut,Kt=f.padding,te=void 0===Kt?0:Kt,xe=rn("number"!=typeof te?te:Bi(te,ht)),re=S.rects.popper,ge=S.elements[Zt?ee===Ct?Rt:Ct:ee],ie=(wi=ai(ge)?ge:ge.contextElement||Li(S.elements.popper),Ci=Mt,ci=ot,fn="clippingParents"===(Ui=wt)?(Ti=Hi(xn(Oe=wi)),ai(Gi=["absolute","fixed"].indexOf(Oi(Oe).position)>=0&&Qe(Oe)?$i(Oe):Oe)?Ti.filter(function(Vn){return ai(Vn)&&bn(Vn,Gi)&&"body"!==vi(Vn)}):[]):[].concat(Ui),ni=(dn=[].concat(fn,[Ci])).reduce(function(Oe,Ti){var Gi=In(wi,Ti,ci);return Oe.top=ji(Gi.top,Oe.top),Oe.right=_n(Gi.right,Oe.right),Oe.bottom=_n(Gi.bottom,Oe.bottom),Oe.left=ji(Gi.left,Oe.left),Oe},In(wi,dn[0],ci)),ni.width=ni.right-ni.left,ni.height=ni.bottom-ni.top,ni.x=ni.left,ni.y=ni.top,ni),ce=Ni(S.elements.reference),ye=Qi({reference:ce,element:re,strategy:"absolute",placement:V}),we=Wi(Object.assign({},re,ye)),be=ee===Ct?we:ce,ze={top:ie.top-be.top+xe.top,bottom:be.bottom-ie.bottom+xe.bottom,left:ie.left-be.left+xe.left,right:be.right-ie.right+xe.right},Ri=S.modifiersData.offset;if(ee===Ct&&Ri){var nn=Ri[V];Object.keys(ze).forEach(function(wi){var Ui=[M,E].indexOf(wi)>=0?1:-1,Ci=[_e,E].indexOf(wi)>=0?"y":"x";ze[wi]+=nn[Ci]*Ui})}return ze}const or={name:"flip",enabled:!0,phase:"main",fn:function(S){var f=S.state,x=S.options,k=S.name;if(!f.modifiersData[k]._skip){for(var V=x.mainAxis,$=void 0===V||V,ot=x.altAxis,gt=void 0===ot||ot,wt=x.fallbackPlacements,Lt=x.padding,Mt=x.boundary,St=x.rootBoundary,ee=x.altBoundary,Ut=x.flipVariations,Zt=void 0===Ut||Ut,Kt=x.allowedAutoPlacements,te=f.options.placement,xe=Je(te),Ee=wt||(xe!==te&&Zt?function(Oe){if(Je(Oe)===U)return[];var Ti=on(Oe);return[rr(Oe),Ti,rr(Ti)]}(te):[on(te)]),re=[te].concat(Ee).reduce(function(Oe,Ti){return Oe.concat(Je(Ti)===U?function sr(S,f){void 0===f&&(f={});var V=f.boundary,$=f.rootBoundary,ot=f.padding,gt=f.flipVariations,wt=f.allowedAutoPlacements,Lt=void 0===wt?Ft:wt,Mt=sn(f.placement),St=Mt?gt?kt:kt.filter(function(Zt){return sn(Zt)===Mt}):ht,ee=St.filter(function(Zt){return Lt.indexOf(Zt)>=0});0===ee.length&&(ee=St);var Ut=ee.reduce(function(Zt,Kt){return Zt[Kt]=Xi(S,{placement:Kt,boundary:V,rootBoundary:$,padding:ot})[Je(Kt)],Zt},{});return Object.keys(Ut).sort(function(Zt,Kt){return Ut[Zt]-Ut[Kt]})}(f,{placement:Ti,boundary:Mt,rootBoundary:St,padding:Lt,flipVariations:Zt,allowedAutoPlacements:Kt}):Ti)},[]),ge=f.rects.reference,ie=f.rects.popper,ce=new Map,ye=!0,we=re[0],be=0;be<re.length;be++){var ze=re[be],Ri=Je(ze),nn=sn(ze)===ut,wi=[_e,E].indexOf(Ri)>=0,Ui=wi?"width":"height",Ci=Xi(f,{placement:ze,boundary:Mt,rootBoundary:St,altBoundary:ee,padding:Lt}),ci=wi?nn?M:R:nn?E:_e;ge[Ui]>ie[Ui]&&(ci=on(ci));var fn=on(ci),dn=[];if($&&dn.push(Ci[Ri]<=0),gt&&dn.push(Ci[ci]<=0,Ci[fn]<=0),dn.every(function(Oe){return Oe})){we=ze,ye=!1;break}ce.set(ze,dn)}if(ye)for(var pr=function(Oe){var Ti=re.find(function(Gi){var Vn=ce.get(Gi);if(Vn)return Vn.slice(0,Oe).every(function(Cr){return Cr})});if(Ti)return we=Ti,"break"},ni=Zt?3:1;ni>0&&"break"!==pr(ni);ni--);f.placement!==we&&(f.modifiersData[k]._skip=!0,f.placement=we,f.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function qn(S,f,x){return void 0===x&&(x={x:0,y:0}),{top:S.top-f.height-x.y,right:S.right-f.width+x.x,bottom:S.bottom-f.height+x.y,left:S.left-f.width-x.x}}function zi(S){return[_e,M,E,R].some(function(f){return S[f]>=0})}const ar={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(S){var f=S.state,x=S.name,k=f.rects.reference,V=f.rects.popper,$=f.modifiersData.preventOverflow,ot=Xi(f,{elementContext:"reference"}),gt=Xi(f,{altBoundary:!0}),wt=qn(ot,k),Lt=qn(gt,V,$),Mt=zi(wt),St=zi(Lt);f.modifiersData[x]={referenceClippingOffsets:wt,popperEscapeOffsets:Lt,isReferenceHidden:Mt,hasPopperEscaped:St},f.attributes.popper=Object.assign({},f.attributes.popper,{"data-popper-reference-hidden":Mt,"data-popper-escaped":St})}},Fn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(S){var f=S.state,k=S.name,V=S.options.offset,$=void 0===V?[0,0]:V,ot=Ft.reduce(function(Mt,St){return Mt[St]=(Ut=f.rects,Zt=$,Kt=Je(ee=St),te=[R,_e].indexOf(Kt)>=0?-1:1,Ee=(Ee=(xe="function"==typeof Zt?Zt(Object.assign({},Ut,{placement:ee})):Zt)[0])||0,re=((re=xe[1])||0)*te,[R,M].indexOf(Kt)>=0?{x:re,y:Ee}:{x:Ee,y:re}),Mt;var ee,Ut,Zt,Kt,te,xe,Ee,re},{}),gt=ot[f.placement],Lt=gt.y;null!=f.modifiersData.popperOffsets&&(f.modifiersData.popperOffsets.x+=gt.x,f.modifiersData.popperOffsets.y+=Lt),f.modifiersData[k]=ot}},ln={name:"popperOffsets",enabled:!0,phase:"read",fn:function(S){var f=S.state;f.modifiersData[S.name]=Qi({reference:f.rects.reference,element:f.rects.popper,strategy:"absolute",placement:f.placement})},data:{}},$n={name:"preventOverflow",enabled:!0,phase:"main",fn:function(S){var Ar,Hr,f=S.state,x=S.options,k=S.name,V=x.mainAxis,$=void 0===V||V,ot=x.altAxis,gt=void 0!==ot&&ot,ee=x.tether,Ut=void 0===ee||ee,Zt=x.tetherOffset,Kt=void 0===Zt?0:Zt,te=Xi(f,{boundary:x.boundary,rootBoundary:x.rootBoundary,padding:x.padding,altBoundary:x.altBoundary}),xe=Je(f.placement),Ee=sn(f.placement),re=!Ee,ge=Ze(xe),ie="x"===ge?"y":"x",ce=f.modifiersData.popperOffsets,ye=f.rects.reference,we=f.rects.popper,be="function"==typeof Kt?Kt(Object.assign({},f.rects,{placement:f.placement})):Kt,ze="number"==typeof be?{mainAxis:be,altAxis:be}:Object.assign({mainAxis:0,altAxis:0},be),Ri=f.modifiersData.offset?f.modifiersData.offset[f.placement]:null,nn={x:0,y:0};if(ce){if($){var wi,Ui="y"===ge?_e:R,Ci="y"===ge?E:M,ci="y"===ge?"height":"width",fn=ce[ge],dn=fn+te[Ui],pr=fn-te[Ci],ni=Ut?-we[ci]/2:0,Oe=Ee===ut?ye[ci]:we[ci],Ti=Ee===ut?-we[ci]:-ye[ci],Gi=f.elements.arrow,Vn=Ut&&Gi?yn(Gi):{width:0,height:0},Cr=f.modifiersData["arrow#persistent"]?f.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},kr=Cr[Ui],Dr=Cr[Ci],Tr=_i(0,ye[ci],Vn[ci]),Wr=re?ye[ci]/2-ni-Tr-kr-ze.mainAxis:Oe-Tr-kr-ze.mainAxis,Xr=re?-ye[ci]/2+ni+Tr+Dr+ze.mainAxis:Ti+Tr+Dr+ze.mainAxis,Or=f.elements.arrow&&$i(f.elements.arrow),Pr=null!=(wi=Ri?.[ge])?wi:0,Yr=fn+Xr-Pr,jr=_i(Ut?_n(dn,fn+Wr-Pr-(Or?"y"===ge?Or.clientTop||0:Or.clientLeft||0:0)):dn,fn,Ut?ji(pr,Yr):pr);ce[ge]=jr,nn[ge]=jr-fn}if(gt){var Lr,nr=ce[ie],Sr="y"===ie?"height":"width",Mr=nr+te["x"===ge?_e:R],Ir=nr-te["x"===ge?E:M],Er=-1!==[_e,R].indexOf(xe),Fr=null!=(Lr=Ri?.[ie])?Lr:0,Rr=Er?Mr:nr-ye[Sr]-we[Sr]-Fr+ze.altAxis,Nr=Er?nr+ye[Sr]+we[Sr]-Fr-ze.altAxis:Ir,Br=Ut&&Er?(Hr=_i(Rr,nr,Ar=Nr))>Ar?Ar:Hr:_i(Ut?Rr:Mr,nr,Ut?Nr:Ir);ce[ie]=Br,nn[ie]=Br-nr}f.modifiersData[k]=nn}},requiresIfExists:["offset"]};function Cn(S,f,x){void 0===x&&(x=!1);var k,V,St,ee,Ut,Zt,$=Qe(f),ot=Qe(f)&&(ee=(St=f).getBoundingClientRect(),Ut=Si(ee.width)/St.offsetWidth||1,Zt=Si(ee.height)/St.offsetHeight||1,1!==Ut||1!==Zt),gt=Li(f),wt=Ni(S,ot,x),Lt={scrollLeft:0,scrollTop:0},Mt={x:0,y:0};return($||!$&&!x)&&(("body"!==vi(f)||Ii(gt))&&(Lt=(k=f)!==$e(k)&&Qe(k)?{scrollLeft:(V=k).scrollLeft,scrollTop:V.scrollTop}:Gn(k)),Qe(f)?((Mt=Ni(f,!0)).x+=f.clientLeft,Mt.y+=f.clientTop):gt&&(Mt.x=Mi(gt))),{x:wt.left+Lt.scrollLeft-Mt.x,y:wt.top+Lt.scrollTop-Mt.y,width:wt.width,height:wt.height}}function lr(S){var f=new Map,x=new Set,k=[];function V($){x.add($.name),[].concat($.requires||[],$.requiresIfExists||[]).forEach(function(ot){if(!x.has(ot)){var gt=f.get(ot);gt&&V(gt)}}),k.push($)}return S.forEach(function($){f.set($.name,$)}),S.forEach(function($){x.has($.name)||V($)}),k}var cr={placement:"bottom",modifiers:[],strategy:"absolute"};function hr(){for(var S=arguments.length,f=new Array(S),x=0;x<S;x++)f[x]=arguments[x];return!f.some(function(k){return!(k&&"function"==typeof k.getBoundingClientRect)})}function Fi(S){void 0===S&&(S={});var x=S.defaultModifiers,k=void 0===x?[]:x,V=S.defaultOptions,$=void 0===V?cr:V;return function(ot,gt,wt){void 0===wt&&(wt=$);var Lt,Mt,St={placement:"bottom",orderedModifiers:[],options:Object.assign({},cr,$),modifiersData:{},elements:{reference:ot,popper:gt},attributes:{},styles:{}},ee=[],Ut=!1,Zt={state:St,setOptions:function(te){var xe="function"==typeof te?te(St.options):te;Kt(),St.options=Object.assign({},$,St.options,xe),St.scrollParents={reference:ai(ot)?Hi(ot):ot.contextElement?Hi(ot.contextElement):[],popper:Hi(gt)};var Ee,re,ie,ce,ge=(Ee=[].concat(k,St.options.modifiers),re=Ee.reduce(function(ie,ce){var ye=ie[ce.name];return ie[ce.name]=ye?Object.assign({},ye,ce,{options:Object.assign({},ye.options,ce.options),data:Object.assign({},ye.data,ce.data)}):ce,ie},{}),ie=Object.keys(re).map(function(ie){return re[ie]}),ce=lr(ie),gn.reduce(function(ye,we){return ye.concat(ce.filter(function(be){return be.phase===we}))},[]));return St.orderedModifiers=ge.filter(function(ie){return ie.enabled}),St.orderedModifiers.forEach(function(ie){var ye=ie.options,be=ie.effect;if("function"==typeof be){var ze=be({state:St,name:ie.name,instance:Zt,options:void 0===ye?{}:ye});ee.push(ze||function(){})}}),Zt.update()},forceUpdate:function(){if(!Ut){var te=St.elements,xe=te.reference,Ee=te.popper;if(hr(xe,Ee)){St.rects={reference:Cn(xe,$i(Ee),"fixed"===St.options.strategy),popper:yn(Ee)},St.reset=!1,St.placement=St.options.placement,St.orderedModifiers.forEach(function(be){return St.modifiersData[be.name]=Object.assign({},be.data)});for(var re=0;re<St.orderedModifiers.length;re++)if(!0!==St.reset){var ge=St.orderedModifiers[re],ie=ge.fn,ce=ge.options;"function"==typeof ie&&(St=ie({state:St,options:void 0===ce?{}:ce,name:ge.name,instance:Zt})||St)}else St.reset=!1,re=-1}}},update:(Lt=function(){return new Promise(function(te){Zt.forceUpdate(),te(St)})},function(){return Mt||(Mt=new Promise(function(te){Promise.resolve().then(function(){Mt=void 0,te(Lt())})})),Mt}),destroy:function(){Kt(),Ut=!0}};if(!hr(ot,gt))return Zt;function Kt(){ee.forEach(function(te){return te()}),ee=[]}return Zt.setOptions(wt).then(function(te){!Ut&&wt.onFirstUpdate&&wt.onFirstUpdate(te)}),Zt}}var Kn=Fi(),Qn=Fi({defaultModifiers:[Mn,ln,Ln,vn]}),Tn=Fi({defaultModifiers:[Mn,ln,Ln,vn,Fn,or,$n,jn,ar]});const Rn=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Fi,detectOverflow:Xi,createPopperBase:Kn,createPopper:Tn,createPopperLite:Qn,top:_e,bottom:E,right:M,left:R,auto:U,basePlacements:ht,start:ut,end:ct,clippingParents:xt,viewport:_t,popper:Ct,reference:Rt,variationPlacements:kt,placements:Ft,beforeRead:Gt,read:"read",afterRead:je,beforeMain:oi,main:"main",afterMain:qe,beforeWrite:Me,write:"write",afterWrite:qi,modifierPhases:gn,applyStyles:vn,arrow:jn,computeStyles:Ln,eventListeners:Mn,flip:or,hide:ar,offset:Fn,popperOffsets:ln,preventOverflow:$n},Symbol.toStringTag,{value:"Module"})),cn="dropdown",Nn="ArrowUp",Bn="ArrowDown",Ji="click.bs.dropdown.data-api",Sn="keydown.bs.dropdown.data-api",fi="show",Ai='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Hn=`${Ai}.show`,Zi=".dropdown-menu",mr=w()?"top-end":"top-start",h=w()?"top-start":"top-end",p=w()?"bottom-end":"bottom-start",g=w()?"bottom-start":"bottom-end",r=w()?"left-start":"right-start",m=w()?"right-start":"left-start",y={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},T={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class D extends Yt{constructor(f,x){super(f,x),this._popper=null,this._parent=this._element.parentNode,this._menu=Ot.next(this._element,Zi)[0]||Ot.prev(this._element,Zi)[0]||Ot.findOne(Zi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return y}static get DefaultType(){return T}static get NAME(){return cn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(s(this._element)||this._isShown())return;const f={relatedTarget:this._element};if(!H.trigger(this._element,"show.bs.dropdown",f).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const x of[].concat(...document.body.children))H.on(x,"mouseover",d);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(fi),this._element.classList.add(fi),H.trigger(this._element,"shown.bs.dropdown",f)}}hide(){!s(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(f){if(!H.trigger(this._element,"hide.bs.dropdown",f).defaultPrevented){if("ontouchstart"in document.documentElement)for(const x of[].concat(...document.body.children))H.off(x,"mouseover",d);this._popper&&this._popper.destroy(),this._menu.classList.remove(fi),this._element.classList.remove(fi),this._element.setAttribute("aria-expanded","false"),Pt.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,"hidden.bs.dropdown",f)}}_getConfig(f){if("object"==typeof(f=super._getConfig(f)).reference&&!e(f.reference)&&"function"!=typeof f.reference.getBoundingClientRect)throw new TypeError(`${cn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return f}_createPopper(){if(void 0===Rn)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let f=this._element;"parent"===this._config.reference?f=this._parent:e(this._config.reference)?f=i(this._config.reference):"object"==typeof this._config.reference&&(f=this._config.reference);const x=this._getPopperConfig();this._popper=Tn(f,this._menu,x)}_isShown(){return this._menu.classList.contains(fi)}_getPlacement(){const f=this._parent;if(f.classList.contains("dropend"))return r;if(f.classList.contains("dropstart"))return m;if(f.classList.contains("dropup-center"))return"top";if(f.classList.contains("dropdown-center"))return"bottom";const x="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return f.classList.contains("dropup")?x?h:mr:x?g:p}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:f}=this._config;return"string"==typeof f?f.split(",").map(x=>Number.parseInt(x,10)):"function"==typeof f?x=>f(x,this._element):f}_getPopperConfig(){const f={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Pt.setDataAttribute(this._menu,"popper","static"),f.modifiers=[{name:"applyStyles",enabled:!1}]),{...f,..."function"==typeof this._config.popperConfig?this._config.popperConfig(f):this._config.popperConfig}}_selectMenuItem({key:f,target:x}){const k=Ot.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(V=>o(V));k.length&&N(k,x,f===Bn,!k.includes(x)).focus()}static jQueryInterface(f){return this.each(function(){const x=D.getOrCreateInstance(this,f);if("string"==typeof f){if(void 0===x[f])throw new TypeError(`No method named "${f}"`);x[f]()}})}static clearMenus(f){if(2===f.button||"keyup"===f.type&&"Tab"!==f.key)return;const x=Ot.find(Hn);for(const k of x){const V=D.getInstance(k);if(!V||!1===V._config.autoClose)continue;const $=f.composedPath(),ot=$.includes(V._menu);if($.includes(V._element)||"inside"===V._config.autoClose&&!ot||"outside"===V._config.autoClose&&ot||V._menu.contains(f.target)&&("keyup"===f.type&&"Tab"===f.key||/input|select|option|textarea|form/i.test(f.target.tagName)))continue;const gt={relatedTarget:V._element};"click"===f.type&&(gt.clickEvent=f),V._completeHide(gt)}}static dataApiKeydownHandler(f){const x=/input|textarea/i.test(f.target.tagName),k="Escape"===f.key,V=[Nn,Bn].includes(f.key);if(!V&&!k||x&&!k)return;f.preventDefault();const $=this.matches(Ai)?this:Ot.prev(this,Ai)[0]||Ot.next(this,Ai)[0]||Ot.findOne(Ai,f.delegateTarget.parentNode),ot=D.getOrCreateInstance($);if(V)return f.stopPropagation(),ot.show(),void ot._selectMenuItem(f);ot._isShown()&&(f.stopPropagation(),ot.hide(),$.focus())}}H.on(document,Sn,Ai,D.dataApiKeydownHandler),H.on(document,Sn,Zi,D.dataApiKeydownHandler),H.on(document,Ji,D.clearMenus),H.on(document,"keyup.bs.dropdown.data-api",D.clearMenus),H.on(document,Ji,Ai,function(S){S.preventDefault(),D.getOrCreateInstance(this).toggle()}),O(D);const P=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",B=".sticky-top",K="padding-right",nt="margin-right";class J{constructor(){this._element=document.body}getWidth(){const f=document.documentElement.clientWidth;return Math.abs(window.innerWidth-f)}hide(){const f=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,K,x=>x+f),this._setElementAttributes(P,K,x=>x+f),this._setElementAttributes(B,nt,x=>x-f)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,K),this._resetElementAttributes(P,K),this._resetElementAttributes(B,nt)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(f,x,k){const V=this.getWidth();this._applyManipulationCallback(f,$=>{if($!==this._element&&window.innerWidth>$.clientWidth+V)return;this._saveInitialAttribute($,x);const ot=window.getComputedStyle($).getPropertyValue(x);$.style.setProperty(x,`${k(Number.parseFloat(ot))}px`)})}_saveInitialAttribute(f,x){const k=f.style.getPropertyValue(x);k&&Pt.setDataAttribute(f,x,k)}_resetElementAttributes(f,x){this._applyManipulationCallback(f,k=>{const V=Pt.getDataAttribute(k,x);null!==V?(Pt.removeDataAttribute(k,x),k.style.setProperty(x,V)):k.style.removeProperty(x)})}_applyManipulationCallback(f,x){if(e(f))x(f);else for(const k of Ot.find(f,this._element))x(k)}}const Dt="mousedown.bs.backdrop",Nt={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ht={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class oe extends Bt{constructor(f){super(),this._config=this._getConfig(f),this._isAppended=!1,this._element=null}static get Default(){return Nt}static get DefaultType(){return Ht}static get NAME(){return"backdrop"}show(f){if(!this._config.isVisible)return void A(f);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{A(f)})}hide(f){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),A(f)})):A(f)}dispose(){this._isAppended&&(H.off(this._element,Dt),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const f=document.createElement("div");f.className=this._config.className,this._config.isAnimated&&f.classList.add("fade"),this._element=f}return this._element}_configAfterMerge(f){return f.rootElement=i(f.rootElement),f}_append(){if(this._isAppended)return;const f=this._getElement();this._config.rootElement.append(f),H.on(f,Dt,()=>{A(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(f){F(f,this._getElement(),this._config.isAnimated)}}const Te=".bs.focustrap",ti="backward",ki={autofocus:!0,trapElement:null},$t={autofocus:"boolean",trapElement:"element"};class Yi extends Bt{constructor(f){super(),this._config=this._getConfig(f),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ki}static get DefaultType(){return $t}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),H.off(document,Te),H.on(document,"focusin.bs.focustrap",f=>this._handleFocusin(f)),H.on(document,"keydown.tab.bs.focustrap",f=>this._handleKeydown(f)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,H.off(document,Te))}_handleFocusin(f){const{trapElement:x}=this._config;if(f.target===document||f.target===x||x.contains(f.target))return;const k=Ot.focusableChildren(x);0===k.length?x.focus():this._lastTabNavDirection===ti?k[k.length-1].focus():k[0].focus()}_handleKeydown(f){"Tab"===f.key&&(this._lastTabNavDirection=f.shiftKey?ti:"forward")}}const ae="hidden.bs.modal",Le="show.bs.modal",Wn="modal-open",Di="modal-static",Jn={backdrop:!0,focus:!0,keyboard:!0},tn={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class di extends Yt{constructor(f,x){super(f,x),this._dialog=Ot.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new J,this._addEventListeners()}static get Default(){return Jn}static get DefaultType(){return tn}static get NAME(){return"modal"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||this._isTransitioning||H.trigger(this._element,Le,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Wn),this._adjustDialog(),this._backdrop.show(()=>this._showElement(f)))}hide(){this._isShown&&!this._isTransitioning&&(H.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const f of[window,this._dialog])H.off(f,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new oe({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Yi({trapElement:this._element})}_showElement(f){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const x=Ot.findOne(".modal-body",this._dialog);x&&(x.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,H.trigger(this._element,"shown.bs.modal",{relatedTarget:f})},this._dialog,this._isAnimated())}_addEventListeners(){H.on(this._element,"keydown.dismiss.bs.modal",f=>{if("Escape"===f.key)return this._config.keyboard?(f.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),H.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),H.on(this._element,"mousedown.dismiss.bs.modal",f=>{H.one(this._element,"click.dismiss.bs.modal",x=>{this._element===f.target&&this._element===x.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Wn),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,ae)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(H.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,x=this._element.style.overflowY;"hidden"===x||this._element.classList.contains(Di)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(Di),this._queueCallback(()=>{this._element.classList.remove(Di),this._queueCallback(()=>{this._element.style.overflowY=x},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const f=this._element.scrollHeight>document.documentElement.clientHeight,x=this._scrollBar.getWidth(),k=x>0;if(k&&!f){const V=w()?"paddingLeft":"paddingRight";this._element.style[V]=`${x}px`}if(!k&&f){const V=w()?"paddingRight":"paddingLeft";this._element.style[V]=`${x}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(f,x){return this.each(function(){const k=di.getOrCreateInstance(this,f);if("string"==typeof f){if(void 0===k[f])throw new TypeError(`No method named "${f}"`);k[f](x)}})}}H.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(S){const f=c(this);["A","AREA"].includes(this.tagName)&&S.preventDefault(),H.one(f,Le,k=>{k.defaultPrevented||H.one(f,ae,()=>{o(this)&&this.focus()})});const x=Ot.findOne(".modal.show");x&&di.getInstance(x).hide(),di.getOrCreateInstance(f).toggle(this)}),me(di),O(di);const bi="showing",Fe=".offcanvas.show",ei="hidePrevented.bs.offcanvas",en="hidden.bs.offcanvas",li={backdrop:!0,keyboard:!0,scroll:!1},Xt={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class pe extends Yt{constructor(f,x){super(f,x),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return li}static get DefaultType(){return Xt}static get NAME(){return"offcanvas"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||H.trigger(this._element,"show.bs.offcanvas",{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new J).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(bi),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(bi),H.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:f})},this._element,!0))}hide(){this._isShown&&(H.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new J).reset(),H.trigger(this._element,en)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const f=Boolean(this._config.backdrop);return new oe({className:"offcanvas-backdrop",isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?()=>{"static"!==this._config.backdrop?this.hide():H.trigger(this._element,ei)}:null})}_initializeFocusTrap(){return new Yi({trapElement:this._element})}_addEventListeners(){H.on(this._element,"keydown.dismiss.bs.offcanvas",f=>{"Escape"===f.key&&(this._config.keyboard?this.hide():H.trigger(this._element,ei))})}static jQueryInterface(f){return this.each(function(){const x=pe.getOrCreateInstance(this,f);if("string"==typeof f){if(void 0===x[f]||f.startsWith("_")||"constructor"===f)throw new TypeError(`No method named "${f}"`);x[f](this)}})}}H.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(S){const f=c(this);if(["A","AREA"].includes(this.tagName)&&S.preventDefault(),s(this))return;H.one(f,en,()=>{o(this)&&this.focus()});const x=Ot.findOne(Fe);x&&x!==f&&pe.getInstance(x).hide(),pe.getOrCreateInstance(f).toggle(this)}),H.on(window,"load.bs.offcanvas.data-api",()=>{for(const S of Ot.find(Fe))pe.getOrCreateInstance(S).show()}),H.on(window,"resize.bs.offcanvas",()=>{for(const S of Ot.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(S).position&&pe.getOrCreateInstance(S).hide()}),me(pe),O(pe);const Re=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Se=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Vi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Xn=(S,f)=>{const x=S.nodeName.toLowerCase();return f.includes(x)?!Re.has(x)||Boolean(Se.test(S.nodeValue)||Vi.test(S.nodeValue)):f.filter(k=>k instanceof RegExp).some(k=>k.test(x))},Zn={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},En={allowList:Zn,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},vr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},hn={entry:"(string|element|function|null)",selector:"(string|element)"};class yr extends Bt{constructor(f){super(),this._config=this._getConfig(f)}static get Default(){return En}static get DefaultType(){return vr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(f=>this._resolvePossibleFunction(f)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(f){return this._checkContent(f),this._config.content={...this._config.content,...f},this}toHtml(){const f=document.createElement("div");f.innerHTML=this._maybeSanitize(this._config.template);for(const[V,$]of Object.entries(this._config.content))this._setContent(f,$,V);const x=f.children[0],k=this._resolvePossibleFunction(this._config.extraClass);return k&&x.classList.add(...k.split(" ")),x}_typeCheckConfig(f){super._typeCheckConfig(f),this._checkContent(f.content)}_checkContent(f){for(const[x,k]of Object.entries(f))super._typeCheckConfig({selector:x,entry:k},hn)}_setContent(f,x,k){const V=Ot.findOne(k,f);V&&((x=this._resolvePossibleFunction(x))?e(x)?this._putElementInTemplate(i(x),V):this._config.html?V.innerHTML=this._maybeSanitize(x):V.textContent=x:V.remove())}_maybeSanitize(f){return this._config.sanitize?function(x,k,V){if(!x.length)return x;if(V&&"function"==typeof V)return V(x);const $=(new window.DOMParser).parseFromString(x,"text/html"),ot=[].concat(...$.body.querySelectorAll("*"));for(const gt of ot){const wt=gt.nodeName.toLowerCase();if(!Object.keys(k).includes(wt)){gt.remove();continue}const Lt=[].concat(...gt.attributes),Mt=[].concat(k["*"]||[],k[wt]||[]);for(const St of Lt)Xn(St,Mt)||gt.removeAttribute(St.nodeName)}return $.body.innerHTML}(f,this._config.allowList,this._config.sanitizeFn):f}_resolvePossibleFunction(f){return"function"==typeof f?f(this):f}_putElementInTemplate(f,x){if(this._config.html)return x.innerHTML="",void x.append(f);x.textContent=f.textContent}}const tr=new Set(["sanitize","allowList","sanitizeFn"]),zn="fade",An="show",er="hide.bs.modal",Yn="hover",_r={AUTO:"auto",TOP:"top",RIGHT:w()?"left":"right",BOTTOM:"bottom",LEFT:w()?"right":"left"},br={allowList:Zn,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},L={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class z extends Yt{constructor(f,x){if(void 0===Rn)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(f,x),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return br}static get DefaultType(){return L}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(".modal"),er,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const f=H.trigger(this._element,this.constructor.eventName("show")),x=(a(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(f.defaultPrevented||!x)return;this._disposePopper();const k=this._getTipElement();this._element.setAttribute("aria-describedby",k.getAttribute("id"));const{container:V}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(V.append(k),H.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(k),k.classList.add(An),"ontouchstart"in document.documentElement)for(const $ of[].concat(...document.body.children))H.on($,"mouseover",d);this._queueCallback(()=>{H.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!H.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(An),"ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))H.off(f,"mouseover",d);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(f){const x=this._getTemplateFactory(f).toHtml();if(!x)return null;x.classList.remove(zn,An),x.classList.add(`bs-${this.constructor.NAME}-auto`);const k=(V=>{do{V+=Math.floor(1e6*Math.random())}while(document.getElementById(V));return V})(this.constructor.NAME).toString();return x.setAttribute("id",k),this._isAnimated()&&x.classList.add(zn),x}setContent(f){this._newContent=f,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(f){return this._templateFactory?this._templateFactory.changeContent(f):this._templateFactory=new yr({...this._config,content:f,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(f){return this.constructor.getOrCreateInstance(f.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(zn)}_isShown(){return this.tip&&this.tip.classList.contains(An)}_createPopper(f){const x="function"==typeof this._config.placement?this._config.placement.call(this,f,this._element):this._config.placement,k=_r[x.toUpperCase()];return Tn(this._element,f,this._getPopperConfig(k))}_getOffset(){const{offset:f}=this._config;return"string"==typeof f?f.split(",").map(x=>Number.parseInt(x,10)):"function"==typeof f?x=>f(x,this._element):f}_resolvePossibleFunction(f){return"function"==typeof f?f.call(this._element):f}_getPopperConfig(f){const x={placement:f,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:k=>{this._getTipElement().setAttribute("data-popper-placement",k.state.placement)}}]};return{...x,..."function"==typeof this._config.popperConfig?this._config.popperConfig(x):this._config.popperConfig}}_setListeners(){const f=this._config.trigger.split(" ");for(const x of f)if("click"===x)H.on(this._element,this.constructor.eventName("click"),this._config.selector,k=>{this._initializeOnDelegatedTarget(k).toggle()});else if("manual"!==x){const k=this.constructor.eventName(x===Yn?"mouseenter":"focusin"),V=this.constructor.eventName(x===Yn?"mouseleave":"focusout");H.on(this._element,k,this._config.selector,$=>{const ot=this._initializeOnDelegatedTarget($);ot._activeTrigger["focusin"===$.type?"focus":Yn]=!0,ot._enter()}),H.on(this._element,V,this._config.selector,$=>{const ot=this._initializeOnDelegatedTarget($);ot._activeTrigger["focusout"===$.type?"focus":Yn]=ot._element.contains($.relatedTarget),ot._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(".modal"),er,this._hideModalHandler)}_fixTitle(){const f=this._element.getAttribute("title");f&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",f),this._element.setAttribute("data-bs-original-title",f),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(f,x){clearTimeout(this._timeout),this._timeout=setTimeout(f,x)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(f){const x=Pt.getDataAttributes(this._element);for(const k of Object.keys(x))tr.has(k)&&delete x[k];return f={...x,..."object"==typeof f&&f?f:{}},f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f.container=!1===f.container?document.body:i(f.container),"number"==typeof f.delay&&(f.delay={show:f.delay,hide:f.delay}),"number"==typeof f.title&&(f.title=f.title.toString()),"number"==typeof f.content&&(f.content=f.content.toString()),f}_getDelegateConfig(){const f={};for(const x in this._config)this.constructor.Default[x]!==this._config[x]&&(f[x]=this._config[x]);return f.selector=!1,f.trigger="manual",f}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(f){return this.each(function(){const x=z.getOrCreateInstance(this,f);if("string"==typeof f){if(void 0===x[f])throw new TypeError(`No method named "${f}"`);x[f]()}})}}O(z);const it={...z.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},rt={...z.DefaultType,content:"(null|string|element|function)"};class dt extends z{static get Default(){return it}static get DefaultType(){return rt}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(f){return this.each(function(){const x=dt.getOrCreateInstance(this,f);if("string"==typeof f){if(void 0===x[f])throw new TypeError(`No method named "${f}"`);x[f]()}})}}O(dt);const Et="click.bs.scrollspy",Tt="active",At={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},fe={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class zt extends Yt{constructor(f,x){super(f,x),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return At}static get DefaultType(){return fe}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const f of this._observableSections.values())this._observer.observe(f)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(f){return f.target=i(f.target)||document.body,f.rootMargin=f.offset?`${f.offset}px 0px -30%`:f.rootMargin,"string"==typeof f.threshold&&(f.threshold=f.threshold.split(",").map(x=>Number.parseFloat(x))),f}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(H.off(this._config.target,Et),H.on(this._config.target,Et,"[href]",f=>{const x=this._observableSections.get(f.target.hash);if(x){f.preventDefault();const k=this._rootElement||window,V=x.offsetTop-this._element.offsetTop;if(k.scrollTo)return void k.scrollTo({top:V,behavior:"smooth"});k.scrollTop=V}}))}_getNewObserver(){return new IntersectionObserver(x=>this._observerCallback(x),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(f){const x=ot=>this._targetLinks.get(`#${ot.target.id}`),k=ot=>{this._previousScrollData.visibleEntryTop=ot.target.offsetTop,this._process(x(ot))},V=(this._rootElement||document.documentElement).scrollTop,$=V>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=V;for(const ot of f){if(!ot.isIntersecting){this._activeTarget=null,this._clearActiveClass(x(ot));continue}const gt=ot.target.offsetTop>=this._previousScrollData.visibleEntryTop;if($&&gt){if(k(ot),!V)return}else $||gt||k(ot)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const f=Ot.find("[href]",this._config.target);for(const x of f){if(!x.hash||s(x))continue;const k=Ot.findOne(x.hash,this._element);o(k)&&(this._targetLinks.set(x.hash,x),this._observableSections.set(x.hash,k))}}_process(f){this._activeTarget!==f&&(this._clearActiveClass(this._config.target),this._activeTarget=f,f.classList.add(Tt),this._activateParents(f),H.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:f}))}_activateParents(f){if(f.classList.contains("dropdown-item"))Ot.findOne(".dropdown-toggle",f.closest(".dropdown")).classList.add(Tt);else for(const x of Ot.parents(f,".nav, .list-group"))for(const k of Ot.prev(x,".nav-link, .nav-item > .nav-link, .list-group-item"))k.classList.add(Tt)}_clearActiveClass(f){f.classList.remove(Tt);const x=Ot.find("[href].active",f);for(const k of x)k.classList.remove(Tt)}static jQueryInterface(f){return this.each(function(){const x=zt.getOrCreateInstance(this,f);if("string"==typeof f){if(void 0===x[f]||f.startsWith("_")||"constructor"===f)throw new TypeError(`No method named "${f}"`);x[f]()}})}}H.on(window,"load.bs.scrollspy.data-api",()=>{for(const S of Ot.find('[data-bs-spy="scroll"]'))zt.getOrCreateInstance(S)}),O(zt);const Jt="ArrowLeft",se="ArrowRight",Vt="ArrowUp",Ne="ArrowDown",We="active",ii="show",pi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',xi=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${pi}`;class de extends Yt{constructor(f){super(f),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),H.on(this._element,"keydown.bs.tab",x=>this._keydown(x)))}static get NAME(){return"tab"}show(){const f=this._element;if(this._elemIsActive(f))return;const x=this._getActiveElem(),k=x?H.trigger(x,"hide.bs.tab",{relatedTarget:f}):null;H.trigger(f,"show.bs.tab",{relatedTarget:x}).defaultPrevented||k&&k.defaultPrevented||(this._deactivate(x,f),this._activate(f,x))}_activate(f,x){f&&(f.classList.add(We),this._activate(c(f)),this._queueCallback(()=>{"tab"===f.getAttribute("role")?(f.removeAttribute("tabindex"),f.setAttribute("aria-selected",!0),this._toggleDropDown(f,!0),H.trigger(f,"shown.bs.tab",{relatedTarget:x})):f.classList.add(ii)},f,f.classList.contains("fade")))}_deactivate(f,x){f&&(f.classList.remove(We),f.blur(),this._deactivate(c(f)),this._queueCallback(()=>{"tab"===f.getAttribute("role")?(f.setAttribute("aria-selected",!1),f.setAttribute("tabindex","-1"),this._toggleDropDown(f,!1),H.trigger(f,"hidden.bs.tab",{relatedTarget:x})):f.classList.remove(ii)},f,f.classList.contains("fade")))}_keydown(f){if(![Jt,se,Vt,Ne].includes(f.key))return;f.stopPropagation(),f.preventDefault();const x=[se,Ne].includes(f.key),k=N(this._getChildren().filter(V=>!s(V)),f.target,x,!0);k&&(k.focus({preventScroll:!0}),de.getOrCreateInstance(k).show())}_getChildren(){return Ot.find(xi,this._parent)}_getActiveElem(){return this._getChildren().find(f=>this._elemIsActive(f))||null}_setInitialAttributes(f,x){this._setAttributeIfNotExists(f,"role","tablist");for(const k of x)this._setInitialAttributesOnChild(k)}_setInitialAttributesOnChild(f){f=this._getInnerElement(f);const x=this._elemIsActive(f),k=this._getOuterElement(f);f.setAttribute("aria-selected",x),k!==f&&this._setAttributeIfNotExists(k,"role","presentation"),x||f.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(f,"role","tab"),this._setInitialAttributesOnTargetPanel(f)}_setInitialAttributesOnTargetPanel(f){const x=c(f);x&&(this._setAttributeIfNotExists(x,"role","tabpanel"),f.id&&this._setAttributeIfNotExists(x,"aria-labelledby",`#${f.id}`))}_toggleDropDown(f,x){const k=this._getOuterElement(f);if(!k.classList.contains("dropdown"))return;const V=($,ot)=>{const gt=Ot.findOne($,k);gt&&gt.classList.toggle(ot,x)};V(".dropdown-toggle",We),V(".dropdown-menu",ii),k.setAttribute("aria-expanded",x)}_setAttributeIfNotExists(f,x,k){f.hasAttribute(x)||f.setAttribute(x,k)}_elemIsActive(f){return f.classList.contains(We)}_getInnerElement(f){return f.matches(xi)?f:Ot.findOne(xi,f)}_getOuterElement(f){return f.closest(".nav-item, .list-group-item")||f}static jQueryInterface(f){return this.each(function(){const x=de.getOrCreateInstance(this);if("string"==typeof f){if(void 0===x[f]||f.startsWith("_")||"constructor"===f)throw new TypeError(`No method named "${f}"`);x[f]()}})}}H.on(document,"click.bs.tab",pi,function(S){["A","AREA"].includes(this.tagName)&&S.preventDefault(),s(this)||de.getOrCreateInstance(this).show()}),H.on(window,"load.bs.tab",()=>{for(const S of Ot.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))de.getOrCreateInstance(S)}),O(de);const gi="show",kn="showing",xr={animation:"boolean",autohide:"boolean",delay:"number"},wr={animation:!0,autohide:!0,delay:5e3};class ir extends Yt{constructor(f,x){super(f,x),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return wr}static get DefaultType(){return xr}static get NAME(){return"toast"}show(){H.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(gi,kn),this._queueCallback(()=>{this._element.classList.remove(kn),H.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(H.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(kn),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(kn,gi),H.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(gi),super.dispose()}isShown(){return this._element.classList.contains(gi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(f,x){switch(f.type){case"mouseover":case"mouseout":this._hasMouseInteraction=x;break;case"focusin":case"focusout":this._hasKeyboardInteraction=x}if(x)return void this._clearTimeout();const k=f.relatedTarget;this._element===k||this._element.contains(k)||this._maybeScheduleHide()}_setListeners(){H.on(this._element,"mouseover.bs.toast",f=>this._onInteraction(f,!0)),H.on(this._element,"mouseout.bs.toast",f=>this._onInteraction(f,!1)),H.on(this._element,"focusin.bs.toast",f=>this._onInteraction(f,!0)),H.on(this._element,"focusout.bs.toast",f=>this._onInteraction(f,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(f){return this.each(function(){const x=ir.getOrCreateInstance(this,f);if("string"==typeof f){if(void 0===x[f])throw new TypeError(`No method named "${f}"`);x[f](this)}})}}return me(ir),O(ir),{Alert:ne,Button:he,Carousel:mi,Collapse:Ge,Dropdown:D,Modal:di,Offcanvas:pe,Popover:dt,ScrollSpy:zt,Tab:de,Toast:ir,Tooltip:z}});