"use strict";(self.webpackChunkDOCKETRUN=self.webpackChunkDOCKETRUN||[]).push([[701],{9701:(pt,g,l)=>{l.r(g),l.d(g,{DashboardModule:()=>ht});var p=l(9569),x=l(9174),c=l(6948),u=l(1954),m=l(433),t=l(4650),b=l(529),D=l(9463),d=l(6895);let E=(()=>{class a{constructor(e,n,i){this.http=e,this.snackbar=n,this.datePipe=i;var o=this.loadConfigFile("assets/config.json");o=JSON.parse(o),this.IP=o.IP,this.dashboardInterval=o.dashboardInterval}loadConfigFile(e){return this.readConfigFile(e,"application/json")}readConfigFile(e,n){var i=new XMLHttpRequest;if(i.open("GET",e,!1),null!=n)return i.overrideMimeType&&i.overrideMimeType(n),i.send(),i.status?i.response:null}dateTransform(e){return this.datePipe.transform(e,"yyyy-MM-dd HH:mm:ss")}dateTransformbyPattern(e,n){return this.datePipe.transform(e,n)}notification(e,n){this.snackbar.open(e,n||"",{duration:4e3,panelClass:["error"],horizontalPosition:"center",verticalPosition:"bottom"})}GetLicenseDetails(){return this.http.get(this.IP+"/license_count")}GetViolationsList(){return this.http.get(this.IP+"/violation_type_details")}GetCamerasStatus(){return this.http.get(this.IP+"/get_cam_status_enable_cam_count")}GetLiveViolationsCount(){return this.http.get(this.IP+"/get_current_date_violation_counts")}GetDatewiseViolationsCount(e,n){return this.http.post(this.IP+"/date_wise_violations_count",{from_date:e,to_date:n})}EnabledCamDetails(){return this.http.get(this.IP+"/get_all_solns_enable_cam_details")}DisabledCamDetails(){return this.http.get(this.IP+"/disable_camera_details")}NotWorkingCamDetails(){return this.http.get(this.IP+"/get_not_working_camera_details")}TotalViolationsDetails(){return this.http.get(this.IP+"/current_date_violations_cam_wise")}DatewiseTotalViolationsDetails(e,n){return this.http.post(this.IP+"/cam_wise_violations_count_by_date",{from_date:e,to_date:n})}PPEViolationsDetails(){return this.http.get(this.IP+"/cam_wise_PPE_violations_count")}DatewisePPEViolationsDetails(e,n){return this.http.post(this.IP+"/cam_wise_PPE_violations_by_date",{from_date:e,to_date:n})}RAViolationsDetails(){return this.http.get(this.IP+"/cam_wise_RA_violations_count")}DatewiseRAViolationsDetails(e,n){return this.http.post(this.IP+"/cam_wise_RA_violations_by_date",{from_date:e,to_date:n})}CCViolationsDetails(){return this.http.get(this.IP+"/cam_wise_CR_violations_count")}DatewiseCCViolationsDetails(e,n){return this.http.post(this.IP+"/cam_wise_CR_violations_by_date",{from_date:e,to_date:n})}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275inject(b.eN),t.\u0275\u0275inject(D.ux),t.\u0275\u0275inject(d.DatePipe))},a.\u0275prov=t.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var S=l(2953),v=l(1305),I=l(3868),C=l(2285);const P=["reportrange"],w=["datepicker"];function y(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"div",44)(1,"span",45)(2,"span",46),t.\u0275\u0275text(3,"Total Camera Licenses :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"b",47),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"span",45)(7,"span",46),t.\u0275\u0275text(8,"Utilized Camera Licenses :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"b",47),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"span",45)(12,"span",46),t.\u0275\u0275text(13,"Remaining Camera Licenses :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"b",47),t.\u0275\u0275text(15),t.\u0275\u0275elementEnd()()()),2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.camerasLicenseDetails.total_license),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.camerasLicenseDetails.added_cameras_count),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.camerasLicenseDetails.remaining_license)}}function M(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",48)(1,"fa-icon",49),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.RefreshData())}),t.\u0275\u0275elementEnd()()}}function V(a,s){1&a&&t.\u0275\u0275element(0,"fa-icon",50)}const _=function(a,s,e){return{"col-xl-3":a,"col-xl-4":s,"col-xl-6":e}};function O(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",29)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(),o=t.\u0275\u0275reference(96);return t.\u0275\u0275resetView(i.RAViolationsModal(o))}),t.\u0275\u0275elementStart(5,"h1"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",11),t.\u0275\u0275text(8,"Danger Zone Violations"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",9),t.\u0275\u0275element(10,"img",51),t.\u0275\u0275elementEnd()()()()}if(2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(2,_,3==e.violationList.length,2==e.violationList.length,1==e.violationList.length||4==e.violationList.length||5==e.violationList.length)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",e.violationsCount.ra_count,"")}}function L(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",29)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",9)(5,"h1",10),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(),o=t.\u0275\u0275reference(94);return t.\u0275\u0275resetView(i.PPEViolationsModal(o))}),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",11),t.\u0275\u0275text(8,"Personal Protective Equipment Violations"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",9),t.\u0275\u0275element(10,"img",52),t.\u0275\u0275elementEnd()()()()}if(2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(2,_,3==e.violationList.length,2==e.violationList.length,1==e.violationList.length||4==e.violationList.length||5==e.violationList.length)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(e.violationsCount.ppe_count)}}function T(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"div",53)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",9)(5,"h1"),t.\u0275\u0275text(6," 500"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",11),t.\u0275\u0275text(8,"Personal Protective Equipment Violations"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",9),t.\u0275\u0275element(10,"img",52),t.\u0275\u0275elementEnd()()()()),2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(1,_,3==e.violationList.length,2==e.violationList.length,1==e.violationList.length||4==e.violationList.length||5==e.violationList.length))}}function k(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",53)(1,"div",7)(2,"div",8)(3,"div",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(),o=t.\u0275\u0275reference(98);return t.\u0275\u0275resetView(i.CCViolationsModal(o))}),t.\u0275\u0275elementStart(4,"div",9)(5,"h1"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",11),t.\u0275\u0275text(8," Crowd Count Violations"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",9),t.\u0275\u0275element(10,"img",54),t.\u0275\u0275elementEnd()()()()}if(2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(2,_,3==e.violationList.length,2==e.violationList.length,1==e.violationList.length||4==e.violationList.length||5==e.violationList.length)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(e.violationsCount.cr_count)}}const f=function(){return{width:"100%",height:"360px"}};function F(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"div",55)(1,"div",56),t.\u0275\u0275element(2,"canvasjs-chart",57),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",56),t.\u0275\u0275element(4,"canvasjs-chart",57),t.\u0275\u0275elementEnd()()),2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("options",e.chartOptionsPie)("styles",t.\u0275\u0275pureFunction0(4,f)),t.\u0275\u0275advance(2),t.\u0275\u0275property("options",e.chartOptionsBar)("styles",t.\u0275\u0275pureFunction0(5,f))}}function R(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&a){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.AISolutions[e])}}function Y(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,R,2,1,"span",69),t.\u0275\u0275elementEnd()),2&a){const e=s.$implicit,n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.ai_solutions[e])}}function A(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"img",68),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.OpenCameraImage(o.imagename))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"td"),t.\u0275\u0275template(10,Y,2,1,"div",67),t.\u0275\u0275elementEnd()()}if(2&a){const e=s.$implicit,n=s.index,i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",n+1,"."),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",i.IP+"/get_roi_image/"+e.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_ip),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",i.Object.keys(e.ai_solutions))}}function N(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"table",64)(1,"thead",65)(2,"tr")(3,"th",66),t.\u0275\u0275text(4," SNo."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"th",66),t.\u0275\u0275text(6,"Camera Image"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"th",66),t.\u0275\u0275text(8,"Camera Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"th",66),t.\u0275\u0275text(10,"Camera IP"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"th",66),t.\u0275\u0275text(12,"Enabled AI Solutions"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(13,"tbody"),t.\u0275\u0275template(14,A,11,5,"tr",67),t.\u0275\u0275elementEnd()()),2&a){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(14),t.\u0275\u0275property("ngForOf",e.enabledCamDetails)}}function j(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",58)(1,"h4",59),t.\u0275\u0275text(2,"AI Enabled Cameras Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",60),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",61)(5,"div",62),t.\u0275\u0275template(6,N,15,1,"table",63),t.\u0275\u0275elementEnd()()}if(2&a){const e=t.\u0275\u0275nextContext(),n=t.\u0275\u0275reference(100);t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",e.enabledCamDetails.length>0)("ngIfElse",n)}}function H(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"img",68),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.OpenCameraImage(o.imagename))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()()}if(2&a){const e=s.$implicit,n=s.index,i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",n+1,"."),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",i.IP+"/get_roi_image/"+e.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_ip)}}function B(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"table",72)(1,"thead",65)(2,"tr")(3,"th"),t.\u0275\u0275text(4,"SNo."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"th"),t.\u0275\u0275text(6,"Camera Image"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"th"),t.\u0275\u0275text(8,"Camera Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"th"),t.\u0275\u0275text(10,"Camera IP"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"tbody"),t.\u0275\u0275template(12,H,9,4,"tr",67),t.\u0275\u0275elementEnd()()),2&a){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(12),t.\u0275\u0275property("ngForOf",e.disabledCamDetails)}}function $(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",58)(1,"h4",59),t.\u0275\u0275text(2,"AI Disabled Cameras Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",60),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",70)(5,"div",62),t.\u0275\u0275template(6,B,13,1,"table",71),t.\u0275\u0275elementEnd()()}if(2&a){const e=t.\u0275\u0275nextContext(),n=t.\u0275\u0275reference(100);t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",e.disabledCamDetails.length>0)("ngIfElse",n)}}function G(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"img",74),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(r.OpenCameraImage(o.imagename))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()()}if(2&a){const e=s.$implicit,n=s.index,i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",n+1,"."),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",i.IP+"/get_roi_image/"+e.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_ip)}}function z(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"table",72)(1,"thead",65)(2,"tr")(3,"th"),t.\u0275\u0275text(4,"SNo."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"th"),t.\u0275\u0275text(6,"Camera Image"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"th"),t.\u0275\u0275text(8,"Camera Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"th"),t.\u0275\u0275text(10,"Camera IP"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"tbody"),t.\u0275\u0275template(12,G,9,4,"tr",67),t.\u0275\u0275elementEnd()()),2&a){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(12),t.\u0275\u0275property("ngForOf",e.NWCamDetails)}}function Z(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",58)(1,"h4",59),t.\u0275\u0275text(2,"Not Working Cameras Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",60),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",73)(5,"div",62),t.\u0275\u0275template(6,z,13,1,"table",71),t.\u0275\u0275elementEnd()()}if(2&a){const e=t.\u0275\u0275nextContext(),n=t.\u0275\u0275reference(100);t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",e.NWCamDetails.length>0)("ngIfElse",n)}}function U(a,s){1&a&&(t.\u0275\u0275elementStart(0,"tr")(1,"th"),t.\u0275\u0275text(2,"SNo."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"th"),t.\u0275\u0275text(4,"Camera Image"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"th"),t.\u0275\u0275text(6,"Camera Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"th"),t.\u0275\u0275text(8,"Camera IP"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"th"),t.\u0275\u0275text(10,"Danger Zone Violations Count"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"th"),t.\u0275\u0275text(12,"Personal Protective Equipment Violations Count"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"th"),t.\u0275\u0275text(14,"Crowd Count Violations Count"),t.\u0275\u0275elementEnd()())}function W(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"img",68),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.OpenCameraImage(o.imagename))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"td"),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"td"),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"td"),t.\u0275\u0275text(14),t.\u0275\u0275elementEnd()()}if(2&a){const e=s.$implicit,n=s.index,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",n+1,"."),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",i.IP+"/get_roi_image/"+e.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_ip),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.roi_type_counts),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.ppe_type_counts),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.cr_type_counts)}}function Q(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",58)(1,"h4",59),t.\u0275\u0275text(2,"All Violations Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",60),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",75)(5,"div",62)(6,"table",72)(7,"thead",65),t.\u0275\u0275template(8,U,15,0,"tr",76),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"tbody"),t.\u0275\u0275template(10,W,15,7,"tr",67),t.\u0275\u0275elementEnd()()()()}if(2&a){const e=t.\u0275\u0275nextContext(),n=t.\u0275\u0275reference(100);t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",e.allViolationsDetails.length>0)("ngIfElse",n),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.allViolationsDetails)}}function J(a,s){1&a&&(t.\u0275\u0275elementStart(0,"tr")(1,"th"),t.\u0275\u0275text(2,"SNo."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"th"),t.\u0275\u0275text(4,"Camera Image"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"th"),t.\u0275\u0275text(6,"Camera Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"th"),t.\u0275\u0275text(8,"Camera IP"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"th"),t.\u0275\u0275text(10,"Violations Count"),t.\u0275\u0275elementEnd()())}function K(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"img",68),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.OpenCameraImage(o.imagename))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"td"),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()}if(2&a){const e=s.$implicit,n=s.index,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",n+1,"."),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",i.IP+"/get_roi_image/"+e.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_ip),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.ppe_type_counts)}}function X(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",58)(1,"h4",59),t.\u0275\u0275text(2,"Personal Protective Equipment Violations Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",60),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",77)(5,"div",62)(6,"table",72)(7,"thead",65),t.\u0275\u0275template(8,J,11,0,"tr",76),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"tbody"),t.\u0275\u0275template(10,K,11,5,"tr",67),t.\u0275\u0275elementEnd()()()()}if(2&a){const e=t.\u0275\u0275nextContext(),n=t.\u0275\u0275reference(100);t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",e.PPEViolations.length>0)("ngIfElse",n),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.PPEViolations)}}function q(a,s){1&a&&(t.\u0275\u0275elementStart(0,"tr")(1,"th"),t.\u0275\u0275text(2,"SNo."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"th"),t.\u0275\u0275text(4,"Camera Image"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"th"),t.\u0275\u0275text(6,"Camera Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"th"),t.\u0275\u0275text(8,"Camera IP"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"th"),t.\u0275\u0275text(10,"Violations Count"),t.\u0275\u0275elementEnd()())}function tt(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"img",68),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.OpenCameraImage(o.imagename))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"td"),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()}if(2&a){const e=s.$implicit,n=s.index,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",n+1,"."),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",i.IP+"/get_roi_image/"+e.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_ip),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.roi_type_counts)}}function et(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",58)(1,"h4",59),t.\u0275\u0275text(2,"Danger Zone Violations Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",60),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",78)(5,"div",62)(6,"table",72)(7,"thead",65),t.\u0275\u0275template(8,q,11,0,"tr",76),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"tbody"),t.\u0275\u0275template(10,tt,11,5,"tr",67),t.\u0275\u0275elementEnd()()()()}if(2&a){const e=t.\u0275\u0275nextContext(),n=t.\u0275\u0275reference(100);t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",e.RAViolations.length>0)("ngIfElse",n),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.RAViolations)}}function nt(a,s){1&a&&(t.\u0275\u0275elementStart(0,"tr")(1,"th"),t.\u0275\u0275text(2,"SNo."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"th"),t.\u0275\u0275text(4,"Camera Image"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"th"),t.\u0275\u0275text(6,"Camera Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"th"),t.\u0275\u0275text(8,"Camera IP"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"th"),t.\u0275\u0275text(10,"Violations Count"),t.\u0275\u0275elementEnd()())}function at(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"img",68),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.OpenCameraImage(o.imagename))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"td"),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()}if(2&a){const e=s.$implicit,n=s.index,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",n+1,"."),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",i.IP+"/get_roi_image/"+e.imagename,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.camera_ip),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.cr_type_counts)}}function it(a,s){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",58)(1,"h4",59),t.\u0275\u0275text(2,"Crowd Count Violations Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",60),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",79)(5,"div",62)(6,"table",72)(7,"thead",65),t.\u0275\u0275template(8,nt,11,0,"tr",76),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"tbody"),t.\u0275\u0275template(10,at,11,5,"tr",67),t.\u0275\u0275elementEnd()()()()}if(2&a){const e=t.\u0275\u0275nextContext(),n=t.\u0275\u0275reference(100);t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",e.CCViolations.length>0)("ngIfElse",n),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.CCViolations)}}function ot(a,s){1&a&&(t.\u0275\u0275elementStart(0,"div",82)(1,"h4"),t.\u0275\u0275text(2," Loading..."),t.\u0275\u0275elementEnd()())}function st(a,s){1&a&&(t.\u0275\u0275elementStart(0,"div",82)(1,"h4"),t.\u0275\u0275text(2," Data Not Found"),t.\u0275\u0275elementEnd()())}function rt(a,s){1&a&&(t.\u0275\u0275elementStart(0,"div",82)(1,"h4"),t.\u0275\u0275text(2,"Error While Fetching data"),t.\u0275\u0275elementEnd()())}function lt(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"div",80),t.\u0275\u0275template(1,ot,3,0,"div",81),t.\u0275\u0275template(2,st,3,0,"div",81),t.\u0275\u0275template(3,rt,3,0,"div",81),t.\u0275\u0275elementEnd()),2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","init"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","success"==e.dataFetchStatus),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Error"==e.dataFetchStatus)}}let ct=(()=>{class a{constructor(e,n,i,o,r){this.service=e,this.modalService=n,this.Router=i,this._lightbox=o,this._lightBoxConfig=r,this.selectedMoments=null,this.enabledCamDetails=[],this.cameraStatus={total_cam_count:0,enable_data_count:0,disable_data_count:0,not_working_cam_count:0,working_cam_count:0},this.disabledCamDetails=[],this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0},this.NWCamDetails=[],this.violationList=[],this.PPEViolations=[],this.CCViolations=[],this.RAViolations=[],this.isDatewise=!1,this.Object=Object,this.allViolationsDetails=[],this.images=[],this.aiSolutions=[{name:"Danger Zone",value:"ra"},{name:"Personal Protective Equipment",value:"ppe"},{name:"Crowd Count",value:"cr"},{name:"Spillage",value:"spillage"},{name:"Fire",value:"fire"},{name:"Smoke",value:"smoke"},{name:"Dust",value:"dust"}],this.AISolutions={RA:"Danger Zone",PPE:"Personal Protective Equipment",TC:"Traffic Count",CR:"Crowd Count",fire:"Fire",smoke:"Smoke"},this.dateInputControl=new m.NI("",m.kI.required),this.calendarIcon=!1,this.dataFetchStatus="init",this.ranges={Today:[(0,c.Z)().hour(0).minute(0).second(0),(0,c.Z)()],Yesterday:[(0,c.Z)().subtract(1,"days").hour(0).minute(0).second(0),(0,c.Z)().subtract(1,"days")],"Last 7 Days":[(0,c.Z)().subtract(6,"days").hour(0).minute(0).second(0),(0,c.Z)()],"Last 30 Days":[(0,c.Z)().subtract(29,"days").hour(0).minute(0).second(0),(0,c.Z)()],"This Month":[(0,c.Z)().startOf("month").hour(0).minute(0).second(0),(0,c.Z)().endOf("month")]},this.IP=this.service.IP,this.dashboardInterval=this.service.dashboardInterval,this.camerasStatusAndViolationsInterval=setInterval(()=>{this.service.GetCamerasStatus().subscribe(h=>{this.cameraStatus=h.message[0]}),this.isDatewise||this.service.GetLiveViolationsCount().subscribe(h=>{h.success?this.isDatewise||(this.violationsCount=h.message,this.ChartDraw()):this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0}},h=>{this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0}})},this.dashboardInterval),this.camerasLicenseDetailsInterval=setInterval(()=>{this.GetLicenseDetails()},this.dashboardInterval),this._lightBoxConfig.showDownloadButton=!1,this._lightBoxConfig.showZoom=!0,this._lightBoxConfig.showImageNumberLabel=!0,this._lightBoxConfig.fitImageInViewPort=!0,this._lightBoxConfig.disableScrolling=!1,this._lightBoxConfig.centerVertically=!1}ngOnInit(){this.GetLicenseDetails(),this.service.GetCamerasStatus().subscribe(e=>{this.cameraStatus=e.message[0]}),this.service.GetLiveViolationsCount().subscribe(e=>{e.success?(this.violationsCount=e.message,this.ChartDraw()):this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0}},e=>{this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0}}),this.service.GetViolationsList().subscribe(e=>{this.violationList=e.message})}ngAfterViewInit(){}GetLicenseDetails(){this.service.GetLicenseDetails().subscribe(e=>{e.success?this.camerasLicenseDetails=e.message:this.service.notification(e.message)},e=>{})}ToCameras(){this.Router.navigate(["/app/CameraSettings"])}OpenECDetailsModal(e){this.modalService.open(e,{scrollable:!0,size:"xl"}),this.images.splice(0,this.images.length);var n=document.getElementById("dataTableEC");n.classList.add("loading"),this.service.EnabledCamDetails().subscribe(i=>{i.success?(n.classList.remove("loading"),this.enabledCamDetails=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success")},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.modalService.dismissAll()})}OpenDCDetailsModal(e){this.images.splice(0,this.images.length),this.modalService.open(e,{size:"xl",scrollable:!0});var n=document.getElementById("dataTableDC");n.classList.add("loading"),this.service.DisabledCamDetails().subscribe(i=>{i.success?(n.classList.remove("loading"),this.disabledCamDetails=i.message,this.disabledCamDetails.forEach((o,r)=>{this.images[r]={src:this.IP+"/get_roi_image/"+o.imagename,thumb:this.IP+"/get_roi_image/"+o.imagename,caption:o.imagename}})):(n.classList.remove("loading"),this.dataFetchStatus="success")},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.modalService.dismissAll()})}OpenNWCDetailsModal(e){this.images.splice(0,this.images.length),this.modalService.open(e,{size:"xl",scrollable:!0});var n=document.getElementById("dataTableNW");n.classList.add("loading"),this.service.NotWorkingCamDetails().subscribe(i=>{i.success?(n.classList.remove("loading"),this.NWCamDetails=i.message,this.NWCamDetails.forEach((o,r)=>{this.images[r]={src:this.IP+"/get_roi_image/"+o.imagename,thumb:this.IP+"/get_roi_image/"+o.imagename,caption:o.imagename}})):(n.classList.remove("loading"),this.dataFetchStatus="success")},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.modalService.dismissAll()})}RefreshData(){this.isDatewise=!1,this.service.GetLiveViolationsCount().subscribe(e=>{e.success?this.isDatewise||(this.violationsCount=e.message,this.ChartDraw(),this.ClearDateInputField()):(this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0},this.ChartDraw(),this.ClearDateInputField())},e=>{this.service.notification("Error while fetching the data","Retry"),this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0},this.ClearDateInputField()})}ChartDraw(){this.chartOptionsPie={animationEnabled:!0,title:{text:"Violations"},subtitles:[{text:""}],data:[{type:"pie",indexLabel:"{name}: {y}",dataPoints:[]}]},this.violationList.indexOf("RA")>=0&&this.chartOptionsPie.data[0].dataPoints.push({name:"Danger Zone",y:this.violationsCount.ra_count?this.violationsCount.ra_count:0,color:"#5DABFF"}),this.violationList.indexOf("CRDCNT")>=0&&this.chartOptionsPie.data[0].dataPoints.push({name:"Crowd Count",y:this.violationsCount.cr_count?this.violationsCount.cr_count:0,color:"#128ec1"}),this.violationList.indexOf("PPE")>=0&&this.chartOptionsPie.data[0].dataPoints.push({name:"Personal Protective Equipment",y:this.violationsCount.ppe_count?this.violationsCount.ppe_count:0,color:"#6287b2"}),this.chartOptionsBar={title:{text:"Violations"},animationEnabled:!0,axisY:{includeZero:!0,suffix:""},axisX:{},data:[{type:"column",indexLabel:"{y}",yValueFormatString:"",dataPoints:[]}]},this.violationList.indexOf("RA")>=0&&this.chartOptionsBar.data[0].dataPoints.push({label:"Danger Zone",y:this.violationsCount.ra_count?this.violationsCount.ra_count:0,color:"#5DABFF"}),this.violationList.indexOf("PPE")>=0&&this.chartOptionsBar.data[0].dataPoints.push({label:"Personal Protective Equipment",y:this.violationsCount.ppe_count?this.violationsCount.ppe_count:0,color:"#6287b2"}),this.violationList.indexOf("CRDCNT")>=0&&this.chartOptionsBar.data[0].dataPoints.push({label:"Crowd Count",y:this.violationsCount.cr_count?this.violationsCount.cr_count:0,color:"#128ec1"})}ClearDateInputField(){this.dateInputControl.reset(),this.calendarIcon=!1}DateUpdated(e){this.selectedMoments.startDate||this.selectedMoments.endDate?(this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss"),this.service.GetDatewiseViolationsCount(this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss")).subscribe(o=>{this.isDatewise=!0,o.success?(this.violationsCount=o.message,this.ChartDraw()):(this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0},this.ChartDraw()),this.selectedMoments.startDate.date()==(new Date).getDate()&&this.selectedMoments.startDate.month()==(new Date).getMonth()&&this.selectedMoments.startDate.year()==(new Date).getFullYear()&&(this.isDatewise=!1)},o=>{this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0},this.service.notification("Error while fetching the data")})):(this.isDatewise=!1,this.service.GetDatewiseViolationsCount(this.service.dateTransform(new Date(new Date(new Date((new Date).setHours(0)).setMinutes(0)).setSeconds(0))),this.service.dateTransform(new Date)).subscribe(o=>{o.success?(this.violationsCount=o.message,this.ChartDraw()):(this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0},this.ChartDraw())},o=>{this.service.notification("Error while fetching the data"),this.violationsCount={total_count:0,ppe_count:0,ra_count:0,cr_count:0},this.ChartDraw()}))}OpenDatePicker(e){this.calendarIcon=!0,this.pickerDirective.open(e)}OpenAllViolationsModal(e){this.modalService.open(e,{size:"xl",scrollable:!0});var n=document.getElementById("dataTable");n.classList.add("loading"),this.dataFetchStatus="init",this.isDatewise?this.service.DatewiseTotalViolationsDetails(this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss")).subscribe(i=>{i.success?(n.classList.remove("loading"),this.allViolationsDetails=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success",this.service.notification(i.message))},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.service.notification("Error while fetching the data"),this.modalService.dismissAll()}):this.service.TotalViolationsDetails().subscribe(i=>{i.success?(n.classList.remove("loading"),this.allViolationsDetails=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success",this.service.notification(i.message))},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.service.notification("Error while fetching the data"),this.modalService.dismissAll()})}RAViolationsModal(e){this.modalService.open(e,{size:"xl",scrollable:!0});var n=document.getElementById("dataTableRA");n.classList.add("loading"),this.dataFetchStatus="init",this.isDatewise?this.service.DatewiseRAViolationsDetails(this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss")).subscribe(i=>{i.success?(n.classList.remove("loading"),this.RAViolations=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success",this.service.notification(i.message))},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.service.notification("Error while fetching the data"),this.modalService.dismissAll()}):this.service.RAViolationsDetails().subscribe(i=>{i.success?(n.classList.remove("loading"),this.RAViolations=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success",this.service.notification(i.message))},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.service.notification("Error while fetching the data"),this.modalService.dismissAll()})}PPEViolationsModal(e){this.modalService.open(e,{size:"xl",scrollable:!0});var n=document.getElementById("dataTablePPE");n.classList.add("loading"),this.dataFetchStatus="init",this.isDatewise?this.service.DatewisePPEViolationsDetails(this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss")).subscribe(i=>{i.success?(n.classList.remove("loading"),this.PPEViolations=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success",this.service.notification(i.message))},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.service.notification("Error while fetching the data"),this.modalService.dismissAll()}):this.service.PPEViolationsDetails().subscribe(i=>{i.success?(n.classList.remove("loading"),this.PPEViolations=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success",this.service.notification(i.message))},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.service.notification("Error while fetching the data"),this.modalService.dismissAll()})}CCViolationsModal(e){this.modalService.open(e,{size:"xl",scrollable:!0});var n=document.getElementById("dataTableCC");n.classList.add("loading"),this.dataFetchStatus="init",this.isDatewise?this.service.DatewiseCCViolationsDetails(this.selectedMoments.startDate.format("YYYY-MM-DD HH:mm:ss"),this.selectedMoments.endDate.format("YYYY-MM-DD HH:mm:ss")).subscribe(i=>{i.success?(n.classList.remove("loading"),this.CCViolations=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success",this.service.notification(i.message))},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.service.notification("Error while fetching the data","Retry"),this.modalService.dismissAll()}):this.service.CCViolationsDetails().subscribe(i=>{i.success?(n.classList.remove("loading"),this.CCViolations=i.message):(n.classList.remove("loading"),this.dataFetchStatus="success",this.service.notification(i.message))},i=>{n.classList.remove("loading"),this.dataFetchStatus="Error",this.service.notification("Error while fetching the data","Retry"),this.modalService.dismissAll()})}OpenCameraImage(e){var n=[];n.push({src:this.IP+"/get_roi_image/"+e,thumb:this.IP+"/get_roi_image/"+e,caption:e}),this._lightbox.open(n,0)}ngOnDestroy(){this.modalService.dismissAll(),clearInterval(this.camerasStatusAndViolationsInterval),clearInterval(this.camerasLicenseDetailsInterval)}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(E),t.\u0275\u0275directiveInject(S.FF),t.\u0275\u0275directiveInject(p.F0),t.\u0275\u0275directiveInject(v.ey),t.\u0275\u0275directiveInject(v.xm))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-dashboard"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(P,7),t.\u0275\u0275viewQuery(w,7),t.\u0275\u0275viewQuery(u.SP,7)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.reportRange=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.datePicker=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.pickerDirective=i.first)}},decls:101,vars:23,consts:[[1,"container-fluid","dashboard-content"],[1,"col-xl-12","col-xs-12","col-sm-12","col-md-12","col-lg-12","mb-4"],[1,"page-header"],["class","float-end justify-centent-center",4,"ngIf"],["id","cameraStatus",1,"row","mb-5"],[1,"sub-header","ms-2"],[1,"col-xl-3","col-xs-12","col-sm-12","col-md-12","col-lg-6","mb-3"],[1,"card","card-body"],[1,"statusGrid"],[1,""],[3,"click"],[1,"font-primary"],["src","assets/images/icons/Camera.svg","alt","",1,"iconImage"],["src","assets/images/icons/EnabledCamera.svg","alt","",1,"iconImage"],[1,"",3,"click"],["src","assets/images/icons/DisabledCamera.svg","alt","",1,"iconImage"],["src","assets/images/icons/notworkingCamera.svg","alt","",1,"iconImage"],["id","violationCount",1,"row","mb-5"],[1,"w-100"],[1,"d-flex","justify-content-between","align-items-center"],[1,"float-start","sub-header"],[1,"col-xs-6","col-xl-3","col-md-6","col-sm-6","col-lg-4"],["class","float-end btn default ms-2",4,"ngIf"],[1,"datePickerContainer"],["id","dateInput",1,"float-end","mb-3","col-xl-10","col-xs-12","col-md-12","col-sm-12","col-lg-12"],[1,"input-icons"],["icon","calendar","class","ngx-daterangepicker-action",4,"ngIf"],["ngxDaterangepickerMd","","placeholder","     Click Here to Select Date...",1,"form-control",3,"showCustomRangeLabel","ranges","timePicker","formControl","ngModel","datesUpdated","ngModelChange","click"],["datepicker",""],[1,"col-xl-4","col-xs-12","col-sm-12","col-md-12","col-lg-6","mb-3",3,"ngClass"],["src","assets/images/icons/violation.svg","alt","",1,"iconImage"],["class","col-xl-4 col-xs-12 col-sm-12 col-md-12 col-lg-6 mb-3",3,"ngClass",4,"ngIf"],["class","col-4 col-xs-12 col-sm-12 col-md-4 mb-3",3,"ngClass",4,"ngIf"],[1,"row"],["class","row mb-5",4,"ngIf"],["id","ecCamera"],["enabledCameraDetails",""],["disabledCameraDetails",""],["NWCameraDetails",""],["allViolations",""],["ppeViolation",""],["raViolation",""],["CCViolation",""],["nodata",""],[1,"float-end","justify-centent-center"],[1,"me-4"],[1,"font-primary","me-1",2,"font-size","21px"],[2,"font-size","20px"],[1,"float-end","btn","default","ms-2"],["icon","rotate",3,"click"],["icon","calendar",1,"ngx-daterangepicker-action"],["src","assets/images/icons/RA.svg","alt","",1,"iconImage"],["src","assets/images/icons/ppe.svg","alt","",1,"iconImage"],[1,"col-4","col-xs-12","col-sm-12","col-md-4","mb-3",3,"ngClass"],["src","assets/images/icons/crowd_count_icon.svg","alt","",1,"iconImage"],[1,"row","mb-5"],[1,"col-xl-6","col-sm-12","p-2"],[3,"options","styles"],[1,"modal-header"],[1,"modal-title",2,"color","#178489"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["id","dataTableEC",1,"modal-body"],[1,"col-12","card"],["class","table","style","width:100%;overflow: auto;border-spacing: 0px 20px;",4,"ngIf","ngIfElse"],[1,"table",2,"width","100%","overflow","auto","border-spacing","0px 20px"],[1,"headers",2,"color","#134276"],["scope","col"],[4,"ngFor","ngForOf"],["alt","",1,"image",3,"src","click"],[4,"ngIf"],["id","dataTableDC",1,"modal-body"],["class","table","id","dataTable","style","width:100%;overflow: auto;border-spacing: 0px 20px;",4,"ngIf","ngIfElse"],["id","dataTable",1,"table",2,"width","100%","overflow","auto","border-spacing","0px 20px"],["id","dataTableNW",1,"modal-body"],[1,"image",3,"src","click"],["id","dataTable",1,"modal-body"],[4,"ngIf","ngIfElse"],["id","dataTablePPE",1,"modal-body"],["id","dataTableRA",1,"modal-body"],["id","dataTableCC",1,"modal-body"],["id","data-card",1,"row","card","card-body"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"]],template:function(e,n){if(1&e){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t.\u0275\u0275text(4,"Dashboard"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(5,y,16,3,"div",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",4)(7,"h5",5),t.\u0275\u0275text(8,"Cameras"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",6)(10,"div",7)(11,"div",8)(12,"div")(13,"div",9)(14,"h1",10),t.\u0275\u0275listener("click",function(){return n.ToCameras()}),t.\u0275\u0275text(15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(16,"div",11),t.\u0275\u0275text(17,"Added Cameras"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"div",9),t.\u0275\u0275element(19,"img",12),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(20,"div",6)(21,"div",7)(22,"div",8)(23,"div",10),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const r=t.\u0275\u0275reference(86);return t.\u0275\u0275resetView(n.cameraStatus.enable_data_count?n.OpenECDetailsModal(r):null)}),t.\u0275\u0275elementStart(24,"div",9)(25,"h1"),t.\u0275\u0275text(26),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"div",11),t.\u0275\u0275text(28,"AI Enabled Cameras"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"div",9),t.\u0275\u0275element(30,"img",13),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(31,"div",6)(32,"div",7)(33,"div",8)(34,"div")(35,"div",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const r=t.\u0275\u0275reference(88);return t.\u0275\u0275resetView(n.cameraStatus.disable_data_count?n.OpenDCDetailsModal(r):null)}),t.\u0275\u0275elementStart(36,"h1"),t.\u0275\u0275text(37),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(38,"div",11),t.\u0275\u0275text(39,"AI Disabled Cameras"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(40,"div",9),t.\u0275\u0275element(41,"img",15),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(42,"div",6)(43,"div",7)(44,"div",8)(45,"div")(46,"div",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const r=t.\u0275\u0275reference(90);return t.\u0275\u0275resetView(n.cameraStatus.not_working_cam_count?n.OpenNWCDetailsModal(r):null)}),t.\u0275\u0275elementStart(47,"h1"),t.\u0275\u0275text(48),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(49,"div",11),t.\u0275\u0275text(50,"Not Working Cameras"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(51,"div",9),t.\u0275\u0275element(52,"img",16),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(53,"div",17)(54,"div",18)(55,"div",19)(56,"h5",20),t.\u0275\u0275text(57,"Violations"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(58,"div",21),t.\u0275\u0275template(59,M,2,0,"button",22),t.\u0275\u0275elementStart(60,"div",23)(61,"div",24)(62,"div",25),t.\u0275\u0275template(63,V,1,0,"fa-icon",26),t.\u0275\u0275elementStart(64,"input",27,28),t.\u0275\u0275listener("datesUpdated",function(r){return n.DateUpdated(r)})("ngModelChange",function(r){return n.selectedMoments=r})("click",function(r){return n.OpenDatePicker(r)}),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(66,"div",29)(67,"div",7)(68,"div",8)(69,"div",9)(70,"div",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const r=t.\u0275\u0275reference(92);return t.\u0275\u0275resetView(n.OpenAllViolationsModal(r))}),t.\u0275\u0275elementStart(71,"h1"),t.\u0275\u0275text(72),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(73,"div",11),t.\u0275\u0275text(74,"Total Violations"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(75,"div",9),t.\u0275\u0275element(76,"img",30),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(77,O,11,6,"div",31),t.\u0275\u0275template(78,L,11,6,"div",31),t.\u0275\u0275template(79,T,11,5,"div",32),t.\u0275\u0275template(80,k,11,6,"div",32),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(81,"div",33)(82,"h5",5),t.\u0275\u0275text(83,"Violations Data Analysis"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(84,F,5,6,"div",34),t.\u0275\u0275template(85,j,7,2,"ng-template",35,36,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(87,$,7,2,"ng-template",null,37,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(89,Z,7,2,"ng-template",null,38,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(91,Q,11,3,"ng-template",35,39,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(93,X,11,3,"ng-template",null,40,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(95,et,11,3,"ng-template",null,41,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(97,it,11,3,"ng-template",null,42,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(99,lt,4,3,"ng-template",null,43,t.\u0275\u0275templateRefExtractor)}2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.camerasLicenseDetails),t.\u0275\u0275advance(10),t.\u0275\u0275textInterpolate(n.cameraStatus.total_cam_count),t.\u0275\u0275advance(11),t.\u0275\u0275textInterpolate(n.cameraStatus.enable_data_count),t.\u0275\u0275advance(11),t.\u0275\u0275textInterpolate(n.cameraStatus.disable_data_count),t.\u0275\u0275advance(11),t.\u0275\u0275textInterpolate(n.cameraStatus.not_working_cam_count),t.\u0275\u0275advance(11),t.\u0275\u0275property("ngIf",n.isDatewise),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",!n.calendarIcon),t.\u0275\u0275advance(1),t.\u0275\u0275property("showCustomRangeLabel",!0)("ranges",n.ranges)("timePicker",!0)("formControl",n.dateInputControl)("ngModel",n.selectedMoments),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(19,_,3==n.violationList.length,2==n.violationList.length,1==n.violationList.length||4==n.violationList.length||5==n.violationList.length)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",n.violationsCount.total_count,""),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.violationList.indexOf("RA")>=0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.violationList.indexOf("PPE")>=0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.violationList.indexOf("ONB")>=0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.violationList.indexOf("CRDCNT")>=0),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",n.violationsCount))},dependencies:[m.Fj,m.JJ,m.oH,I.BN,d.NgClass,d.NgForOf,d.NgIf,u.SP,C.x],styles:[".date-picker[_ngcontent-%COMP%]{position:relative;border:2px solid var(--gray-light);background-color:#fff!important;padding:5px;border-radius:10px;display:flex;height:2.5rem;width:auto!important;justify-content:space-between;align-items:center;box-shadow:-5px -5px 9px #ffffff73,5px 5px 8px #5e68794d!important}.date-picker[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none!important}.form-control[_ngcontent-%COMP%]{width:100%!important}input[_ngcontent-%COMP%]{width:100%}.datePickerContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important}.date-picker[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:.6rem!important}.date-picker[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active{box-shadow:none!important;border:none}.datePickerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.statusGrid[_ngcontent-%COMP%]{width:100%;position:relative;display:grid;grid-template-columns:3fr 1fr}.statusGrid[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:hover{border-bottom:2px solid var(primary-color);cursor:pointer}#cameraStatus[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], #violationCount[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-height:150px;min-height:150px}#cameraStatus[_ngcontent-%COMP%]   .card.card-body[_ngcontent-%COMP%], #violationCount[_ngcontent-%COMP%]   .card.card-body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.iconImage[_ngcontent-%COMP%]{width:4em;height:4em;object-fit:cover}#ecCamera[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{left:30em!important}  #ecCamera .modal-content{left:500px!important}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#f8f8f8!important;border-radius:5px!important;color:var(--label-color)!important;box-shadow:none}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:var(--label-color)!important;border-radius:5px!important;border:1px solid var(--label-color)!important;box-shadow:none}#dateRange[_ngcontent-%COMP%]{width:290px}#dateRange[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:inherit}.search-form[_ngcontent-%COMP%]{width:15rem;height:inherit;display:flex;background:#ffff;align-items:center;overflow:hidden;border-radius:.5rem}.search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0 1.2rem;height:100%;width:100%}.search-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-right:1rem;cursor:pointer}.input-icons[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{position:absolute;padding:9px}.input-icons[_ngcontent-%COMP%]{width:100%}.icon[_ngcontent-%COMP%]{padding:30px}.input-field[_ngcontent-%COMP%]{padding:10px}table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative;text-align:center;justify-content:space-between;justify-content:center!important}table.table[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{color:#6269b2 #B9B9B9 #0746f4 #0879f2 #0746f4 #1b74d9 #0746f4 #2962ff #00acdf #128ec1}"]}),a})();var mt=l(7445),dt=l(1301);const _t=[{path:"",component:ct}];let ht=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({providers:[mt.N,d.DatePipe,dt.a],imports:[x.A,p.Bz.forChild(_t),u.n1.forRoot({}),p.Bz]}),a})()}}]);